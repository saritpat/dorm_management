{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar core = require('@react-pdf-viewer/core');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nvar shouldBeCollapsed = function (bookmark) {\n  var count = bookmark.count,\n      items = bookmark.items;\n\n  if (count >= 0) {\n    return false;\n  }\n\n  var numSubItems = items.length;\n\n  if (numSubItems === 0) {\n    return false;\n  }\n\n  var subItems = __spreadArray([], items, true);\n\n  while (subItems.length > 0) {\n    var firstChild = subItems.shift();\n    var children = firstChild.items;\n\n    if (firstChild.count && children && firstChild.count > 0 && children.length > 0) {\n      numSubItems += children.length;\n      subItems.push.apply(subItems, children);\n    }\n  }\n\n  return Math.abs(count) === numSubItems;\n};\n\nvar DownArrowIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z\"\n  }));\n};\n\nvar RightArrowIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z\"\n  }));\n};\n\nvar BookmarkItem = function (_a) {\n  var bookmark = _a.bookmark,\n      depth = _a.depth,\n      doc = _a.doc,\n      index = _a.index,\n      isBookmarkExpanded = _a.isBookmarkExpanded,\n      numberOfSiblings = _a.numberOfSiblings,\n      store = _a.store,\n      onJumpToDest = _a.onJumpToDest;\n  var defaultIsCollapsed = React__namespace.useMemo(function () {\n    return shouldBeCollapsed(bookmark);\n  }, [bookmark]);\n  var defaultExpanded = isBookmarkExpanded ? isBookmarkExpanded({\n    bookmark: bookmark,\n    doc: doc,\n    depth: depth,\n    index: index\n  }) : !defaultIsCollapsed;\n\n  var _b = React__namespace.useState(defaultExpanded),\n      expanded = _b[0],\n      setExpanded = _b[1];\n\n  var hasSubItems = bookmark.items && bookmark.items.length > 0;\n\n  var toggleSubItems = function () {\n    return setExpanded(function (expanded) {\n      return !expanded;\n    });\n  };\n\n  var clickBookmak = function () {\n    if (hasSubItems && bookmark.dest) {\n      onJumpToDest(bookmark.dest);\n    }\n  };\n\n  var clickItem = function () {\n    if (!hasSubItems && bookmark.dest) {\n      onJumpToDest(bookmark.dest);\n    }\n  };\n\n  return React__namespace.createElement(\"li\", {\n    \"aria-expanded\": expanded ? 'true' : 'false',\n    \"aria-label\": bookmark.title,\n    \"aria-level\": depth + 1,\n    \"aria-posinset\": index + 1,\n    \"aria-setsize\": numberOfSiblings,\n    role: \"treeitem\",\n    tabIndex: -1\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-bookmark__item\",\n    style: {\n      paddingLeft: \"\".concat(depth * 1.25, \"rem\")\n    },\n    onClick: clickItem\n  }, hasSubItems ? React__namespace.createElement(\"span\", {\n    className: \"rpv-bookmark__toggle\",\n    onClick: toggleSubItems\n  }, expanded ? React__namespace.createElement(DownArrowIcon, null) : React__namespace.createElement(RightArrowIcon, null)) : React__namespace.createElement(\"span\", {\n    className: \"rpv-bookmark__toggle\"\n  }), bookmark.url ? React__namespace.createElement(\"a\", {\n    className: \"rpv-bookmark__title\",\n    href: bookmark.url,\n    rel: \"noopener noreferrer nofollow\",\n    target: bookmark.newWindow ? '_blank' : ''\n  }, bookmark.title) : React__namespace.createElement(\"div\", {\n    className: \"rpv-bookmark__title\",\n    \"aria-label\": bookmark.title,\n    onClick: clickBookmak\n  }, bookmark.title)), hasSubItems && expanded && React__namespace.createElement(BookmarkList, {\n    bookmarks: bookmark.items,\n    depth: depth + 1,\n    doc: doc,\n    isBookmarkExpanded: isBookmarkExpanded,\n    isRoot: false,\n    store: store,\n    onJumpToDest: onJumpToDest\n  }));\n};\n\nvar BookmarkList = function (_a) {\n  var bookmarks = _a.bookmarks,\n      _b = _a.depth,\n      depth = _b === void 0 ? 0 : _b,\n      doc = _a.doc,\n      isBookmarkExpanded = _a.isBookmarkExpanded,\n      isRoot = _a.isRoot,\n      store = _a.store,\n      onJumpToDest = _a.onJumpToDest;\n  return React__namespace.createElement(\"ul\", {\n    className: \"rpv-bookmark__list\",\n    role: isRoot ? 'tree' : 'group',\n    tabIndex: -1\n  }, bookmarks.map(function (bookmark, index) {\n    return React__namespace.createElement(BookmarkItem, {\n      bookmark: bookmark,\n      depth: depth,\n      doc: doc,\n      index: index,\n      isBookmarkExpanded: isBookmarkExpanded,\n      key: index,\n      numberOfSiblings: bookmarks.length,\n      store: store,\n      onJumpToDest: onJumpToDest\n    });\n  }));\n};\n\nvar Toggle;\n\n(function (Toggle) {\n  Toggle[Toggle[\"Collapse\"] = 0] = \"Collapse\";\n  Toggle[Toggle[\"Expand\"] = 1] = \"Expand\";\n})(Toggle || (Toggle = {}));\n\nvar BookmarkListRoot = function (_a) {\n  var bookmarks = _a.bookmarks,\n      doc = _a.doc,\n      isBookmarkExpanded = _a.isBookmarkExpanded,\n      store = _a.store,\n      onJumpToDest = _a.onJumpToDest;\n  var containerRef = React__namespace.useRef();\n\n  var _b = React__namespace.useState(store.get('linkAnnotations') || {}),\n      links = _b[0],\n      setLinks = _b[1];\n\n  var updateLinkAnnotation = function (bookmark, links) {\n    var dest = bookmark.dest;\n\n    if (!dest || typeof dest !== 'string' || !links[dest]) {\n      return;\n    }\n\n    var annotationContainer = links[dest];\n    annotationContainer.querySelectorAll(\"a[data-annotation-link-dest=\\\"\".concat(dest, \"\\\"]\")).forEach(function (node) {\n      node.setAttribute('aria-label', bookmark.title);\n    });\n\n    if (!bookmark.items || !bookmark.items.length) {\n      return;\n    }\n\n    bookmark.items.forEach(function (item) {\n      return updateLinkAnnotation(item, links);\n    });\n  };\n\n  var handleLinkAnnotationsChanged = function (links) {\n    return setLinks(links);\n  };\n\n  var jumpToDest = function (dest) {\n    core.getDestination(doc, dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          leftOffset = target.leftOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(pageIndex, bottomOffset, leftOffset, scaleTo);\n    });\n  };\n\n  var handleKeyDown = function (e) {\n    var container = containerRef.current;\n\n    if (!container || !(e.target instanceof HTMLElement) || !container.contains(e.target)) {\n      return;\n    }\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        moveToItem(function (bookmarkElements, activeEle) {\n          return bookmarkElements.indexOf(activeEle) + 1;\n        });\n        break;\n\n      case 'ArrowLeft':\n        e.preventDefault();\n        toggle(Toggle.Collapse);\n        break;\n\n      case 'ArrowRight':\n        e.preventDefault();\n        toggle(Toggle.Expand);\n        break;\n\n      case 'ArrowUp':\n        e.preventDefault;\n        moveToItem(function (bookmarkElements, activeEle) {\n          return bookmarkElements.indexOf(activeEle) - 1;\n        });\n        break;\n\n      case 'End':\n        e.preventDefault();\n        moveToItem(function (bookmarkElements, _) {\n          return bookmarkElements.length - 1;\n        });\n        break;\n\n      case ' ':\n      case 'Enter':\n      case 'Space':\n        e.preventDefault();\n        clickBookmark();\n        break;\n\n      case 'Home':\n        e.preventDefault();\n        moveToItem(function (_, __) {\n          return 0;\n        });\n        break;\n    }\n  };\n\n  var clickBookmark = function () {\n    var closestItem = document.activeElement.closest('.rpv-bookmark__item');\n    var titleEle = closestItem.querySelector('.rpv-bookmark__title');\n\n    if (titleEle) {\n      titleEle.click();\n    }\n  };\n\n  var moveToItem = function (getItemIndex) {\n    var container = containerRef.current;\n    var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\n\n    if (bookmarkElements.length === 0) {\n      return;\n    }\n\n    var activeEle = document.activeElement;\n    var targetIndex = Math.min(bookmarkElements.length - 1, Math.max(0, getItemIndex(bookmarkElements, activeEle)));\n    var targetEle = bookmarkElements[targetIndex];\n    activeEle.setAttribute('tabindex', '-1');\n    targetEle.setAttribute('tabindex', '0');\n    targetEle.focus();\n  };\n\n  var toggle = function (toggle) {\n    var container = containerRef.current;\n    var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\n\n    if (bookmarkElements.length === 0) {\n      return;\n    }\n\n    var closestItem = document.activeElement.closest('.rpv-bookmark__item');\n    var expanedAttribute = toggle === Toggle.Collapse ? 'true' : 'false';\n\n    if (closestItem && closestItem.parentElement.getAttribute('aria-expanded') === expanedAttribute) {\n      var toggleEle = closestItem.querySelector('.rpv-bookmark__toggle');\n\n      if (toggleEle) {\n        toggleEle.click();\n      }\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    document.addEventListener('keydown', handleKeyDown);\n    store.subscribe('linkAnnotations', handleLinkAnnotationsChanged);\n    return function () {\n      document.removeEventListener('keydown', handleKeyDown);\n      store.unsubscribe('linkAnnotations', handleLinkAnnotationsChanged);\n    };\n  }, []);\n  React__namespace.useEffect(function () {\n    bookmarks.forEach(function (bookmark) {\n      return updateLinkAnnotation(bookmark, links);\n    });\n  }, [links]);\n  React__namespace.useEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\n\n    if (bookmarkElements.length > 0) {\n      bookmarkElements[0].focus();\n      bookmarkElements[0].setAttribute('tabindex', '0');\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef\n  }, React__namespace.createElement(BookmarkList, {\n    bookmarks: bookmarks,\n    depth: 0,\n    doc: doc,\n    isBookmarkExpanded: isBookmarkExpanded,\n    isRoot: true,\n    store: store,\n    onJumpToDest: jumpToDest\n  }));\n};\n\nvar BookmarkLoader = function (_a) {\n  var doc = _a.doc,\n      isBookmarkExpanded = _a.isBookmarkExpanded,\n      store = _a.store,\n      onJumpToDest = _a.onJumpToDest;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var isRtl = direction === core.TextDirection.RightToLeft;\n\n  var _b = React__namespace.useState({\n    isLoaded: false,\n    items: []\n  }),\n      bookmarks = _b[0],\n      setBookmarks = _b[1];\n\n  React__namespace.useEffect(function () {\n    setBookmarks({\n      isLoaded: false,\n      items: []\n    });\n    doc.getOutline().then(function (outline) {\n      setBookmarks({\n        isLoaded: true,\n        items: outline || []\n      });\n    });\n  }, [doc]);\n  return !bookmarks.isLoaded ? React__namespace.createElement(\"div\", {\n    className: \"rpv-bookmark__loader\"\n  }, React__namespace.createElement(core.Spinner, null)) : bookmarks.items.length === 0 ? React__namespace.createElement(\"div\", {\n    \"data-testid\": \"bookmark__empty\",\n    className: core.classNames({\n      'rpv-bookmark__empty': true,\n      'rpv-bookmark__empty--rtl': isRtl\n    })\n  }, l10n && l10n.bookmark ? l10n.bookmark.noBookmark : 'There is no bookmark') : React__namespace.createElement(\"div\", {\n    \"data-testid\": \"bookmark__container\",\n    className: core.classNames({\n      'rpv-bookmark__container': true,\n      'rpv-bookmark__container--rtl': isRtl\n    })\n  }, React__namespace.createElement(BookmarkListRoot, {\n    bookmarks: bookmarks.items,\n    doc: doc,\n    isBookmarkExpanded: isBookmarkExpanded,\n    store: store,\n    onJumpToDest: onJumpToDest\n  }));\n};\n\nvar BookmarkListWithStore = function (_a) {\n  var isBookmarkExpanded = _a.isBookmarkExpanded,\n      store = _a.store;\n\n  var _b = React__namespace.useState(store.get('doc')),\n      currentDoc = _b[0],\n      setCurrentDoc = _b[1];\n\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n\n  var jump = function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n    var jumpToDestination = store.get('jumpToDestination');\n\n    if (jumpToDestination) {\n      jumpToDestination(pageIndex, bottomOffset, leftOffset, scaleTo);\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return currentDoc ? React__namespace.createElement(BookmarkLoader, {\n    doc: currentDoc,\n    isBookmarkExpanded: isBookmarkExpanded,\n    store: store,\n    onJumpToDest: jump\n  }) : React__namespace.createElement(\"div\", {\n    className: \"rpv-bookmark__loader\"\n  }, React__namespace.createElement(core.Spinner, null));\n};\n\nvar bookmarkPlugin = function () {\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({\n      linkAnnotations: {}\n    });\n  }, []);\n\n  var BookmarksDecorator = function (props) {\n    return React__namespace.createElement(BookmarkListWithStore, {\n      isBookmarkExpanded: props === null || props === void 0 ? void 0 : props.isBookmarkExpanded,\n      store: store\n    });\n  };\n\n  var onAnnotationLayerRender = function (e) {\n    if (!e.annotations.length) {\n      return;\n    }\n\n    var links = e.annotations.filter(function (annotation) {\n      return annotation.subtype === 'Link';\n    });\n\n    if (!links.length) {\n      return;\n    }\n\n    var linkAnnotations = store.get('linkAnnotations') || {};\n    links.forEach(function (annotation) {\n      return linkAnnotations[annotation.dest] = e.container;\n    });\n    store.update('linkAnnotations', linkAnnotations);\n  };\n\n  return {\n    install: function (pluginFunctions) {\n      store.update('jumpToDestination', pluginFunctions.jumpToDestination);\n    },\n    onDocumentLoad: function (props) {\n      store.update('doc', props.doc);\n    },\n    Bookmarks: BookmarksDecorator,\n    onAnnotationLayerRender: onAnnotationLayerRender\n  };\n};\n\nexports.DownArrowIcon = DownArrowIcon;\nexports.RightArrowIcon = RightArrowIcon;\nexports.bookmarkPlugin = bookmarkPlugin;","map":{"version":3,"sources":["C:/Users/Sawid/Desktop/Asset/Project/dorm_management/node_modules/@react-pdf-viewer/bookmark/lib/cjs/bookmark.js"],"names":["Object","defineProperty","exports","value","React","require","core","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","__spreadArray","to","from","pack","arguments","length","i","l","ar","Array","prototype","slice","call","concat","shouldBeCollapsed","bookmark","count","items","numSubItems","subItems","firstChild","shift","children","push","apply","Math","abs","DownArrowIcon","createElement","Icon","size","RightArrowIcon","BookmarkItem","_a","depth","doc","index","isBookmarkExpanded","numberOfSiblings","store","onJumpToDest","defaultIsCollapsed","useMemo","defaultExpanded","_b","useState","expanded","setExpanded","hasSubItems","toggleSubItems","clickBookmak","dest","clickItem","title","role","tabIndex","className","style","paddingLeft","onClick","url","href","rel","target","newWindow","BookmarkList","bookmarks","isRoot","map","key","Toggle","BookmarkListRoot","containerRef","useRef","links","setLinks","updateLinkAnnotation","annotationContainer","querySelectorAll","node","setAttribute","item","handleLinkAnnotationsChanged","jumpToDest","getDestination","then","pageIndex","bottomOffset","leftOffset","scaleTo","handleKeyDown","container","current","HTMLElement","contains","preventDefault","moveToItem","bookmarkElements","activeEle","indexOf","toggle","Collapse","Expand","_","clickBookmark","__","closestItem","document","activeElement","closest","titleEle","querySelector","click","getItemIndex","getElementsByClassName","targetIndex","min","max","targetEle","focus","expanedAttribute","parentElement","getAttribute","toggleEle","useEffect","addEventListener","subscribe","removeEventListener","unsubscribe","ref","BookmarkLoader","l10n","useContext","LocalizationContext","direction","ThemeContext","isRtl","TextDirection","RightToLeft","isLoaded","setBookmarks","getOutline","outline","Spinner","classNames","noBookmark","BookmarkListWithStore","currentDoc","setCurrentDoc","handleDocumentChanged","jump","jumpToDestination","bookmarkPlugin","createStore","linkAnnotations","BookmarksDecorator","props","onAnnotationLayerRender","annotations","filter","annotation","subtype","update","install","pluginFunctions","onDocumentLoad","Bookmarks"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nObject.defineProperty(exports, '__esModule', { value: true });\r\n\r\nvar React = require('react');\r\nvar core = require('@react-pdf-viewer/core');\r\n\r\nfunction _interopNamespace(e) {\r\n    if (e && e.__esModule) return e;\r\n    var n = Object.create(null);\r\n    if (e) {\r\n        Object.keys(e).forEach(function (k) {\r\n            if (k !== 'default') {\r\n                var d = Object.getOwnPropertyDescriptor(e, k);\r\n                Object.defineProperty(n, k, d.get ? d : {\r\n                    enumerable: true,\r\n                    get: function () { return e[k]; }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    n[\"default\"] = e;\r\n    return Object.freeze(n);\r\n}\r\n\r\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\r\n\r\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nvar shouldBeCollapsed = function (bookmark) {\r\n    var count = bookmark.count, items = bookmark.items;\r\n    if (count >= 0) {\r\n        return false;\r\n    }\r\n    var numSubItems = items.length;\r\n    if (numSubItems === 0) {\r\n        return false;\r\n    }\r\n    var subItems = __spreadArray([], items, true);\r\n    while (subItems.length > 0) {\r\n        var firstChild = subItems.shift();\r\n        var children = firstChild.items;\r\n        if (firstChild.count && children && firstChild.count > 0 && children.length > 0) {\r\n            numSubItems += children.length;\r\n            subItems.push.apply(subItems, children);\r\n        }\r\n    }\r\n    return Math.abs(count) === numSubItems;\r\n};\r\n\r\nvar DownArrowIcon = function () {\r\n    return (React__namespace.createElement(core.Icon, { size: 16 },\r\n        React__namespace.createElement(\"path\", { d: \"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z\" })));\r\n};\r\n\r\nvar RightArrowIcon = function () { return (React__namespace.createElement(core.Icon, { size: 16 },\r\n    React__namespace.createElement(\"path\", { d: \"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z\" }))); };\r\n\r\nvar BookmarkItem = function (_a) {\r\n    var bookmark = _a.bookmark, depth = _a.depth, doc = _a.doc, index = _a.index, isBookmarkExpanded = _a.isBookmarkExpanded, numberOfSiblings = _a.numberOfSiblings, store = _a.store, onJumpToDest = _a.onJumpToDest;\r\n    var defaultIsCollapsed = React__namespace.useMemo(function () { return shouldBeCollapsed(bookmark); }, [bookmark]);\r\n    var defaultExpanded = isBookmarkExpanded\r\n        ? isBookmarkExpanded({ bookmark: bookmark, doc: doc, depth: depth, index: index })\r\n        : !defaultIsCollapsed;\r\n    var _b = React__namespace.useState(defaultExpanded), expanded = _b[0], setExpanded = _b[1];\r\n    var hasSubItems = bookmark.items && bookmark.items.length > 0;\r\n    var toggleSubItems = function () { return setExpanded(function (expanded) { return !expanded; }); };\r\n    var clickBookmak = function () {\r\n        if (hasSubItems && bookmark.dest) {\r\n            onJumpToDest(bookmark.dest);\r\n        }\r\n    };\r\n    var clickItem = function () {\r\n        if (!hasSubItems && bookmark.dest) {\r\n            onJumpToDest(bookmark.dest);\r\n        }\r\n    };\r\n    return (React__namespace.createElement(\"li\", { \"aria-expanded\": expanded ? 'true' : 'false', \"aria-label\": bookmark.title, \"aria-level\": depth + 1, \"aria-posinset\": index + 1, \"aria-setsize\": numberOfSiblings, role: \"treeitem\", tabIndex: -1 },\r\n        React__namespace.createElement(\"div\", { className: \"rpv-bookmark__item\", style: {\r\n                paddingLeft: \"\".concat(depth * 1.25, \"rem\"),\r\n            }, onClick: clickItem },\r\n            hasSubItems ? (React__namespace.createElement(\"span\", { className: \"rpv-bookmark__toggle\", onClick: toggleSubItems }, expanded ? React__namespace.createElement(DownArrowIcon, null) : React__namespace.createElement(RightArrowIcon, null))) : (React__namespace.createElement(\"span\", { className: \"rpv-bookmark__toggle\" })),\r\n            bookmark.url ? (React__namespace.createElement(\"a\", { className: \"rpv-bookmark__title\", href: bookmark.url, rel: \"noopener noreferrer nofollow\", target: bookmark.newWindow ? '_blank' : '' }, bookmark.title)) : (React__namespace.createElement(\"div\", { className: \"rpv-bookmark__title\", \"aria-label\": bookmark.title, onClick: clickBookmak }, bookmark.title))),\r\n        hasSubItems && expanded && (React__namespace.createElement(BookmarkList, { bookmarks: bookmark.items, depth: depth + 1, doc: doc, isBookmarkExpanded: isBookmarkExpanded, isRoot: false, store: store, onJumpToDest: onJumpToDest }))));\r\n};\r\n\r\nvar BookmarkList = function (_a) {\r\n    var bookmarks = _a.bookmarks, _b = _a.depth, depth = _b === void 0 ? 0 : _b, doc = _a.doc, isBookmarkExpanded = _a.isBookmarkExpanded, isRoot = _a.isRoot, store = _a.store, onJumpToDest = _a.onJumpToDest;\r\n    return (React__namespace.createElement(\"ul\", { className: \"rpv-bookmark__list\", role: isRoot ? 'tree' : 'group', tabIndex: -1 }, bookmarks.map(function (bookmark, index) { return (React__namespace.createElement(BookmarkItem, { bookmark: bookmark, depth: depth, doc: doc, index: index, isBookmarkExpanded: isBookmarkExpanded, key: index, numberOfSiblings: bookmarks.length, store: store, onJumpToDest: onJumpToDest })); })));\r\n};\r\n\r\nvar Toggle;\r\n(function (Toggle) {\r\n    Toggle[Toggle[\"Collapse\"] = 0] = \"Collapse\";\r\n    Toggle[Toggle[\"Expand\"] = 1] = \"Expand\";\r\n})(Toggle || (Toggle = {}));\r\nvar BookmarkListRoot = function (_a) {\r\n    var bookmarks = _a.bookmarks, doc = _a.doc, isBookmarkExpanded = _a.isBookmarkExpanded, store = _a.store, onJumpToDest = _a.onJumpToDest;\r\n    var containerRef = React__namespace.useRef();\r\n    var _b = React__namespace.useState(store.get('linkAnnotations') || {}), links = _b[0], setLinks = _b[1];\r\n    var updateLinkAnnotation = function (bookmark, links) {\r\n        var dest = bookmark.dest;\r\n        if (!dest || typeof dest !== 'string' || !links[dest]) {\r\n            return;\r\n        }\r\n        var annotationContainer = links[dest];\r\n        annotationContainer.querySelectorAll(\"a[data-annotation-link-dest=\\\"\".concat(dest, \"\\\"]\")).forEach(function (node) {\r\n            node.setAttribute('aria-label', bookmark.title);\r\n        });\r\n        if (!bookmark.items || !bookmark.items.length) {\r\n            return;\r\n        }\r\n        bookmark.items.forEach(function (item) { return updateLinkAnnotation(item, links); });\r\n    };\r\n    var handleLinkAnnotationsChanged = function (links) { return setLinks(links); };\r\n    var jumpToDest = function (dest) {\r\n        core.getDestination(doc, dest).then(function (target) {\r\n            var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, leftOffset = target.leftOffset, scaleTo = target.scaleTo;\r\n            onJumpToDest(pageIndex, bottomOffset, leftOffset, scaleTo);\r\n        });\r\n    };\r\n    var handleKeyDown = function (e) {\r\n        var container = containerRef.current;\r\n        if (!container || !(e.target instanceof HTMLElement) || !container.contains(e.target)) {\r\n            return;\r\n        }\r\n        switch (e.key) {\r\n            case 'ArrowDown':\r\n                e.preventDefault();\r\n                moveToItem(function (bookmarkElements, activeEle) { return bookmarkElements.indexOf(activeEle) + 1; });\r\n                break;\r\n            case 'ArrowLeft':\r\n                e.preventDefault();\r\n                toggle(Toggle.Collapse);\r\n                break;\r\n            case 'ArrowRight':\r\n                e.preventDefault();\r\n                toggle(Toggle.Expand);\r\n                break;\r\n            case 'ArrowUp':\r\n                e.preventDefault;\r\n                moveToItem(function (bookmarkElements, activeEle) { return bookmarkElements.indexOf(activeEle) - 1; });\r\n                break;\r\n            case 'End':\r\n                e.preventDefault();\r\n                moveToItem(function (bookmarkElements, _) { return bookmarkElements.length - 1; });\r\n                break;\r\n            case ' ':\r\n            case 'Enter':\r\n            case 'Space':\r\n                e.preventDefault();\r\n                clickBookmark();\r\n                break;\r\n            case 'Home':\r\n                e.preventDefault();\r\n                moveToItem(function (_, __) { return 0; });\r\n                break;\r\n        }\r\n    };\r\n    var clickBookmark = function () {\r\n        var closestItem = document.activeElement.closest('.rpv-bookmark__item');\r\n        var titleEle = closestItem.querySelector('.rpv-bookmark__title');\r\n        if (titleEle) {\r\n            titleEle.click();\r\n        }\r\n    };\r\n    var moveToItem = function (getItemIndex) {\r\n        var container = containerRef.current;\r\n        var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\r\n        if (bookmarkElements.length === 0) {\r\n            return;\r\n        }\r\n        var activeEle = document.activeElement;\r\n        var targetIndex = Math.min(bookmarkElements.length - 1, Math.max(0, getItemIndex(bookmarkElements, activeEle)));\r\n        var targetEle = bookmarkElements[targetIndex];\r\n        activeEle.setAttribute('tabindex', '-1');\r\n        targetEle.setAttribute('tabindex', '0');\r\n        targetEle.focus();\r\n    };\r\n    var toggle = function (toggle) {\r\n        var container = containerRef.current;\r\n        var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\r\n        if (bookmarkElements.length === 0) {\r\n            return;\r\n        }\r\n        var closestItem = document.activeElement.closest('.rpv-bookmark__item');\r\n        var expanedAttribute = toggle === Toggle.Collapse ? 'true' : 'false';\r\n        if (closestItem && closestItem.parentElement.getAttribute('aria-expanded') === expanedAttribute) {\r\n            var toggleEle = closestItem.querySelector('.rpv-bookmark__toggle');\r\n            if (toggleEle) {\r\n                toggleEle.click();\r\n            }\r\n        }\r\n    };\r\n    React__namespace.useEffect(function () {\r\n        document.addEventListener('keydown', handleKeyDown);\r\n        store.subscribe('linkAnnotations', handleLinkAnnotationsChanged);\r\n        return function () {\r\n            document.removeEventListener('keydown', handleKeyDown);\r\n            store.unsubscribe('linkAnnotations', handleLinkAnnotationsChanged);\r\n        };\r\n    }, []);\r\n    React__namespace.useEffect(function () {\r\n        bookmarks.forEach(function (bookmark) { return updateLinkAnnotation(bookmark, links); });\r\n    }, [links]);\r\n    React__namespace.useEffect(function () {\r\n        var container = containerRef.current;\r\n        if (!container) {\r\n            return;\r\n        }\r\n        var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\r\n        if (bookmarkElements.length > 0) {\r\n            bookmarkElements[0].focus();\r\n            bookmarkElements[0].setAttribute('tabindex', '0');\r\n        }\r\n    }, []);\r\n    return (React__namespace.createElement(\"div\", { ref: containerRef },\r\n        React__namespace.createElement(BookmarkList, { bookmarks: bookmarks, depth: 0, doc: doc, isBookmarkExpanded: isBookmarkExpanded, isRoot: true, store: store, onJumpToDest: jumpToDest })));\r\n};\r\n\r\nvar BookmarkLoader = function (_a) {\r\n    var doc = _a.doc, isBookmarkExpanded = _a.isBookmarkExpanded, store = _a.store, onJumpToDest = _a.onJumpToDest;\r\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\r\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\r\n    var isRtl = direction === core.TextDirection.RightToLeft;\r\n    var _b = React__namespace.useState({\r\n        isLoaded: false,\r\n        items: [],\r\n    }), bookmarks = _b[0], setBookmarks = _b[1];\r\n    React__namespace.useEffect(function () {\r\n        setBookmarks({\r\n            isLoaded: false,\r\n            items: [],\r\n        });\r\n        doc.getOutline().then(function (outline) {\r\n            setBookmarks({\r\n                isLoaded: true,\r\n                items: outline || [],\r\n            });\r\n        });\r\n    }, [doc]);\r\n    return !bookmarks.isLoaded ? (React__namespace.createElement(\"div\", { className: \"rpv-bookmark__loader\" },\r\n        React__namespace.createElement(core.Spinner, null))) : bookmarks.items.length === 0 ? (React__namespace.createElement(\"div\", { \"data-testid\": \"bookmark__empty\", className: core.classNames({\r\n            'rpv-bookmark__empty': true,\r\n            'rpv-bookmark__empty--rtl': isRtl,\r\n        }) }, l10n && l10n.bookmark ? l10n.bookmark.noBookmark : 'There is no bookmark')) : (React__namespace.createElement(\"div\", { \"data-testid\": \"bookmark__container\", className: core.classNames({\r\n            'rpv-bookmark__container': true,\r\n            'rpv-bookmark__container--rtl': isRtl,\r\n        }) },\r\n        React__namespace.createElement(BookmarkListRoot, { bookmarks: bookmarks.items, doc: doc, isBookmarkExpanded: isBookmarkExpanded, store: store, onJumpToDest: onJumpToDest })));\r\n};\r\n\r\nvar BookmarkListWithStore = function (_a) {\r\n    var isBookmarkExpanded = _a.isBookmarkExpanded, store = _a.store;\r\n    var _b = React__namespace.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\r\n    var handleDocumentChanged = function (doc) {\r\n        setCurrentDoc(doc);\r\n    };\r\n    var jump = function (pageIndex, bottomOffset, leftOffset, scaleTo) {\r\n        var jumpToDestination = store.get('jumpToDestination');\r\n        if (jumpToDestination) {\r\n            jumpToDestination(pageIndex, bottomOffset, leftOffset, scaleTo);\r\n        }\r\n    };\r\n    React__namespace.useEffect(function () {\r\n        store.subscribe('doc', handleDocumentChanged);\r\n        return function () {\r\n            store.unsubscribe('doc', handleDocumentChanged);\r\n        };\r\n    }, []);\r\n    return currentDoc ? (React__namespace.createElement(BookmarkLoader, { doc: currentDoc, isBookmarkExpanded: isBookmarkExpanded, store: store, onJumpToDest: jump })) : (React__namespace.createElement(\"div\", { className: \"rpv-bookmark__loader\" },\r\n        React__namespace.createElement(core.Spinner, null)));\r\n};\r\n\r\nvar bookmarkPlugin = function () {\r\n    var store = React__namespace.useMemo(function () {\r\n        return core.createStore({\r\n            linkAnnotations: {},\r\n        });\r\n    }, []);\r\n    var BookmarksDecorator = function (props) { return (React__namespace.createElement(BookmarkListWithStore, { isBookmarkExpanded: props === null || props === void 0 ? void 0 : props.isBookmarkExpanded, store: store })); };\r\n    var onAnnotationLayerRender = function (e) {\r\n        if (!e.annotations.length) {\r\n            return;\r\n        }\r\n        var links = e.annotations.filter(function (annotation) { return annotation.subtype === 'Link'; });\r\n        if (!links.length) {\r\n            return;\r\n        }\r\n        var linkAnnotations = store.get('linkAnnotations') || {};\r\n        links.forEach(function (annotation) { return (linkAnnotations[annotation.dest] = e.container); });\r\n        store.update('linkAnnotations', linkAnnotations);\r\n    };\r\n    return {\r\n        install: function (pluginFunctions) {\r\n            store.update('jumpToDestination', pluginFunctions.jumpToDestination);\r\n        },\r\n        onDocumentLoad: function (props) {\r\n            store.update('doc', props.doc);\r\n        },\r\n        Bookmarks: BookmarksDecorator,\r\n        onAnnotationLayerRender: onAnnotationLayerRender,\r\n    };\r\n};\r\n\r\nexports.DownArrowIcon = DownArrowIcon;\r\nexports.RightArrowIcon = RightArrowIcon;\r\nexports.bookmarkPlugin = bookmarkPlugin;\r\n"]},"metadata":{},"sourceType":"script"}