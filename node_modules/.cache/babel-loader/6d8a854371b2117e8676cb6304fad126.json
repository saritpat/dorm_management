{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sawid\\\\Desktop\\\\Asset\\\\Project\\\\dorm_management\\\\src\\\\components\\\\billManage.component.js\",\n    _s = $RefreshSig$();\n\nimport { DatePicker, Space } from \"antd\";\nimport ReactPaginate from \"react-paginate\";\nimport { useSelector } from \"react-redux\";\nimport { useState, useEffect } from 'react';\nimport { listBills } from \"./function.components/billmana\";\nimport moment from \"moment\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Billmanage() {\n  _s();\n\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [data, setData] = useState([]);\n  const [posts, setPosts] = useState([]);\n  const [postDate, setPostDate] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [postsPerPage, setPostPerPage] = useState(9);\n  const [searchText, setSearchText] = useState('');\n  const navigate = useNavigate();\n\n  const loadData = authtoken => {\n    listBills(authtoken).then(res => {\n      setData(res.data);\n      setPosts(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    loadData(user.token);\n    setLoading(false);\n  }, []);\n  const fillteredPosts = posts.filter(post => {\n    return post.roomId.includes(searchText);\n  });\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 16\n    }, this);\n  }\n\n  const handlePageClick = data => {\n    console.log(data.selected);\n    setCurrentPage(data.selected + 1);\n  };\n\n  var notPayed = data.filter(post => post.isBillNotified == false);\n  var payed = data.filter(post => post.isBillNotified == true);\n\n  function showAll() {\n    setPosts(data);\n  }\n\n  const separator = numb => {\n    var str = numb.toString().split(\".\");\n    str[0] = str[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    return str.join(\".\");\n  };\n\n  const UnitPrice = (thisMonth, lastMonth) => {\n    if (lastMonth > thisMonth) {\n      return thisMonth - lastMonth + 9999;\n    } else {\n      return thisMonth - lastMonth;\n    }\n  };\n\n  function showNotPayed() {\n    setPosts(notPayed);\n  }\n\n  function showPayed() {\n    setPosts(payed);\n  }\n\n  async function fillterDate(date) {\n    await setPostDate(date);\n    console.log(date + ' and ' + postDate);\n    let fillteredPostDate = data.filter(post => {\n      return moment(post.createdAt).format(\"MMM YY\") === date;\n    });\n    setPosts(fillteredPostDate);\n  }\n\n  const indexOfLastPost = currentPage * postsPerPage;\n  const indexOfFirstPost = indexOfLastPost - postsPerPage;\n  const currentPosts = fillteredPosts.slice(indexOfFirstPost, indexOfLastPost);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-wrapper font-sarabun\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-fluid\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-12\",\n              children: /*#__PURE__*/_jsxDEV(\"ol\", {\n                className: \"breadcrumb float-sm-right\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"#\",\n                    children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1A\\u0E34\\u0E25\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item active\",\n                  children: \"\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2B\\u0E2D\\u0E1E\\u0E31\\u0E01\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card\",\n                style: {\n                  margin: \"auto\",\n                  padding: \"10px 100px 10px 100px\",\n                  width: \"60%\",\n                  textAlign: \"center\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"m-0 text-dark\",\n                  children: [\"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E23\\u0E2D\\u0E1A\\u0E1A\\u0E34\\u0E25 \", postDate]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Space, {\n                  direction: \"vertical\",\n                  style: {\n                    margin: \"20px 0px 20px 0px\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                    picker: \"month\",\n                    onChange: date => fillterDate(moment(date).format(\"MMM YY\"))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n          class: \"navbar navbar-light bg-light\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            class: \"form-inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              class: \"form-control mr-sm-2\",\n              type: \"search\",\n              placeholder: \"Search\",\n              \"aria-label\": \"Search\",\n              value: searchText,\n              onChange: event => {\n                setSearchText(event.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              class: \"btn btn-outline-success my-2 my-sm-0 m-2\",\n              onClick: showAll,\n              children: \"\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              class: \"btn btn-outline-danger m-2\",\n              onClick: showNotPayed,\n              children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E08\\u0E48\\u0E32\\u0E22\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              class: \"btn btn-outline-primary m-2\",\n              onClick: showPayed,\n              children: \"\\u0E08\\u0E48\\u0E32\\u0E22\\u0E41\\u0E25\\u0E49\\u0E27\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row m-2\",\n          children: currentPosts.map(post => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-6 col-md-4 v my-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card shadow-sm w-100 \",\n                style: {\n                  minHeight: 175\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-header\",\n                  children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"catd-title text-center h3 mt-2\",\n                    children: [post.isBillNotified === true ? \"🟢\" : \"🔴\", \" \\u0E2B\\u0E49\\u0E2D\\u0E07\\u0E1E\\u0E31\\u0E01 \", post.roomId]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-body\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    className: \"catd-title text-center h2\",\n                    children: moment(post.createdAt).format('MMM YY')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"catd-subtitle mb-2 text-muted text-center\",\n                    children: [separator(post.rentalFee + 7 * UnitPrice(post.electricUnitThisMonth, post.electricUnitLastMonth) + 18 * UnitPrice(post.waterUnitThisMonth, post.waterUnitLastMonth) + post.rentalNet), \" \\u0E1A\\u0E32\\u0E17\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex justify-content-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      class: \"btn btn-success text-center m-4\",\n                      onClick: () => navigate('/Billgenerate/' + post._id),\n                      children: [\"\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E02\\u0E2D\\u0E07\\u0E1A\\u0E34\\u0E25 \", post.roomName]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 163,\n                      columnNumber: 21\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 22\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ReactPaginate, {\n          onPageChange: handlePageClick,\n          pageCount: fillteredPosts.length / postsPerPage,\n          previousLabel: '<<',\n          nextLabel: '>>',\n          containerClassName: 'pagination justify-content-center',\n          pageClassName: 'page-item',\n          pageLinkClassName: 'page-link',\n          previousClassName: 'page-item',\n          previousLinkClassName: 'page-link',\n          nextClassName: 'page-item',\n          nextLinkClassName: 'page-link',\n          breakClassName: 'paeg-item',\n          breakLinkClassName: 'page-link',\n          activeClassName: 'active'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 21\n  }, this);\n}\n\n_s(Billmanage, \"UW1UoJDGNvRjZww2LzZwOmQ3F4E=\", false, function () {\n  return [useSelector, useNavigate];\n});\n\n_c = Billmanage;\nexport default Billmanage;\n\nvar _c;\n\n$RefreshReg$(_c, \"Billmanage\");","map":{"version":3,"sources":["C:/Users/Sawid/Desktop/Asset/Project/dorm_management/src/components/billManage.component.js"],"names":["DatePicker","Space","ReactPaginate","useSelector","useState","useEffect","listBills","moment","useNavigate","Billmanage","user","state","data","setData","posts","setPosts","postDate","setPostDate","loading","setLoading","currentPage","setCurrentPage","postsPerPage","setPostPerPage","searchText","setSearchText","navigate","loadData","authtoken","then","res","catch","err","console","log","token","fillteredPosts","filter","post","roomId","includes","handlePageClick","selected","notPayed","isBillNotified","payed","showAll","separator","numb","str","toString","split","replace","join","UnitPrice","thisMonth","lastMonth","showNotPayed","showPayed","fillterDate","date","fillteredPostDate","createdAt","format","indexOfLastPost","indexOfFirstPost","currentPosts","slice","margin","padding","width","textAlign","event","target","value","map","minHeight","rentalFee","electricUnitThisMonth","electricUnitLastMonth","waterUnitThisMonth","waterUnitLastMonth","rentalNet","_id","roomName","length"],"mappings":";;;AAAA,SAASA,UAAT,EAAoBC,KAApB,QAAiC,MAAjC;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAAQC,QAAR,EAAkBC,SAAlB,QAAkC,OAAlC;AACA,SAASC,SAAT,QAA0B,gCAA1B;AAEA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,SAASC,WAAT,QAA4B,kBAA5B;;;AAGA,SAASC,UAAT,GAAqB;AAAA;;AACjB,QAAM;AAAEC,IAAAA;AAAF,MAAWP,WAAW,CAAEQ,KAAD,KAAY,EAAC,GAAGA;AAAJ,GAAZ,CAAD,CAA5B;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACU,KAAD,EAAOC,QAAP,IAAmBX,QAAQ,CAAC,EAAD,CAAjC;AACA,QAAM,CAACY,QAAD,EAAUC,WAAV,IAAyBb,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACgB,WAAD,EAAcC,cAAd,IAAgCjB,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAACkB,YAAD,EAAeC,cAAf,IAAiCnB,QAAQ,CAAC,CAAD,CAA/C;AACA,QAAM,CAACoB,UAAD,EAAYC,aAAZ,IAA2BrB,QAAQ,CAAC,EAAD,CAAzC;AAEF,QAAMsB,QAAQ,GAAGlB,WAAW,EAA5B;;AAIE,QAAMmB,QAAQ,GAAIC,SAAD,IAAe;AACxBtB,IAAAA,SAAS,CAACsB,SAAD,CAAT,CACCC,IADD,CACMC,GAAG,IAAI;AACLjB,MAAAA,OAAO,CAACiB,GAAG,CAAClB,IAAL,CAAP;AACAG,MAAAA,QAAQ,CAACe,GAAG,CAAClB,IAAL,CAAR;AACH,KAJL,EAKKmB,KALL,CAKWC,GAAG,IAAI;AACNC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAPT;AAQK,GATb;;AAUA3B,EAAAA,SAAS,CAAC,MAAK;AACXc,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAQ,IAAAA,QAAQ,CAACjB,IAAI,CAACyB,KAAN,CAAR;AACAhB,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GAJQ,EAIN,EAJM,CAAT;AAKA,QAAMiB,cAAc,GAAGtB,KAAK,CAACuB,MAAN,CAAcC,IAAD,IAAQ;AACxC,WAAOA,IAAI,CAACC,MAAL,CAAYC,QAAZ,CAAqBhB,UAArB,CAAP;AACD,GAFoB,CAAvB;;AAKA,MAAGN,OAAH,EAAW;AACP,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AACD,QAAMuB,eAAe,GAAI7B,IAAD,IAAQ;AAC5BqB,IAAAA,OAAO,CAACC,GAAR,CAAYtB,IAAI,CAAC8B,QAAjB;AACArB,IAAAA,cAAc,CAACT,IAAI,CAAC8B,QAAL,GAAgB,CAAjB,CAAd;AACH,GAHD;;AAIA,MAAIC,QAAQ,GAAG/B,IAAI,CAACyB,MAAL,CAAYC,IAAI,IAAIA,IAAI,CAACM,cAAL,IAAuB,KAA3C,CAAf;AACA,MAAIC,KAAK,GAAGjC,IAAI,CAACyB,MAAL,CAAYC,IAAI,IAAIA,IAAI,CAACM,cAAL,IAAuB,IAA3C,CAAZ;;AAGA,WAASE,OAAT,GAAmB;AACjB/B,IAAAA,QAAQ,CAACH,IAAD,CAAR;AACD;;AAED,QAAMmC,SAAS,GAAIC,IAAD,IAAU;AAC1B,QAAIC,GAAG,GAAGD,IAAI,CAACE,QAAL,GAAgBC,KAAhB,CAAsB,GAAtB,CAAV;AACAF,IAAAA,GAAG,CAAC,CAAD,CAAH,GAASA,GAAG,CAAC,CAAD,CAAH,CAAOG,OAAP,CAAe,uBAAf,EAAwC,GAAxC,CAAT;AACA,WAAOH,GAAG,CAACI,IAAJ,CAAS,GAAT,CAAP;AACD,GAJD;;AAMA,QAAMC,SAAS,GAAG,CAACC,SAAD,EAAYC,SAAZ,KAA0B;AAC1C,QAAIA,SAAS,GAAGD,SAAhB,EAA2B;AACzB,aAAOA,SAAS,GAAGC,SAAZ,GAAwB,IAA/B;AACD,KAFD,MAEO;AACL,aAAOD,SAAS,GAAGC,SAAnB;AACD;AACF,GAND;;AAQA,WAASC,YAAT,GAAwB;AACtB1C,IAAAA,QAAQ,CAAC4B,QAAD,CAAR;AACD;;AACD,WAASe,SAAT,GAAoB;AAClB3C,IAAAA,QAAQ,CAAC8B,KAAD,CAAR;AACD;;AACD,iBAAec,WAAf,CAA2BC,IAA3B,EAAgC;AAC9B,UAAM3C,WAAW,CAAC2C,IAAD,CAAjB;AACA3B,IAAAA,OAAO,CAACC,GAAR,CAAY0B,IAAI,GAAC,OAAL,GAAa5C,QAAzB;AACA,QAAI6C,iBAAiB,GAAGjD,IAAI,CAACyB,MAAL,CAAaC,IAAD,IAAQ;AAC1C,aAAO/B,MAAM,CAAC+B,IAAI,CAACwB,SAAN,CAAN,CAAuBC,MAAvB,CAA8B,QAA9B,MAA4CH,IAAnD;AACD,KAFuB,CAAxB;AAGA7C,IAAAA,QAAQ,CAAC8C,iBAAD,CAAR;AACD;;AACD,QAAMG,eAAe,GAAG5C,WAAW,GAAGE,YAAtC;AACA,QAAM2C,gBAAgB,GAAGD,eAAe,GAAG1C,YAA3C;AACA,QAAM4C,YAAY,GAAG9B,cAAc,CAAC+B,KAAf,CAAqBF,gBAArB,EAAsCD,eAAtC,CAArB;AAEA,sBACgB;AAAA,2BACV;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA,8BAEE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCAEE;AAAK,cAAA,SAAS,EAAC,WAAf;AAAA,qCACE;AAAI,gBAAA,SAAS,EAAC,2BAAd;AAAA,wCACE;AAAI,kBAAA,SAAS,EAAC,iBAAd;AAAA,yCACE;AAAG,oBAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eAIE;AAAI,kBAAA,SAAS,EAAC,wBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAFF,eAUE;AAAK,cAAA,SAAS,EAAC,WAAf;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,MAAf;AAAsB,gBAAA,KAAK,EAAE;AAACI,kBAAAA,MAAM,EAAE,MAAT;AAAgBC,kBAAAA,OAAO,EAAE,uBAAzB;AAAkDC,kBAAAA,KAAK,EAAE,KAAzD;AAAgEC,kBAAAA,SAAS,EAAE;AAA3E,iBAA7B;AAAA,wCACI;AAAI,kBAAA,SAAS,EAAC,eAAd;AAAA,oGAA2CvD,QAA3C;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI,QAAC,KAAD;AAAO,kBAAA,SAAS,EAAC,UAAjB;AAA4B,kBAAA,KAAK,EAAE;AAACoD,oBAAAA,MAAM,EAAE;AAAT,mBAAnC;AAAA,yCACI,QAAC,UAAD;AAAY,oBAAA,MAAM,EAAC,OAAnB;AAA2B,oBAAA,QAAQ,EAAGR,IAAD,IAAQD,WAAW,CAACpD,MAAM,CAACqD,IAAD,CAAN,CAAaG,MAAb,CAAoB,QAApB,CAAD;AAAxD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF,eA8BE;AAAS,QAAA,SAAS,EAAC,SAAnB;AAAA,gCAEE;AAAK,UAAA,KAAK,EAAC,8BAAX;AAAA,iCACE;AAAM,YAAA,KAAK,EAAC,aAAZ;AAAA,oCACI;AAAO,cAAA,KAAK,EAAC,sBAAb;AAAoC,cAAA,IAAI,EAAC,QAAzC;AAAkD,cAAA,WAAW,EAAC,QAA9D;AAAuE,4BAAW,QAAlF;AAA2F,cAAA,KAAK,EAAEvC,UAAlG;AACJ,cAAA,QAAQ,EAAGgD,KAAD,IAAS;AAAC/C,gBAAAA,aAAa,CAAC+C,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAb;AAAkC;AADlD;AAAA;AAAA;AAAA;AAAA,oBADJ,eAGI;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAsB,cAAA,KAAK,EAAC,0CAA5B;AAAuE,cAAA,OAAO,EAAE5B,OAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,eAII;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAsB,cAAA,KAAK,EAAC,4BAA5B;AAAyD,cAAA,OAAO,EAAEW,YAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ,eAKI;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAsB,cAAA,KAAK,EAAC,6BAA5B;AAA0D,cAAA,OAAO,EAAEC,SAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAFF,eAYA;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA,oBAEAQ,YAAY,CAACS,GAAb,CAAiBrC,IAAI,IAAG;AACtB,gCAAO;AAAK,cAAA,SAAS,EAAC,0BAAf;AAAA,qCACL;AAAK,gBAAA,SAAS,EAAC,uBAAf;AAAuC,gBAAA,KAAK,EAAE;AAAEsC,kBAAAA,SAAS,EAAC;AAAZ,iBAA9C;AAAA,wCACA;AAAK,kBAAA,SAAS,EAAC,aAAf;AAAA,yCACI;AAAI,oBAAA,SAAS,EAAC,gCAAd;AAAA,+BACKtC,IAAI,CAACM,cAAL,KAAwB,IAAxB,GAA+B,IAA/B,GAAsC,IAD3C,kDAC0DN,IAAI,CAACC,MAD/D;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,wBADA,eAMA;AAAK,kBAAA,SAAS,EAAC,WAAf;AAAA,0CACI;AAAI,oBAAA,SAAS,EAAC,2BAAd;AAAA,8BAA2ChC,MAAM,CAAC+B,IAAI,CAACwB,SAAN,CAAN,CAAuBC,MAAvB,CAA8B,QAA9B;AAA3C;AAAA;AAAA;AAAA;AAAA,0BADJ,eAEI;AAAI,oBAAA,SAAS,EAAC,2CAAd;AAAA,+BAA2DhB,SAAS,CAClET,IAAI,CAACuC,SAAL,GACE,IACEvB,SAAS,CACPhB,IAAI,CAACwC,qBADE,EAEPxC,IAAI,CAACyC,qBAFE,CAFb,GAME,KACEzB,SAAS,CACPhB,IAAI,CAAC0C,kBADE,EAEP1C,IAAI,CAAC2C,kBAFE,CAPb,GAWE3C,IAAI,CAAC4C,SAZ2D,CAApE;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFJ,eAeI;AAAK,oBAAA,SAAS,EAAC,+BAAf;AAAA,2CACA;AAAQ,sBAAA,IAAI,EAAC,QAAb;AAAsB,sBAAA,KAAK,EAAC,iCAA5B;AAA8D,sBAAA,OAAO,EAAE,MAAMxD,QAAQ,CAAC,mBAAmBY,IAAI,CAAC6C,GAAzB,CAArF;AAAA,kJAAwI7C,IAAI,CAAC8C,QAA7I;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,0BAfJ;AAAA;AAAA;AAAA;AAAA;AAAA,wBANA;AAAA;AAAA;AAAA;AAAA;AAAA;AADK;AAAA;AAAA;AAAA;AAAA,oBAAP;AA6BD,WA9BD;AAFA;AAAA;AAAA;AAAA;AAAA,gBAZA,eAgDA,QAAC,aAAD;AACA,UAAA,YAAY,EAAE3C,eADd;AAEA,UAAA,SAAS,EAAEL,cAAc,CAACiD,MAAf,GAAsB/D,YAFjC;AAGA,UAAA,aAAa,EAAE,IAHf;AAIA,UAAA,SAAS,EAAE,IAJX;AAKA,UAAA,kBAAkB,EAAE,mCALpB;AAMA,UAAA,aAAa,EAAE,WANf;AAOA,UAAA,iBAAiB,EAAE,WAPnB;AAQA,UAAA,iBAAiB,EAAE,WARnB;AASA,UAAA,qBAAqB,EAAE,WATvB;AAUA,UAAA,aAAa,EAAE,WAVf;AAWA,UAAA,iBAAiB,EAAE,WAXnB;AAYA,UAAA,cAAc,EAAE,WAZhB;AAaA,UAAA,kBAAkB,EAAE,WAbpB;AAcA,UAAA,eAAe,EAAE;AAdjB;AAAA;AAAA;AAAA;AAAA,gBAhDA;AAAA;AAAA;AAAA;AAAA;AAAA,cA9BF;AAAA;AAAA;AAAA;AAAA;AAAA;AADU;AAAA;AAAA;AAAA;AAAA,UADhB;AAqGH;;GAtLQb,U;UACYN,W,EASFK,W;;;KAVVC,U;AAuLT,eAAeA,UAAf","sourcesContent":["import { DatePicker,Space } from \"antd\";\r\nimport ReactPaginate from \"react-paginate\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {useState, useEffect} from 'react';\r\nimport { listBills } from \"./function.components/billmana\";\r\n\r\nimport moment from \"moment\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nfunction Billmanage(){\r\n    const { user } = useSelector((state) => ({...state}))\r\n    const [data, setData] = useState([]);\r\n    const [posts,setPosts] = useState([]);\r\n    const [postDate,setPostDate] = useState('')\r\n    const [loading, setLoading] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [postsPerPage, setPostPerPage] = useState(9);\r\n    const [searchText,setSearchText]=useState('');\r\n\r\n  const navigate = useNavigate();\r\n\r\n    \r\n    \r\n    const loadData = (authtoken) => {\r\n            listBills(authtoken)\r\n            .then(res => {\r\n                    setData(res.data)\r\n                    setPosts(res.data);\r\n                })\r\n                .catch(err => {\r\n                        console.log(err);\r\n                    })\r\n                };\r\n    useEffect(()=> {\r\n        setLoading(true)\r\n        loadData(user.token)\r\n        setLoading(false)\r\n    }, []);\r\n    const fillteredPosts = posts.filter((post)=>{       \r\n        return post.roomId.includes(searchText);\r\n      })\r\n   \r\n        \r\n    if(loading){\r\n        return <h2>loading...</h2>\r\n    }\r\n    const handlePageClick = (data)=>{\r\n        console.log(data.selected)\r\n        setCurrentPage(data.selected + 1)\r\n    };\r\n    var notPayed = data.filter(post => post.isBillNotified == false)\r\n    var payed = data.filter(post => post.isBillNotified == true)\r\n\r\n\r\n    function showAll() {\r\n      setPosts(data)\r\n    }\r\n\r\n    const separator = (numb) => {\r\n      var str = numb.toString().split(\".\");\r\n      str[0] = str[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n      return str.join(\".\");\r\n    };\r\n\r\n    const UnitPrice = (thisMonth, lastMonth) => {\r\n      if (lastMonth > thisMonth) {\r\n        return thisMonth - lastMonth + 9999;\r\n      } else {\r\n        return thisMonth - lastMonth;\r\n      }\r\n    };\r\n  \r\n    function showNotPayed() {\r\n      setPosts(notPayed)\r\n    }\r\n    function showPayed(){\r\n      setPosts(payed)\r\n    }\r\n    async function fillterDate(date){\r\n      await setPostDate(date)\r\n      console.log(date+' and '+postDate)    \r\n      let fillteredPostDate = data.filter((post)=>{ \r\n        return moment(post.createdAt).format(\"MMM YY\") === date\r\n      })\r\n      setPosts(fillteredPostDate)\r\n    }\r\n    const indexOfLastPost = currentPage * postsPerPage;\r\n    const indexOfFirstPost = indexOfLastPost - postsPerPage;\r\n    const currentPosts = fillteredPosts.slice(indexOfFirstPost,indexOfLastPost);\r\n                \r\n    return (\r\n                    <div>\r\n          <div className=\"content-wrapper font-sarabun\">\r\n            {/* Content Header (Page header) */}\r\n            <div className=\"content-header\">\r\n              <div className=\"container-fluid\">\r\n                <div className=\"row mb-2\">\r\n                  {/* /.col */}\r\n                  <div className=\"col-sm-12\">\r\n                    <ol className=\"breadcrumb float-sm-right\">\r\n                      <li className=\"breadcrumb-item\">\r\n                        <a href=\"#\">จัดการบิล</a>\r\n                      </li>\r\n                      <li className=\"breadcrumb-item active\">ระบบจัดการหอพัก</li>\r\n                    </ol>\r\n                  </div>\r\n                  <div className=\"col-sm-12\">\r\n                    <div className=\"card\" style={{margin: \"auto\",padding: \"10px 100px 10px 100px\", width: \"60%\", textAlign: \"center\"}}>\r\n                        <h1 className=\"m-0 text-dark\">เลือกรอบบิล {postDate}</h1>\r\n                        <Space direction=\"vertical\" style={{margin: \"20px 0px 20px 0px\"}}>\r\n                            <DatePicker picker=\"month\" onChange={(date)=>fillterDate(moment(date).format(\"MMM YY\"))}/>\r\n                        </Space>\r\n                    </div>\r\n                  </div>\r\n                  {/* /.col */}\r\n                </div>\r\n                {/* /.row */}\r\n              </div>\r\n              {/* /.container-fluid */}\r\n            </div>\r\n            {/* /.content-header */}\r\n            {/* Main content */}\r\n            <section className=\"content\">\r\n              {/* /.container-fluid */}\r\n              <nav class=\"navbar navbar-light bg-light\">\r\n                <form class=\"form-inline\">\r\n                    <input class=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\" value={searchText}\r\n                onChange={(event)=>{setSearchText(event.target.value)}}/>\r\n                    <button type=\"button\" class=\"btn btn-outline-success my-2 my-sm-0 m-2\" onClick={showAll}>แสดงทั้งหมด</button>\r\n                    <button type=\"button\" class=\"btn btn-outline-danger m-2\" onClick={showNotPayed}>ยังไม่จ่าย</button>\r\n                    <button type=\"button\" class=\"btn btn-outline-primary m-2\" onClick={showPayed}>จ่ายแล้ว</button>\r\n                </form>\r\n            </nav>\r\n                \r\n            <div className=\"row m-2\">\r\n             {\r\n            currentPosts.map(post =>{\r\n              return <div className=\"col-sm-6 col-md-4 v my-2\">\r\n                <div className=\"card shadow-sm w-100 \" style={{ minHeight:175}}>\r\n                <div className=\"card-header\">\r\n                    <h5 className=\"catd-title text-center h3 mt-2\">\r\n                        {post.isBillNotified === true ? \"🟢\" : \"🔴\"} ห้องพัก {post.roomId}\r\n                      </h5>\r\n                    </div>\r\n                <div className=\"card-body\">\r\n                    <h6 className=\"catd-title text-center h2\">{moment(post.createdAt).format('MMM YY')}</h6>\r\n                    <h5 className=\"catd-subtitle mb-2 text-muted text-center\">{separator(\r\n                      post.rentalFee +\r\n                        7 *\r\n                          UnitPrice(\r\n                            post.electricUnitThisMonth,\r\n                            post.electricUnitLastMonth\r\n                          ) +\r\n                        18 *\r\n                          UnitPrice(\r\n                            post.waterUnitThisMonth,\r\n                            post.waterUnitLastMonth\r\n                          ) +\r\n                        post.rentalNet)} บาท</h5>\r\n                    <div className=\"d-flex justify-content-center\">\r\n                    <button type=\"button\" class=\"btn btn-success text-center m-4\" onClick={() => navigate('/Billgenerate/' + post._id)}>ดูรายละเอียดของบิล {post.roomName}</button>\r\n                    \r\n                </div>\r\n                </div>\r\n                </div>\r\n                </div>\r\n            }\r\n            )\r\n            }\r\n            </div>\r\n            <ReactPaginate\r\n            onPageChange={handlePageClick}\r\n            pageCount={fillteredPosts.length/postsPerPage}\r\n            previousLabel={'<<'}\r\n            nextLabel={'>>'}\r\n            containerClassName={'pagination justify-content-center'}\r\n            pageClassName={'page-item'}\r\n            pageLinkClassName={'page-link'}\r\n            previousClassName={'page-item'}\r\n            previousLinkClassName={'page-link'}\r\n            nextClassName={'page-item'}\r\n            nextLinkClassName={'page-link'}\r\n            breakClassName={'paeg-item'}\r\n            breakLinkClassName={'page-link'}\r\n            activeClassName={'active'}\r\n            />\r\n            </section>\r\n            {/* /.content */}\r\n          </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Billmanage;"]},"metadata":{},"sourceType":"module"}