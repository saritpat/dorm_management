{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sawid\\\\Desktop\\\\Asset\\\\Project\\\\dorm_management\\\\src\\\\components\\\\printagreement.component.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component } from 'react';\nimport jsPDF from \"jspdf\";\nimport { Upload, message, Button } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons'; // file pdf \n\nimport agreement from './image/agreement.pdf';\nimport { Worker } from '@react-pdf-viewer/core'; // Core viewer\n\nimport { Viewer } from '@react-pdf-viewer/core'; // Plugins\n\nimport { defaultLayoutPlugin } from '@react-pdf-viewer/default-layout';\nimport { useParams } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { useState, useEffect } from 'react';\nimport { readRoom, resetVaule } from \"./function.components/room\"; // Import styles\n\nimport '@react-pdf-viewer/core/lib/styles/index.css';\nimport '@react-pdf-viewer/default-layout/lib/styles/index.css';\nimport { getFile, uploadFile } from './function.components/printDoc';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Printagreement = () => {\n  _s();\n\n  let {\n    id\n  } = useParams();\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [data, setData] = useState([]);\n  const filePathData = \"http://localhost:5000/api/uploads/\";\n  const [fileData, setfileData] = useState({\n    selectedFile: null\n  });\n  const [urlPath, setUrlPath] = useState(\"\");\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"file\", fileData.selectedFile, fileData.selectedFile.name);\n    console.log(formData);\n    uploadFile(user.token, id, formData).then(res => {\n      console.log(res);\n      window.location.reload();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const loadData = (authtoken, values) => {\n    readRoom(authtoken, values).then(res => {\n      setData(res.data);\n      console.log(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const loadDataPDF = (authtoken, id) => {\n    getFile(authtoken, id).then(res => {\n      const file = new Blob([res.data], {\n        type: \"application/pdf\"\n      }); //Build a URL from the file\n\n      const fileURL = URL.createObjectURL(file);\n      console.log(fileURL);\n      setUrlPath(fileURL);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    loadData(user.token, id);\n    loadDataPDF(user.token, id);\n  }, []);\n\n  const handleonChangeFile = e => {\n    setfileData({\n      selectedFile: e.target.files[0]\n    });\n  };\n\n  console.log(fileData);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-wrapper font-sarabun\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-fluid\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-6\",\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"m-0 text-dark\",\n                children: \"\\u0E2A\\u0E31\\u0E0D\\u0E0D\\u0E32\\u0E2B\\u0E2D\\u0E1E\\u0E31\\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-6\",\n              children: /*#__PURE__*/_jsxDEV(\"ol\", {\n                className: \"breadcrumb float-sm-right\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"#\",\n                    children: \"\\u0E23\\u0E32\\u0E22\\u0E07\\u0E32\\u0E19\\u0E1C\\u0E25\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item active\",\n                  children: \"\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2B\\u0E2D\\u0E1E\\u0E31\\u0E01\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-fluid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"col-auto me-auto\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: [\"\\u0E2B\\u0E49\\u0E2D\\u0E07 \", data.roomName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 64\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"col-auto\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: agreement,\n                  download: \"\\u0E2A\\u0E31\\u0E0D\\u0E0D\\u0E32\\u0E2B\\u0E2D\\u0E1E\\u0E31\\u0E01\",\n                  target: \"_blank\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    class: \"btn btn-danger\",\n                    children: \"\\u0E14\\u0E32\\u0E27\\u0E19\\u0E4C\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E23\\u0E48\\u0E32\\u0E07\\u0E2A\\u0E31\\u0E0D\\u0E0D\\u0E32\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"\",\n            onSubmit: handleSubmit,\n            enctype: \"multipart/form-data\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-8\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                class: \"form-control\",\n                name: \"selectedFile\",\n                onChange: handleonChangeFile\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary form-control\",\n                type: \"submit\",\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Worker, {\n            workerUrl: \"https://unpkg.com/pdfjs-dist@2.13.216/build/pdf.worker.min.js\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                border: '1px solid rgba(0, 0, 0, 0.3)',\n                height: '750px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Viewer, {\n                fileUrl: data.contactPath === \"none\" ? agreement : \"http://localhost:5000/api/uploads/\" + data._id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Printagreement, \"/0l/q/7oQUpaOt06hUUQz+oY6CE=\", false, function () {\n  return [useParams, useSelector];\n});\n\n_c = Printagreement;\nexport default Printagreement;\n\nvar _c;\n\n$RefreshReg$(_c, \"Printagreement\");","map":{"version":3,"sources":["C:/Users/Sawid/Desktop/Asset/Project/dorm_management/src/components/printagreement.component.js"],"names":["React","Component","jsPDF","Upload","message","Button","UploadOutlined","agreement","Worker","Viewer","defaultLayoutPlugin","useParams","useSelector","useState","useEffect","readRoom","resetVaule","getFile","uploadFile","Printagreement","id","user","state","data","setData","filePathData","fileData","setfileData","selectedFile","urlPath","setUrlPath","handleSubmit","e","preventDefault","formData","FormData","append","name","console","log","token","then","res","window","location","reload","catch","err","loadData","authtoken","values","loadDataPDF","file","Blob","type","fileURL","URL","createObjectURL","handleonChangeFile","target","files","roomName","border","height","contactPath","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport jsPDF from \"jspdf\";\r\nimport { Upload, message, Button } from 'antd';\r\nimport { UploadOutlined } from '@ant-design/icons';\r\n// file pdf \r\nimport agreement from './image/agreement.pdf';\r\n\r\nimport { Worker } from '@react-pdf-viewer/core';\r\n// Core viewer\r\nimport { Viewer } from '@react-pdf-viewer/core';\r\n\r\n// Plugins\r\nimport { defaultLayoutPlugin } from '@react-pdf-viewer/default-layout';\r\n\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from 'react';\r\nimport { readRoom , resetVaule } from \"./function.components/room\";\r\n\r\n// Import styles\r\nimport '@react-pdf-viewer/core/lib/styles/index.css';\r\nimport '@react-pdf-viewer/default-layout/lib/styles/index.css';\r\nimport { getFile, uploadFile } from './function.components/printDoc';\r\n\r\nconst Printagreement = () => {\r\n    let { id } = useParams(); \r\n    const { user } = useSelector((state) => ({ ...state }));\r\n    const [ data, setData ] = useState([]);\r\n    const filePathData = \"http://localhost:5000/api/uploads/\"\r\n    const [ fileData, setfileData ] = useState({\r\n        selectedFile: null,\r\n    });\r\n    const [ urlPath , setUrlPath ] = useState(\"\");\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append(\r\n            \"file\",\r\n            fileData.selectedFile,\r\n            fileData.selectedFile.name\r\n          );\r\n        console.log(formData)\r\n        uploadFile(user.token, id, formData)\r\n        .then(res => {\r\n            console.log(res)\r\n            window.location.reload();\r\n        })\r\n        .catch(err => {\r\n                console.log(err);\r\n        })\r\n    }\r\n\r\n    const loadData = (authtoken, values) => {\r\n        readRoom(authtoken, values)\r\n        .then(res => {\r\n                setData(res.data)\r\n                console.log(data)\r\n                \r\n        })\r\n        .catch(err => {\r\n                console.log(err);\r\n        })\r\n      };\r\n\r\n    const loadDataPDF = (authtoken, id) => {\r\n      getFile(authtoken, id)\r\n      .then(res => {\r\n        const file = new Blob([res.data], {\r\n            type: \"application/pdf\"\r\n          });\r\n          //Build a URL from the file\r\n          const fileURL = URL.createObjectURL(file);\r\n          console.log(fileURL)\r\n          setUrlPath(fileURL);\r\n\r\n      })\r\n      .catch(err => {\r\n              console.log(err);\r\n      })\r\n    };\r\n\r\n      useEffect(() => {\r\n        loadData(user.token, id);\r\n        loadDataPDF(user.token, id);\r\n      },[])\r\n      \r\n\r\n    const handleonChangeFile = (e) => {\r\n        setfileData({ selectedFile: e.target.files[0] });\r\n      \r\n    }\r\n\r\n    console.log(fileData)\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"content-wrapper font-sarabun\">\r\n                {/* Content Header (Page header) */}\r\n                <div className=\"content-header\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row mb-2\">\r\n                            <div className=\"col-sm-6\">\r\n                                <h1 className=\"m-0 text-dark\">สัญญาหอพัก</h1>\r\n                            </div>\r\n                            {/* /.col */}\r\n                            <div className=\"col-sm-6\">\r\n                                <ol className=\"breadcrumb float-sm-right\">\r\n                                    <li className=\"breadcrumb-item\">\r\n                                        <a href=\"#\">รายงานผล</a>\r\n                                    </li>\r\n                                    <li className=\"breadcrumb-item active\">ระบบจัดการหอพัก</li>\r\n                                </ol>\r\n                            </div>\r\n                            {/* /.col */}\r\n                        </div>\r\n                        {/* /.row */}\r\n                    </div>\r\n                    {/* /.container-fluid */}\r\n                </div>\r\n                {/* /.content-header */}\r\n                {/* Main content */}\r\n                <section className=\"content\">\r\n                    <div className='container-fluid'>\r\n                        <div class=\"container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-auto me-auto\"> <h1>ห้อง { data.roomName }</h1> </div>\r\n                                <div class=\"col-auto\">\r\n                                    <a\r\n                                        href={agreement} download=\"สัญญาหอพัก\" target='_blank'>\r\n                                        <button type=\"button\" class=\"btn btn-danger\" >ดาวน์โหลดร่างสัญญา</button>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {/*upload*/}\r\n\r\n                        <form className='' onSubmit={handleSubmit} enctype=\"multipart/form-data\">\r\n                          <div className='col-lg-8'>\r\n                          <input type=\"file\" class=\"form-control\" name=\"selectedFile\" onChange={handleonChangeFile}/>\r\n                          </div>\r\n                          <div className='col-lg-2'>\r\n                          <button className='btn btn-primary form-control' type='submit'>Submit</button>\r\n                          </div>\r\n                          \r\n                          \r\n                        </form>\r\n                        {/* pdf viewer */}\r\n                        <Worker workerUrl=\"https://unpkg.com/pdfjs-dist@2.13.216/build/pdf.worker.min.js\">\r\n                            <div\r\n                                style={{\r\n                                    border: '1px solid rgba(0, 0, 0, 0.3)',\r\n                                    height: '750px',\r\n                                }}\r\n                            >\r\n                                <Viewer fileUrl={ data.contactPath === \"none\" ? agreement : \"http://localhost:5000/api/uploads/\" + data._id } />\r\n                            </div>\r\n                        </Worker>\r\n\r\n                    </div>\r\n                    {/* /.container-fluid */}\r\n                </section>\r\n                {/* /.content */}\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Printagreement\r\n\r\n"]},"metadata":{},"sourceType":"module"}