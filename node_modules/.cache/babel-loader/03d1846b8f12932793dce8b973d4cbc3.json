{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar PdfJsApi = require('pdfjs-dist');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar PdfJsApi__namespace = /*#__PURE__*/_interopNamespace(PdfJsApi);\n\nexports.AnnotationType = void 0;\n\n(function (AnnotationType) {\n  AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n  AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n  AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n  AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n  AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n  AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n  AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n  AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n  AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n  AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n  AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n  AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n  AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n  AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n  AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n  AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n  AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(exports.AnnotationType || (exports.AnnotationType = {}));\n\nexports.LayerRenderStatus = void 0;\n\n(function (LayerRenderStatus) {\n  LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n  LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(exports.LayerRenderStatus || (exports.LayerRenderStatus = {}));\n\nexports.Position = void 0;\n\n(function (Position) {\n  Position[\"TopLeft\"] = \"TOP_LEFT\";\n  Position[\"TopCenter\"] = \"TOP_CENTER\";\n  Position[\"TopRight\"] = \"TOP_RIGHT\";\n  Position[\"RightTop\"] = \"RIGHT_TOP\";\n  Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n  Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n  Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n  Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n  Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n  Position[\"LeftTop\"] = \"LEFT_TOP\";\n  Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n  Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(exports.Position || (exports.Position = {}));\n\nexports.RotateDirection = void 0;\n\n(function (RotateDirection) {\n  RotateDirection[\"Backward\"] = \"Backward\";\n  RotateDirection[\"Forward\"] = \"Forward\";\n})(exports.RotateDirection || (exports.RotateDirection = {}));\n\nexports.ScrollMode = void 0;\n\n(function (ScrollMode) {\n  ScrollMode[\"Horizontal\"] = \"Horizontal\";\n  ScrollMode[\"Vertical\"] = \"Vertical\";\n  ScrollMode[\"Wrapped\"] = \"Wrapped\";\n})(exports.ScrollMode || (exports.ScrollMode = {}));\n\nexports.SpecialZoomLevel = void 0;\n\n(function (SpecialZoomLevel) {\n  SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n  SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n  SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(exports.SpecialZoomLevel || (exports.SpecialZoomLevel = {}));\n\nexports.ToggleStatus = void 0;\n\n(function (ToggleStatus) {\n  ToggleStatus[\"Close\"] = \"Close\";\n  ToggleStatus[\"Open\"] = \"Open\";\n  ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(exports.ToggleStatus || (exports.ToggleStatus = {}));\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nexports.TextDirection = void 0;\n\n(function (TextDirection) {\n  TextDirection[\"RightToLeft\"] = \"RTL\";\n  TextDirection[\"LeftToRight\"] = \"LTR\";\n})(exports.TextDirection || (exports.TextDirection = {}));\n\nvar ThemeContext = React__namespace.createContext({\n  currentTheme: 'light',\n  direction: exports.TextDirection.LeftToRight,\n  setCurrentTheme: function () {}\n});\n\nvar classNames = function (classes) {\n  var result = [];\n  Object.keys(classes).forEach(function (clazz) {\n    if (clazz && classes[clazz]) {\n      result.push(clazz);\n    }\n  });\n  return result.join(' ');\n};\n\nvar Button = function (_a) {\n  var children = _a.children,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__button': true,\n      'rpv-core__button--rtl': isRtl\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\n\nvar useIntersectionObserver = function (props) {\n  var containerRef = React__namespace.useRef(null);\n  var once = props.once,\n      threshold = props.threshold,\n      onVisibilityChanged = props.onVisibilityChanged;\n  useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var intersectionTracker = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var isVisible = entry.isIntersecting;\n        var ratio = entry.intersectionRatio;\n        onVisibilityChanged({\n          isVisible: isVisible,\n          ratio: ratio\n        });\n\n        if (isVisible && once) {\n          intersectionTracker.unobserve(container);\n          intersectionTracker.disconnect();\n        }\n      });\n    }, {\n      threshold: threshold || 0\n    });\n    intersectionTracker.observe(container);\n    return function () {\n      intersectionTracker.unobserve(container);\n      intersectionTracker.disconnect();\n    };\n  }, []);\n  return containerRef;\n};\n\nvar LazyRender = function (_a) {\n  var attrs = _a.attrs,\n      children = _a.children,\n      testId = _a.testId;\n\n  var _b = React__namespace.useState(false),\n      visible = _b[0],\n      setVisible = _b[1];\n\n  var containerAttrs = testId ? __assign(__assign({}, attrs), {\n    'data-testid': testId\n  }) : attrs;\n\n  var handleVisibilityChanged = function (params) {\n    if (params.isVisible) {\n      setVisible(true);\n    }\n  };\n\n  var containerRef = useIntersectionObserver({\n    once: true,\n    onVisibilityChanged: handleVisibilityChanged\n  });\n  return React__namespace.createElement(\"div\", __assign({\n    ref: containerRef\n  }, containerAttrs), visible && children);\n};\n\nvar Menu = function (_a) {\n  var children = _a.children;\n  var containerRef = React__namespace.useRef();\n  var visibleMenuItemsRef = React__namespace.useRef([]);\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var handleKeyDown = function (e) {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    switch (e.key) {\n      case 'Tab':\n        e.preventDefault();\n        break;\n\n      case 'ArrowDown':\n        e.preventDefault();\n        moveToItem(function (_, currentIndex) {\n          return currentIndex + 1;\n        });\n        break;\n\n      case 'ArrowUp':\n        e.preventDefault();\n        moveToItem(function (_, currentIndex) {\n          return currentIndex - 1;\n        });\n        break;\n\n      case 'End':\n        e.preventDefault();\n        moveToItem(function (items, _) {\n          return items.length - 1;\n        });\n        break;\n\n      case 'Home':\n        e.preventDefault();\n        moveToItem(function (_, __) {\n          return 0;\n        });\n        break;\n    }\n  };\n\n  var moveToItem = function (getNextItem) {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var items = visibleMenuItemsRef.current;\n    var currentIndex = items.findIndex(function (item) {\n      return item.getAttribute('tabindex') === '0';\n    });\n    var targetIndex = Math.min(items.length - 1, Math.max(0, getNextItem(items, currentIndex)));\n\n    if (currentIndex >= 0 && currentIndex <= items.length - 1) {\n      items[currentIndex].setAttribute('tabindex', '-1');\n    }\n\n    items[targetIndex].setAttribute('tabindex', '0');\n    items[targetIndex].focus();\n  };\n\n  var findVisibleItems = function (container) {\n    var visibleItems = [];\n    container.querySelectorAll('.rpv-core__menu-item[role=\"menuitem\"]').forEach(function (item) {\n      if (item instanceof HTMLElement) {\n        var parent_1 = item.parentElement;\n\n        if (parent_1 === container) {\n          visibleItems.push(item);\n        } else {\n          if (window.getComputedStyle(parent_1).display !== 'none') {\n            visibleItems.push(item);\n          }\n        }\n      }\n    });\n    return visibleItems;\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var visibleItems = findVisibleItems(container);\n    visibleMenuItemsRef.current = visibleItems;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    \"aria-orientation\": \"vertical\",\n    className: classNames({\n      'rpv-core__menu': true,\n      'rpv-core__menu--rtl': isRtl\n    }),\n    role: \"menu\",\n    tabIndex: 0\n  }, children);\n};\n\nvar MenuDivider = function () {\n  return React__namespace.createElement(\"div\", {\n    \"aria-orientation\": \"horizontal\",\n    className: \"rpv-core__menu-divider\",\n    role: \"separator\"\n  });\n};\n\nvar Icon = function (_a) {\n  var children = _a.children,\n      _b = _a.ignoreDirection,\n      ignoreDirection = _b === void 0 ? false : _b,\n      _c = _a.size,\n      size = _c === void 0 ? 24 : _c;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = !ignoreDirection && direction === exports.TextDirection.RightToLeft;\n  var width = \"\".concat(size || 24, \"px\");\n  return React__namespace.createElement(\"svg\", {\n    \"aria-hidden\": \"true\",\n    className: classNames({\n      'rpv-core__icon': true,\n      'rpv-core__icon--rtl': isRtl\n    }),\n    focusable: \"false\",\n    height: width,\n    viewBox: \"0 0 24 24\",\n    width: width\n  }, children);\n};\n\nvar CheckIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M23.5,0.499l-16.5,23l-6.5-6.5\"\n  }));\n};\n\nvar MenuItem = function (_a) {\n  var _b = _a.checked,\n      checked = _b === void 0 ? false : _b,\n      children = _a.children,\n      _c = _a.icon,\n      icon = _c === void 0 ? null : _c,\n      _d = _a.isDisabled,\n      isDisabled = _d === void 0 ? false : _d,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__menu-item': true,\n      'rpv-core__menu-item--disabled': isDisabled,\n      'rpv-core__menu-item--ltr': !isRtl,\n      'rpv-core__menu-item--rtl': isRtl\n    }),\n    role: \"menuitem\",\n    tabIndex: -1,\n    type: \"button\",\n    onClick: onClick\n  }, attrs), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-icon': true,\n      'rpv-core__menu-item-icon--ltr': !isRtl,\n      'rpv-core__menu-item-icon--rtl': isRtl\n    })\n  }, icon), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-label': true,\n      'rpv-core__menu-item-label--ltr': !isRtl,\n      'rpv-core__menu-item-label--rtl': isRtl\n    })\n  }, children), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-check': true,\n      'rpv-core__menu-item-check--ltr': !isRtl,\n      'rpv-core__menu-item-check--rtl': isRtl\n    })\n  }, checked && React__namespace.createElement(CheckIcon, null)));\n};\n\nvar MinimalButton = function (_a) {\n  var _b = _a.ariaLabel,\n      ariaLabel = _b === void 0 ? '' : _b,\n      _c = _a.ariaKeyShortcuts,\n      ariaKeyShortcuts = _c === void 0 ? '' : _c,\n      children = _a.children,\n      _d = _a.isDisabled,\n      isDisabled = _d === void 0 ? false : _d,\n      _e = _a.isSelected,\n      isSelected = _e === void 0 ? false : _e,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    \"aria-label\": ariaLabel\n  }, ariaKeyShortcuts && {\n    'aria-keyshortcuts': ariaKeyShortcuts\n  }, isDisabled && {\n    'aria-disabled': true\n  }, {\n    className: classNames({\n      'rpv-core__minimal-button': true,\n      'rpv-core__minimal-button--disabled': isDisabled,\n      'rpv-core__minimal-button--rtl': isRtl,\n      'rpv-core__minimal-button--selected': isSelected\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar PrimaryButton = function (_a) {\n  var children = _a.children,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__primary-button': true,\n      'rpv-core__primary-button--rtl': isRtl\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar ProgressBar = function (_a) {\n  var progress = _a.progress;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  return React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__progress-bar': true,\n      'rpv-core__progress-bar--rtl': isRtl\n    })\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__progress-bar-progress\",\n    style: {\n      width: \"\".concat(progress, \"%\")\n    }\n  }, progress, \"%\"));\n};\n\nvar Separator = function () {\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__separator\"\n  });\n};\n\nvar Spinner = function (_a) {\n  var _b = _a.size,\n      size = _b === void 0 ? '4rem' : _b,\n      testId = _a.testId;\n\n  var _c = React__namespace.useState(false),\n      visible = _c[0],\n      setVisible = _c[1];\n\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n\n  var handleVisibilityChanged = function (params) {\n    setVisible(params.isVisible);\n  };\n\n  var containerRef = useIntersectionObserver({\n    onVisibilityChanged: handleVisibilityChanged\n  });\n  return React__namespace.createElement(\"div\", __assign({}, attrs, {\n    className: classNames({\n      'rpv-core__spinner': true,\n      'rpv-core__spinner--animating': visible\n    }),\n    ref: containerRef,\n    style: {\n      height: size,\n      width: size\n    }\n  }));\n};\n\nvar Splitter = function (_a) {\n  var constrain = _a.constrain;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var resizerRef = React__namespace.useRef();\n  var leftSideRef = React__namespace.useRef();\n  var rightSideRef = React__namespace.useRef();\n  var xRef = React__namespace.useRef(0);\n  var yRef = React__namespace.useRef(0);\n  var leftWidthRef = React__namespace.useRef(0);\n  var resizerWidthRef = React__namespace.useRef(0);\n  var eventOptions = {\n    capture: true\n  };\n\n  var handleMouseMove = function (e) {\n    var resizerEle = resizerRef.current;\n    var leftSide = leftSideRef.current;\n    var rightSide = rightSideRef.current;\n\n    if (!resizerEle || !leftSide || !rightSide) {\n      return;\n    }\n\n    var resizerWidth = resizerWidthRef.current;\n    var dx = e.clientX - xRef.current;\n    var firstHalfSize = leftWidthRef.current + (isRtl ? -dx : dx);\n    var containerWidth = resizerEle.parentElement.getBoundingClientRect().width;\n    var firstHalfPercentage = firstHalfSize * 100 / containerWidth;\n    resizerEle.classList.add('rpv-core__splitter--resizing');\n\n    if (constrain) {\n      var secondHalfSize = containerWidth - firstHalfSize - resizerWidth;\n      var secondHalfPercentage = secondHalfSize * 100 / containerWidth;\n\n      if (!constrain({\n        firstHalfPercentage: firstHalfPercentage,\n        firstHalfSize: firstHalfSize,\n        secondHalfPercentage: secondHalfPercentage,\n        secondHalfSize: secondHalfSize\n      })) {\n        return;\n      }\n    }\n\n    leftSide.style.width = \"\".concat(firstHalfPercentage, \"%\");\n    document.body.classList.add('rpv-core__splitter-body--resizing');\n    leftSide.classList.add('rpv-core__splitter-sibling--resizing');\n    rightSide.classList.add('rpv-core__splitter-sibling--resizing');\n  };\n\n  var handleMouseUp = function (e) {\n    var resizerEle = resizerRef.current;\n    var leftSide = leftSideRef.current;\n    var rightSide = rightSideRef.current;\n\n    if (!resizerEle || !leftSide || !rightSide) {\n      return;\n    }\n\n    document.body.classList.remove('rpv-core__splitter-body--resizing');\n    resizerEle.classList.remove('rpv-core__splitter--resizing');\n    leftSide.classList.remove('rpv-core__splitter-sibling--resizing');\n    rightSide.classList.remove('rpv-core__splitter-sibling--resizing');\n    document.removeEventListener('mousemove', handleMouseMove, eventOptions);\n    document.removeEventListener('mouseup', handleMouseUp, eventOptions);\n  };\n\n  var handleMouseDown = function (e) {\n    var leftSide = leftSideRef.current;\n\n    if (!leftSide) {\n      return;\n    }\n\n    xRef.current = e.clientX;\n    yRef.current = e.clientY;\n    leftWidthRef.current = leftSide.getBoundingClientRect().width;\n    document.addEventListener('mousemove', handleMouseMove, eventOptions);\n    document.addEventListener('mouseup', handleMouseUp, eventOptions);\n  };\n\n  React__namespace.useEffect(function () {\n    var resizerEle = resizerRef.current;\n\n    if (!resizerEle) {\n      return;\n    }\n\n    resizerWidthRef.current = resizerEle.getBoundingClientRect().width;\n    leftSideRef.current = resizerEle.previousElementSibling;\n    rightSideRef.current = resizerEle.nextElementSibling;\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: resizerRef,\n    className: \"rpv-core__splitter\",\n    onMouseDown: handleMouseDown\n  });\n};\n\nvar TextBox = function (_a) {\n  var _b = _a.ariaLabel,\n      ariaLabel = _b === void 0 ? '' : _b,\n      _c = _a.autoFocus,\n      autoFocus = _c === void 0 ? false : _c,\n      _d = _a.placeholder,\n      placeholder = _d === void 0 ? '' : _d,\n      testId = _a.testId,\n      _e = _a.type,\n      type = _e === void 0 ? 'text' : _e,\n      _f = _a.value,\n      value = _f === void 0 ? '' : _f,\n      onChange = _a.onChange,\n      _g = _a.onKeyDown,\n      onKeyDown = _g === void 0 ? function () {} : _g;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var textboxRef = React__namespace.useRef();\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = {\n    ref: textboxRef,\n    'data-testid': '',\n    'aria-label': ariaLabel,\n    className: classNames({\n      'rpv-core__textbox': true,\n      'rpv-core__textbox--rtl': isRtl\n    }),\n    placeholder: placeholder,\n    value: value,\n    onChange: function (e) {\n      return onChange(e.target.value);\n    },\n    onKeyDown: onKeyDown\n  };\n\n  if (testId) {\n    attrs['data-testid'] = testId;\n  }\n\n  useIsomorphicLayoutEffect(function () {\n    if (autoFocus) {\n      var textboxEle = textboxRef.current;\n\n      if (textboxEle) {\n        var x = window.scrollX;\n        var y = window.scrollY;\n        textboxEle.focus();\n        window.scrollTo(x, y);\n      }\n    }\n  }, []);\n  return type === 'text' ? React__namespace.createElement(\"input\", __assign({\n    type: \"text\"\n  }, attrs)) : React__namespace.createElement(\"input\", __assign({\n    type: \"password\"\n  }, attrs));\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n  var clickHandler = function (e) {\n    var target = targetRef.current;\n\n    if (target && !target.contains(e.target)) {\n      onClickOutside();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    if (!closeOnClickOutside) {\n      return;\n    }\n\n    var eventOptions = {\n      capture: true\n    };\n    document.addEventListener('click', clickHandler, eventOptions);\n    return function () {\n      document.removeEventListener('click', clickHandler, eventOptions);\n    };\n  }, []);\n};\n\nvar useEscape = function (handler) {\n  var keyUpHandler = function (e) {\n    if (e.key === 'Escape') {\n      handler();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    document.addEventListener('keyup', keyUpHandler);\n    return function () {\n      document.removeEventListener('keyup', keyUpHandler);\n    };\n  }, []);\n};\n\nvar useLockScroll = function () {\n  React__namespace.useEffect(function () {\n    var originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = 'hidden';\n    return function () {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n};\n\nvar ModalBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      onToggle = _a.onToggle;\n  var contentRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  useLockScroll();\n  useEscape(function () {\n    if (contentRef.current && closeOnEscape) {\n      onToggle();\n    }\n  });\n  useClickOutside(closeOnClickOutside, contentRef, onToggle);\n  useIsomorphicLayoutEffect(function () {\n    var contentEle = contentRef.current;\n\n    if (!contentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (contentEle.getBoundingClientRect().height >= maxHeight) {\n      contentEle.style.overflow = 'auto';\n      contentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    \"aria-modal\": \"true\",\n    className: classNames({\n      'rpv-core__modal-body': true,\n      'rpv-core__modal-body--rtl': isRtl\n    }),\n    id: \"rpv-core__modal-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"dialog\",\n    tabIndex: -1\n  }, children);\n};\n\nvar ModalOverlay = function (_a) {\n  var children = _a.children;\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__modal-overlay\"\n  }, children);\n};\n\nvar useToggle = function (isOpened) {\n  var _a = React__namespace.useState(isOpened),\n      opened = _a[0],\n      setOpened = _a[1];\n\n  var toggle = function (status) {\n    switch (status) {\n      case exports.ToggleStatus.Close:\n        setOpened(false);\n        break;\n\n      case exports.ToggleStatus.Open:\n        setOpened(true);\n        break;\n\n      case exports.ToggleStatus.Toggle:\n      default:\n        setOpened(function (isOpened) {\n          return !isOpened;\n        });\n        break;\n    }\n  };\n\n  return {\n    opened: opened,\n    toggle: toggle\n  };\n};\n\nvar Portal = function (_a) {\n  var content = _a.content,\n      _b = _a.isOpened,\n      isOpened = _b === void 0 ? false : _b,\n      target = _a.target;\n\n  var _c = useToggle(isOpened),\n      opened = _c.opened,\n      toggle = _c.toggle;\n\n  return React__namespace.createElement(React__namespace.Fragment, null, target && target(toggle, opened), opened && content(toggle));\n};\n\nvar id = 0;\n\nvar uniqueId = function () {\n  return id++;\n};\n\nvar Modal = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      _b = _a.isOpened,\n      isOpened = _b === void 0 ? false : _b,\n      target = _a.target;\n  var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n\n  var renderTarget = function (toggle, opened) {\n    return React__namespace.createElement(\"div\", {\n      \"aria-expanded\": opened ? 'true' : 'false',\n      \"aria-haspopup\": \"dialog\",\n      \"aria-controls\": \"rpv-core__modal-body-\".concat(controlsSuffix)\n    }, target(toggle, opened));\n  };\n\n  var renderContent = function (toggle) {\n    return React__namespace.createElement(ModalOverlay, null, React__namespace.createElement(ModalBody, {\n      ariaControlsSuffix: controlsSuffix,\n      closeOnClickOutside: closeOnClickOutside,\n      closeOnEscape: closeOnEscape,\n      onToggle: toggle\n    }, content(toggle)));\n  };\n\n  return React__namespace.createElement(Portal, {\n    target: target ? renderTarget : null,\n    content: renderContent,\n    isOpened: isOpened\n  });\n};\n\nvar calculatePosition = function (content, target, position, offset) {\n  var targetRect = target.getBoundingClientRect();\n  var contentRect = content.getBoundingClientRect();\n  var height = contentRect.height,\n      width = contentRect.width;\n  var top = 0;\n  var left = 0;\n\n  switch (position) {\n    case exports.Position.TopLeft:\n      top = targetRect.top - height;\n      left = targetRect.left;\n      break;\n\n    case exports.Position.TopCenter:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case exports.Position.TopRight:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case exports.Position.RightTop:\n      top = targetRect.top;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.RightCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.RightBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.BottomLeft:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left;\n      break;\n\n    case exports.Position.BottomCenter:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case exports.Position.BottomRight:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case exports.Position.LeftTop:\n      top = targetRect.top;\n      left = targetRect.left - width;\n      break;\n\n    case exports.Position.LeftCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left - width;\n      break;\n\n    case exports.Position.LeftBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left - width;\n      break;\n  }\n\n  return {\n    left: left + (offset.left || 0),\n    top: top + (offset.top || 0)\n  };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n  useIsomorphicLayoutEffect(function () {\n    var targetEle = targetRef.current;\n    var contentEle = contentRef.current;\n    var anchorEle = anchorRef.current;\n\n    if (!contentEle || !targetEle || !anchorEle) {\n      return;\n    }\n\n    var anchorRect = anchorEle.getBoundingClientRect();\n\n    var _a = calculatePosition(contentEle, targetEle, position, offset),\n        top = _a.top,\n        left = _a.left;\n\n    contentEle.style.top = \"\".concat(top - anchorRect.top, \"px\");\n    contentEle.style.left = \"\".concat(left - anchorRect.left, \"px\");\n  }, []);\n};\n\nvar Arrow = function (_a) {\n  var _b;\n\n  var customClassName = _a.customClassName,\n      position = _a.position;\n  return React__namespace.createElement(\"div\", {\n    className: classNames((_b = {\n      'rpv-core__arrow': true,\n      'rpv-core__arrow--tl': position === exports.Position.TopLeft,\n      'rpv-core__arrow--tc': position === exports.Position.TopCenter,\n      'rpv-core__arrow--tr': position === exports.Position.TopRight,\n      'rpv-core__arrow--rt': position === exports.Position.RightTop,\n      'rpv-core__arrow--rc': position === exports.Position.RightCenter,\n      'rpv-core__arrow--rb': position === exports.Position.RightBottom,\n      'rpv-core__arrow--bl': position === exports.Position.BottomLeft,\n      'rpv-core__arrow--bc': position === exports.Position.BottomCenter,\n      'rpv-core__arrow--br': position === exports.Position.BottomRight,\n      'rpv-core__arrow--lt': position === exports.Position.LeftTop,\n      'rpv-core__arrow--lc': position === exports.Position.LeftCenter,\n      'rpv-core__arrow--lb': position === exports.Position.LeftBottom\n    }, _b[\"\".concat(customClassName)] = customClassName !== '', _b))\n  });\n};\n\nvar PopoverBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef,\n      onClose = _a.onClose;\n  var contentRef = React__namespace.useRef();\n  var innerRef = React__namespace.useRef();\n  var anchorRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  useClickOutside(closeOnClickOutside, contentRef, onClose);\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  useIsomorphicLayoutEffect(function () {\n    var innerContentEle = innerRef.current;\n\n    if (!innerContentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\n      innerContentEle.style.overflow = 'auto';\n      innerContentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n    }\n  }, []);\n  var innerId = \"rpv-core__popover-body-inner-\".concat(ariaControlsSuffix);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    \"aria-describedby\": innerId,\n    className: classNames({\n      'rpv-core__popover-body': true,\n      'rpv-core__popover-body--rtl': isRtl\n    }),\n    id: \"rpv-core__popover-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"dialog\",\n    tabIndex: -1\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__popover-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    id: innerId,\n    ref: innerRef\n  }, children)));\n};\n\nvar PopoverOverlay = function (_a) {\n  var closeOnEscape = _a.closeOnEscape,\n      onClose = _a.onClose;\n  var containerRef = React__namespace.useRef();\n  useEscape(function () {\n    if (containerRef.current && closeOnEscape) {\n      onClose();\n    }\n  });\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__popover-overlay\",\n    ref: containerRef\n  });\n};\n\nvar Popover = function (_a) {\n  var _b = _a.ariaHasPopup,\n      ariaHasPopup = _b === void 0 ? 'dialog' : _b,\n      ariaControlsSuffix = _a.ariaControlsSuffix,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      _c = _a.lockScroll,\n      lockScroll = _c === void 0 ? true : _c,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n\n  var _d = useToggle(false),\n      opened = _d.opened,\n      toggle = _d.toggle;\n\n  var targetRef = React__namespace.useRef();\n  var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n  return React__namespace.createElement(\"div\", {\n    ref: targetRef,\n    \"aria-expanded\": opened ? 'true' : 'false',\n    \"aria-haspopup\": ariaHasPopup,\n    \"aria-controls\": \"rpv-core__popver-body-\".concat(controlsSuffix)\n  }, target(toggle, opened), opened && React__namespace.createElement(React__namespace.Fragment, null, lockScroll && React__namespace.createElement(PopoverOverlay, {\n    closeOnEscape: closeOnEscape,\n    onClose: toggle\n  }), React__namespace.createElement(PopoverBody, {\n    ariaControlsSuffix: controlsSuffix,\n    closeOnClickOutside: closeOnClickOutside,\n    offset: offset,\n    position: position,\n    targetRef: targetRef,\n    onClose: toggle\n  }, content(toggle))));\n};\n\nvar TooltipBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      contentRef = _a.contentRef,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef;\n  var anchorRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__tooltip-body': true,\n      'rpv-core__tooltip-body--rtl': isRtl\n    }),\n    id: \"rpv-core__tooltip-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"tooltip\"\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__tooltip-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__tooltip-body-content\"\n  }, children)));\n};\n\nvar Tooltip = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n\n  var _b = useToggle(false),\n      opened = _b.opened,\n      toggle = _b.toggle;\n\n  var targetRef = React__namespace.useRef();\n  var contentRef = React__namespace.useRef();\n  var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n  useEscape(function () {\n    if (targetRef.current && document.activeElement && targetRef.current.contains(document.activeElement)) {\n      close();\n    }\n  });\n\n  var open = function () {\n    toggle(exports.ToggleStatus.Open);\n  };\n\n  var close = function () {\n    toggle(exports.ToggleStatus.Close);\n  };\n\n  var onBlur = function (e) {\n    var shouldHideTooltip = e.relatedTarget instanceof HTMLElement && e.currentTarget.parentElement && e.currentTarget.parentElement.contains(e.relatedTarget);\n\n    if (shouldHideTooltip) {\n      if (contentRef.current) {\n        contentRef.current.style.display = 'none';\n      }\n    } else {\n      close();\n    }\n  };\n\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: targetRef,\n    \"aria-describedby\": \"rpv-core__tooltip-body-\".concat(controlsSuffix),\n    onBlur: onBlur,\n    onFocus: open,\n    onMouseEnter: open,\n    onMouseLeave: close\n  }, target), opened && React__namespace.createElement(TooltipBody, {\n    ariaControlsSuffix: controlsSuffix,\n    contentRef: contentRef,\n    offset: offset,\n    position: position,\n    targetRef: targetRef\n  }, content()));\n};\n\nvar PageRenderStatus;\n\n(function (PageRenderStatus) {\n  PageRenderStatus[\"NotRenderedYet\"] = \"NotRenderedYet\";\n  PageRenderStatus[\"Rendering\"] = \"Rendering\";\n  PageRenderStatus[\"Rendered\"] = \"Rendered\";\n})(PageRenderStatus || (PageRenderStatus = {}));\n\nvar OUT_OF_RANGE_VISIBILITY = -9999;\nvar pageVisibilities = {};\n\nvar renderQueueService = function (_a) {\n  var doc = _a.doc,\n      queueName = _a.queueName;\n  _a.priority;\n  var numPages = doc.numPages;\n  var queue = \"\".concat(queueName, \"___\").concat(doc.loadingTask.docId);\n\n  var getInitialPageVisibilities = function () {\n    return Array(numPages).fill(null).map(function (_, pageIndex) {\n      return {\n        pageIndex: pageIndex,\n        renderStatus: PageRenderStatus.NotRenderedYet,\n        visibility: OUT_OF_RANGE_VISIBILITY\n      };\n    });\n  };\n\n  var cleanup = function () {\n    pageVisibilities[queue] = [];\n  };\n\n  var resetQueue = function () {\n    pageVisibilities[queue] = getInitialPageVisibilities();\n  };\n\n  var markRendered = function (pageIndex) {\n    pageVisibilities[queue][pageIndex].renderStatus = PageRenderStatus.Rendered;\n  };\n\n  var markRendering = function (pageIndex) {\n    pageVisibilities[queue][pageIndex].renderStatus = PageRenderStatus.Rendering;\n  };\n\n  var setRange = function (startIndex, endIndex) {\n    for (var i = 0; i < numPages; i++) {\n      if (i < startIndex || i > endIndex) {\n        pageVisibilities[queue][i].visibility = OUT_OF_RANGE_VISIBILITY;\n        pageVisibilities[queue][i].renderStatus = PageRenderStatus.NotRenderedYet;\n      }\n    }\n  };\n\n  var setVisibility = function (pageIndex, visibility) {\n    pageVisibilities[queue][pageIndex].visibility = visibility;\n  };\n\n  var getHighestPriorityPage = function () {\n    var visiblePages = pageVisibilities[queue].filter(function (item) {\n      return item.visibility > OUT_OF_RANGE_VISIBILITY;\n    });\n\n    if (!visiblePages.length) {\n      return -1;\n    }\n\n    var firstVisiblePage = visiblePages[0].pageIndex;\n    var lastVisiblePage = visiblePages[visiblePages.length - 1].pageIndex;\n    var numVisiblePages = visiblePages.length;\n\n    for (var i = 0; i < numVisiblePages; i++) {\n      if (visiblePages[i].renderStatus === PageRenderStatus.Rendering) {\n        return -1;\n      }\n\n      if (visiblePages[i].renderStatus === PageRenderStatus.NotRenderedYet) {\n        return visiblePages[i].pageIndex;\n      }\n    }\n\n    if (lastVisiblePage + 1 < numPages && pageVisibilities[queue][lastVisiblePage + 1].renderStatus !== PageRenderStatus.Rendered) {\n      return lastVisiblePage + 1;\n    } else if (firstVisiblePage - 1 >= 0 && pageVisibilities[queue][firstVisiblePage - 1].renderStatus !== PageRenderStatus.Rendered) {\n      return firstVisiblePage - 1;\n    }\n\n    return -1;\n  };\n\n  resetQueue();\n  return {\n    OUT_OF_RANGE_VISIBILITY: OUT_OF_RANGE_VISIBILITY,\n    cleanup: cleanup,\n    getHighestPriorityPage: getHighestPriorityPage,\n    markRendered: markRendered,\n    markRendering: markRendering,\n    resetQueue: resetQueue,\n    setRange: setRange,\n    setVisibility: setVisibility\n  };\n};\n\nfunction createStore(initialState) {\n  var state = initialState || {};\n  var listeners = {};\n  return {\n    subscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).concat(handler);\n    },\n    unsubscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).filter(function (f) {\n        return f !== handler;\n      });\n    },\n    update: function (key, data) {\n      var _a;\n\n      state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n      (listeners[key] || []).forEach(function (handler) {\n        return handler(state[key]);\n      });\n    },\n    get: function (key) {\n      return state[key];\n    }\n  };\n}\n\nvar core = {\n  askingPassword: {\n    requirePasswordToOpen: \"This document requires a password to open\",\n    submit: \"Submit\"\n  },\n  wrongPassword: {\n    tryAgain: \"The password is wrong. Please try again\"\n  },\n  pageLabel: \"Page {{pageIndex}}\"\n};\nvar enUs = {\n  core: core\n};\nvar DefaultLocalization = enUs;\nvar LocalizationContext = React__namespace.createContext({\n  l10n: DefaultLocalization,\n  setL10n: function () {}\n});\n\nfunction usePrevious(value) {\n  var ref = React__namespace.useRef(value);\n  React__namespace.useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\nvar useDebounceCallback = function (callback, wait) {\n  var timeout = React__namespace.useRef();\n\n  var cleanup = function () {\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    return function () {\n      return cleanup();\n    };\n  }, []);\n  return React__namespace.useCallback(function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    cleanup();\n    timeout.current = setTimeout(function () {\n      callback.apply(void 0, args);\n    }, wait);\n  }, [callback, wait]);\n};\n\nvar useTrackResize = function (_a) {\n  var targetRef = _a.targetRef,\n      onResize = _a.onResize;\n  useIsomorphicLayoutEffect(function () {\n    var io = new ResizeObserver(function (entries) {\n      entries.forEach(function (entry) {\n        onResize(entry.target);\n      });\n    });\n    var container = targetRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    io.observe(container);\n    return function () {\n      io.unobserve(container);\n    };\n  }, []);\n};\n\nvar rectReducer = function (state, action) {\n  var rect = action.rect;\n  return state.height !== rect.height || state.width !== rect.width ? rect : state;\n};\n\nvar useMeasureRect = function (_a) {\n  var elementRef = _a.elementRef;\n\n  var _b = React__namespace.useState(elementRef.current),\n      element = _b[0],\n      setElement = _b[1];\n\n  var initializedRectRef = React__namespace.useRef(false);\n\n  var _c = React__namespace.useReducer(rectReducer, {\n    height: 0,\n    width: 0\n  }),\n      rect = _c[0],\n      dispatch = _c[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (elementRef.current !== element) {\n      setElement(elementRef.current);\n    }\n  });\n  useIsomorphicLayoutEffect(function () {\n    if (element && !initializedRectRef.current) {\n      initializedRectRef.current = true;\n\n      var _a = element.getBoundingClientRect(),\n          height = _a.height,\n          width = _a.width;\n\n      dispatch({\n        rect: {\n          height: height,\n          width: width\n        }\n      });\n    }\n  }, [element]);\n  React__namespace.useEffect(function () {\n    if (!element) {\n      return;\n    }\n\n    var tracker = new ResizeObserver(function (entries, __) {\n      entries.forEach(function (entry) {\n        if (entry.target === element) {\n          var _a = entry.contentRect,\n              height = _a.height,\n              width = _a.width;\n          dispatch({\n            rect: {\n              height: height,\n              width: width\n            }\n          });\n        }\n      });\n    });\n    tracker.observe(element);\n    return function () {\n      tracker.unobserve(element);\n    };\n  }, [element]);\n  return rect;\n};\n\nvar useIsMounted = function () {\n  var isMountedRef = React__namespace.useRef(false);\n  React__namespace.useEffect(function () {\n    isMountedRef.current = true;\n    return function () {\n      isMountedRef.current = false;\n    };\n  }, []);\n  return isMountedRef;\n};\n\nvar useRafState = function (initialState) {\n  var isMounted = useIsMounted();\n  var rafRef = React__namespace.useRef(0);\n\n  var _a = React__namespace.useState(initialState),\n      state = _a[0],\n      setState = _a[1];\n\n  var setRafState = React__namespace.useCallback(function (value) {\n    cancelAnimationFrame(rafRef.current);\n    rafRef.current = requestAnimationFrame(function () {\n      isMounted.current && setState(value);\n    });\n  }, []);\n  React__namespace.useEffect(function () {\n    return function () {\n      cancelAnimationFrame(rafRef.current);\n    };\n  }, []);\n  return [state, setRafState];\n};\n\nvar ZERO_OFFSET$1 = {\n  left: 0,\n  top: 0\n};\nvar SCROLL_EVENT_OPTIONS = {\n  capture: false,\n  passive: true\n};\n\nvar useScroll = function (_a) {\n  var elementRef = _a.elementRef,\n      isRtl = _a.isRtl,\n      scrollMode = _a.scrollMode;\n\n  var _b = useRafState(ZERO_OFFSET$1),\n      scrollOffset = _b[0],\n      setScrollOffset = _b[1];\n\n  var _c = React__namespace.useState(elementRef.current),\n      element = _c[0],\n      setElement = _c[1];\n\n  var factor = isRtl ? -1 : 1;\n  var latestRef = React__namespace.useRef(scrollMode);\n  latestRef.current = scrollMode;\n  useIsomorphicLayoutEffect(function () {\n    setElement(elementRef.current);\n  });\n  useIsomorphicLayoutEffect(function () {\n    if (!element) {\n      return;\n    }\n\n    var handleScroll = function () {\n      switch (latestRef.current) {\n        case exports.ScrollMode.Horizontal:\n          setScrollOffset({\n            left: factor * element.scrollLeft,\n            top: 0\n          });\n          break;\n\n        case exports.ScrollMode.Vertical:\n        default:\n          setScrollOffset({\n            left: 0,\n            top: element.scrollTop\n          });\n          break;\n      }\n    };\n\n    element.addEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n    return function () {\n      element.removeEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n    };\n  }, [element]);\n  var scrollTo = React__namespace.useCallback(function (offset) {\n    var ele = elementRef.current;\n\n    if (ele) {\n      switch (latestRef.current) {\n        case exports.ScrollMode.Horizontal:\n          ele.scrollLeft = factor * offset.left;\n          break;\n\n        case exports.ScrollMode.Vertical:\n        default:\n          ele.scrollTop = offset.top;\n          break;\n      }\n    }\n  }, [elementRef]);\n  return {\n    scrollOffset: scrollOffset,\n    scrollTo: scrollTo\n  };\n};\n\nvar clamp = function (min, max, value) {\n  return Math.max(min, Math.min(value, max));\n};\n\nvar findNearest = function (low, high, value, getItemValue) {\n  while (low <= high) {\n    var middle = (low + high) / 2 | 0;\n    var currentValue = getItemValue(middle);\n\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n\n  return low > 0 ? low - 1 : 0;\n};\n\nvar ZERO_RECT = {\n  height: 0,\n  width: 0\n};\nvar ZERO_OFFSET = {\n  left: 0,\n  top: 0\n};\n\nvar calculateRange = function (scrollMode, measurements, outerSize, scrollOffset) {\n  var currentOffset = 0;\n\n  switch (scrollMode) {\n    case exports.ScrollMode.Horizontal:\n      currentOffset = scrollOffset.left;\n      break;\n\n    case exports.ScrollMode.Vertical:\n    default:\n      currentOffset = scrollOffset.top;\n      break;\n  }\n\n  var size = measurements.length - 1;\n\n  var getOffset = function (index) {\n    switch (scrollMode) {\n      case exports.ScrollMode.Horizontal:\n        return measurements[index].start.left;\n\n      case exports.ScrollMode.Wrapped:\n      case exports.ScrollMode.Vertical:\n      default:\n        return measurements[index].start.top;\n    }\n  };\n\n  var start = findNearest(0, size, currentOffset, getOffset);\n\n  if (scrollMode === exports.ScrollMode.Wrapped) {\n    var startTop = measurements[start].start.top;\n\n    while (start - 1 >= 0 && measurements[start - 1].start.top === startTop && measurements[start - 1].start.left >= scrollOffset.left) {\n      start--;\n    }\n  }\n\n  var end = start;\n  var visibilities = {};\n  var maxVisbilityIndex = start;\n  var maxVisbility = -1;\n\n  while (end <= size) {\n    var itemRect = measurements[end].size;\n    var visibility = {\n      width: 0,\n      height: 0\n    };\n    var topLeftCorner = {\n      top: measurements[end].start.top - scrollOffset.top,\n      left: measurements[end].start.left - scrollOffset.left\n    };\n    var visibleSize = {\n      height: outerSize.height - topLeftCorner.top,\n      width: outerSize.width - topLeftCorner.left\n    };\n\n    if (scrollMode === exports.ScrollMode.Horizontal && visibleSize.width < 0) {\n      end--;\n      break;\n    }\n\n    if (scrollMode === exports.ScrollMode.Vertical && visibleSize.height < 0) {\n      end--;\n      break;\n    }\n\n    if (scrollMode === exports.ScrollMode.Wrapped && (visibleSize.width < 0 || visibleSize.height < 0)) {\n      end--;\n      break;\n    }\n\n    if (scrollMode === exports.ScrollMode.Vertical) {\n      visibility.width = 1;\n    } else if (topLeftCorner.left < 0) {\n      var visibleWidth = itemRect.width - -topLeftCorner.left;\n      visibility.width = visibleWidth <= outerSize.width ? visibleWidth / outerSize.width : 1;\n    } else {\n      visibility.width = itemRect.width <= visibleSize.width ? 1 : visibleSize.width / itemRect.width;\n    }\n\n    if (scrollMode === exports.ScrollMode.Horizontal) {\n      visibility.height = 1;\n    } else if (topLeftCorner.top < 0) {\n      var visibleHeight = itemRect.height - -topLeftCorner.top;\n      visibility.height = visibleHeight <= outerSize.height ? visibleHeight / outerSize.height : 1;\n    } else {\n      visibility.height = itemRect.height <= visibleSize.height ? 1 : visibleSize.height / itemRect.height;\n    }\n\n    visibilities[end] = visibility.width * visibility.height;\n\n    if (maxVisbility < visibilities[end]) {\n      maxVisbility = visibilities[end];\n      maxVisbilityIndex = end;\n    }\n\n    end++;\n  }\n\n  return {\n    start: start,\n    end: end,\n    maxVisbilityIndex: maxVisbilityIndex,\n    visibilities: visibilities\n  };\n};\n\nvar useVirtual = function (_a) {\n  var estimateSize = _a.estimateSize,\n      isRtl = _a.isRtl,\n      numberOfItems = _a.numberOfItems,\n      setStartRange = _a.setStartRange,\n      setEndRange = _a.setEndRange,\n      parentRef = _a.parentRef,\n      scrollMode = _a.scrollMode,\n      transformSize = _a.transformSize;\n\n  var _b = useScroll({\n    elementRef: parentRef,\n    isRtl: isRtl,\n    scrollMode: scrollMode\n  }),\n      scrollOffset = _b.scrollOffset,\n      scrollTo = _b.scrollTo;\n\n  var parentRect = useMeasureRect({\n    elementRef: parentRef\n  });\n  var latestRef = React__namespace.useRef({\n    scrollOffset: ZERO_OFFSET,\n    measurements: [],\n    parentRect: ZERO_RECT,\n    totalSize: ZERO_RECT\n  });\n  latestRef.current.scrollOffset = scrollOffset;\n  latestRef.current.parentRect = parentRect;\n\n  var _c = React__namespace.useState({}),\n      cacheMeasure = _c[0],\n      setCacheMeasure = _c[1];\n\n  var measurements = React__namespace.useMemo(function () {\n    var measurements = [];\n    var totalWidth = 0;\n    var firstOfRow = {\n      left: 0,\n      top: 0\n    };\n    var maxHeight = 0;\n\n    for (var i = 0; i < numberOfItems; i++) {\n      var size = cacheMeasure[i] || transformSize(estimateSize(i));\n      var start_1 = ZERO_OFFSET;\n\n      if (i === 0) {\n        totalWidth = size.width;\n        firstOfRow = {\n          left: 0,\n          top: 0\n        };\n        maxHeight = size.height;\n      } else {\n        switch (scrollMode) {\n          case exports.ScrollMode.Wrapped:\n            totalWidth += size.width;\n\n            if (totalWidth < parentRect.width) {\n              start_1 = {\n                left: measurements[i - 1].end.left,\n                top: firstOfRow.top\n              };\n              maxHeight = Math.max(maxHeight, size.height);\n            } else {\n              totalWidth = size.width;\n              start_1 = {\n                left: firstOfRow.left,\n                top: firstOfRow.top + maxHeight\n              };\n              firstOfRow = {\n                left: start_1.left,\n                top: start_1.top\n              };\n              maxHeight = size.height;\n            }\n\n            break;\n\n          case exports.ScrollMode.Horizontal:\n          case exports.ScrollMode.Vertical:\n          default:\n            start_1 = measurements[i - 1].end;\n            break;\n        }\n      }\n\n      var end_1 = {\n        left: start_1.left + size.width,\n        top: start_1.top + size.height\n      };\n      measurements[i] = {\n        index: i,\n        start: start_1,\n        size: size,\n        end: end_1,\n        visibility: -1\n      };\n    }\n\n    return measurements;\n  }, [estimateSize, scrollMode, parentRect, cacheMeasure, transformSize]);\n  var totalSize = measurements[numberOfItems - 1] ? {\n    height: measurements[numberOfItems - 1].end.top,\n    width: measurements[numberOfItems - 1].end.left\n  } : ZERO_RECT;\n  latestRef.current.measurements = measurements;\n  latestRef.current.totalSize = totalSize;\n\n  var _d = calculateRange(scrollMode, latestRef.current.measurements, latestRef.current.parentRect, latestRef.current.scrollOffset),\n      maxVisbilityIndex = _d.maxVisbilityIndex,\n      visibilities = _d.visibilities,\n      start = _d.start,\n      end = _d.end;\n\n  var startRange = setStartRange(start);\n  var endRange = setEndRange(end);\n  var virtualItems = React__namespace.useMemo(function () {\n    var virtualItems = [];\n\n    var _loop_1 = function (i) {\n      var item = measurements[i];\n\n      var virtualItem = __assign(__assign({}, item), {\n        visibility: visibilities[i] !== undefined ? visibilities[i] : -1,\n        measureRef: function (ele) {\n          if (!ele) {\n            return;\n          }\n\n          var rect = ele.getBoundingClientRect();\n\n          if (rect.height === 0 && rect.width === 0) {\n            return;\n          }\n\n          var measuredSize = transformSize({\n            height: rect.height,\n            width: rect.width\n          });\n\n          if (measuredSize.height !== item.size.height || measuredSize.width !== item.size.width) {\n            setCacheMeasure(function (old) {\n              var _a;\n\n              return __assign(__assign({}, old), (_a = {}, _a[i] = measuredSize, _a));\n            });\n          }\n        }\n      });\n\n      virtualItems.push(virtualItem);\n    };\n\n    for (var i = startRange; i <= endRange; i++) {\n      _loop_1(i);\n    }\n\n    return virtualItems;\n  }, [transformSize, visibilities, measurements]);\n  var scrollToItem = React__namespace.useCallback(function (index, offset) {\n    var measurements = latestRef.current.measurements;\n    var measurement = measurements[clamp(0, numberOfItems - 1, index)];\n\n    if (measurement) {\n      scrollTo({\n        left: offset.left + measurement.start.left,\n        top: offset.top + measurement.start.top\n      });\n    }\n  }, [scrollTo]);\n  var getContainerStyles = React__namespace.useCallback(function () {\n    switch (scrollMode) {\n      case exports.ScrollMode.Horizontal:\n        return {\n          position: 'relative',\n          height: '100%',\n          width: \"\".concat(totalSize.width, \"px\")\n        };\n\n      case exports.ScrollMode.Vertical:\n      default:\n        return {\n          position: 'relative',\n          height: \"\".concat(totalSize.height, \"px\"),\n          width: '100%'\n        };\n    }\n  }, [scrollMode, totalSize]);\n  var getItemStyles = React__namespace.useCallback(function (item) {\n    var _a, _b, _c;\n\n    var sideProperty = isRtl ? 'right' : 'left';\n    var factor = isRtl ? -1 : 1;\n\n    switch (scrollMode) {\n      case exports.ScrollMode.Horizontal:\n        return _a = {\n          height: '100%',\n          width: \"\".concat(item.size.width, \"px\")\n        }, _a[sideProperty] = 0, _a.position = 'absolute', _a.top = 0, _a.transform = \"translateX(\".concat(item.start.left * factor, \"px)\"), _a;\n\n      case exports.ScrollMode.Wrapped:\n        return _b = {\n          height: \"\".concat(item.size.height, \"px\"),\n          width: \"\".concat(item.size.width, \"px\")\n        }, _b[sideProperty] = 0, _b.position = 'absolute', _b.top = 0, _b.transform = \"translate(\".concat(item.start.left * factor, \"px, \").concat(item.start.top, \"px)\"), _b;\n\n      case exports.ScrollMode.Vertical:\n      default:\n        return _c = {\n          height: \"\".concat(item.size.height, \"px\"),\n          width: '100%'\n        }, _c[sideProperty] = 0, _c.position = 'absolute', _c.top = 0, _c.transform = \"translateY(\".concat(item.start.top, \"px)\"), _c;\n    }\n  }, [isRtl, scrollMode]);\n  return {\n    startIndex: start,\n    startRange: startRange,\n    endIndex: end,\n    endRange: endRange,\n    maxVisbilityIndex: maxVisbilityIndex,\n    getContainerStyles: getContainerStyles,\n    getItemStyles: getItemStyles,\n    scrollToItem: scrollToItem,\n    virtualItems: virtualItems\n  };\n};\n\nvar AnnotationBorderStyleType;\n\n(function (AnnotationBorderStyleType) {\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar dateRegex = new RegExp('^D:' + '(\\\\d{4})' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '([Z|+|-])?' + '(\\\\d{2})?' + \"'?\" + '(\\\\d{2})?' + \"'?\");\n\nvar parse = function (value, min, max, defaultValue) {\n  var parsed = parseInt(value, 10);\n  return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\n\nvar convertDate = function (input) {\n  var matches = dateRegex.exec(input);\n\n  if (!matches) {\n    return null;\n  }\n\n  var year = parseInt(matches[1], 10);\n  var month = parse(matches[2], 1, 12, 1) - 1;\n  var day = parse(matches[3], 1, 31, 1);\n  var hour = parse(matches[4], 0, 23, 0);\n  var minute = parse(matches[5], 0, 59, 0);\n  var second = parse(matches[6], 0, 59, 0);\n  var universalTimeRelation = matches[7] || 'Z';\n  var offsetHour = parse(matches[8], 0, 23, 0);\n  var offsetMinute = parse(matches[9], 0, 59, 0);\n\n  switch (universalTimeRelation) {\n    case '-':\n      hour += offsetHour;\n      minute += offsetMinute;\n      break;\n\n    case '+':\n      hour -= offsetHour;\n      minute -= offsetMinute;\n      break;\n  }\n\n  return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n  var annotation = _a.annotation;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var containerRef = React__namespace.useRef();\n  var dateStr = '';\n\n  if (annotation.modificationDate) {\n    var date = convertDate(annotation.modificationDate);\n    dateStr = date ? \"\".concat(date.toLocaleDateString(), \", \").concat(date.toLocaleTimeString()) : '';\n  }\n\n  React__namespace.useLayoutEffect(function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n\n    if (!annotationEle) {\n      return;\n    }\n\n    var ele = annotationEle;\n    ele.style.zIndex += 1;\n    return function () {\n      ele.style.zIndex = \"\".concat(parseInt(ele.style.zIndex, 10) - 1);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: classNames({\n      'rpv-core__annotation-popup-wrapper': true,\n      'rpv-core__annotation-popup-wrapper--rtl': isRtl\n    }),\n    style: {\n      top: annotation.annotationType === exports.AnnotationType.Popup ? '' : '100%'\n    }\n  }, annotation.title && React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__annotation-popup-title': true,\n      'rpv-core__annotation-popup-title--ltr': !isRtl,\n      'rpv-core__annotation-popup-title--rtl': isRtl\n    })\n  }, annotation.title), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-date\"\n  }, dateStr)), annotation.contents && React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-content\"\n  }, annotation.contents.split('\\n').map(function (item, index) {\n    return React__namespace.createElement(React__namespace.Fragment, {\n      key: index\n    }, item, React__namespace.createElement(\"br\", null));\n  })));\n};\n\nvar TogglePopupBy;\n\n(function (TogglePopupBy) {\n  TogglePopupBy[\"Click\"] = \"Click\";\n  TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\n\nvar useTogglePopup = function () {\n  var _a = useToggle(false),\n      opened = _a.opened,\n      toggle = _a.toggle;\n\n  var _b = React__namespace.useState(TogglePopupBy.Hover),\n      togglePopupBy = _b[0],\n      setTooglePopupBy = _b[1];\n\n  var toggleOnClick = function () {\n    switch (togglePopupBy) {\n      case TogglePopupBy.Click:\n        opened && setTooglePopupBy(TogglePopupBy.Hover);\n        toggle(exports.ToggleStatus.Toggle);\n        break;\n\n      case TogglePopupBy.Hover:\n        setTooglePopupBy(TogglePopupBy.Click);\n        toggle(exports.ToggleStatus.Open);\n        break;\n    }\n  };\n\n  var openOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Open);\n  };\n\n  var closeOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Close);\n  };\n\n  return {\n    opened: opened,\n    closeOnHover: closeOnHover,\n    openOnHover: openOnHover,\n    toggleOnClick: toggleOnClick\n  };\n};\n\nvar Annotation = function (_a) {\n  var annotation = _a.annotation,\n      children = _a.children,\n      ignoreBorder = _a.ignoreBorder,\n      hasPopup = _a.hasPopup,\n      isRenderable = _a.isRenderable,\n      page = _a.page,\n      viewport = _a.viewport;\n  var rect = annotation.rect;\n\n  var _b = useTogglePopup(),\n      closeOnHover = _b.closeOnHover,\n      opened = _b.opened,\n      openOnHover = _b.openOnHover,\n      toggleOnClick = _b.toggleOnClick;\n\n  var normalizeRect = function (r) {\n    return [Math.min(r[0], r[2]), Math.min(r[1], r[3]), Math.max(r[0], r[2]), Math.max(r[1], r[3])];\n  };\n\n  var bound = normalizeRect([rect[0], page.view[3] + page.view[1] - rect[1], rect[2], page.view[3] + page.view[1] - rect[3]]);\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var styles = {\n    borderColor: '',\n    borderRadius: '',\n    borderStyle: '',\n    borderWidth: ''\n  };\n\n  if (!ignoreBorder && annotation.borderStyle.width > 0) {\n    switch (annotation.borderStyle.style) {\n      case AnnotationBorderStyleType.Dashed:\n        styles.borderStyle = 'dashed';\n        break;\n\n      case AnnotationBorderStyleType.Solid:\n        styles.borderStyle = 'solid';\n        break;\n\n      case AnnotationBorderStyleType.Underline:\n        styles = Object.assign({\n          borderBottomStyle: 'solid'\n        }, styles);\n        break;\n\n      case AnnotationBorderStyleType.Beveled:\n      case AnnotationBorderStyleType.Inset:\n    }\n\n    var borderWidth = annotation.borderStyle.width;\n    styles.borderWidth = \"\".concat(borderWidth, \"px\");\n\n    if (annotation.borderStyle.style !== AnnotationBorderStyleType.Underline) {\n      width = width - 2 * borderWidth;\n      height = height - 2 * borderWidth;\n    }\n\n    var _c = annotation.borderStyle,\n        horizontalCornerRadius = _c.horizontalCornerRadius,\n        verticalCornerRadius = _c.verticalCornerRadius;\n\n    if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n      styles.borderRadius = \"\".concat(horizontalCornerRadius, \"px / \").concat(verticalCornerRadius, \"px\");\n    }\n\n    annotation.color ? styles.borderColor = \"rgb(\".concat(annotation.color[0] | 0, \", \").concat(annotation.color[1] | 0, \", \").concat(annotation.color[2] | 0, \")\") : styles.borderWidth = '0';\n  }\n\n  return React__namespace.createElement(React__namespace.Fragment, null, isRenderable && children({\n    popup: {\n      opened: opened,\n      closeOnHover: closeOnHover,\n      openOnHover: openOnHover,\n      toggleOnClick: toggleOnClick\n    },\n    slot: {\n      attrs: {\n        style: Object.assign({\n          height: \"\".concat(height, \"px\"),\n          left: \"\".concat(bound[0], \"px\"),\n          top: \"\".concat(bound[1], \"px\"),\n          transform: \"matrix(\".concat(viewport.transform.join(','), \")\"),\n          transformOrigin: \"-\".concat(bound[0], \"px -\").concat(bound[1], \"px\"),\n          width: \"\".concat(width, \"px\")\n        }, styles)\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, {\n        annotation: annotation\n      }))\n    }\n  }));\n};\n\nvar Caret = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--caret\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Circle = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--circle\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"circle\", {\n      cy: height / 2,\n      fill: \"none\",\n      rx: width / 2 - borderWidth / 2,\n      ry: height / 2 - borderWidth / 2,\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1\n    })), props.slot.children);\n  });\n};\n\nvar getFileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', getFileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar FileAttachment = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n\n  var doubleClick = function () {\n    var file = annotation.file;\n    file && downloadFile(file.filename, file.content);\n  };\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: true,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--file-attachment\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onDoubleClick: doubleClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar FreeText = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--free-text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Popup = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var isRenderable = !!(annotation.title || annotation.contents);\n  var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n  var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n  useIsomorphicLayoutEffect(function () {\n    if (!annotation.parentId) {\n      return;\n    }\n\n    var parent = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.parentId, \"\\\"]\"));\n    var container = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n\n    if (!parent || !container) {\n      return;\n    }\n\n    var left = parseFloat(parent.style.left);\n    var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n    container.style.left = \"\".concat(left, \"px\");\n    container.style.top = \"\".concat(top, \"px\");\n    container.style.transformOrigin = \"-\".concat(left, \"px -\").concat(top, \"px\");\n  }, []);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--popup\",\n      \"data-annotation-id\": annotation.id\n    }), React__namespace.createElement(PopupWrapper, {\n      annotation: annotation\n    }));\n  });\n};\n\nvar Highlight = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\n\n  if (hasQuadPoints) {\n    var annotations = annotation.quadPoints.map(function (quadPoint) {\n      return Object.assign({}, annotation, {\n        rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\n        quadPoints: []\n      });\n    });\n    return React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) {\n      return React__namespace.createElement(Highlight, {\n        key: index,\n        annotation: ann,\n        childAnnotation: childAnnotation,\n        page: page,\n        viewport: viewport\n      });\n    }));\n  }\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--highlight\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children), childAnnotation && childAnnotation.annotationType === exports.AnnotationType.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Ink = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--ink\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.inkLists && annotation.inkLists.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, annotation.inkLists.map(function (inkList, index) {\n      return React__namespace.createElement(\"polyline\", {\n        key: index,\n        fill: \"none\",\n        stroke: \"transparent\",\n        strokeWidth: borderWidth || 1,\n        points: inkList.map(function (item) {\n          return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n        }).join(' ')\n      });\n    })), props.slot.children);\n  });\n};\n\nvar Line = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--line\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"line\", {\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x1: rect[2] - annotation.lineCoordinates[0],\n      x2: rect[2] - annotation.lineCoordinates[2],\n      y1: rect[3] - annotation.lineCoordinates[1],\n      y2: rect[3] - annotation.lineCoordinates[3]\n    })), props.slot.children);\n  });\n};\n\nvar normalizeDestination = function (pageIndex, destArray) {\n  switch (destArray[1].name) {\n    case 'XYZ':\n      return {\n        bottomOffset: destArray[3],\n        leftOffset: destArray[2] || 0,\n        pageIndex: pageIndex,\n        scaleTo: destArray[4]\n      };\n\n    case 'Fit':\n    case 'FitB':\n      return {\n        bottomOffset: 0,\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: exports.SpecialZoomLevel.PageFit\n      };\n\n    case 'FitH':\n    case 'FitBH':\n      return {\n        bottomOffset: destArray[2],\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: exports.SpecialZoomLevel.PageWidth\n      };\n\n    default:\n      return {\n        bottomOffset: 0,\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: 1\n      };\n  }\n};\n\nvar pageOutlinesMap = new Map();\nvar pagesMap = new Map();\n\nvar generateRefKey = function (doc, outline) {\n  return \"\".concat(doc.loadingTask.docId, \"___\").concat(outline.num, \"R\").concat(outline.gen === 0 ? '' : outline.gen);\n};\n\nvar getPageIndex = function (doc, outline) {\n  return pageOutlinesMap.get(generateRefKey(doc, outline)) || null;\n};\n\nvar cacheOutlineRef = function (doc, outline, pageIndex) {\n  pageOutlinesMap.set(generateRefKey(doc, outline), pageIndex);\n};\n\nvar clearPagesCache = function () {\n  pageOutlinesMap.clear();\n  pagesMap.clear();\n};\n\nvar getPage = function (doc, pageIndex) {\n  if (!doc) {\n    return Promise.reject('The document is not loaded yet');\n  }\n\n  var pageKey = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\n  var page = pagesMap.get(pageKey);\n\n  if (page) {\n    return Promise.resolve(page);\n  }\n\n  return new Promise(function (resolve, _) {\n    doc.getPage(pageIndex + 1).then(function (page) {\n      pagesMap.set(pageKey, page);\n\n      if (page.ref) {\n        cacheOutlineRef(doc, page.ref, pageIndex);\n      }\n\n      resolve(page);\n    });\n  });\n};\n\nvar getDestination = function (doc, dest) {\n  return new Promise(function (res) {\n    new Promise(function (resolve) {\n      if (typeof dest === 'string') {\n        doc.getDestination(dest).then(function (destArray) {\n          resolve(destArray);\n        });\n      } else {\n        resolve(dest);\n      }\n    }).then(function (destArray) {\n      if ('object' === typeof destArray[0] && destArray[0] !== null) {\n        var outlineRef_1 = destArray[0];\n        var pageIndex = getPageIndex(doc, outlineRef_1);\n\n        if (pageIndex === null) {\n          doc.getPageIndex(outlineRef_1).then(function (pageIndex) {\n            cacheOutlineRef(doc, outlineRef_1, pageIndex);\n            getDestination(doc, dest).then(function (result) {\n              return res(result);\n            });\n          });\n        } else {\n          res(normalizeDestination(pageIndex, destArray));\n        }\n      } else {\n        var target = normalizeDestination(destArray[0], destArray);\n        res(target);\n      }\n    });\n  });\n};\n\nvar Link = function (_a) {\n  var annotation = _a.annotation,\n      doc = _a.doc,\n      page = _a.page,\n      viewport = _a.viewport,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n\n  var link = function (e) {\n    e.preventDefault();\n    annotation.action ? onExecuteNamedAction(annotation.action) : getDestination(doc, annotation.dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          leftOffset = target.leftOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(pageIndex, bottomOffset, leftOffset, scaleTo);\n    });\n  };\n\n  var isRenderable = !!(annotation.url || annotation.dest || annotation.action || annotation.unsafeUrl);\n  var externalUrl = annotation.url || annotation.unsafeUrl;\n  var attrs = externalUrl ? {\n    'data-target': 'external',\n    href: externalUrl,\n    rel: 'noopener noreferrer nofollow',\n    target: annotation.newWindow ? '_blank' : '',\n    title: externalUrl\n  } : {\n    href: '',\n    'data-annotation-link-dest': annotation.dest,\n    onClick: link\n  };\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: false,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--link\",\n      \"data-annotation-id\": annotation.id,\n      \"data-testid\": \"core__annotation--link-\".concat(annotation.id)\n    }), React__namespace.createElement(\"a\", __assign({}, attrs)));\n  });\n};\n\nvar Polygon = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polygon\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"polygon\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Polyline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polyline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"polyline\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Square = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--square\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"rect\", {\n      height: height - borderWidth,\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x: borderWidth / 2,\n      y: borderWidth / 2,\n      width: width - borderWidth\n    })), props.slot.children);\n  });\n};\n\nvar Squiggly = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--squiggly\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Stamp = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--stamp\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar StrikeOut = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--strike-out\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar CommentIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\"\n  }));\n};\n\nvar HelpIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M21.423 5.406L17.415 9.414\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14.587 6.585L18.607 2.565\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M5.405 21.424L9.413 17.416\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.585 14.588L2.577 18.596\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18.602 21.419L14.595 17.412\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M17.419 14.58L21.428 18.589\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M2.582 5.399L6.588 9.406\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M9.421 6.581L5.412 2.572\"\n  }));\n};\n\nvar KeyIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\"\n  }));\n};\n\nvar NoteIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6 4.5L6 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18 4.5L18 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10 4.5L10 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14 4.5L14 0.5\"\n  }));\n};\n\nvar ParagraphIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M17.5 0.498L17.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10.5 0.498L10.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\"\n  }));\n};\n\nvar TriangleIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\"\n  }));\n};\n\nvar Text = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var name = annotation.name ? annotation.name.toLowerCase() : '';\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), name && React__namespace.createElement(\"div\", {\n      className: \"rpv-core__annotation-text-icon\"\n    }, name === 'check' && React__namespace.createElement(CheckIcon, null), name === 'comment' && React__namespace.createElement(CommentIcon, null), name === 'help' && React__namespace.createElement(HelpIcon, null), name === 'insert' && React__namespace.createElement(TriangleIcon, null), name === 'key' && React__namespace.createElement(KeyIcon, null), name === 'note' && React__namespace.createElement(NoteIcon, null), (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null)), props.slot.children), childAnnotation && childAnnotation.annotationType === exports.AnnotationType.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Underline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--underline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar AnnotationLayerBody = function (_a) {\n  var annotations = _a.annotations,\n      containerRef = _a.containerRef,\n      doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var viewport = page.getViewport({\n    rotation: rotation,\n    scale: scale\n  });\n  var clonedViewPort = viewport.clone({\n    dontFlip: true\n  });\n  var filterAnnotations = annotations.filter(function (annotation) {\n    return !annotation.parentId;\n  });\n  React__namespace.useEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    plugins.forEach(function (plugin) {\n      if (plugin.onAnnotationLayerRender) {\n        plugin.onAnnotationLayerRender({\n          annotations: filterAnnotations,\n          container: container,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale\n        });\n      }\n    });\n  }, []);\n  return React__namespace.createElement(React__namespace.Fragment, null, filterAnnotations.map(function (annotation) {\n    var childAnnotation = annotations.find(function (item) {\n      return item.parentId === annotation.id;\n    });\n\n    switch (annotation.annotationType) {\n      case exports.AnnotationType.Caret:\n        return React__namespace.createElement(Caret, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Circle:\n        return React__namespace.createElement(Circle, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.FileAttachment:\n        return React__namespace.createElement(FileAttachment, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.FreeText:\n        return React__namespace.createElement(FreeText, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Highlight:\n        return React__namespace.createElement(Highlight, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Ink:\n        return React__namespace.createElement(Ink, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Line:\n        return React__namespace.createElement(Line, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Link:\n        return React__namespace.createElement(Link, {\n          key: annotation.id,\n          annotation: annotation,\n          doc: doc,\n          page: page,\n          viewport: clonedViewPort,\n          onExecuteNamedAction: onExecuteNamedAction,\n          onJumpToDest: onJumpToDest\n        });\n\n      case exports.AnnotationType.Polygon:\n        return React__namespace.createElement(Polygon, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Polyline:\n        return React__namespace.createElement(Polyline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Popup:\n        return React__namespace.createElement(Popup, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Square:\n        return React__namespace.createElement(Square, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Squiggly:\n        return React__namespace.createElement(Squiggly, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Stamp:\n        return React__namespace.createElement(Stamp, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.StrikeOut:\n        return React__namespace.createElement(StrikeOut, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Text:\n        return React__namespace.createElement(Text, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Underline:\n        return React__namespace.createElement(Underline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      default:\n        return React__namespace.createElement(React__namespace.Fragment, {\n          key: annotation.id\n        });\n    }\n  }));\n};\n\nvar AnnotationLoader = function (_a) {\n  var page = _a.page,\n      renderAnnotations = _a.renderAnnotations;\n  var isMounted = useIsMounted();\n\n  var _b = React__namespace.useState({\n    loading: true,\n    annotations: []\n  }),\n      status = _b[0],\n      setStatus = _b[1];\n\n  React__namespace.useEffect(function () {\n    page.getAnnotations({\n      intent: 'display'\n    }).then(function (result) {\n      if (isMounted.current) {\n        setStatus({\n          loading: false,\n          annotations: result\n        });\n      }\n    });\n  }, []);\n  return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n  var doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var containerRef = React__namespace.useRef();\n\n  var renderAnnotations = function (annotations) {\n    return React__namespace.createElement(AnnotationLayerBody, {\n      annotations: annotations,\n      containerRef: containerRef,\n      doc: doc,\n      page: page,\n      pageIndex: pageIndex,\n      plugins: plugins,\n      rotation: rotation,\n      scale: scale,\n      onExecuteNamedAction: onExecuteNamedAction,\n      onJumpToDest: onJumpToDest\n    });\n  };\n\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__annotation-layer\"\n  }, React__namespace.createElement(AnnotationLoader, {\n    page: page,\n    renderAnnotations: renderAnnotations\n  }));\n};\n\nvar floatToRatio = function (x, limit) {\n  var _a, _b;\n\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n\n  var y = 1 / x;\n\n  if (y > limit) {\n    return [1, limit];\n  }\n\n  if (Math.floor(y) === y) {\n    return [1, y];\n  }\n\n  var value = x > 1 ? y : x;\n  var a = 0;\n  var b = 1;\n  var c = 1;\n  var d = 1;\n\n  while (true) {\n    var numerator = a + c;\n    var denominator = b + d;\n\n    if (denominator > limit) {\n      break;\n    }\n\n    value <= numerator / denominator ? (_a = [numerator, denominator], c = _a[0], d = _a[1], _a) : (_b = [numerator, denominator], a = _b[0], b = _b[1], _b);\n  }\n\n  var middle = (a / b + c / d) / 2;\n  return value < middle ? value === x ? [a, b] : [b, a] : value === x ? [c, d] : [d, c];\n};\n\nvar roundToDivide = function (a, b) {\n  var remainder = a % b;\n  return remainder === 0 ? a : Math.floor(a - remainder);\n};\n\nvar MAX_CANVAS_SIZE = 4096 * 4096;\n\nvar CanvasLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width,\n      onRenderCanvasCompleted = _a.onRenderCanvasCompleted;\n  var canvasRef = React__namespace.useRef();\n  var renderTask = React__namespace.useRef();\n  useIsomorphicLayoutEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvasEle = canvasRef.current;\n    plugins.forEach(function (plugin) {\n      if (plugin.onCanvasLayerRender) {\n        plugin.onCanvasLayerRender({\n          ele: canvasEle,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale,\n          status: exports.LayerRenderStatus.PreRender\n        });\n      }\n    });\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    var outputScale = window.devicePixelRatio || 1;\n    var maxScale = Math.sqrt(MAX_CANVAS_SIZE / (viewport.width * viewport.height));\n    var shouldScaleByCSS = outputScale > maxScale;\n    shouldScaleByCSS ? canvasEle.style.transform = \"scale(1, 1)\" : canvasEle.style.removeProperty('transform');\n    var possibleScale = Math.min(maxScale, outputScale);\n\n    var _a = floatToRatio(possibleScale, 8),\n        x = _a[0],\n        y = _a[1];\n\n    canvasEle.width = roundToDivide(viewport.width * possibleScale, x);\n    canvasEle.height = roundToDivide(viewport.height * possibleScale, x);\n    canvasEle.style.width = \"\".concat(roundToDivide(viewport.width, y), \"px\");\n    canvasEle.style.height = \"\".concat(roundToDivide(viewport.height, y), \"px\");\n    canvasEle.hidden = true;\n    var canvasContext = canvasEle.getContext('2d', {\n      alpha: false\n    });\n    var transform = shouldScaleByCSS || outputScale !== 1 ? [possibleScale, 0, 0, possibleScale, 0, 0] : null;\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      transform: transform,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      canvasEle.hidden = false;\n      plugins.forEach(function (plugin) {\n        if (plugin.onCanvasLayerRender) {\n          plugin.onCanvasLayerRender({\n            ele: canvasEle,\n            pageIndex: pageIndex,\n            rotation: rotation,\n            scale: scale,\n            status: exports.LayerRenderStatus.DidRender\n          });\n        }\n      });\n      onRenderCanvasCompleted();\n    }, function () {\n      canvasEle.hidden = false;\n      onRenderCanvasCompleted();\n    });\n    return function () {\n      var _a;\n\n      (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n\n      if (canvasEle) {\n        canvasEle.width = 0;\n        canvasEle.height = 0;\n      }\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__canvas-layer\",\n    style: {\n      height: \"\".concat(height, \"px\"),\n      width: \"\".concat(width, \"px\")\n    }\n  }, React__namespace.createElement(\"canvas\", {\n    ref: canvasRef\n  }));\n};\n\nvar SvgLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var containerRef = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.innerHTML = '';\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var containerEle = containerRef.current;\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    page.getOperatorList().then(function (operatorList) {\n      empty();\n      var graphic = new PdfJsApi__namespace.SVGGraphics(page.commonObjs, page.objs);\n      graphic.getSVG(operatorList, viewport).then(function (svg) {\n        svg.style.height = \"\".concat(height, \"px\");\n        svg.style.width = \"\".concat(width, \"px\");\n        containerEle.appendChild(svg);\n      });\n    });\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__svg-layer\",\n    ref: containerRef\n  });\n};\n\nvar TextLayer = function (_a) {\n  var page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onRenderTextCompleted = _a.onRenderTextCompleted;\n  var containerRef = React__namespace.useRef();\n  var renderTask = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var spans = [].slice.call(containerEle.querySelectorAll('span.rpv-core__text-layer-text'));\n    spans.forEach(function (span) {\n      return containerEle.removeChild(span);\n    });\n    var breaks = [].slice.call(containerEle.querySelectorAll('br[role=\"presentation\"]'));\n    breaks.forEach(function (br) {\n      return containerEle.removeChild(br);\n    });\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.removeAttribute('data-testid');\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    plugins.forEach(function (plugin) {\n      if (plugin.onTextLayerRender) {\n        plugin.onTextLayerRender({\n          ele: containerEle,\n          pageIndex: pageIndex,\n          scale: scale,\n          status: exports.LayerRenderStatus.PreRender\n        });\n      }\n    });\n    page.getTextContent().then(function (textContent) {\n      empty();\n      renderTask.current = PdfJsApi__namespace.renderTextLayer({\n        container: containerEle,\n        textContent: textContent,\n        viewport: viewport,\n        enhanceTextSelection: true\n      });\n      renderTask.current.promise.then(function () {\n        containerEle.setAttribute('data-testid', \"core__text-layer-\".concat(pageIndex));\n        var spans = [].slice.call(containerEle.children);\n        spans.forEach(function (span) {\n          return span.classList.add('rpv-core__text-layer-text');\n        });\n        plugins.forEach(function (plugin) {\n          if (plugin.onTextLayerRender) {\n            plugin.onTextLayerRender({\n              ele: containerEle,\n              pageIndex: pageIndex,\n              scale: scale,\n              status: exports.LayerRenderStatus.DidRender\n            });\n          }\n        });\n        onRenderTextCompleted();\n      }, function () {\n        containerEle.removeAttribute('data-testid');\n        onRenderTextCompleted();\n      });\n    });\n    return function () {\n      var _a;\n\n      (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__text-layer\",\n    ref: containerRef\n  });\n};\n\nvar PageLayer = function (_a) {\n  var doc = _a.doc,\n      height = _a.height,\n      measureRef = _a.measureRef,\n      pageIndex = _a.pageIndex,\n      pageRotation = _a.pageRotation,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      shouldRender = _a.shouldRender,\n      width = _a.width,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest,\n      onRenderCompleted = _a.onRenderCompleted,\n      onRotatePage = _a.onRotatePage;\n  var isMounted = useIsMounted();\n\n  var _b = React__namespace.useState({\n    page: null,\n    pageHeight: height,\n    pageWidth: width,\n    viewportRotation: 0\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var _c = React__namespace.useState(false),\n      canvasLayerRendered = _c[0],\n      setCanvasLayerRendered = _c[1];\n\n  var _d = React__namespace.useState(false),\n      textLayerRendered = _d[0],\n      setTextLayerRendered = _d[1];\n\n  var page = pageSize.page,\n      pageHeight = pageSize.pageHeight,\n      pageWidth = pageSize.pageWidth;\n  var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n  var scaledWidth = pageWidth * scale;\n  var scaledHeight = pageHeight * scale;\n  var w = isVertical ? scaledWidth : scaledHeight;\n  var h = isVertical ? scaledHeight : scaledWidth;\n  var rotationValue = (pageSize.viewportRotation + rotation + pageRotation) % 360;\n\n  var determinePageSize = function () {\n    getPage(doc, pageIndex).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      isMounted.current && setPageSize({\n        page: pdfPage,\n        pageHeight: viewport.height,\n        pageWidth: viewport.width,\n        viewportRotation: viewport.rotation\n      });\n    });\n  };\n\n  var defaultPageRenderer = function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, props.canvasLayer.children, props.textLayer.children, props.annotationLayer.children);\n  };\n\n  var renderPageLayer = renderPage || defaultPageRenderer;\n\n  var handleRenderCanvasCompleted = function () {\n    if (isMounted.current) {\n      setCanvasLayerRendered(true);\n    }\n  };\n\n  var handleRenderTextCompleted = function () {\n    if (isMounted.current) {\n      setTextLayerRendered(true);\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    setPageSize({\n      page: null,\n      pageHeight: height,\n      pageWidth: width,\n      viewportRotation: 0\n    });\n    setCanvasLayerRendered(false);\n    setTextLayerRendered(false);\n  }, [pageRotation, rotation, scale]);\n  React__namespace.useEffect(function () {\n    if (shouldRender && isMounted.current && !page) {\n      determinePageSize();\n    }\n  }, [shouldRender, page]);\n  React__namespace.useEffect(function () {\n    if (canvasLayerRendered && textLayerRendered) {\n      onRenderCompleted(pageIndex);\n    }\n  }, [canvasLayerRendered, textLayerRendered]);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__page-layer\",\n    \"data-testid\": \"core__page-layer-\".concat(pageIndex),\n    ref: measureRef,\n    style: {\n      height: \"\".concat(h, \"px\"),\n      width: \"\".concat(w, \"px\")\n    }\n  }, !page ? React__namespace.createElement(Spinner, {\n    testId: \"core__page-layer-loading-\".concat(pageIndex)\n  }) : React__namespace.createElement(React__namespace.Fragment, null, renderPageLayer({\n    annotationLayer: {\n      attrs: {},\n      children: React__namespace.createElement(AnnotationLayer, {\n        doc: doc,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationValue,\n        scale: scale,\n        onExecuteNamedAction: onExecuteNamedAction,\n        onJumpToDest: onJumpToDest\n      })\n    },\n    canvasLayer: {\n      attrs: {},\n      children: React__namespace.createElement(CanvasLayer, {\n        height: h,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationValue,\n        scale: scale,\n        width: w,\n        onRenderCanvasCompleted: handleRenderCanvasCompleted\n      })\n    },\n    canvasLayerRendered: canvasLayerRendered,\n    doc: doc,\n    height: h,\n    pageIndex: pageIndex,\n    rotation: rotationValue,\n    scale: scale,\n    svgLayer: {\n      attrs: {},\n      children: React__namespace.createElement(SvgLayer, {\n        height: h,\n        page: page,\n        rotation: rotationValue,\n        scale: scale,\n        width: w\n      })\n    },\n    textLayer: {\n      attrs: {},\n      children: React__namespace.createElement(TextLayer, {\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationValue,\n        scale: scale,\n        onRenderTextCompleted: handleRenderTextCompleted\n      })\n    },\n    textLayerRendered: textLayerRendered,\n    width: w,\n    markRendered: onRenderCompleted,\n    onRotatePage: function (direction) {\n      return onRotatePage(pageIndex, direction);\n    }\n  }), plugins.map(function (plugin, idx) {\n    return plugin.renderPageLayer ? React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    }, plugin.renderPageLayer({\n      doc: doc,\n      height: h,\n      pageIndex: pageIndex,\n      rotation: rotationValue,\n      scale: scale,\n      width: w\n    })) : React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    });\n  })));\n};\n\nvar getFileExt = function (url) {\n  var str = url.split(/\\./).pop();\n  return str ? str.toLowerCase() : '';\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING$1 = 8;\n\nvar calculateScale = function (container, pageHeight, pageWidth, scale) {\n  switch (scale) {\n    case exports.SpecialZoomLevel.ActualSize:\n      return 1;\n\n    case exports.SpecialZoomLevel.PageFit:\n      return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (container.clientHeight - 2 * PAGE_PADDING$1) / pageHeight);\n\n    case exports.SpecialZoomLevel.PageWidth:\n      return (container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\n  }\n};\n\nvar NUM_OVERSCAN_PAGES = 3;\nvar PAGE_PADDING = 16;\n\nvar Inner = function (_a) {\n  var currentFile = _a.currentFile,\n      defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      initialPage = _a.initialPage,\n      pageSize = _a.pageSize,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      scrollMode = _a.scrollMode,\n      viewerState = _a.viewerState,\n      onDocumentLoad = _a.onDocumentLoad,\n      onOpenFile = _a.onOpenFile,\n      onPageChange = _a.onPageChange,\n      onRotate = _a.onRotate,\n      onRotatePage = _a.onRotatePage,\n      onZoom = _a.onZoom;\n  var numPages = doc.numPages;\n  var docId = doc.loadingTask.docId;\n  var l10n = React__namespace.useContext(LocalizationContext).l10n;\n  var themeContext = React__namespace.useContext(ThemeContext);\n  var isRtl = themeContext.direction === exports.TextDirection.RightToLeft;\n  var containerRef = React__namespace.useRef();\n  var pagesRef = React__namespace.useRef();\n\n  var _b = React__namespace.useState(0),\n      currentPage = _b[0],\n      setCurrentPage = _b[1];\n\n  var _c = React__namespace.useState(0),\n      rotation = _c[0],\n      setRotation = _c[1];\n\n  var _d = React__namespace.useState(false),\n      pagesRotationChanged = _d[0],\n      setPagesRotationChanged = _d[1];\n\n  var _e = React__namespace.useState(new Map()),\n      pagesRotation = _e[0],\n      setPagesRotation = _e[1];\n\n  var _f = React__namespace.useState(scrollMode),\n      currentScrollMode = _f[0],\n      setCurrentScrollMode = _f[1];\n\n  var stateRef = React__namespace.useRef(viewerState);\n\n  var _g = React__namespace.useState(pageSize.scale),\n      scale = _g[0],\n      setScale = _g[1];\n\n  var keepSpecialZoomLevelRef = React__namespace.useRef(typeof defaultScale === 'string' ? defaultScale : null);\n\n  var _h = React__namespace.useState(-1),\n      renderPageIndex = _h[0],\n      setRenderPageIndex = _h[1];\n\n  var renderQueueInstance = React__namespace.useMemo(function () {\n    return renderQueueService({\n      doc: doc,\n      queueName: 'core-pages',\n      priority: 0\n    });\n  }, [docId]);\n  var estimateSize = React__namespace.useCallback(function () {\n    var sizes = [pageSize.pageHeight, pageSize.pageWidth];\n    var rect = Math.abs(rotation) % 180 === 0 ? {\n      height: sizes[0],\n      width: sizes[1]\n    } : {\n      height: sizes[1],\n      width: sizes[0]\n    };\n    return {\n      height: rect.height * scale,\n      width: rect.width * scale\n    };\n  }, [rotation, scale]);\n  var setStartRange = React__namespace.useCallback(function (startIndex) {\n    return Math.max(startIndex - NUM_OVERSCAN_PAGES, 0);\n  }, []);\n  var setEndRange = React__namespace.useCallback(function (endIndex) {\n    return Math.min(endIndex + NUM_OVERSCAN_PAGES, numPages - 1);\n  }, [numPages]);\n  var transformSize = React__namespace.useCallback(function (size) {\n    return {\n      height: size.height + PAGE_PADDING,\n      width: size.width + PAGE_PADDING\n    };\n  }, []);\n  var virtualizer = useVirtual({\n    estimateSize: estimateSize,\n    isRtl: isRtl,\n    numberOfItems: numPages,\n    parentRef: pagesRef,\n    scrollMode: currentScrollMode,\n    setStartRange: setStartRange,\n    setEndRange: setEndRange,\n    transformSize: transformSize\n  });\n  var handlePagesResize = useDebounceCallback(function (_) {\n    if (keepSpecialZoomLevelRef.current) {\n      setRenderPageIndex(-1);\n      zoom(keepSpecialZoomLevelRef.current);\n    }\n  }, 200);\n  useTrackResize({\n    targetRef: pagesRef,\n    onResize: handlePagesResize\n  });\n  var pageWidth = pageSize.pageWidth,\n      pageHeight = pageSize.pageHeight;\n\n  var setViewerState = function (viewerState) {\n    var newState = viewerState;\n    plugins.forEach(function (plugin) {\n      if (plugin.onViewerStateChange) {\n        newState = plugin.onViewerStateChange(newState);\n      }\n    });\n    stateRef.current = newState;\n  };\n\n  var getPagesContainer = function () {\n    return pagesRef.current;\n  };\n\n  var getViewerState = function () {\n    return stateRef.current;\n  };\n\n  var jumpToDestination = React__namespace.useCallback(function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n    var pagesContainer = pagesRef.current;\n    var currentState = stateRef.current;\n\n    if (!pagesContainer || !currentState) {\n      return;\n    }\n\n    getPage(doc, pageIndex).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var top = 0;\n      var bottom = (typeof bottomOffset === 'function' ? bottomOffset(viewport.width, viewport.height) : bottomOffset) || 0;\n      var left = (typeof leftOffset === 'function' ? leftOffset(viewport.width, viewport.height) : leftOffset) || 0;\n      var updateScale = currentState.scale;\n\n      switch (scaleTo) {\n        case exports.SpecialZoomLevel.PageFit:\n          top = 0;\n          left = 0;\n          zoom(exports.SpecialZoomLevel.PageFit);\n          break;\n\n        case exports.SpecialZoomLevel.PageWidth:\n          updateScale = calculateScale(pagesContainer, pageHeight, pageWidth, exports.SpecialZoomLevel.PageWidth);\n          top = (viewport.height - bottom) * updateScale;\n          left = left * updateScale;\n          zoom(updateScale);\n          break;\n\n        default:\n          var boundingRect = viewport.convertToViewportPoint(left, bottom);\n          left = Math.max(boundingRect[0] * currentState.scale, 0);\n          top = Math.max(boundingRect[1] * currentState.scale, 0);\n          break;\n      }\n\n      switch (currentState.scrollMode) {\n        case exports.ScrollMode.Horizontal:\n          virtualizer.scrollToItem(pageIndex, {\n            left: left,\n            top: 0\n          });\n          break;\n\n        case exports.ScrollMode.Vertical:\n        default:\n          virtualizer.scrollToItem(pageIndex, {\n            left: 0,\n            top: top\n          });\n          break;\n      }\n    });\n  }, []);\n  var jumpToPage = React__namespace.useCallback(function (pageIndex) {\n    if (0 <= pageIndex && pageIndex < numPages) {\n      virtualizer.scrollToItem(pageIndex, {\n        left: 0,\n        top: 0\n      });\n    }\n  }, []);\n  var openFile = React__namespace.useCallback(function (file) {\n    if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n      return;\n    }\n\n    new Promise(function (resolve) {\n      var reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onload = function () {\n        var bytes = new Uint8Array(reader.result);\n        resolve(bytes);\n      };\n    }).then(function (data) {\n      onOpenFile(file.name, data);\n    });\n  }, [onOpenFile]);\n  var rotate = React__namespace.useCallback(function (direction) {\n    var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n    var currentRotation = stateRef.current.rotation;\n    var updateRotation = currentRotation === 360 || currentRotation === -360 ? degrees : currentRotation + degrees;\n    renderQueueInstance.resetQueue();\n    setRotation(updateRotation);\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      pagesRotation: pagesRotation,\n      rotation: updateRotation,\n      scale: scale,\n      scrollMode: currentScrollMode\n    });\n    onRotate({\n      direction: direction,\n      doc: doc,\n      rotation: updateRotation\n    });\n  }, []);\n  var rotatePage = React__namespace.useCallback(function (pageIndex, direction) {\n    var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n    var rotations = stateRef.current.pagesRotation;\n    var currentPageRotation = rotations.has(pageIndex) ? rotations.get(pageIndex) : 0;\n    var finalRotation = currentPageRotation + degrees;\n    var updateRotations = rotations.set(pageIndex, finalRotation);\n    setPagesRotation(updateRotations);\n    setPagesRotationChanged(function (value) {\n      return !value;\n    });\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      pagesRotation: updateRotations,\n      rotatedPage: pageIndex,\n      rotation: rotation,\n      scale: scale,\n      scrollMode: currentScrollMode\n    });\n    onRotatePage({\n      direction: direction,\n      doc: doc,\n      pageIndex: pageIndex,\n      rotation: finalRotation\n    });\n    renderQueueInstance.markRendering(pageIndex);\n    setRenderPageIndex(pageIndex);\n  }, []);\n  var switchScrollMode = React__namespace.useCallback(function (scrollMode) {\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: stateRef.current.pageIndex,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      pagesRotation: pagesRotation,\n      rotation: rotation,\n      scale: scale,\n      scrollMode: scrollMode\n    });\n    setCurrentScrollMode(scrollMode);\n  }, []);\n  var zoom = React__namespace.useCallback(function (newScale) {\n    renderQueueInstance.resetQueue();\n    var pagesEle = pagesRef.current;\n    var updateScale = pagesEle ? typeof newScale === 'string' ? calculateScale(pagesEle, pageHeight, pageWidth, newScale) : newScale : 1;\n    keepSpecialZoomLevelRef.current = typeof newScale === 'string' ? newScale : null;\n    pagesEle.scrollTop = pagesEle.scrollTop * updateScale / stateRef.current.scale;\n    pagesEle.scrollLeft = pagesEle.scrollLeft * updateScale / stateRef.current.scale;\n    setScale(updateScale);\n    onZoom({\n      doc: doc,\n      scale: updateScale\n    });\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      pagesRotation: pagesRotation,\n      rotation: rotation,\n      scale: updateScale,\n      scrollMode: currentScrollMode\n    });\n  }, []);\n  React__namespace.useEffect(function () {\n    var pluginMethods = {\n      getPagesContainer: getPagesContainer,\n      getViewerState: getViewerState,\n      jumpToDestination: jumpToDestination,\n      jumpToPage: jumpToPage,\n      openFile: openFile,\n      rotate: rotate,\n      rotatePage: rotatePage,\n      setViewerState: setViewerState,\n      switchScrollMode: switchScrollMode,\n      zoom: zoom\n    };\n    plugins.forEach(function (plugin) {\n      if (plugin.install) {\n        plugin.install(pluginMethods);\n      }\n    });\n    return function () {\n      plugins.forEach(function (plugin) {\n        if (plugin.uninstall) {\n          plugin.uninstall(pluginMethods);\n        }\n      });\n    };\n  }, [docId]);\n  React__namespace.useEffect(function () {\n    onDocumentLoad({\n      doc: doc,\n      file: currentFile\n    });\n    plugins.forEach(function (plugin) {\n      plugin.onDocumentLoad && plugin.onDocumentLoad({\n        doc: doc,\n        file: currentFile\n      });\n    });\n\n    if (initialPage) {\n      jumpToPage(initialPage);\n    }\n  }, [docId]);\n  React__namespace.useEffect(function () {\n    var latestPage = stateRef.current.pageIndex;\n\n    if (latestPage > -1) {\n      virtualizer.scrollToItem(latestPage, {\n        left: 0,\n        top: 0\n      });\n    }\n  }, [currentScrollMode]);\n  React__namespace.useEffect(function () {\n    var startRange = virtualizer.startRange,\n        endRange = virtualizer.endRange,\n        maxVisbilityIndex = virtualizer.maxVisbilityIndex,\n        virtualItems = virtualizer.virtualItems;\n    var currentPage = maxVisbilityIndex;\n    setCurrentPage(currentPage);\n\n    if (stateRef.current.pageIndex !== currentPage) {\n      onPageChange({\n        currentPage: currentPage,\n        doc: doc\n      });\n    }\n\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      pagesRotation: pagesRotation,\n      rotation: rotation,\n      scale: scale,\n      scrollMode: currentScrollMode\n    });\n    renderQueueInstance.setRange(startRange, endRange);\n\n    var _loop_1 = function (i) {\n      var item = virtualItems.find(function (item) {\n        return item.index === i;\n      });\n\n      if (item) {\n        renderQueueInstance.setVisibility(i, item.visibility);\n      }\n    };\n\n    for (var i = startRange; i <= endRange; i++) {\n      _loop_1(i);\n    }\n\n    renderNextPage();\n  }, [virtualizer.startRange, virtualizer.endRange, virtualizer.maxVisbilityIndex, pagesRotationChanged, rotation, scale]);\n  var handlePageRenderCompleted = React__namespace.useCallback(function (pageIndex) {\n    renderQueueInstance.markRendered(pageIndex);\n    renderNextPage();\n  }, []);\n\n  var renderNextPage = function () {\n    var nextPage = renderQueueInstance.getHighestPriorityPage();\n\n    if (nextPage > -1) {\n      renderQueueInstance.markRendering(nextPage);\n      setRenderPageIndex(nextPage);\n    }\n  };\n\n  var executeNamedAction = function (action) {\n    var previousPage = currentPage - 1;\n    var nextPage = currentPage + 1;\n\n    switch (action) {\n      case 'FirstPage':\n        jumpToPage(0);\n        break;\n\n      case 'LastPage':\n        jumpToPage(numPages - 1);\n        break;\n\n      case 'NextPage':\n        nextPage < numPages && jumpToPage(nextPage);\n        break;\n\n      case 'PrevPage':\n        previousPage >= 0 && jumpToPage(previousPage);\n        break;\n    }\n  };\n\n  var renderViewer = React__namespace.useCallback(function () {\n    var pageLabel = l10n && l10n.core ? l10n.core.pageLabel : 'Page {{pageIndex}}';\n    var slot = {\n      attrs: {\n        'data-testid': 'core__inner-container',\n        ref: containerRef,\n        style: {\n          height: '100%'\n        }\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null),\n      subSlot: {\n        attrs: {\n          'data-testid': 'core__inner-pages',\n          className: classNames({\n            'rpv-core__inner-pages': true,\n            'rpv-core__inner-pages--horizontal': currentScrollMode === exports.ScrollMode.Horizontal,\n            'rpv-core__inner-pages--rtl': isRtl,\n            'rpv-core__inner-pages--vertical': currentScrollMode === exports.ScrollMode.Vertical,\n            'rpv-core__inner-pages--wrapped': currentScrollMode === exports.ScrollMode.Wrapped\n          }),\n          ref: pagesRef,\n          style: {\n            height: '100%',\n            overflow: 'auto',\n            position: 'relative'\n          }\n        },\n        children: React__namespace.createElement(\"div\", {\n          style: virtualizer.getContainerStyles()\n        }, virtualizer.virtualItems.map(function (item) {\n          return React__namespace.createElement(\"div\", {\n            \"aria-label\": pageLabel.replace('{{pageIndex}}', \"\".concat(item.index + 1)),\n            className: \"rpv-core__inner-page\",\n            key: item.index,\n            role: \"region\",\n            style: virtualizer.getItemStyles(item)\n          }, React__namespace.createElement(PageLayer, {\n            doc: doc,\n            height: pageHeight,\n            measureRef: item.measureRef,\n            pageIndex: item.index,\n            pageRotation: pagesRotation.has(item.index) ? pagesRotation.get(item.index) : 0,\n            plugins: plugins,\n            renderPage: renderPage,\n            rotation: rotation,\n            scale: scale,\n            shouldRender: renderPageIndex === item.index,\n            width: pageWidth,\n            onExecuteNamedAction: executeNamedAction,\n            onJumpToDest: jumpToDestination,\n            onRenderCompleted: handlePageRenderCompleted,\n            onRotatePage: rotatePage\n          }));\n        }))\n      }\n    };\n    plugins.forEach(function (plugin) {\n      if (plugin.renderViewer) {\n        slot = plugin.renderViewer({\n          containerRef: containerRef,\n          doc: doc,\n          pageHeight: pageHeight,\n          pageWidth: pageWidth,\n          pagesRotation: pagesRotation,\n          rotation: rotation,\n          slot: slot,\n          themeContext: themeContext,\n          jumpToPage: jumpToPage,\n          openFile: openFile,\n          rotate: rotate,\n          rotatePage: rotatePage,\n          switchScrollMode: switchScrollMode,\n          zoom: zoom\n        });\n      }\n    });\n    return slot;\n  }, [plugins, virtualizer]);\n  var renderSlot = React__namespace.useCallback(function (slot) {\n    return React__namespace.createElement(\"div\", __assign({}, slot.attrs, {\n      style: slot.attrs && slot.attrs.style ? slot.attrs.style : {}\n    }), slot.children, slot.subSlot && renderSlot(slot.subSlot));\n  }, []);\n  React__namespace.useEffect(function () {\n    return function () {\n      renderQueueInstance.cleanup();\n      clearPagesCache();\n    };\n  }, []);\n  return renderSlot(renderViewer());\n};\n\nvar LEVELS = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6, 5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10];\n\nvar decrease = function (currentLevel) {\n  var found = LEVELS.findIndex(function (item) {\n    return item >= currentLevel;\n  });\n  return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar RESERVE_HEIGHT = 45;\nvar RESERVE_WIDTH = 45;\n\nvar PageSizeCalculator = function (_a) {\n  var defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      render = _a.render,\n      scrollMode = _a.scrollMode;\n  var pagesRef = React__namespace.useRef();\n\n  var _b = React__namespace.useState({\n    pageHeight: 0,\n    pageWidth: 0,\n    scale: 1\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  React__namespace.useLayoutEffect(function () {\n    getPage(doc, 0).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      var w = viewport.width;\n      var h = viewport.height;\n      var pagesEle = pagesRef.current;\n\n      if (!pagesEle) {\n        return;\n      }\n\n      var parentEle = pagesEle.parentElement;\n      var scaleWidth = (parentEle.clientWidth - RESERVE_WIDTH) / w;\n      var scaleHeight = (parentEle.clientHeight - RESERVE_HEIGHT) / h;\n      var scaled = scaleWidth;\n\n      switch (scrollMode) {\n        case exports.ScrollMode.Horizontal:\n          scaled = Math.min(scaleWidth, scaleHeight);\n          break;\n\n        case exports.ScrollMode.Vertical:\n        default:\n          scaled = scaleWidth;\n          break;\n      }\n\n      var scale = defaultScale ? typeof defaultScale === 'string' ? calculateScale(parentEle, h, w, defaultScale) : defaultScale : decrease(scaled);\n      setPageSize({\n        pageHeight: h,\n        pageWidth: w,\n        scale: scale\n      });\n    });\n  }, [doc]);\n  var pageWidth = pageSize.pageWidth;\n  return pageWidth === 0 ? React__namespace.createElement(\"div\", {\n    className: \"rpv-core__page-size-calculator\",\n    \"data-testid\": \"core__page-size-calculating\",\n    ref: pagesRef\n  }, React__namespace.createElement(Spinner, null)) : render(pageSize);\n};\n\nvar LoadingStatus = function () {\n  function LoadingStatus() {}\n\n  return LoadingStatus;\n}();\n\nvar SubmitPassword;\n\n(function (SubmitPassword) {\n  SubmitPassword[SubmitPassword[\"REQUIRE_PASSWORD\"] = 0] = \"REQUIRE_PASSWORD\";\n  SubmitPassword[SubmitPassword[\"WRONG_PASSWORD\"] = 1] = \"WRONG_PASSWORD\";\n})(SubmitPassword || (SubmitPassword = {}));\n\nvar AskForPasswordState = function (_super) {\n  __extends(AskForPasswordState, _super);\n\n  function AskForPasswordState(verifyPassword, submitPassword) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPassword = verifyPassword;\n    _this.submitPassword = submitPassword;\n    return _this;\n  }\n\n  return AskForPasswordState;\n}(LoadingStatus);\n\nvar AskingPassword = function (_a) {\n  var submitPassword = _a.submitPassword,\n      verifyPassword = _a.verifyPassword,\n      onDocumentAskPassword = _a.onDocumentAskPassword;\n  var l10n = React__namespace.useContext(LocalizationContext).l10n;\n\n  var _b = React__namespace.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var submit = function () {\n    return verifyPassword(password);\n  };\n\n  var handleKeyDown = function (e) {\n    if (e.key === 'Enter') {\n      submit();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    if (onDocumentAskPassword) {\n      onDocumentAskPassword({\n        verifyPassword: verifyPassword\n      });\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-wrapper\"\n  }, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__asking-password': true,\n      'rpv-core__asking-password--rtl': isRtl\n    })\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-message\"\n  }, submitPassword === SubmitPassword.REQUIRE_PASSWORD && l10n.core.askingPassword.requirePasswordToOpen, submitPassword === SubmitPassword.WRONG_PASSWORD && l10n.core.wrongPassword.tryAgain), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-body\"\n  }, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__asking-password-input': true,\n      'rpv-core__asking-password-input--ltr': !isRtl,\n      'rpv-core__asking-password-input--rtl': isRtl\n    })\n  }, React__namespace.createElement(TextBox, {\n    testId: \"core__asking-password-input\",\n    type: \"password\",\n    value: password,\n    onChange: setPassword,\n    onKeyDown: handleKeyDown\n  })), React__namespace.createElement(PrimaryButton, {\n    onClick: submit\n  }, l10n.core.askingPassword.submit))));\n};\n\nvar CompletedState = function (_super) {\n  __extends(CompletedState, _super);\n\n  function CompletedState(doc) {\n    var _this = _super.call(this) || this;\n\n    _this.doc = doc;\n    return _this;\n  }\n\n  return CompletedState;\n}(LoadingStatus);\n\nvar FailureState = function (_super) {\n  __extends(FailureState, _super);\n\n  function FailureState(error) {\n    var _this = _super.call(this) || this;\n\n    _this.error = error;\n    return _this;\n  }\n\n  return FailureState;\n}(LoadingStatus);\n\nvar LoadingState = function (_super) {\n  __extends(LoadingState, _super);\n\n  function LoadingState(percentages) {\n    var _this = _super.call(this) || this;\n\n    _this.percentages = percentages;\n    return _this;\n  }\n\n  return LoadingState;\n}(LoadingStatus);\n\nvar DocumentLoader = function (_a) {\n  var characterMap = _a.characterMap,\n      file = _a.file,\n      httpHeaders = _a.httpHeaders,\n      render = _a.render,\n      renderError = _a.renderError,\n      renderLoader = _a.renderLoader,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      withCredentials = _a.withCredentials,\n      onDocumentAskPassword = _a.onDocumentAskPassword;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var _b = React__namespace.useState(new LoadingState(0)),\n      status = _b[0],\n      setStatus = _b[1];\n\n  var _c = React__namespace.useState(0),\n      percentages = _c[0],\n      setPercentages = _c[1];\n\n  var _d = React__namespace.useState(null),\n      loadedDocument = _d[0],\n      setLoadedDocument = _d[1];\n\n  var isMounted = useIsMounted();\n  React__namespace.useEffect(function () {\n    setStatus(new LoadingState(0));\n    var worker = new PdfJsApi__namespace.PDFWorker({\n      name: \"PDFWorker_\".concat(Date.now())\n    });\n    var params = Object.assign({\n      httpHeaders: httpHeaders,\n      withCredentials: withCredentials,\n      worker: worker\n    }, 'string' === typeof file ? {\n      url: file\n    } : {\n      data: file\n    }, characterMap ? {\n      cMapUrl: characterMap.url,\n      cMapPacked: characterMap.isCompressed\n    } : {});\n    var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\n    var loadingTask = PdfJsApi__namespace.getDocument(transformParams);\n\n    loadingTask.onPassword = function (verifyPassword, reason) {\n      switch (reason) {\n        case PdfJsApi__namespace.PasswordResponses.NEED_PASSWORD:\n          isMounted.current && setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.REQUIRE_PASSWORD));\n          break;\n\n        case PdfJsApi__namespace.PasswordResponses.INCORRECT_PASSWORD:\n          isMounted.current && setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.WRONG_PASSWORD));\n          break;\n      }\n    };\n\n    loadingTask.onProgress = function (progress) {\n      progress.total > 0 ? isMounted.current && setPercentages(Math.min(100, 100 * progress.loaded / progress.total)) : isMounted.current && setPercentages(100);\n    };\n\n    loadingTask.promise.then(function (doc) {\n      return isMounted.current && setLoadedDocument(doc);\n    }, function (err) {\n      return isMounted.current && !worker.destroyed && setStatus(new FailureState({\n        message: err.message || 'Cannot load document',\n        name: err.name\n      }));\n    });\n    return function () {\n      loadingTask.destroy();\n      worker.destroy();\n    };\n  }, [file]);\n  React__namespace.useEffect(function () {\n    percentages === 100 && loadedDocument ? isMounted.current && setStatus(new CompletedState(loadedDocument)) : isMounted.current && setStatus(new LoadingState(percentages));\n  }, [percentages, loadedDocument]);\n\n  if (status instanceof AskForPasswordState) {\n    return React__namespace.createElement(AskingPassword, {\n      submitPassword: status.submitPassword,\n      verifyPassword: status.verifyPassword,\n      onDocumentAskPassword: onDocumentAskPassword\n    });\n  }\n\n  if (status instanceof CompletedState) {\n    return render(status.doc);\n  }\n\n  if (status instanceof FailureState) {\n    return renderError ? renderError(status.error) : React__namespace.createElement(\"div\", {\n      className: classNames({\n        'rpv-core__doc-error': true,\n        'rpv-core__doc-error--rtl': isRtl\n      })\n    }, React__namespace.createElement(\"div\", {\n      className: \"rpv-core__doc-error-text\"\n    }, status.error.message));\n  }\n\n  return React__namespace.createElement(\"div\", {\n    \"data-testid\": \"core__doc-loading\",\n    className: classNames({\n      'rpv-core__doc-loading': true,\n      'rpv-core__doc-loading--rtl': isRtl\n    })\n  }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null));\n};\n\nvar isDarkMode = function () {\n  return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n};\n\nvar withTheme = function (theme, onSwitchTheme) {\n  var initialTheme = React__namespace.useMemo(function () {\n    return theme === 'auto' ? isDarkMode() ? 'dark' : 'light' : theme;\n  }, []);\n\n  var _a = React__namespace.useState(initialTheme),\n      currentTheme = _a[0],\n      setCurrentTheme = _a[1];\n\n  var prevTheme = usePrevious(currentTheme);\n  React__namespace.useEffect(function () {\n    if (theme !== 'auto') {\n      return;\n    }\n\n    var media = window.matchMedia('(prefers-color-scheme: dark)');\n\n    var handler = function (e) {\n      setCurrentTheme(e.matches ? 'dark' : 'light');\n    };\n\n    media.addEventListener('change', handler);\n    return function () {\n      return media.removeEventListener('change', handler);\n    };\n  }, []);\n  React__namespace.useEffect(function () {\n    if (currentTheme !== prevTheme && onSwitchTheme) {\n      onSwitchTheme(currentTheme);\n    }\n  }, [currentTheme]);\n  React__namespace.useEffect(function () {\n    if (theme !== currentTheme) {\n      setCurrentTheme(theme);\n    }\n  }, [theme]);\n  return {\n    currentTheme: currentTheme,\n    setCurrentTheme: setCurrentTheme\n  };\n};\n\nvar isSameUrl = function (a, b) {\n  var typeA = typeof a;\n  var typeB = typeof b;\n\n  if (typeA === 'string' && typeB === 'string' && a === b) {\n    return true;\n  }\n\n  if (typeA === 'object' && typeB === 'object') {\n    return a.length === b.length && a.every(function (v, i) {\n      return v === b[i];\n    });\n  }\n\n  return false;\n};\n\nvar Viewer = function (_a) {\n  var characterMap = _a.characterMap,\n      defaultScale = _a.defaultScale,\n      fileUrl = _a.fileUrl,\n      _b = _a.httpHeaders,\n      httpHeaders = _b === void 0 ? {} : _b,\n      _c = _a.initialPage,\n      initialPage = _c === void 0 ? 0 : _c,\n      localization = _a.localization,\n      _d = _a.plugins,\n      plugins = _d === void 0 ? [] : _d,\n      renderError = _a.renderError,\n      renderPage = _a.renderPage,\n      renderLoader = _a.renderLoader,\n      _e = _a.scrollMode,\n      scrollMode = _e === void 0 ? exports.ScrollMode.Vertical : _e,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      _f = _a.theme,\n      theme = _f === void 0 ? {\n    direction: exports.TextDirection.LeftToRight,\n    theme: 'light'\n  } : _f,\n      _g = _a.withCredentials,\n      withCredentials = _g === void 0 ? false : _g,\n      onDocumentAskPassword = _a.onDocumentAskPassword,\n      _h = _a.onDocumentLoad,\n      onDocumentLoad = _h === void 0 ? function () {} : _h,\n      _j = _a.onPageChange,\n      onPageChange = _j === void 0 ? function () {} : _j,\n      _k = _a.onRotate,\n      onRotate = _k === void 0 ? function () {} : _k,\n      _l = _a.onRotatePage,\n      onRotatePage = _l === void 0 ? function () {} : _l,\n      _m = _a.onSwitchTheme,\n      onSwitchTheme = _m === void 0 ? function () {} : _m,\n      _o = _a.onZoom,\n      onZoom = _o === void 0 ? function () {} : _o;\n\n  var _p = React__namespace.useState({\n    data: fileUrl,\n    name: typeof fileUrl === 'string' ? fileUrl : '',\n    shouldLoad: false\n  }),\n      file = _p[0],\n      setFile = _p[1];\n\n  var openFile = function (fileName, data) {\n    setFile({\n      data: data,\n      name: fileName,\n      shouldLoad: true\n    });\n  };\n\n  var _q = React__namespace.useState(false),\n      visible = _q[0],\n      setVisible = _q[1];\n\n  var prevFile = usePrevious(file);\n  React__namespace.useEffect(function () {\n    if (!isSameUrl(prevFile.data, fileUrl)) {\n      setFile({\n        data: fileUrl,\n        name: typeof fileUrl === 'string' ? fileUrl : '',\n        shouldLoad: visible\n      });\n    }\n  }, [fileUrl, visible]);\n\n  var visibilityChanged = function (params) {\n    setVisible(params.isVisible);\n\n    if (params.isVisible) {\n      setFile(function (currentFile) {\n        return Object.assign({}, currentFile, {\n          shouldLoad: true\n        });\n      });\n    }\n  };\n\n  var containerRef = useIntersectionObserver({\n    onVisibilityChanged: visibilityChanged\n  });\n  var themeProps = typeof theme === 'string' ? {\n    direction: exports.TextDirection.LeftToRight,\n    theme: theme\n  } : theme;\n\n  var _r = React__namespace.useState(localization || DefaultLocalization),\n      l10n = _r[0],\n      setL10n = _r[1];\n\n  var localizationContext = {\n    l10n: l10n,\n    setL10n: setL10n\n  };\n  var themeContext = Object.assign({}, {\n    direction: themeProps.direction\n  }, withTheme(themeProps.theme || 'light', onSwitchTheme));\n  React__namespace.useEffect(function () {\n    if (localization) {\n      setL10n(localization);\n    }\n  }, [localization]);\n  return React__namespace.createElement(LocalizationContext.Provider, {\n    value: localizationContext\n  }, React__namespace.createElement(ThemeContext.Provider, {\n    value: themeContext\n  }, React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__viewer rpv-core__viewer--\".concat(themeContext.currentTheme),\n    \"data-testid\": \"core__viewer\",\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, file.shouldLoad && React__namespace.createElement(DocumentLoader, {\n    characterMap: characterMap,\n    file: file.data,\n    httpHeaders: httpHeaders,\n    render: function (doc) {\n      return React__namespace.createElement(PageSizeCalculator, {\n        defaultScale: defaultScale,\n        doc: doc,\n        render: function (ps) {\n          return React__namespace.createElement(Inner, {\n            currentFile: {\n              data: file.data,\n              name: file.name\n            },\n            defaultScale: defaultScale,\n            doc: doc,\n            initialPage: initialPage,\n            pageSize: ps,\n            plugins: plugins,\n            renderPage: renderPage,\n            scrollMode: scrollMode,\n            viewerState: {\n              file: file,\n              pageIndex: -1,\n              pageHeight: ps.pageHeight,\n              pageWidth: ps.pageWidth,\n              pagesRotation: new Map(),\n              rotation: 0,\n              scale: ps.scale,\n              scrollMode: scrollMode\n            },\n            onDocumentLoad: onDocumentLoad,\n            onOpenFile: openFile,\n            onPageChange: onPageChange,\n            onRotate: onRotate,\n            onRotatePage: onRotatePage,\n            onZoom: onZoom\n          });\n        },\n        scrollMode: scrollMode\n      });\n    },\n    renderError: renderError,\n    renderLoader: renderLoader,\n    transformGetDocumentParams: transformGetDocumentParams,\n    withCredentials: withCredentials,\n    onDocumentAskPassword: onDocumentAskPassword\n  }))));\n};\n\nvar Worker = function (_a) {\n  var children = _a.children,\n      workerUrl = _a.workerUrl;\n  PdfJsApi__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n  return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nvar isMac = function () {\n  return typeof window !== 'undefined' ? /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) : false;\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LazyRender = LazyRender;\nexports.LocalizationContext = LocalizationContext;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.MinimalButton = MinimalButton;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.Spinner = Spinner;\nexports.Splitter = Splitter;\nexports.TextBox = TextBox;\nexports.ThemeContext = ThemeContext;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.classNames = classNames;\nexports.createStore = createStore;\nexports.getDestination = getDestination;\nexports.getPage = getPage;\nexports.isMac = isMac;\nexports.renderQueueService = renderQueueService;\nexports.useIntersectionObserver = useIntersectionObserver;\nexports.useIsMounted = useIsMounted;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;","map":{"version":3,"sources":["C:/Users/Sawid/Desktop/Asset/Project/dorm_management/node_modules/@react-pdf-viewer/core/lib/cjs/core.js"],"names":["Object","defineProperty","exports","value","React","require","PdfJsApi","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","PdfJsApi__namespace","AnnotationType","LayerRenderStatus","Position","RotateDirection","ScrollMode","SpecialZoomLevel","ToggleStatus","extendStatics","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","__assign","assign","t","s","i","arguments","length","apply","TextDirection","ThemeContext","createContext","currentTheme","direction","LeftToRight","setCurrentTheme","classNames","classes","result","clazz","push","join","Button","_a","children","testId","onClick","useContext","isRtl","RightToLeft","attrs","createElement","className","type","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","useIntersectionObserver","props","containerRef","useRef","once","threshold","onVisibilityChanged","container","current","intersectionTracker","IntersectionObserver","entries","entry","isVisible","isIntersecting","ratio","intersectionRatio","unobserve","disconnect","observe","LazyRender","_b","useState","visible","setVisible","containerAttrs","handleVisibilityChanged","params","ref","Menu","visibleMenuItemsRef","handleKeyDown","key","preventDefault","moveToItem","_","currentIndex","items","getNextItem","findIndex","item","getAttribute","targetIndex","Math","min","max","setAttribute","focus","findVisibleItems","visibleItems","querySelectorAll","HTMLElement","parent_1","parentElement","getComputedStyle","display","document","addEventListener","removeEventListener","role","tabIndex","MenuDivider","Icon","ignoreDirection","_c","size","width","concat","focusable","height","viewBox","CheckIcon","MenuItem","checked","icon","_d","isDisabled","MinimalButton","ariaLabel","ariaKeyShortcuts","_e","isSelected","PrimaryButton","ProgressBar","progress","style","Separator","Spinner","Splitter","constrain","resizerRef","leftSideRef","rightSideRef","xRef","yRef","leftWidthRef","resizerWidthRef","eventOptions","capture","handleMouseMove","resizerEle","leftSide","rightSide","resizerWidth","dx","clientX","firstHalfSize","containerWidth","getBoundingClientRect","firstHalfPercentage","classList","add","secondHalfSize","secondHalfPercentage","body","handleMouseUp","remove","handleMouseDown","clientY","previousElementSibling","nextElementSibling","onMouseDown","TextBox","autoFocus","placeholder","_f","onChange","_g","onKeyDown","textboxRef","target","textboxEle","x","scrollX","y","scrollY","scrollTo","useClickOutside","closeOnClickOutside","targetRef","onClickOutside","clickHandler","contains","useEscape","handler","keyUpHandler","useLockScroll","originalStyle","overflow","ModalBody","ariaControlsSuffix","closeOnEscape","onToggle","contentRef","contentEle","maxHeight","clientHeight","id","ModalOverlay","useToggle","isOpened","opened","setOpened","toggle","status","Close","Open","Toggle","Portal","content","Fragment","uniqueId","Modal","controlsSuffix","renderTarget","renderContent","calculatePosition","position","offset","targetRect","contentRect","top","left","TopLeft","TopCenter","TopRight","RightTop","RightCenter","RightBottom","BottomLeft","BottomCenter","BottomRight","LeftTop","LeftCenter","LeftBottom","usePosition","anchorRef","targetEle","anchorEle","anchorRect","Arrow","customClassName","PopoverBody","onClose","innerRef","innerContentEle","innerId","PopoverOverlay","Popover","ariaHasPopup","lockScroll","TooltipBody","Tooltip","activeElement","close","open","onBlur","shouldHideTooltip","relatedTarget","currentTarget","onFocus","onMouseEnter","onMouseLeave","PageRenderStatus","OUT_OF_RANGE_VISIBILITY","pageVisibilities","renderQueueService","doc","queueName","priority","numPages","queue","loadingTask","docId","getInitialPageVisibilities","fill","map","pageIndex","renderStatus","NotRenderedYet","visibility","cleanup","resetQueue","markRendered","Rendered","markRendering","Rendering","setRange","startIndex","endIndex","setVisibility","getHighestPriorityPage","visiblePages","filter","firstVisiblePage","lastVisiblePage","numVisiblePages","createStore","initialState","state","listeners","subscribe","unsubscribe","f","update","data","core","askingPassword","requirePasswordToOpen","submit","wrongPassword","tryAgain","pageLabel","enUs","DefaultLocalization","LocalizationContext","l10n","setL10n","usePrevious","useDebounceCallback","callback","wait","timeout","clearTimeout","useCallback","args","_i","setTimeout","useTrackResize","onResize","io","ResizeObserver","rectReducer","action","rect","useMeasureRect","elementRef","element","setElement","initializedRectRef","useReducer","dispatch","tracker","useIsMounted","isMountedRef","useRafState","isMounted","rafRef","setState","setRafState","cancelAnimationFrame","requestAnimationFrame","ZERO_OFFSET$1","SCROLL_EVENT_OPTIONS","passive","useScroll","scrollMode","scrollOffset","setScrollOffset","factor","latestRef","handleScroll","Horizontal","scrollLeft","Vertical","scrollTop","ele","clamp","findNearest","low","high","getItemValue","middle","currentValue","ZERO_RECT","ZERO_OFFSET","calculateRange","measurements","outerSize","currentOffset","getOffset","index","start","Wrapped","startTop","end","visibilities","maxVisbilityIndex","maxVisbility","itemRect","topLeftCorner","visibleSize","visibleWidth","visibleHeight","useVirtual","estimateSize","numberOfItems","setStartRange","setEndRange","parentRef","transformSize","parentRect","totalSize","cacheMeasure","setCacheMeasure","useMemo","totalWidth","firstOfRow","start_1","end_1","startRange","endRange","virtualItems","_loop_1","virtualItem","undefined","measureRef","measuredSize","old","scrollToItem","measurement","getContainerStyles","getItemStyles","sideProperty","transform","AnnotationBorderStyleType","dateRegex","RegExp","parse","defaultValue","parsed","parseInt","convertDate","input","matches","exec","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","Date","UTC","PopupWrapper","annotation","dateStr","modificationDate","date","toLocaleDateString","toLocaleTimeString","containerEle","annotationEle","querySelector","zIndex","annotationType","Popup","title","contents","split","TogglePopupBy","useTogglePopup","Hover","togglePopupBy","setTooglePopupBy","toggleOnClick","Click","openOnHover","closeOnHover","Annotation","ignoreBorder","hasPopup","isRenderable","page","viewport","normalizeRect","r","bound","view","styles","borderColor","borderRadius","borderStyle","borderWidth","Dashed","Solid","Underline","borderBottomStyle","Beveled","Inset","horizontalCornerRadius","verticalCornerRadius","color","popup","slot","transformOrigin","Caret","Circle","preserveAspectRatio","version","cy","rx","ry","stroke","strokeWidth","getFileName","url","str","pop","downloadFile","blobUrl","URL","createObjectURL","Blob","link","href","appendChild","click","removeChild","revokeObjectURL","FileAttachment","doubleClick","file","filename","onDoubleClick","FreeText","ignoredParents","parentType","indexOf","parentId","parent","parseFloat","Highlight","childAnnotation","hasQuadPoints","quadPoints","annotations","quadPoint","ann","Ink","inkLists","inkList","points","Line","x1","lineCoordinates","x2","y1","y2","normalizeDestination","destArray","name","bottomOffset","leftOffset","scaleTo","PageFit","PageWidth","pageOutlinesMap","Map","pagesMap","generateRefKey","outline","num","gen","getPageIndex","cacheOutlineRef","set","clearPagesCache","clear","getPage","Promise","reject","pageKey","resolve","then","getDestination","dest","res","outlineRef_1","Link","onExecuteNamedAction","onJumpToDest","unsafeUrl","externalUrl","rel","newWindow","Polygon","vertices","Polyline","Square","Squiggly","Stamp","StrikeOut","CommentIcon","HelpIcon","KeyIcon","NoteIcon","ParagraphIcon","TriangleIcon","Text","toLowerCase","AnnotationLayerBody","plugins","rotation","scale","getViewport","clonedViewPort","clone","dontFlip","filterAnnotations","plugin","onAnnotationLayerRender","find","AnnotationLoader","renderAnnotations","loading","setStatus","getAnnotations","intent","AnnotationLayer","floatToRatio","limit","floor","a","c","numerator","denominator","roundToDivide","remainder","MAX_CANVAS_SIZE","CanvasLayer","onRenderCanvasCompleted","canvasRef","renderTask","task","cancel","canvasEle","onCanvasLayerRender","PreRender","outputScale","devicePixelRatio","maxScale","sqrt","shouldScaleByCSS","removeProperty","possibleScale","hidden","canvasContext","getContext","alpha","render","promise","DidRender","SvgLayer","empty","innerHTML","getOperatorList","operatorList","graphic","SVGGraphics","commonObjs","objs","getSVG","svg","TextLayer","onRenderTextCompleted","spans","slice","span","breaks","br","removeAttribute","onTextLayerRender","getTextContent","textContent","renderTextLayer","enhanceTextSelection","PageLayer","pageRotation","renderPage","shouldRender","onRenderCompleted","onRotatePage","pageHeight","pageWidth","viewportRotation","pageSize","setPageSize","canvasLayerRendered","setCanvasLayerRendered","textLayerRendered","setTextLayerRendered","isVertical","abs","scaledWidth","scaledHeight","w","h","rotationValue","determinePageSize","pdfPage","defaultPageRenderer","canvasLayer","textLayer","annotationLayer","renderPageLayer","handleRenderCanvasCompleted","handleRenderTextCompleted","svgLayer","idx","getFileExt","SCROLL_BAR_WIDTH","PAGE_PADDING$1","calculateScale","ActualSize","clientWidth","NUM_OVERSCAN_PAGES","PAGE_PADDING","Inner","currentFile","defaultScale","initialPage","viewerState","onDocumentLoad","onOpenFile","onPageChange","onRotate","onZoom","themeContext","pagesRef","currentPage","setCurrentPage","setRotation","pagesRotationChanged","setPagesRotationChanged","pagesRotation","setPagesRotation","currentScrollMode","setCurrentScrollMode","stateRef","setScale","keepSpecialZoomLevelRef","_h","renderPageIndex","setRenderPageIndex","renderQueueInstance","sizes","virtualizer","handlePagesResize","zoom","setViewerState","newState","onViewerStateChange","getPagesContainer","getViewerState","jumpToDestination","pagesContainer","currentState","bottom","updateScale","boundingRect","convertToViewportPoint","jumpToPage","openFile","reader","FileReader","readAsArrayBuffer","onload","bytes","Uint8Array","rotate","degrees","Backward","currentRotation","updateRotation","rotatePage","rotations","currentPageRotation","has","finalRotation","updateRotations","rotatedPage","switchScrollMode","newScale","pagesEle","pluginMethods","install","uninstall","latestPage","renderNextPage","handlePageRenderCompleted","nextPage","executeNamedAction","previousPage","renderViewer","subSlot","replace","renderSlot","LEVELS","decrease","currentLevel","found","RESERVE_HEIGHT","RESERVE_WIDTH","PageSizeCalculator","parentEle","scaleWidth","scaleHeight","scaled","LoadingStatus","SubmitPassword","AskForPasswordState","_super","verifyPassword","submitPassword","_this","AskingPassword","onDocumentAskPassword","password","setPassword","REQUIRE_PASSWORD","WRONG_PASSWORD","CompletedState","FailureState","error","LoadingState","percentages","DocumentLoader","characterMap","httpHeaders","renderError","renderLoader","transformGetDocumentParams","withCredentials","setPercentages","loadedDocument","setLoadedDocument","worker","PDFWorker","now","cMapUrl","cMapPacked","isCompressed","transformParams","getDocument","onPassword","reason","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","onProgress","total","loaded","err","destroyed","message","destroy","isDarkMode","matchMedia","withTheme","theme","onSwitchTheme","initialTheme","prevTheme","media","isSameUrl","typeA","typeB","every","v","Viewer","fileUrl","localization","_j","_k","_l","_m","_o","_p","shouldLoad","setFile","fileName","_q","prevFile","visibilityChanged","themeProps","_r","localizationContext","Provider","ps","Worker","workerUrl","GlobalWorkerOptions","workerSrc","isMac","test","navigator","platform"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAnB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,YAAD,CAAtB;;AAEA,SAASE,iBAAT,CAA2BC,CAA3B,EAA8B;AAC1B,MAAIA,CAAC,IAAIA,CAAC,CAACC,UAAX,EAAuB,OAAOD,CAAP;AACvB,MAAIE,CAAC,GAAGV,MAAM,CAACW,MAAP,CAAc,IAAd,CAAR;;AACA,MAAIH,CAAJ,EAAO;AACHR,IAAAA,MAAM,CAACY,IAAP,CAAYJ,CAAZ,EAAeK,OAAf,CAAuB,UAAUC,CAAV,EAAa;AAChC,UAAIA,CAAC,KAAK,SAAV,EAAqB;AACjB,YAAIC,CAAC,GAAGf,MAAM,CAACgB,wBAAP,CAAgCR,CAAhC,EAAmCM,CAAnC,CAAR;AACAd,QAAAA,MAAM,CAACC,cAAP,CAAsBS,CAAtB,EAAyBI,CAAzB,EAA4BC,CAAC,CAACE,GAAF,GAAQF,CAAR,GAAY;AACpCG,UAAAA,UAAU,EAAE,IADwB;AAEpCD,UAAAA,GAAG,EAAE,YAAY;AAAE,mBAAOT,CAAC,CAACM,CAAD,CAAR;AAAc;AAFG,SAAxC;AAIH;AACJ,KARD;AASH;;AACDJ,EAAAA,CAAC,CAAC,SAAD,CAAD,GAAeF,CAAf;AACA,SAAOR,MAAM,CAACmB,MAAP,CAAcT,CAAd,CAAP;AACH;;AAED,IAAIU,gBAAgB,GAAG,aAAab,iBAAiB,CAACH,KAAD,CAArD;;AACA,IAAIiB,mBAAmB,GAAG,aAAad,iBAAiB,CAACD,QAAD,CAAxD;;AAEAJ,OAAO,CAACoB,cAAR,GAAyB,KAAK,CAA9B;;AACA,CAAC,UAAUA,cAAV,EAA0B;AACvBA,EAAAA,cAAc,CAACA,cAAc,CAAC,MAAD,CAAd,GAAyB,CAA1B,CAAd,GAA6C,MAA7C;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,MAAD,CAAd,GAAyB,CAA1B,CAAd,GAA6C,MAA7C;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,UAAD,CAAd,GAA6B,CAA9B,CAAd,GAAiD,UAAjD;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,MAAD,CAAd,GAAyB,CAA1B,CAAd,GAA6C,MAA7C;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,QAAD,CAAd,GAA2B,CAA5B,CAAd,GAA+C,QAA/C;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,QAAD,CAAd,GAA2B,CAA5B,CAAd,GAA+C,QAA/C;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,SAAD,CAAd,GAA4B,CAA7B,CAAd,GAAgD,SAAhD;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,UAAD,CAAd,GAA6B,CAA9B,CAAd,GAAiD,UAAjD;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,WAAD,CAAd,GAA8B,CAA/B,CAAd,GAAkD,WAAlD;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,WAAD,CAAd,GAA8B,EAA/B,CAAd,GAAmD,WAAnD;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,UAAD,CAAd,GAA6B,EAA9B,CAAd,GAAkD,UAAlD;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,WAAD,CAAd,GAA8B,EAA/B,CAAd,GAAmD,WAAnD;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,OAAD,CAAd,GAA0B,EAA3B,CAAd,GAA+C,OAA/C;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,OAAD,CAAd,GAA0B,EAA3B,CAAd,GAA+C,OAA/C;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,KAAD,CAAd,GAAwB,EAAzB,CAAd,GAA6C,KAA7C;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,OAAD,CAAd,GAA0B,EAA3B,CAAd,GAA+C,OAA/C;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,gBAAD,CAAd,GAAmC,EAApC,CAAd,GAAwD,gBAAxD;AACH,CAlBD,EAkBGpB,OAAO,CAACoB,cAAR,KAA2BpB,OAAO,CAACoB,cAAR,GAAyB,EAApD,CAlBH;;AAoBApB,OAAO,CAACqB,iBAAR,GAA4B,KAAK,CAAjC;;AACA,CAAC,UAAUA,iBAAV,EAA6B;AAC1BA,EAAAA,iBAAiB,CAACA,iBAAiB,CAAC,WAAD,CAAjB,GAAiC,CAAlC,CAAjB,GAAwD,WAAxD;AACAA,EAAAA,iBAAiB,CAACA,iBAAiB,CAAC,WAAD,CAAjB,GAAiC,CAAlC,CAAjB,GAAwD,WAAxD;AACH,CAHD,EAGGrB,OAAO,CAACqB,iBAAR,KAA8BrB,OAAO,CAACqB,iBAAR,GAA4B,EAA1D,CAHH;;AAKArB,OAAO,CAACsB,QAAR,GAAmB,KAAK,CAAxB;;AACA,CAAC,UAAUA,QAAV,EAAoB;AACjBA,EAAAA,QAAQ,CAAC,SAAD,CAAR,GAAsB,UAAtB;AACAA,EAAAA,QAAQ,CAAC,WAAD,CAAR,GAAwB,YAAxB;AACAA,EAAAA,QAAQ,CAAC,UAAD,CAAR,GAAuB,WAAvB;AACAA,EAAAA,QAAQ,CAAC,UAAD,CAAR,GAAuB,WAAvB;AACAA,EAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0B,cAA1B;AACAA,EAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0B,cAA1B;AACAA,EAAAA,QAAQ,CAAC,YAAD,CAAR,GAAyB,aAAzB;AACAA,EAAAA,QAAQ,CAAC,cAAD,CAAR,GAA2B,eAA3B;AACAA,EAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0B,cAA1B;AACAA,EAAAA,QAAQ,CAAC,SAAD,CAAR,GAAsB,UAAtB;AACAA,EAAAA,QAAQ,CAAC,YAAD,CAAR,GAAyB,aAAzB;AACAA,EAAAA,QAAQ,CAAC,YAAD,CAAR,GAAyB,aAAzB;AACH,CAbD,EAaGtB,OAAO,CAACsB,QAAR,KAAqBtB,OAAO,CAACsB,QAAR,GAAmB,EAAxC,CAbH;;AAeAtB,OAAO,CAACuB,eAAR,GAA0B,KAAK,CAA/B;;AACA,CAAC,UAAUA,eAAV,EAA2B;AACxBA,EAAAA,eAAe,CAAC,UAAD,CAAf,GAA8B,UAA9B;AACAA,EAAAA,eAAe,CAAC,SAAD,CAAf,GAA6B,SAA7B;AACH,CAHD,EAGGvB,OAAO,CAACuB,eAAR,KAA4BvB,OAAO,CAACuB,eAAR,GAA0B,EAAtD,CAHH;;AAKAvB,OAAO,CAACwB,UAAR,GAAqB,KAAK,CAA1B;;AACA,CAAC,UAAUA,UAAV,EAAsB;AACnBA,EAAAA,UAAU,CAAC,YAAD,CAAV,GAA2B,YAA3B;AACAA,EAAAA,UAAU,CAAC,UAAD,CAAV,GAAyB,UAAzB;AACAA,EAAAA,UAAU,CAAC,SAAD,CAAV,GAAwB,SAAxB;AACH,CAJD,EAIGxB,OAAO,CAACwB,UAAR,KAAuBxB,OAAO,CAACwB,UAAR,GAAqB,EAA5C,CAJH;;AAMAxB,OAAO,CAACyB,gBAAR,GAA2B,KAAK,CAAhC;;AACA,CAAC,UAAUA,gBAAV,EAA4B;AACzBA,EAAAA,gBAAgB,CAAC,YAAD,CAAhB,GAAiC,YAAjC;AACAA,EAAAA,gBAAgB,CAAC,SAAD,CAAhB,GAA8B,SAA9B;AACAA,EAAAA,gBAAgB,CAAC,WAAD,CAAhB,GAAgC,WAAhC;AACH,CAJD,EAIGzB,OAAO,CAACyB,gBAAR,KAA6BzB,OAAO,CAACyB,gBAAR,GAA2B,EAAxD,CAJH;;AAMAzB,OAAO,CAAC0B,YAAR,GAAuB,KAAK,CAA5B;;AACA,CAAC,UAAUA,YAAV,EAAwB;AACrBA,EAAAA,YAAY,CAAC,OAAD,CAAZ,GAAwB,OAAxB;AACAA,EAAAA,YAAY,CAAC,MAAD,CAAZ,GAAuB,MAAvB;AACAA,EAAAA,YAAY,CAAC,QAAD,CAAZ,GAAyB,QAAzB;AACH,CAJD,EAIG1B,OAAO,CAAC0B,YAAR,KAAyB1B,OAAO,CAAC0B,YAAR,GAAuB,EAAhD,CAJH;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;AAEA,IAAIC,aAAa,GAAG,UAASd,CAAT,EAAYe,CAAZ,EAAe;AAC/BD,EAAAA,aAAa,GAAG7B,MAAM,CAAC+B,cAAP,IACX;AAAEC,IAAAA,SAAS,EAAE;AAAb,eAA6BC,KAA7B,IAAsC,UAAUlB,CAAV,EAAae,CAAb,EAAgB;AAAEf,IAAAA,CAAC,CAACiB,SAAF,GAAcF,CAAd;AAAkB,GAD/D,IAEZ,UAAUf,CAAV,EAAae,CAAb,EAAgB;AAAE,SAAK,IAAII,CAAT,IAAcJ,CAAd,EAAiB,IAAI9B,MAAM,CAACmC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,CAArC,EAAwCI,CAAxC,CAAJ,EAAgDnB,CAAC,CAACmB,CAAD,CAAD,GAAOJ,CAAC,CAACI,CAAD,CAAR;AAAc,GAFrG;;AAGA,SAAOL,aAAa,CAACd,CAAD,EAAIe,CAAJ,CAApB;AACH,CALD;;AAOA,SAASQ,SAAT,CAAmBvB,CAAnB,EAAsBe,CAAtB,EAAyB;AACrB,MAAI,OAAOA,CAAP,KAAa,UAAb,IAA2BA,CAAC,KAAK,IAArC,EACI,MAAM,IAAIS,SAAJ,CAAc,yBAAyBC,MAAM,CAACV,CAAD,CAA/B,GAAqC,+BAAnD,CAAN;AACJD,EAAAA,aAAa,CAACd,CAAD,EAAIe,CAAJ,CAAb;;AACA,WAASW,EAAT,GAAc;AAAE,SAAKC,WAAL,GAAmB3B,CAAnB;AAAuB;;AACvCA,EAAAA,CAAC,CAACoB,SAAF,GAAcL,CAAC,KAAK,IAAN,GAAa9B,MAAM,CAACW,MAAP,CAAcmB,CAAd,CAAb,IAAiCW,EAAE,CAACN,SAAH,GAAeL,CAAC,CAACK,SAAjB,EAA4B,IAAIM,EAAJ,EAA7D,CAAd;AACH;;AAED,IAAIE,QAAQ,GAAG,YAAW;AACtBA,EAAAA,QAAQ,GAAG3C,MAAM,CAAC4C,MAAP,IAAiB,SAASD,QAAT,CAAkBE,CAAlB,EAAqB;AAC7C,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcrC,CAAC,GAAGsC,SAAS,CAACC,MAAjC,EAAyCF,CAAC,GAAGrC,CAA7C,EAAgDqC,CAAC,EAAjD,EAAqD;AACjDD,MAAAA,CAAC,GAAGE,SAAS,CAACD,CAAD,CAAb;;AACA,WAAK,IAAIb,CAAT,IAAcY,CAAd,EAAiB,IAAI9C,MAAM,CAACmC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCS,CAArC,EAAwCZ,CAAxC,CAAJ,EAAgDW,CAAC,CAACX,CAAD,CAAD,GAAOY,CAAC,CAACZ,CAAD,CAAR;AACpE;;AACD,WAAOW,CAAP;AACH,GAND;;AAOA,SAAOF,QAAQ,CAACO,KAAT,CAAe,IAAf,EAAqBF,SAArB,CAAP;AACH,CATD;;AAWA9C,OAAO,CAACiD,aAAR,GAAwB,KAAK,CAA7B;;AACA,CAAC,UAAUA,aAAV,EAAyB;AACtBA,EAAAA,aAAa,CAAC,aAAD,CAAb,GAA+B,KAA/B;AACAA,EAAAA,aAAa,CAAC,aAAD,CAAb,GAA+B,KAA/B;AACH,CAHD,EAGGjD,OAAO,CAACiD,aAAR,KAA0BjD,OAAO,CAACiD,aAAR,GAAwB,EAAlD,CAHH;;AAIA,IAAIC,YAAY,GAAGhC,gBAAgB,CAACiC,aAAjB,CAA+B;AAC9CC,EAAAA,YAAY,EAAE,OADgC;AAE9CC,EAAAA,SAAS,EAAErD,OAAO,CAACiD,aAAR,CAAsBK,WAFa;AAG9CC,EAAAA,eAAe,EAAE,YAAY,CAAG;AAHc,CAA/B,CAAnB;;AAMA,IAAIC,UAAU,GAAG,UAAUC,OAAV,EAAmB;AAChC,MAAIC,MAAM,GAAG,EAAb;AACA5D,EAAAA,MAAM,CAACY,IAAP,CAAY+C,OAAZ,EAAqB9C,OAArB,CAA6B,UAAUgD,KAAV,EAAiB;AAC1C,QAAIA,KAAK,IAAIF,OAAO,CAACE,KAAD,CAApB,EAA6B;AACzBD,MAAAA,MAAM,CAACE,IAAP,CAAYD,KAAZ;AACH;AACJ,GAJD;AAKA,SAAOD,MAAM,CAACG,IAAP,CAAY,GAAZ,CAAP;AACH,CARD;;AAUA,IAAIC,MAAM,GAAG,UAAUC,EAAV,EAAc;AACvB,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;AAAA,MAA4BC,MAAM,GAAGF,EAAE,CAACE,MAAxC;AAAA,MAAgDC,OAAO,GAAGH,EAAE,CAACG,OAA7D;AACA,MAAIb,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA,MAAIC,KAAK,GAAGL,MAAM,GAAG;AAAE,mBAAeA;AAAjB,GAAH,GAA+B,EAAjD;AACA,SAAQ/C,gBAAgB,CAACqD,aAAjB,CAA+B,QAA/B,EAAyC9B,QAAQ,CAAC;AAAE+B,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AAC1E,0BAAoB,IADsD;AAE1E,+BAAyBY;AAFiD,KAAD,CAAvB;AAGlDK,IAAAA,IAAI,EAAE,QAH4C;AAGlCP,IAAAA,OAAO,EAAEA;AAHyB,GAAD,EAGbI,KAHa,CAAjD,EAG4CN,QAH5C,CAAR;AAIH,CATD;;AAWA,IAAIU,yBAAyB,GAAG,OAAOC,MAAP,KAAkB,WAAlB,GAAgCzD,gBAAgB,CAAC0D,eAAjD,GAAmE1D,gBAAgB,CAAC2D,SAApH;;AAEA,IAAIC,uBAAuB,GAAG,UAAUC,KAAV,EAAiB;AAC3C,MAAIC,YAAY,GAAG9D,gBAAgB,CAAC+D,MAAjB,CAAwB,IAAxB,CAAnB;AACA,MAAIC,IAAI,GAAGH,KAAK,CAACG,IAAjB;AAAA,MAAuBC,SAAS,GAAGJ,KAAK,CAACI,SAAzC;AAAA,MAAoDC,mBAAmB,GAAGL,KAAK,CAACK,mBAAhF;AACAV,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAIW,SAAS,GAAGL,YAAY,CAACM,OAA7B;;AACA,QAAI,CAACD,SAAL,EAAgB;AACZ;AACH;;AACD,QAAIE,mBAAmB,GAAG,IAAIC,oBAAJ,CAAyB,UAAUC,OAAV,EAAmB;AAClEA,MAAAA,OAAO,CAAC9E,OAAR,CAAgB,UAAU+E,KAAV,EAAiB;AAC7B,YAAIC,SAAS,GAAGD,KAAK,CAACE,cAAtB;AACA,YAAIC,KAAK,GAAGH,KAAK,CAACI,iBAAlB;AACAV,QAAAA,mBAAmB,CAAC;AAAEO,UAAAA,SAAS,EAAEA,SAAb;AAAwBE,UAAAA,KAAK,EAAEA;AAA/B,SAAD,CAAnB;;AACA,YAAIF,SAAS,IAAIT,IAAjB,EAAuB;AACnBK,UAAAA,mBAAmB,CAACQ,SAApB,CAA8BV,SAA9B;AACAE,UAAAA,mBAAmB,CAACS,UAApB;AACH;AACJ,OARD;AASH,KAVyB,EAUvB;AACCb,MAAAA,SAAS,EAAEA,SAAS,IAAI;AADzB,KAVuB,CAA1B;AAaAI,IAAAA,mBAAmB,CAACU,OAApB,CAA4BZ,SAA5B;AACA,WAAO,YAAY;AACfE,MAAAA,mBAAmB,CAACQ,SAApB,CAA8BV,SAA9B;AACAE,MAAAA,mBAAmB,CAACS,UAApB;AACH,KAHD;AAIH,GAvBwB,EAuBtB,EAvBsB,CAAzB;AAwBA,SAAOhB,YAAP;AACH,CA5BD;;AA8BA,IAAIkB,UAAU,GAAG,UAAUnC,EAAV,EAAc;AAC3B,MAAIO,KAAK,GAAGP,EAAE,CAACO,KAAf;AAAA,MAAsBN,QAAQ,GAAGD,EAAE,CAACC,QAApC;AAAA,MAA8CC,MAAM,GAAGF,EAAE,CAACE,MAA1D;;AACA,MAAIkC,EAAE,GAAGjF,gBAAgB,CAACkF,QAAjB,CAA0B,KAA1B,CAAT;AAAA,MAA2CC,OAAO,GAAGF,EAAE,CAAC,CAAD,CAAvD;AAAA,MAA4DG,UAAU,GAAGH,EAAE,CAAC,CAAD,CAA3E;;AACA,MAAII,cAAc,GAAGtC,MAAM,GAAGxB,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK6B,KAAL,CAAT,EAAsB;AAAE,mBAAeL;AAAjB,GAAtB,CAAX,GAA8DK,KAAzF;;AACA,MAAIkC,uBAAuB,GAAG,UAAUC,MAAV,EAAkB;AAC5C,QAAIA,MAAM,CAACd,SAAX,EAAsB;AAClBW,MAAAA,UAAU,CAAC,IAAD,CAAV;AACH;AACJ,GAJD;;AAKA,MAAItB,YAAY,GAAGF,uBAAuB,CAAC;AACvCI,IAAAA,IAAI,EAAE,IADiC;AAEvCE,IAAAA,mBAAmB,EAAEoB;AAFkB,GAAD,CAA1C;AAIA,SAAQtF,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC;AAAEiE,IAAAA,GAAG,EAAE1B;AAAP,GAAD,EAAwBuB,cAAxB,CAA9C,EAAuFF,OAAO,IAAIrC,QAAlG,CAAR;AACH,CAdD;;AAgBA,IAAI2C,IAAI,GAAG,UAAU5C,EAAV,EAAc;AACrB,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;AACA,MAAIgB,YAAY,GAAG9D,gBAAgB,CAAC+D,MAAjB,EAAnB;AACA,MAAI2B,mBAAmB,GAAG1F,gBAAgB,CAAC+D,MAAjB,CAAwB,EAAxB,CAA1B;AACA,MAAI5B,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;;AACA,MAAIwC,aAAa,GAAG,UAAUvG,CAAV,EAAa;AAC7B,QAAI+E,SAAS,GAAGL,YAAY,CAACM,OAA7B;;AACA,QAAI,CAACD,SAAL,EAAgB;AACZ;AACH;;AACD,YAAQ/E,CAAC,CAACwG,GAAV;AACI,WAAK,KAAL;AACIxG,QAAAA,CAAC,CAACyG,cAAF;AACA;;AACJ,WAAK,WAAL;AACIzG,QAAAA,CAAC,CAACyG,cAAF;AACAC,QAAAA,UAAU,CAAC,UAAUC,CAAV,EAAaC,YAAb,EAA2B;AAAE,iBAAOA,YAAY,GAAG,CAAtB;AAA0B,SAAxD,CAAV;AACA;;AACJ,WAAK,SAAL;AACI5G,QAAAA,CAAC,CAACyG,cAAF;AACAC,QAAAA,UAAU,CAAC,UAAUC,CAAV,EAAaC,YAAb,EAA2B;AAAE,iBAAOA,YAAY,GAAG,CAAtB;AAA0B,SAAxD,CAAV;AACA;;AACJ,WAAK,KAAL;AACI5G,QAAAA,CAAC,CAACyG,cAAF;AACAC,QAAAA,UAAU,CAAC,UAAUG,KAAV,EAAiBF,CAAjB,EAAoB;AAAE,iBAAOE,KAAK,CAACpE,MAAN,GAAe,CAAtB;AAA0B,SAAjD,CAAV;AACA;;AACJ,WAAK,MAAL;AACIzC,QAAAA,CAAC,CAACyG,cAAF;AACAC,QAAAA,UAAU,CAAC,UAAUC,CAAV,EAAa1E,EAAb,EAAiB;AAAE,iBAAO,CAAP;AAAW,SAA/B,CAAV;AACA;AAnBR;AAqBH,GA1BD;;AA2BA,MAAIyE,UAAU,GAAG,UAAUI,WAAV,EAAuB;AACpC,QAAI/B,SAAS,GAAGL,YAAY,CAACM,OAA7B;;AACA,QAAI,CAACD,SAAL,EAAgB;AACZ;AACH;;AACD,QAAI8B,KAAK,GAAGP,mBAAmB,CAACtB,OAAhC;AACA,QAAI4B,YAAY,GAAGC,KAAK,CAACE,SAAN,CAAgB,UAAUC,IAAV,EAAgB;AAAE,aAAOA,IAAI,CAACC,YAAL,CAAkB,UAAlB,MAAkC,GAAzC;AAA+C,KAAjF,CAAnB;AACA,QAAIC,WAAW,GAAGC,IAAI,CAACC,GAAL,CAASP,KAAK,CAACpE,MAAN,GAAe,CAAxB,EAA2B0E,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYP,WAAW,CAACD,KAAD,EAAQD,YAAR,CAAvB,CAA3B,CAAlB;;AACA,QAAIA,YAAY,IAAI,CAAhB,IAAqBA,YAAY,IAAIC,KAAK,CAACpE,MAAN,GAAe,CAAxD,EAA2D;AACvDoE,MAAAA,KAAK,CAACD,YAAD,CAAL,CAAoBU,YAApB,CAAiC,UAAjC,EAA6C,IAA7C;AACH;;AACDT,IAAAA,KAAK,CAACK,WAAD,CAAL,CAAmBI,YAAnB,CAAgC,UAAhC,EAA4C,GAA5C;AACAT,IAAAA,KAAK,CAACK,WAAD,CAAL,CAAmBK,KAAnB;AACH,GAbD;;AAcA,MAAIC,gBAAgB,GAAG,UAAUzC,SAAV,EAAqB;AACxC,QAAI0C,YAAY,GAAG,EAAnB;AACA1C,IAAAA,SAAS,CAAC2C,gBAAV,CAA2B,uCAA3B,EAAoErH,OAApE,CAA4E,UAAU2G,IAAV,EAAgB;AACxF,UAAIA,IAAI,YAAYW,WAApB,EAAiC;AAC7B,YAAIC,QAAQ,GAAGZ,IAAI,CAACa,aAApB;;AACA,YAAID,QAAQ,KAAK7C,SAAjB,EAA4B;AACxB0C,UAAAA,YAAY,CAACnE,IAAb,CAAkB0D,IAAlB;AACH,SAFD,MAGK;AACD,cAAI3C,MAAM,CAACyD,gBAAP,CAAwBF,QAAxB,EAAkCG,OAAlC,KAA8C,MAAlD,EAA0D;AACtDN,YAAAA,YAAY,CAACnE,IAAb,CAAkB0D,IAAlB;AACH;AACJ;AACJ;AACJ,KAZD;AAaA,WAAOS,YAAP;AACH,GAhBD;;AAiBArD,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAIW,SAAS,GAAGL,YAAY,CAACM,OAA7B;;AACA,QAAI,CAACD,SAAL,EAAgB;AACZ;AACH;;AACD,QAAI0C,YAAY,GAAGD,gBAAgB,CAACzC,SAAD,CAAnC;AACAuB,IAAAA,mBAAmB,CAACtB,OAApB,GAA8ByC,YAA9B;AACH,GAPwB,EAOtB,EAPsB,CAAzB;AAQArD,EAAAA,yBAAyB,CAAC,YAAY;AAClC4D,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqC1B,aAArC;AACA,WAAO,YAAY;AACfyB,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwC3B,aAAxC;AACH,KAFD;AAGH,GALwB,EAKtB,EALsB,CAAzB;AAMA,SAAQ3F,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEmC,IAAAA,GAAG,EAAE1B,YAAP;AAAqB,wBAAoB,UAAzC;AAAqDR,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACjH,wBAAkB,IAD+F;AAEjH,6BAAuBY;AAF0F,KAAD,CAA1E;AAGtCqE,IAAAA,IAAI,EAAE,MAHgC;AAGxBC,IAAAA,QAAQ,EAAE;AAHc,GAAtC,EAG6B1E,QAH7B,CAAR;AAIH,CAlFD;;AAoFA,IAAI2E,WAAW,GAAG,YAAY;AAAE,SAAQzH,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE,wBAAoB,YAAtB;AAAoCC,IAAAA,SAAS,EAAE,wBAA/C;AAAyEiE,IAAAA,IAAI,EAAE;AAA/E,GAAtC,CAAR;AAA+I,CAA/K;;AAEA,IAAIG,IAAI,GAAG,UAAU7E,EAAV,EAAc;AACrB,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;AAAA,MAA4BmC,EAAE,GAAGpC,EAAE,CAAC8E,eAApC;AAAA,MAAqDA,eAAe,GAAG1C,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAA/F;AAAA,MAAmG2C,EAAE,GAAG/E,EAAE,CAACgF,IAA3G;AAAA,MAAiHA,IAAI,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAA7I;AACA,MAAIzF,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAG,CAACyE,eAAD,IAAoBxF,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAApE;AACA,MAAI2E,KAAK,GAAG,GAAGC,MAAH,CAAUF,IAAI,IAAI,EAAlB,EAAsB,IAAtB,CAAZ;AACA,SAAQ7H,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE,mBAAe,MAAjB;AAAyBC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACrF,wBAAkB,IADmE;AAErF,6BAAuBY;AAF8D,KAAD,CAA9C;AAGtC8E,IAAAA,SAAS,EAAE,OAH2B;AAGlBC,IAAAA,MAAM,EAAEH,KAHU;AAGHI,IAAAA,OAAO,EAAE,WAHN;AAGmBJ,IAAAA,KAAK,EAAEA;AAH1B,GAAtC,EAGyEhF,QAHzE,CAAR;AAIH,CATD;;AAWA,IAAIqF,SAAS,GAAG,YAAY;AAAE,SAAQnI,gBAAgB,CAACqD,aAAjB,CAA+BqE,IAA/B,EAAqC;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAArC,EAClC7H,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CADkC,CAAR;AACyD,CADvF;;AAGA,IAAIyI,QAAQ,GAAG,UAAUvF,EAAV,EAAc;AACzB,MAAIoC,EAAE,GAAGpC,EAAE,CAACwF,OAAZ;AAAA,MAAqBA,OAAO,GAAGpD,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAAvD;AAAA,MAA2DnC,QAAQ,GAAGD,EAAE,CAACC,QAAzE;AAAA,MAAmF8E,EAAE,GAAG/E,EAAE,CAACyF,IAA3F;AAAA,MAAiGA,IAAI,GAAGV,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAA/H;AAAA,MAAmIW,EAAE,GAAG1F,EAAE,CAAC2F,UAA3I;AAAA,MAAuJA,UAAU,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAA5L;AAAA,MAAgMxF,MAAM,GAAGF,EAAE,CAACE,MAA5M;AAAA,MAAoNC,OAAO,GAAGH,EAAE,CAACG,OAAjO;AACA,MAAIb,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA,MAAIC,KAAK,GAAGL,MAAM,GAAG;AAAE,mBAAeA;AAAjB,GAAH,GAA+B,EAAjD;AACA,SAAQ/C,gBAAgB,CAACqD,aAAjB,CAA+B,QAA/B,EAAyC9B,QAAQ,CAAC;AAAE+B,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AAC1E,6BAAuB,IADmD;AAE1E,uCAAiCkG,UAFyC;AAG1E,kCAA4B,CAACtF,KAH6C;AAI1E,kCAA4BA;AAJ8C,KAAD,CAAvB;AAKlDqE,IAAAA,IAAI,EAAE,UAL4C;AAKhCC,IAAAA,QAAQ,EAAE,CAAC,CALqB;AAKlBjE,IAAAA,IAAI,EAAE,QALY;AAKFP,IAAAA,OAAO,EAAEA;AALP,GAAD,EAKmBI,KALnB,CAAjD,EAMJpD,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACtD,kCAA4B,IAD0B;AAEtD,uCAAiC,CAACY,KAFoB;AAGtD,uCAAiCA;AAHqB,KAAD;AAAvB,GAAtC,EAIUoF,IAJV,CANI,EAWJtI,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACtD,mCAA6B,IADyB;AAEtD,wCAAkC,CAACY,KAFmB;AAGtD,wCAAkCA;AAHoB,KAAD;AAAvB,GAAtC,EAIUJ,QAJV,CAXI,EAgBJ9C,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACtD,mCAA6B,IADyB;AAEtD,wCAAkC,CAACY,KAFmB;AAGtD,wCAAkCA;AAHoB,KAAD;AAAvB,GAAtC,EAIUmF,OAAO,IAAIrI,gBAAgB,CAACqD,aAAjB,CAA+B8E,SAA/B,EAA0C,IAA1C,CAJrB,CAhBI,CAAR;AAqBH,CA1BD;;AA4BA,IAAIM,aAAa,GAAG,UAAU5F,EAAV,EAAc;AAC9B,MAAIoC,EAAE,GAAGpC,EAAE,CAAC6F,SAAZ;AAAA,MAAuBA,SAAS,GAAGzD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAAxD;AAAA,MAA4D2C,EAAE,GAAG/E,EAAE,CAAC8F,gBAApE;AAAA,MAAsFA,gBAAgB,GAAGf,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAA9H;AAAA,MAAkI9E,QAAQ,GAAGD,EAAE,CAACC,QAAhJ;AAAA,MAA0JyF,EAAE,GAAG1F,EAAE,CAAC2F,UAAlK;AAAA,MAA8KA,UAAU,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAAnN;AAAA,MAAuNK,EAAE,GAAG/F,EAAE,CAACgG,UAA/N;AAAA,MAA2OA,UAAU,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAAhR;AAAA,MAAoR7F,MAAM,GAAGF,EAAE,CAACE,MAAhS;AAAA,MAAwSC,OAAO,GAAGH,EAAE,CAACG,OAArT;AACA,MAAIb,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA,MAAIC,KAAK,GAAGL,MAAM,GAAG;AAAE,mBAAeA;AAAjB,GAAH,GAA+B,EAAjD;AACA,SAAQ/C,gBAAgB,CAACqD,aAAjB,CAA+B,QAA/B,EAAyC9B,QAAQ,CAAC;AAAE,kBAAcmH;AAAhB,GAAD,EAA+BC,gBAAgB,IAAI;AAAE,yBAAqBA;AAAvB,GAAnD,EAAgGH,UAAU,IAAI;AAAE,qBAAiB;AAAnB,GAA9G,EAA0I;AAAElF,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACnN,kCAA4B,IADuL;AAEnN,4CAAsCkG,UAF6K;AAGnN,uCAAiCtF,KAHkL;AAInN,4CAAsC2F;AAJ6K,KAAD,CAAvB;AAK3LtF,IAAAA,IAAI,EAAE,QALqL;AAK3KP,IAAAA,OAAO,EAAEA;AALkK,GAA1I,EAKbI,KALa,CAAjD,EAK4CN,QAL5C,CAAR;AAMH,CAXD;;AAaA,IAAIgG,aAAa,GAAG,UAAUjG,EAAV,EAAc;AAC9B,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;AAAA,MAA4BC,MAAM,GAAGF,EAAE,CAACE,MAAxC;AAAA,MAAgDC,OAAO,GAAGH,EAAE,CAACG,OAA7D;AACA,MAAIb,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA,MAAIC,KAAK,GAAGL,MAAM,GAAG;AAAE,mBAAeA;AAAjB,GAAH,GAA+B,EAAjD;AACA,SAAQ/C,gBAAgB,CAACqD,aAAjB,CAA+B,QAA/B,EAAyC9B,QAAQ,CAAC;AAAE+B,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AAC1E,kCAA4B,IAD8C;AAE1E,uCAAiCY;AAFyC,KAAD,CAAvB;AAGlDK,IAAAA,IAAI,EAAE,QAH4C;AAGlCP,IAAAA,OAAO,EAAEA;AAHyB,GAAD,EAGbI,KAHa,CAAjD,EAG4CN,QAH5C,CAAR;AAIH,CATD;;AAWA,IAAIiG,WAAW,GAAG,UAAUlG,EAAV,EAAc;AAC5B,MAAImG,QAAQ,GAAGnG,EAAE,CAACmG,QAAlB;AACA,MAAI7G,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA,SAAQnD,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AAC9D,gCAA0B,IADoC;AAE9D,qCAA+BY;AAF+B,KAAD;AAAvB,GAAtC,EAIJlD,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE,iCAAb;AAAgD2F,IAAAA,KAAK,EAAE;AAAEnB,MAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUiB,QAAV,EAAoB,GAApB;AAAT;AAAvD,GAAtC,EACIA,QADJ,EAEI,GAFJ,CAJI,CAAR;AAOH,CAXD;;AAaA,IAAIE,SAAS,GAAG,YAAY;AAAE,SAAOlJ,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAtC,CAAP;AAAqF,CAAnH;;AAEA,IAAI6F,OAAO,GAAG,UAAUtG,EAAV,EAAc;AACxB,MAAIoC,EAAE,GAAGpC,EAAE,CAACgF,IAAZ;AAAA,MAAkBA,IAAI,GAAG5C,EAAE,KAAK,KAAK,CAAZ,GAAgB,MAAhB,GAAyBA,EAAlD;AAAA,MAAsDlC,MAAM,GAAGF,EAAE,CAACE,MAAlE;;AACA,MAAI6E,EAAE,GAAG5H,gBAAgB,CAACkF,QAAjB,CAA0B,KAA1B,CAAT;AAAA,MAA2CC,OAAO,GAAGyC,EAAE,CAAC,CAAD,CAAvD;AAAA,MAA4DxC,UAAU,GAAGwC,EAAE,CAAC,CAAD,CAA3E;;AACA,MAAIxE,KAAK,GAAGL,MAAM,GAAG;AAAE,mBAAeA;AAAjB,GAAH,GAA+B,EAAjD;;AACA,MAAIuC,uBAAuB,GAAG,UAAUC,MAAV,EAAkB;AAC5CH,IAAAA,UAAU,CAACG,MAAM,CAACd,SAAR,CAAV;AACH,GAFD;;AAGA,MAAIX,YAAY,GAAGF,uBAAuB,CAAC;AACvCM,IAAAA,mBAAmB,EAAEoB;AADkB,GAAD,CAA1C;AAGA,SAAQtF,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAK6B,KAAL,EAAY;AAAEE,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AAClF,2BAAqB,IAD6D;AAElF,sCAAgC6C;AAFkD,KAAD,CAAvB;AAG1DK,IAAAA,GAAG,EAAE1B,YAHqD;AAGvCmF,IAAAA,KAAK,EAAE;AAAEhB,MAAAA,MAAM,EAAEJ,IAAV;AAAgBC,MAAAA,KAAK,EAAED;AAAvB;AAHgC,GAAZ,CAA9C,CAAR;AAIH,CAdD;;AAgBA,IAAIuB,QAAQ,GAAG,UAAUvG,EAAV,EAAc;AACzB,MAAIwG,SAAS,GAAGxG,EAAE,CAACwG,SAAnB;AACA,MAAIlH,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA,MAAImG,UAAU,GAAGtJ,gBAAgB,CAAC+D,MAAjB,EAAjB;AACA,MAAIwF,WAAW,GAAGvJ,gBAAgB,CAAC+D,MAAjB,EAAlB;AACA,MAAIyF,YAAY,GAAGxJ,gBAAgB,CAAC+D,MAAjB,EAAnB;AACA,MAAI0F,IAAI,GAAGzJ,gBAAgB,CAAC+D,MAAjB,CAAwB,CAAxB,CAAX;AACA,MAAI2F,IAAI,GAAG1J,gBAAgB,CAAC+D,MAAjB,CAAwB,CAAxB,CAAX;AACA,MAAI4F,YAAY,GAAG3J,gBAAgB,CAAC+D,MAAjB,CAAwB,CAAxB,CAAnB;AACA,MAAI6F,eAAe,GAAG5J,gBAAgB,CAAC+D,MAAjB,CAAwB,CAAxB,CAAtB;AACA,MAAI8F,YAAY,GAAG;AACfC,IAAAA,OAAO,EAAE;AADM,GAAnB;;AAGA,MAAIC,eAAe,GAAG,UAAU3K,CAAV,EAAa;AAC/B,QAAI4K,UAAU,GAAGV,UAAU,CAAClF,OAA5B;AACA,QAAI6F,QAAQ,GAAGV,WAAW,CAACnF,OAA3B;AACA,QAAI8F,SAAS,GAAGV,YAAY,CAACpF,OAA7B;;AACA,QAAI,CAAC4F,UAAD,IAAe,CAACC,QAAhB,IAA4B,CAACC,SAAjC,EAA4C;AACxC;AACH;;AACD,QAAIC,YAAY,GAAGP,eAAe,CAACxF,OAAnC;AACA,QAAIgG,EAAE,GAAGhL,CAAC,CAACiL,OAAF,GAAYZ,IAAI,CAACrF,OAA1B;AACA,QAAIkG,aAAa,GAAGX,YAAY,CAACvF,OAAb,IAAwBlB,KAAK,GAAG,CAACkH,EAAJ,GAASA,EAAtC,CAApB;AACA,QAAIG,cAAc,GAAGP,UAAU,CAAC/C,aAAX,CAAyBuD,qBAAzB,GAAiD1C,KAAtE;AACA,QAAI2C,mBAAmB,GAAIH,aAAa,GAAG,GAAjB,GAAwBC,cAAlD;AACAP,IAAAA,UAAU,CAACU,SAAX,CAAqBC,GAArB,CAAyB,8BAAzB;;AACA,QAAItB,SAAJ,EAAe;AACX,UAAIuB,cAAc,GAAGL,cAAc,GAAGD,aAAjB,GAAiCH,YAAtD;AACA,UAAIU,oBAAoB,GAAID,cAAc,GAAG,GAAlB,GAAyBL,cAApD;;AACA,UAAI,CAAClB,SAAS,CAAC;AAAEoB,QAAAA,mBAAmB,EAAEA,mBAAvB;AAA4CH,QAAAA,aAAa,EAAEA,aAA3D;AAA0EO,QAAAA,oBAAoB,EAAEA,oBAAhG;AAAsHD,QAAAA,cAAc,EAAEA;AAAtI,OAAD,CAAd,EAAwK;AACpK;AACH;AACJ;;AACDX,IAAAA,QAAQ,CAAChB,KAAT,CAAenB,KAAf,GAAuB,GAAGC,MAAH,CAAU0C,mBAAV,EAA+B,GAA/B,CAAvB;AACArD,IAAAA,QAAQ,CAAC0D,IAAT,CAAcJ,SAAd,CAAwBC,GAAxB,CAA4B,mCAA5B;AACAV,IAAAA,QAAQ,CAACS,SAAT,CAAmBC,GAAnB,CAAuB,sCAAvB;AACAT,IAAAA,SAAS,CAACQ,SAAV,CAAoBC,GAApB,CAAwB,sCAAxB;AACH,GAxBD;;AAyBA,MAAII,aAAa,GAAG,UAAU3L,CAAV,EAAa;AAC7B,QAAI4K,UAAU,GAAGV,UAAU,CAAClF,OAA5B;AACA,QAAI6F,QAAQ,GAAGV,WAAW,CAACnF,OAA3B;AACA,QAAI8F,SAAS,GAAGV,YAAY,CAACpF,OAA7B;;AACA,QAAI,CAAC4F,UAAD,IAAe,CAACC,QAAhB,IAA4B,CAACC,SAAjC,EAA4C;AACxC;AACH;;AACD9C,IAAAA,QAAQ,CAAC0D,IAAT,CAAcJ,SAAd,CAAwBM,MAAxB,CAA+B,mCAA/B;AACAhB,IAAAA,UAAU,CAACU,SAAX,CAAqBM,MAArB,CAA4B,8BAA5B;AACAf,IAAAA,QAAQ,CAACS,SAAT,CAAmBM,MAAnB,CAA0B,sCAA1B;AACAd,IAAAA,SAAS,CAACQ,SAAV,CAAoBM,MAApB,CAA2B,sCAA3B;AACA5D,IAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CyC,eAA1C,EAA2DF,YAA3D;AACAzC,IAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCyD,aAAxC,EAAuDlB,YAAvD;AACH,GAbD;;AAcA,MAAIoB,eAAe,GAAG,UAAU7L,CAAV,EAAa;AAC/B,QAAI6K,QAAQ,GAAGV,WAAW,CAACnF,OAA3B;;AACA,QAAI,CAAC6F,QAAL,EAAe;AACX;AACH;;AACDR,IAAAA,IAAI,CAACrF,OAAL,GAAehF,CAAC,CAACiL,OAAjB;AACAX,IAAAA,IAAI,CAACtF,OAAL,GAAehF,CAAC,CAAC8L,OAAjB;AACAvB,IAAAA,YAAY,CAACvF,OAAb,GAAuB6F,QAAQ,CAACO,qBAAT,GAAiC1C,KAAxD;AACAV,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuC0C,eAAvC,EAAwDF,YAAxD;AACAzC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqC0D,aAArC,EAAoDlB,YAApD;AACH,GAVD;;AAWA7J,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAIqG,UAAU,GAAGV,UAAU,CAAClF,OAA5B;;AACA,QAAI,CAAC4F,UAAL,EAAiB;AACb;AACH;;AACDJ,IAAAA,eAAe,CAACxF,OAAhB,GAA0B4F,UAAU,CAACQ,qBAAX,GAAmC1C,KAA7D;AACAyB,IAAAA,WAAW,CAACnF,OAAZ,GAAsB4F,UAAU,CAACmB,sBAAjC;AACA3B,IAAAA,YAAY,CAACpF,OAAb,GAAuB4F,UAAU,CAACoB,kBAAlC;AACH,GARD,EAQG,EARH;AASA,SAAOpL,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEmC,IAAAA,GAAG,EAAE8D,UAAP;AAAmBhG,IAAAA,SAAS,EAAE,oBAA9B;AAAoD+H,IAAAA,WAAW,EAAEJ;AAAjE,GAAtC,CAAP;AACH,CA1ED;;AA4EA,IAAIK,OAAO,GAAG,UAAUzI,EAAV,EAAc;AACxB,MAAIoC,EAAE,GAAGpC,EAAE,CAAC6F,SAAZ;AAAA,MAAuBA,SAAS,GAAGzD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAAxD;AAAA,MAA4D2C,EAAE,GAAG/E,EAAE,CAAC0I,SAApE;AAAA,MAA+EA,SAAS,GAAG3D,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAAnH;AAAA,MAAuHW,EAAE,GAAG1F,EAAE,CAAC2I,WAA/H;AAAA,MAA4IA,WAAW,GAAGjD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAA/K;AAAA,MAAmLxF,MAAM,GAAGF,EAAE,CAACE,MAA/L;AAAA,MAAuM6F,EAAE,GAAG/F,EAAE,CAACU,IAA/M;AAAA,MAAqNA,IAAI,GAAGqF,EAAE,KAAK,KAAK,CAAZ,GAAgB,MAAhB,GAAyBA,EAArP;AAAA,MAAyP6C,EAAE,GAAG5I,EAAE,CAAC9D,KAAjQ;AAAA,MAAwQA,KAAK,GAAG0M,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAArS;AAAA,MAAySC,QAAQ,GAAG7I,EAAE,CAAC6I,QAAvT;AAAA,MAAiUC,EAAE,GAAG9I,EAAE,CAAC+I,SAAzU;AAAA,MAAoVA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,YAAY,CAAG,CAA/B,GAAkCA,EAAlY;AACA,MAAIxJ,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAI0J,UAAU,GAAG7L,gBAAgB,CAAC+D,MAAjB,EAAjB;AACA,MAAIb,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA,MAAIC,KAAK,GAAG;AACRoC,IAAAA,GAAG,EAAEqG,UADG;AAER,mBAAe,EAFP;AAGR,kBAAcnD,SAHN;AAIRpF,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AAClB,2BAAqB,IADH;AAElB,gCAA0BY;AAFR,KAAD,CAJb;AAQRsI,IAAAA,WAAW,EAAEA,WARL;AASRzM,IAAAA,KAAK,EAAEA,KATC;AAUR2M,IAAAA,QAAQ,EAAE,UAAUtM,CAAV,EAAa;AAAE,aAAOsM,QAAQ,CAACtM,CAAC,CAAC0M,MAAF,CAAS/M,KAAV,CAAf;AAAkC,KAVnD;AAWR6M,IAAAA,SAAS,EAAEA;AAXH,GAAZ;;AAaA,MAAI7I,MAAJ,EAAY;AACRK,IAAAA,KAAK,CAAC,aAAD,CAAL,GAAuBL,MAAvB;AACH;;AACDS,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAI+H,SAAJ,EAAe;AACX,UAAIQ,UAAU,GAAGF,UAAU,CAACzH,OAA5B;;AACA,UAAI2H,UAAJ,EAAgB;AACZ,YAAIC,CAAC,GAAGvI,MAAM,CAACwI,OAAf;AACA,YAAIC,CAAC,GAAGzI,MAAM,CAAC0I,OAAf;AACAJ,QAAAA,UAAU,CAACpF,KAAX;AACAlD,QAAAA,MAAM,CAAC2I,QAAP,CAAgBJ,CAAhB,EAAmBE,CAAnB;AACH;AACJ;AACJ,GAVwB,EAUtB,EAVsB,CAAzB;AAWA,SAAO3I,IAAI,KAAK,MAAT,GAAkBvD,gBAAgB,CAACqD,aAAjB,CAA+B,OAA/B,EAAwC9B,QAAQ,CAAC;AAAEgC,IAAAA,IAAI,EAAE;AAAR,GAAD,EAAmBH,KAAnB,CAAhD,CAAlB,GAA+FpD,gBAAgB,CAACqD,aAAjB,CAA+B,OAA/B,EAAwC9B,QAAQ,CAAC;AAAEgC,IAAAA,IAAI,EAAE;AAAR,GAAD,EAAuBH,KAAvB,CAAhD,CAAtG;AACH,CAjCD;;AAmCA,IAAIiJ,eAAe,GAAG,UAAUC,mBAAV,EAA+BC,SAA/B,EAA0CC,cAA1C,EAA0D;AAC5E,MAAIC,YAAY,GAAG,UAAUrN,CAAV,EAAa;AAC5B,QAAI0M,MAAM,GAAGS,SAAS,CAACnI,OAAvB;;AACA,QAAI0H,MAAM,IAAI,CAACA,MAAM,CAACY,QAAP,CAAgBtN,CAAC,CAAC0M,MAAlB,CAAf,EAA0C;AACtCU,MAAAA,cAAc;AACjB;AACJ,GALD;;AAMAxM,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAI,CAAC2I,mBAAL,EAA0B;AACtB;AACH;;AACD,QAAIzC,YAAY,GAAG;AACfC,MAAAA,OAAO,EAAE;AADM,KAAnB;AAGA1C,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmCoF,YAAnC,EAAiD5C,YAAjD;AACA,WAAO,YAAY;AACfzC,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,OAA7B,EAAsCmF,YAAtC,EAAoD5C,YAApD;AACH,KAFD;AAGH,GAXD,EAWG,EAXH;AAYH,CAnBD;;AAqBA,IAAI8C,SAAS,GAAG,UAAUC,OAAV,EAAmB;AAC/B,MAAIC,YAAY,GAAG,UAAUzN,CAAV,EAAa;AAC5B,QAAIA,CAAC,CAACwG,GAAF,KAAU,QAAd,EAAwB;AACpBgH,MAAAA,OAAO;AACV;AACJ,GAJD;;AAKA5M,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnCyD,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmCwF,YAAnC;AACA,WAAO,YAAY;AACfzF,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,OAA7B,EAAsCuF,YAAtC;AACH,KAFD;AAGH,GALD,EAKG,EALH;AAMH,CAZD;;AAcA,IAAIC,aAAa,GAAG,YAAY;AAC5B9M,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAIoJ,aAAa,GAAGtJ,MAAM,CAACyD,gBAAP,CAAwBE,QAAQ,CAAC0D,IAAjC,EAAuCkC,QAA3D;AACA5F,IAAAA,QAAQ,CAAC0D,IAAT,CAAc7B,KAAd,CAAoB+D,QAApB,GAA+B,QAA/B;AACA,WAAO,YAAY;AACf5F,MAAAA,QAAQ,CAAC0D,IAAT,CAAc7B,KAAd,CAAoB+D,QAApB,GAA+BD,aAA/B;AACH,KAFD;AAGH,GAND,EAMG,EANH;AAOH,CARD;;AAUA,IAAIE,SAAS,GAAG,UAAUpK,EAAV,EAAc;AAC1B,MAAIqK,kBAAkB,GAAGrK,EAAE,CAACqK,kBAA5B;AAAA,MAAgDpK,QAAQ,GAAGD,EAAE,CAACC,QAA9D;AAAA,MAAwEwJ,mBAAmB,GAAGzJ,EAAE,CAACyJ,mBAAjG;AAAA,MAAsHa,aAAa,GAAGtK,EAAE,CAACsK,aAAzI;AAAA,MAAwJC,QAAQ,GAAGvK,EAAE,CAACuK,QAAtK;AACA,MAAIC,UAAU,GAAGrN,gBAAgB,CAAC+D,MAAjB,EAAjB;AACA,MAAI5B,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA2J,EAAAA,aAAa;AACbH,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAIU,UAAU,CAACjJ,OAAX,IAAsB+I,aAA1B,EAAyC;AACrCC,MAAAA,QAAQ;AACX;AACJ,GAJQ,CAAT;AAKAf,EAAAA,eAAe,CAACC,mBAAD,EAAsBe,UAAtB,EAAkCD,QAAlC,CAAf;AACA5J,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAI8J,UAAU,GAAGD,UAAU,CAACjJ,OAA5B;;AACA,QAAI,CAACkJ,UAAL,EAAiB;AACb;AACH;;AACD,QAAIC,SAAS,GAAGnG,QAAQ,CAAC0D,IAAT,CAAc0C,YAAd,GAA6B,IAA7C;;AACA,QAAIF,UAAU,CAAC9C,qBAAX,GAAmCvC,MAAnC,IAA6CsF,SAAjD,EAA4D;AACxDD,MAAAA,UAAU,CAACrE,KAAX,CAAiB+D,QAAjB,GAA4B,MAA5B;AACAM,MAAAA,UAAU,CAACrE,KAAX,CAAiBsE,SAAjB,GAA6B,GAAGxF,MAAH,CAAUwF,SAAV,EAAqB,IAArB,CAA7B;AACH;AACJ,GAVwB,EAUtB,EAVsB,CAAzB;AAWA,SAAQvN,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE,kBAAc,MAAhB;AAAwBC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACpF,8BAAwB,IAD4D;AAEpF,mCAA6BY;AAFuD,KAAD,CAA7C;AAGtCuK,IAAAA,EAAE,EAAE,wBAAwB1F,MAAxB,CAA+BmF,kBAA/B,CAHkC;AAGkB1H,IAAAA,GAAG,EAAE6H,UAHvB;AAGmC9F,IAAAA,IAAI,EAAE,QAHzC;AAGmDC,IAAAA,QAAQ,EAAE,CAAC;AAH9D,GAAtC,EAGyG1E,QAHzG,CAAR;AAIH,CA3BD;;AA6BA,IAAI4K,YAAY,GAAG,UAAU7K,EAAV,EAAc;AAC7B,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;AACA,SAAO9C,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAtC,EAAgFR,QAAhF,CAAP;AACH,CAHD;;AAKA,IAAI6K,SAAS,GAAG,UAAUC,QAAV,EAAoB;AAChC,MAAI/K,EAAE,GAAG7C,gBAAgB,CAACkF,QAAjB,CAA0B0I,QAA1B,CAAT;AAAA,MAA8CC,MAAM,GAAGhL,EAAE,CAAC,CAAD,CAAzD;AAAA,MAA8DiL,SAAS,GAAGjL,EAAE,CAAC,CAAD,CAA5E;;AACA,MAAIkL,MAAM,GAAG,UAAUC,MAAV,EAAkB;AAC3B,YAAQA,MAAR;AACI,WAAKlP,OAAO,CAAC0B,YAAR,CAAqByN,KAA1B;AACIH,QAAAA,SAAS,CAAC,KAAD,CAAT;AACA;;AACJ,WAAKhP,OAAO,CAAC0B,YAAR,CAAqB0N,IAA1B;AACIJ,QAAAA,SAAS,CAAC,IAAD,CAAT;AACA;;AACJ,WAAKhP,OAAO,CAAC0B,YAAR,CAAqB2N,MAA1B;AACA;AACIL,QAAAA,SAAS,CAAC,UAAUF,QAAV,EAAoB;AAAE,iBAAO,CAACA,QAAR;AAAmB,SAA1C,CAAT;AACA;AAVR;AAYH,GAbD;;AAcA,SAAO;AAAEC,IAAAA,MAAM,EAAEA,MAAV;AAAkBE,IAAAA,MAAM,EAAEA;AAA1B,GAAP;AACH,CAjBD;;AAmBA,IAAIK,MAAM,GAAG,UAAUvL,EAAV,EAAc;AACvB,MAAIwL,OAAO,GAAGxL,EAAE,CAACwL,OAAjB;AAAA,MAA0BpJ,EAAE,GAAGpC,EAAE,CAAC+K,QAAlC;AAAA,MAA4CA,QAAQ,GAAG3I,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAA/E;AAAA,MAAmF6G,MAAM,GAAGjJ,EAAE,CAACiJ,MAA/F;;AACA,MAAIlE,EAAE,GAAG+F,SAAS,CAACC,QAAD,CAAlB;AAAA,MAA8BC,MAAM,GAAGjG,EAAE,CAACiG,MAA1C;AAAA,MAAkDE,MAAM,GAAGnG,EAAE,CAACmG,MAA9D;;AACA,SAAQ/N,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EACJxC,MAAM,IAAIA,MAAM,CAACiC,MAAD,EAASF,MAAT,CADZ,EAEJA,MAAM,IAAIQ,OAAO,CAACN,MAAD,CAFb,CAAR;AAGH,CAND;;AAQA,IAAIN,EAAE,GAAG,CAAT;;AACA,IAAIc,QAAQ,GAAG,YAAY;AAAE,SAAOd,EAAE,EAAT;AAAc,CAA3C;;AAEA,IAAIe,KAAK,GAAG,UAAU3L,EAAV,EAAc;AACtB,MAAIqK,kBAAkB,GAAGrK,EAAE,CAACqK,kBAA5B;AAAA,MAAgDZ,mBAAmB,GAAGzJ,EAAE,CAACyJ,mBAAzE;AAAA,MAA8Fa,aAAa,GAAGtK,EAAE,CAACsK,aAAjH;AAAA,MAAgIkB,OAAO,GAAGxL,EAAE,CAACwL,OAA7I;AAAA,MAAsJpJ,EAAE,GAAGpC,EAAE,CAAC+K,QAA9J;AAAA,MAAwKA,QAAQ,GAAG3I,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAA3M;AAAA,MAA+M6G,MAAM,GAAGjJ,EAAE,CAACiJ,MAA3N;AACA,MAAI2C,cAAc,GAAGvB,kBAAkB,IAAI,GAAGnF,MAAH,CAAUwG,QAAQ,EAAlB,CAA3C;;AACA,MAAIG,YAAY,GAAG,UAAUX,MAAV,EAAkBF,MAAlB,EAA0B;AAAE,WAAQ7N,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE,uBAAiBwK,MAAM,GAAG,MAAH,GAAY,OAArC;AAA8C,uBAAiB,QAA/D;AAAyE,uBAAiB,wBAAwB9F,MAAxB,CAA+B0G,cAA/B;AAA1F,KAAtC,EAAkL3C,MAAM,CAACiC,MAAD,EAASF,MAAT,CAAxL,CAAR;AAAqN,GAApQ;;AACA,MAAIc,aAAa,GAAG,UAAUZ,MAAV,EAAkB;AAAE,WAAQ/N,gBAAgB,CAACqD,aAAjB,CAA+BqK,YAA/B,EAA6C,IAA7C,EAC5C1N,gBAAgB,CAACqD,aAAjB,CAA+B4J,SAA/B,EAA0C;AAAEC,MAAAA,kBAAkB,EAAEuB,cAAtB;AAAsCnC,MAAAA,mBAAmB,EAAEA,mBAA3D;AAAgFa,MAAAA,aAAa,EAAEA,aAA/F;AAA8GC,MAAAA,QAAQ,EAAEW;AAAxH,KAA1C,EAA4KM,OAAO,CAACN,MAAD,CAAnL,CAD4C,CAAR;AAC6J,GADrM;;AAEA,SAAO/N,gBAAgB,CAACqD,aAAjB,CAA+B+K,MAA/B,EAAuC;AAAEtC,IAAAA,MAAM,EAAEA,MAAM,GAAG4C,YAAH,GAAkB,IAAlC;AAAwCL,IAAAA,OAAO,EAAEM,aAAjD;AAAgEf,IAAAA,QAAQ,EAAEA;AAA1E,GAAvC,CAAP;AACH,CAPD;;AASA,IAAIgB,iBAAiB,GAAG,UAAUP,OAAV,EAAmBvC,MAAnB,EAA2B+C,QAA3B,EAAqCC,MAArC,EAA6C;AACjE,MAAIC,UAAU,GAAGjD,MAAM,CAACtB,qBAAP,EAAjB;AACA,MAAIwE,WAAW,GAAGX,OAAO,CAAC7D,qBAAR,EAAlB;AACA,MAAIvC,MAAM,GAAG+G,WAAW,CAAC/G,MAAzB;AAAA,MAAiCH,KAAK,GAAGkH,WAAW,CAAClH,KAArD;AACA,MAAImH,GAAG,GAAG,CAAV;AACA,MAAIC,IAAI,GAAG,CAAX;;AACA,UAAQL,QAAR;AACI,SAAK/P,OAAO,CAACsB,QAAR,CAAiB+O,OAAtB;AACIF,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBhH,MAAvB;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAlB;AACA;;AACJ,SAAKpQ,OAAO,CAACsB,QAAR,CAAiBgP,SAAtB;AACIH,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBhH,MAAvB;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBH,UAAU,CAACjH,KAAX,GAAmB,CAArC,GAAyCA,KAAK,GAAG,CAAxD;AACA;;AACJ,SAAKhJ,OAAO,CAACsB,QAAR,CAAiBiP,QAAtB;AACIJ,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBhH,MAAvB;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBH,UAAU,CAACjH,KAA7B,GAAqCA,KAA5C;AACA;;AACJ,SAAKhJ,OAAO,CAACsB,QAAR,CAAiBkP,QAAtB;AACIL,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAjB;AACAC,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBH,UAAU,CAACjH,KAApC;AACA;;AACJ,SAAKhJ,OAAO,CAACsB,QAAR,CAAiBmP,WAAtB;AACIN,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBF,UAAU,CAAC9G,MAAX,GAAoB,CAArC,GAAyCA,MAAM,GAAG,CAAxD;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBH,UAAU,CAACjH,KAApC;AACA;;AACJ,SAAKhJ,OAAO,CAACsB,QAAR,CAAiBoP,WAAtB;AACIP,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBF,UAAU,CAAC9G,MAA5B,GAAqCA,MAA3C;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBH,UAAU,CAACjH,KAApC;AACA;;AACJ,SAAKhJ,OAAO,CAACsB,QAAR,CAAiBqP,UAAtB;AACIR,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBF,UAAU,CAAC9G,MAAlC;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAlB;AACA;;AACJ,SAAKpQ,OAAO,CAACsB,QAAR,CAAiBsP,YAAtB;AACIT,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBF,UAAU,CAAC9G,MAAlC;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBH,UAAU,CAACjH,KAAX,GAAmB,CAArC,GAAyCA,KAAK,GAAG,CAAxD;AACA;;AACJ,SAAKhJ,OAAO,CAACsB,QAAR,CAAiBuP,WAAtB;AACIV,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBF,UAAU,CAAC9G,MAAlC;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBH,UAAU,CAACjH,KAA7B,GAAqCA,KAA5C;AACA;;AACJ,SAAKhJ,OAAO,CAACsB,QAAR,CAAiBwP,OAAtB;AACIX,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAjB;AACAC,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBpH,KAAzB;AACA;;AACJ,SAAKhJ,OAAO,CAACsB,QAAR,CAAiByP,UAAtB;AACIZ,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBF,UAAU,CAAC9G,MAAX,GAAoB,CAArC,GAAyCA,MAAM,GAAG,CAAxD;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBpH,KAAzB;AACA;;AACJ,SAAKhJ,OAAO,CAACsB,QAAR,CAAiB0P,UAAtB;AACIb,MAAAA,GAAG,GAAGF,UAAU,CAACE,GAAX,GAAiBF,UAAU,CAAC9G,MAA5B,GAAqCA,MAA3C;AACAiH,MAAAA,IAAI,GAAGH,UAAU,CAACG,IAAX,GAAkBpH,KAAzB;AACA;AAhDR;;AAkDA,SAAO;AACHoH,IAAAA,IAAI,EAAEA,IAAI,IAAIJ,MAAM,CAACI,IAAP,IAAe,CAAnB,CADP;AAEHD,IAAAA,GAAG,EAAEA,GAAG,IAAIH,MAAM,CAACG,GAAP,IAAc,CAAlB;AAFL,GAAP;AAIH,CA5DD;;AA8DA,IAAIc,WAAW,GAAG,UAAU1C,UAAV,EAAsBd,SAAtB,EAAiCyD,SAAjC,EAA4CnB,QAA5C,EAAsDC,MAAtD,EAA8D;AAC5EtL,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAIyM,SAAS,GAAG1D,SAAS,CAACnI,OAA1B;AACA,QAAIkJ,UAAU,GAAGD,UAAU,CAACjJ,OAA5B;AACA,QAAI8L,SAAS,GAAGF,SAAS,CAAC5L,OAA1B;;AACA,QAAI,CAACkJ,UAAD,IAAe,CAAC2C,SAAhB,IAA6B,CAACC,SAAlC,EAA6C;AACzC;AACH;;AACD,QAAIC,UAAU,GAAGD,SAAS,CAAC1F,qBAAV,EAAjB;;AACA,QAAI3H,EAAE,GAAG+L,iBAAiB,CAACtB,UAAD,EAAa2C,SAAb,EAAwBpB,QAAxB,EAAkCC,MAAlC,CAA1B;AAAA,QAAqEG,GAAG,GAAGpM,EAAE,CAACoM,GAA9E;AAAA,QAAmFC,IAAI,GAAGrM,EAAE,CAACqM,IAA7F;;AACA5B,IAAAA,UAAU,CAACrE,KAAX,CAAiBgG,GAAjB,GAAuB,GAAGlH,MAAH,CAAUkH,GAAG,GAAGkB,UAAU,CAAClB,GAA3B,EAAgC,IAAhC,CAAvB;AACA3B,IAAAA,UAAU,CAACrE,KAAX,CAAiBiG,IAAjB,GAAwB,GAAGnH,MAAH,CAAUmH,IAAI,GAAGiB,UAAU,CAACjB,IAA5B,EAAkC,IAAlC,CAAxB;AACH,GAXwB,EAWtB,EAXsB,CAAzB;AAYH,CAbD;;AAeA,IAAIkB,KAAK,GAAG,UAAUvN,EAAV,EAAc;AACtB,MAAIoC,EAAJ;;AACA,MAAIoL,eAAe,GAAGxN,EAAE,CAACwN,eAAzB;AAAA,MAA0CxB,QAAQ,GAAGhM,EAAE,CAACgM,QAAxD;AACA,SAAQ7O,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAEhB,UAAU,EAAE2C,EAAE,GAAG;AAChE,yBAAmB,IAD6C;AAEhE,6BAAuB4J,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiB+O,OAFW;AAGhE,6BAAuBN,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiBgP,SAHW;AAIhE,6BAAuBP,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiBiP,QAJW;AAKhE,6BAAuBR,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiBkP,QALW;AAMhE,6BAAuBT,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiBmP,WANW;AAOhE,6BAAuBV,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiBoP,WAPW;AAQhE,6BAAuBX,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiBqP,UARW;AAShE,6BAAuBZ,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiBsP,YATW;AAUhE,6BAAuBb,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiBuP,WAVW;AAWhE,6BAAuBd,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiBwP,OAXW;AAYhE,6BAAuBf,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiByP,UAZW;AAahE,6BAAuBhB,QAAQ,KAAK/P,OAAO,CAACsB,QAAR,CAAiB0P;AAbW,KAAL,EAe/D7K,EAAE,CAAC,GAAG8C,MAAH,CAAUsI,eAAV,CAAD,CAAF,GAAiCA,eAAe,KAAK,EAfU,EAgB/DpL,EAhB6D;AAAvB,GAAtC,CAAR;AAiBH,CApBD;;AAsBA,IAAIqL,WAAW,GAAG,UAAUzN,EAAV,EAAc;AAC5B,MAAIqK,kBAAkB,GAAGrK,EAAE,CAACqK,kBAA5B;AAAA,MAAgDpK,QAAQ,GAAGD,EAAE,CAACC,QAA9D;AAAA,MAAwEwJ,mBAAmB,GAAGzJ,EAAE,CAACyJ,mBAAjG;AAAA,MAAsHwC,MAAM,GAAGjM,EAAE,CAACiM,MAAlI;AAAA,MAA0ID,QAAQ,GAAGhM,EAAE,CAACgM,QAAxJ;AAAA,MAAkKtC,SAAS,GAAG1J,EAAE,CAAC0J,SAAjL;AAAA,MAA4LgE,OAAO,GAAG1N,EAAE,CAAC0N,OAAzM;AACA,MAAIlD,UAAU,GAAGrN,gBAAgB,CAAC+D,MAAjB,EAAjB;AACA,MAAIyM,QAAQ,GAAGxQ,gBAAgB,CAAC+D,MAAjB,EAAf;AACA,MAAIiM,SAAS,GAAGhQ,gBAAgB,CAAC+D,MAAjB,EAAhB;AACA,MAAI5B,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACAkJ,EAAAA,eAAe,CAACC,mBAAD,EAAsBe,UAAtB,EAAkCkD,OAAlC,CAAf;AACAR,EAAAA,WAAW,CAAC1C,UAAD,EAAad,SAAb,EAAwByD,SAAxB,EAAmCnB,QAAnC,EAA6CC,MAA7C,CAAX;AACAtL,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAIiN,eAAe,GAAGD,QAAQ,CAACpM,OAA/B;;AACA,QAAI,CAACqM,eAAL,EAAsB;AAClB;AACH;;AACD,QAAIlD,SAAS,GAAGnG,QAAQ,CAAC0D,IAAT,CAAc0C,YAAd,GAA6B,IAA7C;;AACA,QAAIiD,eAAe,CAACjG,qBAAhB,GAAwCvC,MAAxC,IAAkDsF,SAAtD,EAAiE;AAC7DkD,MAAAA,eAAe,CAACxH,KAAhB,CAAsB+D,QAAtB,GAAiC,MAAjC;AACAyD,MAAAA,eAAe,CAACxH,KAAhB,CAAsBsE,SAAtB,GAAkC,GAAGxF,MAAH,CAAUwF,SAAV,EAAqB,IAArB,CAAlC;AACH;AACJ,GAVwB,EAUtB,EAVsB,CAAzB;AAWA,MAAImD,OAAO,GAAG,gCAAgC3I,MAAhC,CAAuCmF,kBAAvC,CAAd;AACA,SAAQlN,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EACJtO,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEmC,IAAAA,GAAG,EAAEwK,SAAP;AAAkB/G,IAAAA,KAAK,EAAE;AAAEiG,MAAAA,IAAI,EAAE,CAAR;AAAWL,MAAAA,QAAQ,EAAE,UAArB;AAAiCI,MAAAA,GAAG,EAAE;AAAtC;AAAzB,GAAtC,CADI,EAEJjP,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE,wBAAoBqN,OAAtB;AAA+BpN,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACnF,gCAA0B,IADyD;AAEnF,qCAA+BY;AAFoD,KAAD,CAApD;AAG9BuK,IAAAA,EAAE,EAAE,0BAA0B1F,MAA1B,CAAiCmF,kBAAjC,CAH0B;AAG4B1H,IAAAA,GAAG,EAAE6H,UAHjC;AAG6C9F,IAAAA,IAAI,EAAE,QAHnD;AAG6DC,IAAAA,QAAQ,EAAE,CAAC;AAHxE,GAAtC,EAIIxH,gBAAgB,CAACqD,aAAjB,CAA+B+M,KAA/B,EAAsC;AAAEC,IAAAA,eAAe,EAAE,8BAAnB;AAAmDxB,IAAAA,QAAQ,EAAEA;AAA7D,GAAtC,CAJJ,EAKI7O,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEoK,IAAAA,EAAE,EAAEiD,OAAN;AAAelL,IAAAA,GAAG,EAAEgL;AAApB,GAAtC,EAAsE1N,QAAtE,CALJ,CAFI,CAAR;AAQH,CA7BD;;AA+BA,IAAI6N,cAAc,GAAG,UAAU9N,EAAV,EAAc;AAC/B,MAAIsK,aAAa,GAAGtK,EAAE,CAACsK,aAAvB;AAAA,MAAsCoD,OAAO,GAAG1N,EAAE,CAAC0N,OAAnD;AACA,MAAIzM,YAAY,GAAG9D,gBAAgB,CAAC+D,MAAjB,EAAnB;AACA4I,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAI7I,YAAY,CAACM,OAAb,IAAwB+I,aAA5B,EAA2C;AACvCoD,MAAAA,OAAO;AACV;AACJ,GAJQ,CAAT;AAKA,SAAOvQ,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE,2BAAb;AAA0CkC,IAAAA,GAAG,EAAE1B;AAA/C,GAAtC,CAAP;AACH,CATD;;AAWA,IAAI8M,OAAO,GAAG,UAAU/N,EAAV,EAAc;AACxB,MAAIoC,EAAE,GAAGpC,EAAE,CAACgO,YAAZ;AAAA,MAA0BA,YAAY,GAAG5L,EAAE,KAAK,KAAK,CAAZ,GAAgB,QAAhB,GAA2BA,EAApE;AAAA,MAAwEiI,kBAAkB,GAAGrK,EAAE,CAACqK,kBAAhG;AAAA,MAAoHZ,mBAAmB,GAAGzJ,EAAE,CAACyJ,mBAA7I;AAAA,MAAkKa,aAAa,GAAGtK,EAAE,CAACsK,aAArL;AAAA,MAAoMkB,OAAO,GAAGxL,EAAE,CAACwL,OAAjN;AAAA,MAA0NzG,EAAE,GAAG/E,EAAE,CAACiO,UAAlO;AAAA,MAA8OA,UAAU,GAAGlJ,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAAlR;AAAA,MAAsRkH,MAAM,GAAGjM,EAAE,CAACiM,MAAlS;AAAA,MAA0SD,QAAQ,GAAGhM,EAAE,CAACgM,QAAxT;AAAA,MAAkU/C,MAAM,GAAGjJ,EAAE,CAACiJ,MAA9U;;AACA,MAAIvD,EAAE,GAAGoF,SAAS,CAAC,KAAD,CAAlB;AAAA,MAA2BE,MAAM,GAAGtF,EAAE,CAACsF,MAAvC;AAAA,MAA+CE,MAAM,GAAGxF,EAAE,CAACwF,MAA3D;;AACA,MAAIxB,SAAS,GAAGvM,gBAAgB,CAAC+D,MAAjB,EAAhB;AACA,MAAI0K,cAAc,GAAGvB,kBAAkB,IAAI,GAAGnF,MAAH,CAAUwG,QAAQ,EAAlB,CAA3C;AACA,SAAQvO,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEmC,IAAAA,GAAG,EAAE+G,SAAP;AAAkB,qBAAiBsB,MAAM,GAAG,MAAH,GAAY,OAArD;AAA8D,qBAAiBgD,YAA/E;AAA6F,qBAAiB,yBAAyB9I,MAAzB,CAAgC0G,cAAhC;AAA9G,GAAtC,EACJ3C,MAAM,CAACiC,MAAD,EAASF,MAAT,CADF,EAEJA,MAAM,IAAK7N,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EACPwC,UAAU,IAAI9Q,gBAAgB,CAACqD,aAAjB,CAA+BsN,cAA/B,EAA+C;AAAExD,IAAAA,aAAa,EAAEA,aAAjB;AAAgCoD,IAAAA,OAAO,EAAExC;AAAzC,GAA/C,CADP,EAEP/N,gBAAgB,CAACqD,aAAjB,CAA+BiN,WAA/B,EAA4C;AAAEpD,IAAAA,kBAAkB,EAAEuB,cAAtB;AAAsCnC,IAAAA,mBAAmB,EAAEA,mBAA3D;AAAgFwC,IAAAA,MAAM,EAAEA,MAAxF;AAAgGD,IAAAA,QAAQ,EAAEA,QAA1G;AAAoHtC,IAAAA,SAAS,EAAEA,SAA/H;AAA0IgE,IAAAA,OAAO,EAAExC;AAAnJ,GAA5C,EAAyMM,OAAO,CAACN,MAAD,CAAhN,CAFO,CAFP,CAAR;AAKH,CAVD;;AAYA,IAAIgD,WAAW,GAAG,UAAUlO,EAAV,EAAc;AAC5B,MAAIqK,kBAAkB,GAAGrK,EAAE,CAACqK,kBAA5B;AAAA,MAAgDpK,QAAQ,GAAGD,EAAE,CAACC,QAA9D;AAAA,MAAwEuK,UAAU,GAAGxK,EAAE,CAACwK,UAAxF;AAAA,MAAoGyB,MAAM,GAAGjM,EAAE,CAACiM,MAAhH;AAAA,MAAwHD,QAAQ,GAAGhM,EAAE,CAACgM,QAAtI;AAAA,MAAgJtC,SAAS,GAAG1J,EAAE,CAAC0J,SAA/J;AACA,MAAIyD,SAAS,GAAGhQ,gBAAgB,CAAC+D,MAAjB,EAAhB;AACA,MAAI5B,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA4M,EAAAA,WAAW,CAAC1C,UAAD,EAAad,SAAb,EAAwByD,SAAxB,EAAmCnB,QAAnC,EAA6CC,MAA7C,CAAX;AACA,SAAQ9O,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EACJtO,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEmC,IAAAA,GAAG,EAAEwK,SAAP;AAAkB/G,IAAAA,KAAK,EAAE;AAAEiG,MAAAA,IAAI,EAAE,CAAR;AAAWL,MAAAA,QAAQ,EAAE,UAArB;AAAiCI,MAAAA,GAAG,EAAE;AAAtC;AAAzB,GAAtC,CADI,EAEJjP,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACtD,gCAA0B,IAD4B;AAEtD,qCAA+BY;AAFuB,KAAD,CAAvB;AAG9BuK,IAAAA,EAAE,EAAE,0BAA0B1F,MAA1B,CAAiCmF,kBAAjC,CAH0B;AAG4B1H,IAAAA,GAAG,EAAE6H,UAHjC;AAG6C9F,IAAAA,IAAI,EAAE;AAHnD,GAAtC,EAIIvH,gBAAgB,CAACqD,aAAjB,CAA+B+M,KAA/B,EAAsC;AAAEC,IAAAA,eAAe,EAAE,8BAAnB;AAAmDxB,IAAAA,QAAQ,EAAEA;AAA7D,GAAtC,CAJJ,EAKI7O,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAtC,EAAuFR,QAAvF,CALJ,CAFI,CAAR;AAQH,CAdD;;AAgBA,IAAIkO,OAAO,GAAG,UAAUnO,EAAV,EAAc;AACxB,MAAIqK,kBAAkB,GAAGrK,EAAE,CAACqK,kBAA5B;AAAA,MAAgDmB,OAAO,GAAGxL,EAAE,CAACwL,OAA7D;AAAA,MAAsES,MAAM,GAAGjM,EAAE,CAACiM,MAAlF;AAAA,MAA0FD,QAAQ,GAAGhM,EAAE,CAACgM,QAAxG;AAAA,MAAkH/C,MAAM,GAAGjJ,EAAE,CAACiJ,MAA9H;;AACA,MAAI7G,EAAE,GAAG0I,SAAS,CAAC,KAAD,CAAlB;AAAA,MAA2BE,MAAM,GAAG5I,EAAE,CAAC4I,MAAvC;AAAA,MAA+CE,MAAM,GAAG9I,EAAE,CAAC8I,MAA3D;;AACA,MAAIxB,SAAS,GAAGvM,gBAAgB,CAAC+D,MAAjB,EAAhB;AACA,MAAIsJ,UAAU,GAAGrN,gBAAgB,CAAC+D,MAAjB,EAAjB;AACA,MAAI0K,cAAc,GAAGvB,kBAAkB,IAAI,GAAGnF,MAAH,CAAUwG,QAAQ,EAAlB,CAA3C;AACA5B,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAIJ,SAAS,CAACnI,OAAV,IAAqBgD,QAAQ,CAAC6J,aAA9B,IAA+C1E,SAAS,CAACnI,OAAV,CAAkBsI,QAAlB,CAA2BtF,QAAQ,CAAC6J,aAApC,CAAnD,EAAuG;AACnGC,MAAAA,KAAK;AACR;AACJ,GAJQ,CAAT;;AAKA,MAAIC,IAAI,GAAG,YAAY;AACnBpD,IAAAA,MAAM,CAACjP,OAAO,CAAC0B,YAAR,CAAqB0N,IAAtB,CAAN;AACH,GAFD;;AAGA,MAAIgD,KAAK,GAAG,YAAY;AACpBnD,IAAAA,MAAM,CAACjP,OAAO,CAAC0B,YAAR,CAAqByN,KAAtB,CAAN;AACH,GAFD;;AAGA,MAAImD,MAAM,GAAG,UAAUhS,CAAV,EAAa;AACtB,QAAIiS,iBAAiB,GAAGjS,CAAC,CAACkS,aAAF,YAA2BvK,WAA3B,IACpB3H,CAAC,CAACmS,aAAF,CAAgBtK,aADI,IAEpB7H,CAAC,CAACmS,aAAF,CAAgBtK,aAAhB,CAA8ByF,QAA9B,CAAuCtN,CAAC,CAACkS,aAAzC,CAFJ;;AAGA,QAAID,iBAAJ,EAAuB;AACnB,UAAIhE,UAAU,CAACjJ,OAAf,EAAwB;AACpBiJ,QAAAA,UAAU,CAACjJ,OAAX,CAAmB6E,KAAnB,CAAyB9B,OAAzB,GAAmC,MAAnC;AACH;AACJ,KAJD,MAKK;AACD+J,MAAAA,KAAK;AACR;AACJ,GAZD;;AAaA,SAAQlR,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EACJtO,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEmC,IAAAA,GAAG,EAAE+G,SAAP;AAAkB,wBAAoB,0BAA0BxE,MAA1B,CAAiC0G,cAAjC,CAAtC;AAAwF2C,IAAAA,MAAM,EAAEA,MAAhG;AAAwGI,IAAAA,OAAO,EAAEL,IAAjH;AAAuHM,IAAAA,YAAY,EAAEN,IAArI;AAA2IO,IAAAA,YAAY,EAAER;AAAzJ,GAAtC,EAAwMpF,MAAxM,CADI,EAEJ+B,MAAM,IAAK7N,gBAAgB,CAACqD,aAAjB,CAA+B0N,WAA/B,EAA4C;AAAE7D,IAAAA,kBAAkB,EAAEuB,cAAtB;AAAsCpB,IAAAA,UAAU,EAAEA,UAAlD;AAA8DyB,IAAAA,MAAM,EAAEA,MAAtE;AAA8ED,IAAAA,QAAQ,EAAEA,QAAxF;AAAkGtC,IAAAA,SAAS,EAAEA;AAA7G,GAA5C,EAAsK8B,OAAO,EAA7K,CAFP,CAAR;AAGH,CAjCD;;AAmCA,IAAIsD,gBAAJ;;AACA,CAAC,UAAUA,gBAAV,EAA4B;AACzBA,EAAAA,gBAAgB,CAAC,gBAAD,CAAhB,GAAqC,gBAArC;AACAA,EAAAA,gBAAgB,CAAC,WAAD,CAAhB,GAAgC,WAAhC;AACAA,EAAAA,gBAAgB,CAAC,UAAD,CAAhB,GAA+B,UAA/B;AACH,CAJD,EAIGA,gBAAgB,KAAKA,gBAAgB,GAAG,EAAxB,CAJnB;;AAKA,IAAIC,uBAAuB,GAAG,CAAC,IAA/B;AACA,IAAIC,gBAAgB,GAAG,EAAvB;;AACA,IAAIC,kBAAkB,GAAG,UAAUjP,EAAV,EAAc;AACnC,MAAIkP,GAAG,GAAGlP,EAAE,CAACkP,GAAb;AAAA,MAAkBC,SAAS,GAAGnP,EAAE,CAACmP,SAAjC;AAA4CnP,EAAAA,EAAE,CAACoP,QAAH;AAC5C,MAAIC,QAAQ,GAAGH,GAAG,CAACG,QAAnB;AACA,MAAIC,KAAK,GAAG,GAAGpK,MAAH,CAAUiK,SAAV,EAAqB,KAArB,EAA4BjK,MAA5B,CAAmCgK,GAAG,CAACK,WAAJ,CAAgBC,KAAnD,CAAZ;;AACA,MAAIC,0BAA0B,GAAG,YAAY;AACzC,WAAOzR,KAAK,CAACqR,QAAD,CAAL,CACFK,IADE,CACG,IADH,EAEFC,GAFE,CAEE,UAAUzM,CAAV,EAAa0M,SAAb,EAAwB;AAAE,aAAQ;AACvCA,QAAAA,SAAS,EAAEA,SAD4B;AAEvCC,QAAAA,YAAY,EAAEf,gBAAgB,CAACgB,cAFQ;AAGvCC,QAAAA,UAAU,EAAEhB;AAH2B,OAAR;AAI9B,KANE,CAAP;AAOH,GARD;;AASA,MAAIiB,OAAO,GAAG,YAAY;AACtBhB,IAAAA,gBAAgB,CAACM,KAAD,CAAhB,GAA0B,EAA1B;AACH,GAFD;;AAGA,MAAIW,UAAU,GAAG,YAAY;AACzBjB,IAAAA,gBAAgB,CAACM,KAAD,CAAhB,GAA0BG,0BAA0B,EAApD;AACH,GAFD;;AAGA,MAAIS,YAAY,GAAG,UAAUN,SAAV,EAAqB;AACpCZ,IAAAA,gBAAgB,CAACM,KAAD,CAAhB,CAAwBM,SAAxB,EAAmCC,YAAnC,GAAkDf,gBAAgB,CAACqB,QAAnE;AACH,GAFD;;AAGA,MAAIC,aAAa,GAAG,UAAUR,SAAV,EAAqB;AACrCZ,IAAAA,gBAAgB,CAACM,KAAD,CAAhB,CAAwBM,SAAxB,EAAmCC,YAAnC,GAAkDf,gBAAgB,CAACuB,SAAnE;AACH,GAFD;;AAGA,MAAIC,QAAQ,GAAG,UAAUC,UAAV,EAAsBC,QAAtB,EAAgC;AAC3C,SAAK,IAAI1R,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuQ,QAApB,EAA8BvQ,CAAC,EAA/B,EAAmC;AAC/B,UAAIA,CAAC,GAAGyR,UAAJ,IAAkBzR,CAAC,GAAG0R,QAA1B,EAAoC;AAChCxB,QAAAA,gBAAgB,CAACM,KAAD,CAAhB,CAAwBxQ,CAAxB,EAA2BiR,UAA3B,GAAwChB,uBAAxC;AACAC,QAAAA,gBAAgB,CAACM,KAAD,CAAhB,CAAwBxQ,CAAxB,EAA2B+Q,YAA3B,GAA0Cf,gBAAgB,CAACgB,cAA3D;AACH;AACJ;AACJ,GAPD;;AAQA,MAAIW,aAAa,GAAG,UAAUb,SAAV,EAAqBG,UAArB,EAAiC;AACjDf,IAAAA,gBAAgB,CAACM,KAAD,CAAhB,CAAwBM,SAAxB,EAAmCG,UAAnC,GAAgDA,UAAhD;AACH,GAFD;;AAGA,MAAIW,sBAAsB,GAAG,YAAY;AACrC,QAAIC,YAAY,GAAG3B,gBAAgB,CAACM,KAAD,CAAhB,CAAwBsB,MAAxB,CAA+B,UAAUrN,IAAV,EAAgB;AAAE,aAAOA,IAAI,CAACwM,UAAL,GAAkBhB,uBAAzB;AAAmD,KAApG,CAAnB;;AACA,QAAI,CAAC4B,YAAY,CAAC3R,MAAlB,EAA0B;AACtB,aAAO,CAAC,CAAR;AACH;;AACD,QAAI6R,gBAAgB,GAAGF,YAAY,CAAC,CAAD,CAAZ,CAAgBf,SAAvC;AACA,QAAIkB,eAAe,GAAGH,YAAY,CAACA,YAAY,CAAC3R,MAAb,GAAsB,CAAvB,CAAZ,CAAsC4Q,SAA5D;AACA,QAAImB,eAAe,GAAGJ,YAAY,CAAC3R,MAAnC;;AACA,SAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiS,eAApB,EAAqCjS,CAAC,EAAtC,EAA0C;AACtC,UAAI6R,YAAY,CAAC7R,CAAD,CAAZ,CAAgB+Q,YAAhB,KAAiCf,gBAAgB,CAACuB,SAAtD,EAAiE;AAC7D,eAAO,CAAC,CAAR;AACH;;AACD,UAAIM,YAAY,CAAC7R,CAAD,CAAZ,CAAgB+Q,YAAhB,KAAiCf,gBAAgB,CAACgB,cAAtD,EAAsE;AAClE,eAAOa,YAAY,CAAC7R,CAAD,CAAZ,CAAgB8Q,SAAvB;AACH;AACJ;;AACD,QAAIkB,eAAe,GAAG,CAAlB,GAAsBzB,QAAtB,IACAL,gBAAgB,CAACM,KAAD,CAAhB,CAAwBwB,eAAe,GAAG,CAA1C,EAA6CjB,YAA7C,KAA8Df,gBAAgB,CAACqB,QADnF,EAC6F;AACzF,aAAOW,eAAe,GAAG,CAAzB;AACH,KAHD,MAIK,IAAID,gBAAgB,GAAG,CAAnB,IAAwB,CAAxB,IACL7B,gBAAgB,CAACM,KAAD,CAAhB,CAAwBuB,gBAAgB,GAAG,CAA3C,EAA8ChB,YAA9C,KAA+Df,gBAAgB,CAACqB,QAD/E,EACyF;AAC1F,aAAOU,gBAAgB,GAAG,CAA1B;AACH;;AACD,WAAO,CAAC,CAAR;AACH,GAzBD;;AA0BAZ,EAAAA,UAAU;AACV,SAAO;AACHlB,IAAAA,uBAAuB,EAAEA,uBADtB;AAEHiB,IAAAA,OAAO,EAAEA,OAFN;AAGHU,IAAAA,sBAAsB,EAAEA,sBAHrB;AAIHR,IAAAA,YAAY,EAAEA,YAJX;AAKHE,IAAAA,aAAa,EAAEA,aALZ;AAMHH,IAAAA,UAAU,EAAEA,UANT;AAOHK,IAAAA,QAAQ,EAAEA,QAPP;AAQHG,IAAAA,aAAa,EAAEA;AARZ,GAAP;AAUH,CAzED;;AA2EA,SAASO,WAAT,CAAqBC,YAArB,EAAmC;AAC/B,MAAIC,KAAK,GAAGD,YAAY,IAAI,EAA5B;AACA,MAAIE,SAAS,GAAG,EAAhB;AACA,SAAO;AACHC,IAAAA,SAAS,EAAE,UAAUrO,GAAV,EAAegH,OAAf,EAAwB;AAC/BoH,MAAAA,SAAS,CAACpO,GAAD,CAAT,GAAiB,CAACoO,SAAS,CAACpO,GAAD,CAAT,IAAkB,EAAnB,EAAuBmC,MAAvB,CAA8B6E,OAA9B,CAAjB;AACH,KAHE;AAIHsH,IAAAA,WAAW,EAAE,UAAUtO,GAAV,EAAegH,OAAf,EAAwB;AACjCoH,MAAAA,SAAS,CAACpO,GAAD,CAAT,GAAiB,CAACoO,SAAS,CAACpO,GAAD,CAAT,IAAkB,EAAnB,EAAuB6N,MAAvB,CAA8B,UAAUU,CAAV,EAAa;AAAE,eAAOA,CAAC,KAAKvH,OAAb;AAAuB,OAApE,CAAjB;AACH,KANE;AAOHwH,IAAAA,MAAM,EAAE,UAAUxO,GAAV,EAAeyO,IAAf,EAAqB;AACzB,UAAIxR,EAAJ;;AACAkR,MAAAA,KAAK,GAAGxS,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKwS,KAAL,CAAT,GAAuBlR,EAAE,GAAG,EAAL,EAASA,EAAE,CAAC+C,GAAD,CAAF,GAAUyO,IAAnB,EAAyBxR,EAAhD,EAAhB;AACA,OAACmR,SAAS,CAACpO,GAAD,CAAT,IAAkB,EAAnB,EAAuBnG,OAAvB,CAA+B,UAAUmN,OAAV,EAAmB;AAAE,eAAOA,OAAO,CAACmH,KAAK,CAACnO,GAAD,CAAN,CAAd;AAA6B,OAAjF;AACH,KAXE;AAYH/F,IAAAA,GAAG,EAAE,UAAU+F,GAAV,EAAe;AAChB,aAAOmO,KAAK,CAACnO,GAAD,CAAZ;AACH;AAdE,GAAP;AAgBH;;AAED,IAAI0O,IAAI,GAAG;AACVC,EAAAA,cAAc,EAAE;AACfC,IAAAA,qBAAqB,EAAE,2CADR;AAEfC,IAAAA,MAAM,EAAE;AAFO,GADN;AAKVC,EAAAA,aAAa,EAAE;AACdC,IAAAA,QAAQ,EAAE;AADI,GALL;AAQVC,EAAAA,SAAS,EAAE;AARD,CAAX;AAUA,IAAIC,IAAI,GAAG;AACVP,EAAAA,IAAI,EAAEA;AADI,CAAX;AAIA,IAAIQ,mBAAmB,GAAGD,IAA1B;AACA,IAAIE,mBAAmB,GAAG/U,gBAAgB,CAACiC,aAAjB,CAA+B;AACrD+S,EAAAA,IAAI,EAAEF,mBAD+C;AAErDG,EAAAA,OAAO,EAAE,YAAY,CAAG;AAF6B,CAA/B,CAA1B;;AAKA,SAASC,WAAT,CAAqBnW,KAArB,EAA4B;AACxB,MAAIyG,GAAG,GAAGxF,gBAAgB,CAAC+D,MAAjB,CAAwBhF,KAAxB,CAAV;AACAiB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC6B,IAAAA,GAAG,CAACpB,OAAJ,GAAcrF,KAAd;AACH,GAFD,EAEG,CAACA,KAAD,CAFH;AAGA,SAAOyG,GAAG,CAACpB,OAAX;AACH;;AAED,IAAI+Q,mBAAmB,GAAG,UAAUC,QAAV,EAAoBC,IAApB,EAA0B;AAChD,MAAIC,OAAO,GAAGtV,gBAAgB,CAAC+D,MAAjB,EAAd;;AACA,MAAI8O,OAAO,GAAG,YAAY;AACtB,QAAIyC,OAAO,CAAClR,OAAZ,EAAqB;AACjBmR,MAAAA,YAAY,CAACD,OAAO,CAAClR,OAAT,CAAZ;AACH;AACJ,GAJD;;AAKApE,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,WAAO,YAAY;AAAE,aAAOkP,OAAO,EAAd;AAAmB,KAAxC;AACH,GAFD,EAEG,EAFH;AAGA,SAAO7S,gBAAgB,CAACwV,WAAjB,CAA6B,YAAY;AAC5C,QAAIC,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAG9T,SAAS,CAACC,MAAhC,EAAwC6T,EAAE,EAA1C,EAA8C;AAC1CD,MAAAA,IAAI,CAACC,EAAD,CAAJ,GAAW9T,SAAS,CAAC8T,EAAD,CAApB;AACH;;AACD7C,IAAAA,OAAO;AACPyC,IAAAA,OAAO,CAAClR,OAAR,GAAkBuR,UAAU,CAAC,YAAY;AACrCP,MAAAA,QAAQ,CAACtT,KAAT,CAAe,KAAK,CAApB,EAAuB2T,IAAvB;AACH,KAF2B,EAEzBJ,IAFyB,CAA5B;AAGH,GATM,EASJ,CAACD,QAAD,EAAWC,IAAX,CATI,CAAP;AAUH,CApBD;;AAsBA,IAAIO,cAAc,GAAG,UAAU/S,EAAV,EAAc;AAC/B,MAAI0J,SAAS,GAAG1J,EAAE,CAAC0J,SAAnB;AAAA,MAA8BsJ,QAAQ,GAAGhT,EAAE,CAACgT,QAA5C;AACArS,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAIsS,EAAE,GAAG,IAAIC,cAAJ,CAAmB,UAAUxR,OAAV,EAAmB;AAC3CA,MAAAA,OAAO,CAAC9E,OAAR,CAAgB,UAAU+E,KAAV,EAAiB;AAC7BqR,QAAAA,QAAQ,CAACrR,KAAK,CAACsH,MAAP,CAAR;AACH,OAFD;AAGH,KAJQ,CAAT;AAKA,QAAI3H,SAAS,GAAGoI,SAAS,CAACnI,OAA1B;;AACA,QAAI,CAACD,SAAL,EAAgB;AACZ;AACH;;AACD2R,IAAAA,EAAE,CAAC/Q,OAAH,CAAWZ,SAAX;AACA,WAAO,YAAY;AACf2R,MAAAA,EAAE,CAACjR,SAAH,CAAaV,SAAb;AACH,KAFD;AAGH,GAdwB,EActB,EAdsB,CAAzB;AAeH,CAjBD;;AAmBA,IAAI6R,WAAW,GAAG,UAAUjC,KAAV,EAAiBkC,MAAjB,EAAyB;AACvC,MAAIC,IAAI,GAAGD,MAAM,CAACC,IAAlB;AACA,SAAOnC,KAAK,CAAC9L,MAAN,KAAiBiO,IAAI,CAACjO,MAAtB,IAAgC8L,KAAK,CAACjM,KAAN,KAAgBoO,IAAI,CAACpO,KAArD,GAA6DoO,IAA7D,GAAoEnC,KAA3E;AACH,CAHD;;AAIA,IAAIoC,cAAc,GAAG,UAAUtT,EAAV,EAAc;AAC/B,MAAIuT,UAAU,GAAGvT,EAAE,CAACuT,UAApB;;AACA,MAAInR,EAAE,GAAGjF,gBAAgB,CAACkF,QAAjB,CAA0BkR,UAAU,CAAChS,OAArC,CAAT;AAAA,MAAwDiS,OAAO,GAAGpR,EAAE,CAAC,CAAD,CAApE;AAAA,MAAyEqR,UAAU,GAAGrR,EAAE,CAAC,CAAD,CAAxF;;AACA,MAAIsR,kBAAkB,GAAGvW,gBAAgB,CAAC+D,MAAjB,CAAwB,KAAxB,CAAzB;;AACA,MAAI6D,EAAE,GAAG5H,gBAAgB,CAACwW,UAAjB,CAA4BR,WAA5B,EAAyC;AAAE/N,IAAAA,MAAM,EAAE,CAAV;AAAaH,IAAAA,KAAK,EAAE;AAApB,GAAzC,CAAT;AAAA,MAA4EoO,IAAI,GAAGtO,EAAE,CAAC,CAAD,CAArF;AAAA,MAA0F6O,QAAQ,GAAG7O,EAAE,CAAC,CAAD,CAAvG;;AACApE,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAI4S,UAAU,CAAChS,OAAX,KAAuBiS,OAA3B,EAAoC;AAChCC,MAAAA,UAAU,CAACF,UAAU,CAAChS,OAAZ,CAAV;AACH;AACJ,GAJwB,CAAzB;AAKAZ,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAI6S,OAAO,IAAI,CAACE,kBAAkB,CAACnS,OAAnC,EAA4C;AACxCmS,MAAAA,kBAAkB,CAACnS,OAAnB,GAA6B,IAA7B;;AACA,UAAIvB,EAAE,GAAGwT,OAAO,CAAC7L,qBAAR,EAAT;AAAA,UAA0CvC,MAAM,GAAGpF,EAAE,CAACoF,MAAtD;AAAA,UAA8DH,KAAK,GAAGjF,EAAE,CAACiF,KAAzE;;AACA2O,MAAAA,QAAQ,CAAC;AACLP,QAAAA,IAAI,EAAE;AAAEjO,UAAAA,MAAM,EAAEA,MAAV;AAAkBH,UAAAA,KAAK,EAAEA;AAAzB;AADD,OAAD,CAAR;AAGH;AACJ,GARwB,EAQtB,CAACuO,OAAD,CARsB,CAAzB;AASArW,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAI,CAAC0S,OAAL,EAAc;AACV;AACH;;AACD,QAAIK,OAAO,GAAG,IAAIX,cAAJ,CAAmB,UAAUxR,OAAV,EAAmBlD,EAAnB,EAAuB;AACpDkD,MAAAA,OAAO,CAAC9E,OAAR,CAAgB,UAAU+E,KAAV,EAAiB;AAC7B,YAAIA,KAAK,CAACsH,MAAN,KAAiBuK,OAArB,EAA8B;AAC1B,cAAIxT,EAAE,GAAG2B,KAAK,CAACwK,WAAf;AAAA,cAA4B/G,MAAM,GAAGpF,EAAE,CAACoF,MAAxC;AAAA,cAAgDH,KAAK,GAAGjF,EAAE,CAACiF,KAA3D;AACA2O,UAAAA,QAAQ,CAAC;AACLP,YAAAA,IAAI,EAAE;AAAEjO,cAAAA,MAAM,EAAEA,MAAV;AAAkBH,cAAAA,KAAK,EAAEA;AAAzB;AADD,WAAD,CAAR;AAGH;AACJ,OAPD;AAQH,KATa,CAAd;AAUA4O,IAAAA,OAAO,CAAC3R,OAAR,CAAgBsR,OAAhB;AACA,WAAO,YAAY;AACfK,MAAAA,OAAO,CAAC7R,SAAR,CAAkBwR,OAAlB;AACH,KAFD;AAGH,GAlBD,EAkBG,CAACA,OAAD,CAlBH;AAmBA,SAAOH,IAAP;AACH,CAvCD;;AAyCA,IAAIS,YAAY,GAAG,YAAY;AAC3B,MAAIC,YAAY,GAAG5W,gBAAgB,CAAC+D,MAAjB,CAAwB,KAAxB,CAAnB;AACA/D,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnCiT,IAAAA,YAAY,CAACxS,OAAb,GAAuB,IAAvB;AACA,WAAO,YAAY;AACfwS,MAAAA,YAAY,CAACxS,OAAb,GAAuB,KAAvB;AACH,KAFD;AAGH,GALD,EAKG,EALH;AAMA,SAAOwS,YAAP;AACH,CATD;;AAWA,IAAIC,WAAW,GAAG,UAAU/C,YAAV,EAAwB;AACtC,MAAIgD,SAAS,GAAGH,YAAY,EAA5B;AACA,MAAII,MAAM,GAAG/W,gBAAgB,CAAC+D,MAAjB,CAAwB,CAAxB,CAAb;;AACA,MAAIlB,EAAE,GAAG7C,gBAAgB,CAACkF,QAAjB,CAA0B4O,YAA1B,CAAT;AAAA,MAAkDC,KAAK,GAAGlR,EAAE,CAAC,CAAD,CAA5D;AAAA,MAAiEmU,QAAQ,GAAGnU,EAAE,CAAC,CAAD,CAA9E;;AACA,MAAIoU,WAAW,GAAGjX,gBAAgB,CAACwV,WAAjB,CAA6B,UAAUzW,KAAV,EAAiB;AAC5DmY,IAAAA,oBAAoB,CAACH,MAAM,CAAC3S,OAAR,CAApB;AACA2S,IAAAA,MAAM,CAAC3S,OAAP,GAAiB+S,qBAAqB,CAAC,YAAY;AAC/CL,MAAAA,SAAS,CAAC1S,OAAV,IAAqB4S,QAAQ,CAACjY,KAAD,CAA7B;AACH,KAFqC,CAAtC;AAGH,GALiB,EAKf,EALe,CAAlB;AAMAiB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,WAAO,YAAY;AACfuT,MAAAA,oBAAoB,CAACH,MAAM,CAAC3S,OAAR,CAApB;AACH,KAFD;AAGH,GAJD,EAIG,EAJH;AAKA,SAAO,CAAC2P,KAAD,EAAQkD,WAAR,CAAP;AACH,CAhBD;;AAkBA,IAAIG,aAAa,GAAG;AAChBlI,EAAAA,IAAI,EAAE,CADU;AAEhBD,EAAAA,GAAG,EAAE;AAFW,CAApB;AAIA,IAAIoI,oBAAoB,GAAG;AACvBvN,EAAAA,OAAO,EAAE,KADc;AAEvBwN,EAAAA,OAAO,EAAE;AAFc,CAA3B;;AAIA,IAAIC,SAAS,GAAG,UAAU1U,EAAV,EAAc;AAC1B,MAAIuT,UAAU,GAAGvT,EAAE,CAACuT,UAApB;AAAA,MAAgClT,KAAK,GAAGL,EAAE,CAACK,KAA3C;AAAA,MAAkDsU,UAAU,GAAG3U,EAAE,CAAC2U,UAAlE;;AACA,MAAIvS,EAAE,GAAG4R,WAAW,CAACO,aAAD,CAApB;AAAA,MAAqCK,YAAY,GAAGxS,EAAE,CAAC,CAAD,CAAtD;AAAA,MAA2DyS,eAAe,GAAGzS,EAAE,CAAC,CAAD,CAA/E;;AACA,MAAI2C,EAAE,GAAG5H,gBAAgB,CAACkF,QAAjB,CAA0BkR,UAAU,CAAChS,OAArC,CAAT;AAAA,MAAwDiS,OAAO,GAAGzO,EAAE,CAAC,CAAD,CAApE;AAAA,MAAyE0O,UAAU,GAAG1O,EAAE,CAAC,CAAD,CAAxF;;AACA,MAAI+P,MAAM,GAAGzU,KAAK,GAAG,CAAC,CAAJ,GAAQ,CAA1B;AACA,MAAI0U,SAAS,GAAG5X,gBAAgB,CAAC+D,MAAjB,CAAwByT,UAAxB,CAAhB;AACAI,EAAAA,SAAS,CAACxT,OAAV,GAAoBoT,UAApB;AACAhU,EAAAA,yBAAyB,CAAC,YAAY;AAClC8S,IAAAA,UAAU,CAACF,UAAU,CAAChS,OAAZ,CAAV;AACH,GAFwB,CAAzB;AAGAZ,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAI,CAAC6S,OAAL,EAAc;AACV;AACH;;AACD,QAAIwB,YAAY,GAAG,YAAY;AAC3B,cAAQD,SAAS,CAACxT,OAAlB;AACI,aAAKtF,OAAO,CAACwB,UAAR,CAAmBwX,UAAxB;AACIJ,UAAAA,eAAe,CAAC;AACZxI,YAAAA,IAAI,EAAEyI,MAAM,GAAGtB,OAAO,CAAC0B,UADX;AAEZ9I,YAAAA,GAAG,EAAE;AAFO,WAAD,CAAf;AAIA;;AACJ,aAAKnQ,OAAO,CAACwB,UAAR,CAAmB0X,QAAxB;AACA;AACIN,UAAAA,eAAe,CAAC;AACZxI,YAAAA,IAAI,EAAE,CADM;AAEZD,YAAAA,GAAG,EAAEoH,OAAO,CAAC4B;AAFD,WAAD,CAAf;AAIA;AAbR;AAeH,KAhBD;;AAiBA5B,IAAAA,OAAO,CAAChP,gBAAR,CAAyB,QAAzB,EAAmCwQ,YAAnC,EAAiDR,oBAAjD;AACA,WAAO,YAAY;AACfhB,MAAAA,OAAO,CAAC/O,mBAAR,CAA4B,QAA5B,EAAsCuQ,YAAtC,EAAoDR,oBAApD;AACH,KAFD;AAGH,GAzBwB,EAyBtB,CAAChB,OAAD,CAzBsB,CAAzB;AA0BA,MAAIjK,QAAQ,GAAGpM,gBAAgB,CAACwV,WAAjB,CAA6B,UAAU1G,MAAV,EAAkB;AAC1D,QAAIoJ,GAAG,GAAG9B,UAAU,CAAChS,OAArB;;AACA,QAAI8T,GAAJ,EAAS;AACL,cAAQN,SAAS,CAACxT,OAAlB;AACI,aAAKtF,OAAO,CAACwB,UAAR,CAAmBwX,UAAxB;AACII,UAAAA,GAAG,CAACH,UAAJ,GAAiBJ,MAAM,GAAG7I,MAAM,CAACI,IAAjC;AACA;;AACJ,aAAKpQ,OAAO,CAACwB,UAAR,CAAmB0X,QAAxB;AACA;AACIE,UAAAA,GAAG,CAACD,SAAJ,GAAgBnJ,MAAM,CAACG,GAAvB;AACA;AAPR;AASH;AACJ,GAbc,EAaZ,CAACmH,UAAD,CAbY,CAAf;AAcA,SAAO;AACHqB,IAAAA,YAAY,EAAEA,YADX;AAEHrL,IAAAA,QAAQ,EAAEA;AAFP,GAAP;AAIH,CAtDD;;AAwDA,IAAI+L,KAAK,GAAG,UAAU3R,GAAV,EAAeC,GAAf,EAAoB1H,KAApB,EAA2B;AAAE,SAAOwH,IAAI,CAACE,GAAL,CAASD,GAAT,EAAcD,IAAI,CAACC,GAAL,CAASzH,KAAT,EAAgB0H,GAAhB,CAAd,CAAP;AAA6C,CAAtF;;AAEA,IAAI2R,WAAW,GAAG,UAAUC,GAAV,EAAeC,IAAf,EAAqBvZ,KAArB,EAA4BwZ,YAA5B,EAA0C;AACxD,SAAOF,GAAG,IAAIC,IAAd,EAAoB;AAChB,QAAIE,MAAM,GAAI,CAACH,GAAG,GAAGC,IAAP,IAAe,CAAhB,GAAqB,CAAlC;AACA,QAAIG,YAAY,GAAGF,YAAY,CAACC,MAAD,CAA/B;;AACA,QAAIC,YAAY,GAAG1Z,KAAnB,EAA0B;AACtBsZ,MAAAA,GAAG,GAAGG,MAAM,GAAG,CAAf;AACH,KAFD,MAGK,IAAIC,YAAY,GAAG1Z,KAAnB,EAA0B;AAC3BuZ,MAAAA,IAAI,GAAGE,MAAM,GAAG,CAAhB;AACH,KAFI,MAGA;AACD,aAAOA,MAAP;AACH;AACJ;;AACD,SAAOH,GAAG,GAAG,CAAN,GAAUA,GAAG,GAAG,CAAhB,GAAoB,CAA3B;AACH,CAfD;;AAiBA,IAAIK,SAAS,GAAG;AACZzQ,EAAAA,MAAM,EAAE,CADI;AAEZH,EAAAA,KAAK,EAAE;AAFK,CAAhB;AAIA,IAAI6Q,WAAW,GAAG;AACdzJ,EAAAA,IAAI,EAAE,CADQ;AAEdD,EAAAA,GAAG,EAAE;AAFS,CAAlB;;AAIA,IAAI2J,cAAc,GAAG,UAAUpB,UAAV,EAAsBqB,YAAtB,EAAoCC,SAApC,EAA+CrB,YAA/C,EAA6D;AAC9E,MAAIsB,aAAa,GAAG,CAApB;;AACA,UAAQvB,UAAR;AACI,SAAK1Y,OAAO,CAACwB,UAAR,CAAmBwX,UAAxB;AACIiB,MAAAA,aAAa,GAAGtB,YAAY,CAACvI,IAA7B;AACA;;AACJ,SAAKpQ,OAAO,CAACwB,UAAR,CAAmB0X,QAAxB;AACA;AACIe,MAAAA,aAAa,GAAGtB,YAAY,CAACxI,GAA7B;AACA;AAPR;;AASA,MAAIpH,IAAI,GAAGgR,YAAY,CAAChX,MAAb,GAAsB,CAAjC;;AACA,MAAImX,SAAS,GAAG,UAAUC,KAAV,EAAiB;AAC7B,YAAQzB,UAAR;AACI,WAAK1Y,OAAO,CAACwB,UAAR,CAAmBwX,UAAxB;AACI,eAAOe,YAAY,CAACI,KAAD,CAAZ,CAAoBC,KAApB,CAA0BhK,IAAjC;;AACJ,WAAKpQ,OAAO,CAACwB,UAAR,CAAmB6Y,OAAxB;AACA,WAAKra,OAAO,CAACwB,UAAR,CAAmB0X,QAAxB;AACA;AACI,eAAOa,YAAY,CAACI,KAAD,CAAZ,CAAoBC,KAApB,CAA0BjK,GAAjC;AANR;AAQH,GATD;;AAUA,MAAIiK,KAAK,GAAGd,WAAW,CAAC,CAAD,EAAIvQ,IAAJ,EAAUkR,aAAV,EAAyBC,SAAzB,CAAvB;;AACA,MAAIxB,UAAU,KAAK1Y,OAAO,CAACwB,UAAR,CAAmB6Y,OAAtC,EAA+C;AAC3C,QAAIC,QAAQ,GAAGP,YAAY,CAACK,KAAD,CAAZ,CAAoBA,KAApB,CAA0BjK,GAAzC;;AACA,WAAOiK,KAAK,GAAG,CAAR,IAAa,CAAb,IACHL,YAAY,CAACK,KAAK,GAAG,CAAT,CAAZ,CAAwBA,KAAxB,CAA8BjK,GAA9B,KAAsCmK,QADnC,IAEHP,YAAY,CAACK,KAAK,GAAG,CAAT,CAAZ,CAAwBA,KAAxB,CAA8BhK,IAA9B,IAAsCuI,YAAY,CAACvI,IAFvD,EAE6D;AACzDgK,MAAAA,KAAK;AACR;AACJ;;AACD,MAAIG,GAAG,GAAGH,KAAV;AACA,MAAII,YAAY,GAAG,EAAnB;AACA,MAAIC,iBAAiB,GAAGL,KAAxB;AACA,MAAIM,YAAY,GAAG,CAAC,CAApB;;AACA,SAAOH,GAAG,IAAIxR,IAAd,EAAoB;AAChB,QAAI4R,QAAQ,GAAGZ,YAAY,CAACQ,GAAD,CAAZ,CAAkBxR,IAAjC;AACA,QAAI+K,UAAU,GAAG;AACb9K,MAAAA,KAAK,EAAE,CADM;AAEbG,MAAAA,MAAM,EAAE;AAFK,KAAjB;AAIA,QAAIyR,aAAa,GAAG;AAChBzK,MAAAA,GAAG,EAAE4J,YAAY,CAACQ,GAAD,CAAZ,CAAkBH,KAAlB,CAAwBjK,GAAxB,GAA8BwI,YAAY,CAACxI,GADhC;AAEhBC,MAAAA,IAAI,EAAE2J,YAAY,CAACQ,GAAD,CAAZ,CAAkBH,KAAlB,CAAwBhK,IAAxB,GAA+BuI,YAAY,CAACvI;AAFlC,KAApB;AAIA,QAAIyK,WAAW,GAAG;AACd1R,MAAAA,MAAM,EAAE6Q,SAAS,CAAC7Q,MAAV,GAAmByR,aAAa,CAACzK,GAD3B;AAEdnH,MAAAA,KAAK,EAAEgR,SAAS,CAAChR,KAAV,GAAkB4R,aAAa,CAACxK;AAFzB,KAAlB;;AAIA,QAAIsI,UAAU,KAAK1Y,OAAO,CAACwB,UAAR,CAAmBwX,UAAlC,IAAgD6B,WAAW,CAAC7R,KAAZ,GAAoB,CAAxE,EAA2E;AACvEuR,MAAAA,GAAG;AACH;AACH;;AACD,QAAI7B,UAAU,KAAK1Y,OAAO,CAACwB,UAAR,CAAmB0X,QAAlC,IAA8C2B,WAAW,CAAC1R,MAAZ,GAAqB,CAAvE,EAA0E;AACtEoR,MAAAA,GAAG;AACH;AACH;;AACD,QAAI7B,UAAU,KAAK1Y,OAAO,CAACwB,UAAR,CAAmB6Y,OAAlC,KAA8CQ,WAAW,CAAC7R,KAAZ,GAAoB,CAApB,IAAyB6R,WAAW,CAAC1R,MAAZ,GAAqB,CAA5F,CAAJ,EAAoG;AAChGoR,MAAAA,GAAG;AACH;AACH;;AACD,QAAI7B,UAAU,KAAK1Y,OAAO,CAACwB,UAAR,CAAmB0X,QAAtC,EAAgD;AAC5CpF,MAAAA,UAAU,CAAC9K,KAAX,GAAmB,CAAnB;AACH,KAFD,MAGK,IAAI4R,aAAa,CAACxK,IAAd,GAAqB,CAAzB,EAA4B;AAC7B,UAAI0K,YAAY,GAAGH,QAAQ,CAAC3R,KAAT,GAAiB,CAAC4R,aAAa,CAACxK,IAAnD;AACA0D,MAAAA,UAAU,CAAC9K,KAAX,GAAmB8R,YAAY,IAAId,SAAS,CAAChR,KAA1B,GAAkC8R,YAAY,GAAGd,SAAS,CAAChR,KAA3D,GAAmE,CAAtF;AACH,KAHI,MAIA;AACD8K,MAAAA,UAAU,CAAC9K,KAAX,GAAmB2R,QAAQ,CAAC3R,KAAT,IAAkB6R,WAAW,CAAC7R,KAA9B,GAAsC,CAAtC,GAA0C6R,WAAW,CAAC7R,KAAZ,GAAoB2R,QAAQ,CAAC3R,KAA1F;AACH;;AACD,QAAI0P,UAAU,KAAK1Y,OAAO,CAACwB,UAAR,CAAmBwX,UAAtC,EAAkD;AAC9ClF,MAAAA,UAAU,CAAC3K,MAAX,GAAoB,CAApB;AACH,KAFD,MAGK,IAAIyR,aAAa,CAACzK,GAAd,GAAoB,CAAxB,EAA2B;AAC5B,UAAI4K,aAAa,GAAGJ,QAAQ,CAACxR,MAAT,GAAkB,CAACyR,aAAa,CAACzK,GAArD;AACA2D,MAAAA,UAAU,CAAC3K,MAAX,GAAoB4R,aAAa,IAAIf,SAAS,CAAC7Q,MAA3B,GAAoC4R,aAAa,GAAGf,SAAS,CAAC7Q,MAA9D,GAAuE,CAA3F;AACH,KAHI,MAIA;AACD2K,MAAAA,UAAU,CAAC3K,MAAX,GAAoBwR,QAAQ,CAACxR,MAAT,IAAmB0R,WAAW,CAAC1R,MAA/B,GAAwC,CAAxC,GAA4C0R,WAAW,CAAC1R,MAAZ,GAAqBwR,QAAQ,CAACxR,MAA9F;AACH;;AACDqR,IAAAA,YAAY,CAACD,GAAD,CAAZ,GAAoBzG,UAAU,CAAC9K,KAAX,GAAmB8K,UAAU,CAAC3K,MAAlD;;AACA,QAAIuR,YAAY,GAAGF,YAAY,CAACD,GAAD,CAA/B,EAAsC;AAClCG,MAAAA,YAAY,GAAGF,YAAY,CAACD,GAAD,CAA3B;AACAE,MAAAA,iBAAiB,GAAGF,GAApB;AACH;;AACDA,IAAAA,GAAG;AACN;;AACD,SAAO;AACHH,IAAAA,KAAK,EAAEA,KADJ;AAEHG,IAAAA,GAAG,EAAEA,GAFF;AAGHE,IAAAA,iBAAiB,EAAEA,iBAHhB;AAIHD,IAAAA,YAAY,EAAEA;AAJX,GAAP;AAMH,CA9FD;;AA+FA,IAAIQ,UAAU,GAAG,UAAUjX,EAAV,EAAc;AAC3B,MAAIkX,YAAY,GAAGlX,EAAE,CAACkX,YAAtB;AAAA,MAAoC7W,KAAK,GAAGL,EAAE,CAACK,KAA/C;AAAA,MAAsD8W,aAAa,GAAGnX,EAAE,CAACmX,aAAzE;AAAA,MAAwFC,aAAa,GAAGpX,EAAE,CAACoX,aAA3G;AAAA,MAA0HC,WAAW,GAAGrX,EAAE,CAACqX,WAA3I;AAAA,MAAwJC,SAAS,GAAGtX,EAAE,CAACsX,SAAvK;AAAA,MAAkL3C,UAAU,GAAG3U,EAAE,CAAC2U,UAAlM;AAAA,MAA8M4C,aAAa,GAAGvX,EAAE,CAACuX,aAAjO;;AACA,MAAInV,EAAE,GAAGsS,SAAS,CAAC;AACfnB,IAAAA,UAAU,EAAE+D,SADG;AAEfjX,IAAAA,KAAK,EAAEA,KAFQ;AAGfsU,IAAAA,UAAU,EAAEA;AAHG,GAAD,CAAlB;AAAA,MAIIC,YAAY,GAAGxS,EAAE,CAACwS,YAJtB;AAAA,MAIoCrL,QAAQ,GAAGnH,EAAE,CAACmH,QAJlD;;AAKA,MAAIiO,UAAU,GAAGlE,cAAc,CAAC;AAC5BC,IAAAA,UAAU,EAAE+D;AADgB,GAAD,CAA/B;AAGA,MAAIvC,SAAS,GAAG5X,gBAAgB,CAAC+D,MAAjB,CAAwB;AACpC0T,IAAAA,YAAY,EAAEkB,WADsB;AAEpCE,IAAAA,YAAY,EAAE,EAFsB;AAGpCwB,IAAAA,UAAU,EAAE3B,SAHwB;AAIpC4B,IAAAA,SAAS,EAAE5B;AAJyB,GAAxB,CAAhB;AAMAd,EAAAA,SAAS,CAACxT,OAAV,CAAkBqT,YAAlB,GAAiCA,YAAjC;AACAG,EAAAA,SAAS,CAACxT,OAAV,CAAkBiW,UAAlB,GAA+BA,UAA/B;;AACA,MAAIzS,EAAE,GAAG5H,gBAAgB,CAACkF,QAAjB,CAA0B,EAA1B,CAAT;AAAA,MAAwCqV,YAAY,GAAG3S,EAAE,CAAC,CAAD,CAAzD;AAAA,MAA8D4S,eAAe,GAAG5S,EAAE,CAAC,CAAD,CAAlF;;AACA,MAAIiR,YAAY,GAAG7Y,gBAAgB,CAACya,OAAjB,CAAyB,YAAY;AACpD,QAAI5B,YAAY,GAAG,EAAnB;AACA,QAAI6B,UAAU,GAAG,CAAjB;AACA,QAAIC,UAAU,GAAG;AACbzL,MAAAA,IAAI,EAAE,CADO;AAEbD,MAAAA,GAAG,EAAE;AAFQ,KAAjB;AAIA,QAAI1B,SAAS,GAAG,CAAhB;;AACA,SAAK,IAAI5L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqY,aAApB,EAAmCrY,CAAC,EAApC,EAAwC;AACpC,UAAIkG,IAAI,GAAG0S,YAAY,CAAC5Y,CAAD,CAAZ,IAAmByY,aAAa,CAACL,YAAY,CAACpY,CAAD,CAAb,CAA3C;AACA,UAAIiZ,OAAO,GAAGjC,WAAd;;AACA,UAAIhX,CAAC,KAAK,CAAV,EAAa;AACT+Y,QAAAA,UAAU,GAAG7S,IAAI,CAACC,KAAlB;AACA6S,QAAAA,UAAU,GAAG;AACTzL,UAAAA,IAAI,EAAE,CADG;AAETD,UAAAA,GAAG,EAAE;AAFI,SAAb;AAIA1B,QAAAA,SAAS,GAAG1F,IAAI,CAACI,MAAjB;AACH,OAPD,MAQK;AACD,gBAAQuP,UAAR;AACI,eAAK1Y,OAAO,CAACwB,UAAR,CAAmB6Y,OAAxB;AACIuB,YAAAA,UAAU,IAAI7S,IAAI,CAACC,KAAnB;;AACA,gBAAI4S,UAAU,GAAGL,UAAU,CAACvS,KAA5B,EAAmC;AAC/B8S,cAAAA,OAAO,GAAG;AACN1L,gBAAAA,IAAI,EAAE2J,YAAY,CAAClX,CAAC,GAAG,CAAL,CAAZ,CAAoB0X,GAApB,CAAwBnK,IADxB;AAEND,gBAAAA,GAAG,EAAE0L,UAAU,CAAC1L;AAFV,eAAV;AAIA1B,cAAAA,SAAS,GAAGhH,IAAI,CAACE,GAAL,CAAS8G,SAAT,EAAoB1F,IAAI,CAACI,MAAzB,CAAZ;AACH,aAND,MAOK;AACDyS,cAAAA,UAAU,GAAG7S,IAAI,CAACC,KAAlB;AACA8S,cAAAA,OAAO,GAAG;AACN1L,gBAAAA,IAAI,EAAEyL,UAAU,CAACzL,IADX;AAEND,gBAAAA,GAAG,EAAE0L,UAAU,CAAC1L,GAAX,GAAiB1B;AAFhB,eAAV;AAIAoN,cAAAA,UAAU,GAAG;AACTzL,gBAAAA,IAAI,EAAE0L,OAAO,CAAC1L,IADL;AAETD,gBAAAA,GAAG,EAAE2L,OAAO,CAAC3L;AAFJ,eAAb;AAIA1B,cAAAA,SAAS,GAAG1F,IAAI,CAACI,MAAjB;AACH;;AACD;;AACJ,eAAKnJ,OAAO,CAACwB,UAAR,CAAmBwX,UAAxB;AACA,eAAKhZ,OAAO,CAACwB,UAAR,CAAmB0X,QAAxB;AACA;AACI4C,YAAAA,OAAO,GAAG/B,YAAY,CAAClX,CAAC,GAAG,CAAL,CAAZ,CAAoB0X,GAA9B;AACA;AA3BR;AA6BH;;AACD,UAAIwB,KAAK,GAAG;AACR3L,QAAAA,IAAI,EAAE0L,OAAO,CAAC1L,IAAR,GAAerH,IAAI,CAACC,KADlB;AAERmH,QAAAA,GAAG,EAAE2L,OAAO,CAAC3L,GAAR,GAAcpH,IAAI,CAACI;AAFhB,OAAZ;AAIA4Q,MAAAA,YAAY,CAAClX,CAAD,CAAZ,GAAkB;AACdsX,QAAAA,KAAK,EAAEtX,CADO;AAEduX,QAAAA,KAAK,EAAE0B,OAFO;AAGd/S,QAAAA,IAAI,EAAEA,IAHQ;AAIdwR,QAAAA,GAAG,EAAEwB,KAJS;AAKdjI,QAAAA,UAAU,EAAE,CAAC;AALC,OAAlB;AAOH;;AACD,WAAOiG,YAAP;AACH,GA/DkB,EA+DhB,CAACkB,YAAD,EAAevC,UAAf,EAA2B6C,UAA3B,EAAuCE,YAAvC,EAAqDH,aAArD,CA/DgB,CAAnB;AAgEA,MAAIE,SAAS,GAAGzB,YAAY,CAACmB,aAAa,GAAG,CAAjB,CAAZ,GACV;AACE/R,IAAAA,MAAM,EAAE4Q,YAAY,CAACmB,aAAa,GAAG,CAAjB,CAAZ,CAAgCX,GAAhC,CAAoCpK,GAD9C;AAEEnH,IAAAA,KAAK,EAAE+Q,YAAY,CAACmB,aAAa,GAAG,CAAjB,CAAZ,CAAgCX,GAAhC,CAAoCnK;AAF7C,GADU,GAKVwJ,SALN;AAMAd,EAAAA,SAAS,CAACxT,OAAV,CAAkByU,YAAlB,GAAiCA,YAAjC;AACAjB,EAAAA,SAAS,CAACxT,OAAV,CAAkBkW,SAAlB,GAA8BA,SAA9B;;AACA,MAAI/R,EAAE,GAAGqQ,cAAc,CAACpB,UAAD,EAAaI,SAAS,CAACxT,OAAV,CAAkByU,YAA/B,EAA6CjB,SAAS,CAACxT,OAAV,CAAkBiW,UAA/D,EAA2EzC,SAAS,CAACxT,OAAV,CAAkBqT,YAA7F,CAAvB;AAAA,MAAmI8B,iBAAiB,GAAGhR,EAAE,CAACgR,iBAA1J;AAAA,MAA6KD,YAAY,GAAG/Q,EAAE,CAAC+Q,YAA/L;AAAA,MAA6MJ,KAAK,GAAG3Q,EAAE,CAAC2Q,KAAxN;AAAA,MAA+NG,GAAG,GAAG9Q,EAAE,CAAC8Q,GAAxO;;AACA,MAAIyB,UAAU,GAAGb,aAAa,CAACf,KAAD,CAA9B;AACA,MAAI6B,QAAQ,GAAGb,WAAW,CAACb,GAAD,CAA1B;AACA,MAAI2B,YAAY,GAAGhb,gBAAgB,CAACya,OAAjB,CAAyB,YAAY;AACpD,QAAIO,YAAY,GAAG,EAAnB;;AACA,QAAIC,OAAO,GAAG,UAAUtZ,CAAV,EAAa;AACvB,UAAIyE,IAAI,GAAGyS,YAAY,CAAClX,CAAD,CAAvB;;AACA,UAAIuZ,WAAW,GAAG3Z,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK6E,IAAL,CAAT,EAAqB;AAAEwM,QAAAA,UAAU,EAAE0G,YAAY,CAAC3X,CAAD,CAAZ,KAAoBwZ,SAApB,GAAgC7B,YAAY,CAAC3X,CAAD,CAA5C,GAAkD,CAAC,CAAjE;AAAoEyZ,QAAAA,UAAU,EAAE,UAAUlD,GAAV,EAAe;AACtI,cAAI,CAACA,GAAL,EAAU;AACN;AACH;;AACD,cAAIhC,IAAI,GAAGgC,GAAG,CAAC1N,qBAAJ,EAAX;;AACA,cAAI0L,IAAI,CAACjO,MAAL,KAAgB,CAAhB,IAAqBiO,IAAI,CAACpO,KAAL,KAAe,CAAxC,EAA2C;AACvC;AACH;;AACD,cAAIuT,YAAY,GAAGjB,aAAa,CAAC;AAC7BnS,YAAAA,MAAM,EAAEiO,IAAI,CAACjO,MADgB;AAE7BH,YAAAA,KAAK,EAAEoO,IAAI,CAACpO;AAFiB,WAAD,CAAhC;;AAIA,cAAIuT,YAAY,CAACpT,MAAb,KAAwB7B,IAAI,CAACyB,IAAL,CAAUI,MAAlC,IAA4CoT,YAAY,CAACvT,KAAb,KAAuB1B,IAAI,CAACyB,IAAL,CAAUC,KAAjF,EAAwF;AACpF0S,YAAAA,eAAe,CAAC,UAAUc,GAAV,EAAe;AAC3B,kBAAIzY,EAAJ;;AACA,qBAAQtB,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK+Z,GAAL,CAAT,GAAqBzY,EAAE,GAAG,EAAL,EAASA,EAAE,CAAClB,CAAD,CAAF,GAAQ0Z,YAAjB,EAA+BxY,EAApD,EAAhB;AACH,aAHc,CAAf;AAIH;AACJ;AAlB0C,OAArB,CAA1B;;AAmBAmY,MAAAA,YAAY,CAACtY,IAAb,CAAkBwY,WAAlB;AACH,KAtBD;;AAuBA,SAAK,IAAIvZ,CAAC,GAAGmZ,UAAb,EAAyBnZ,CAAC,IAAIoZ,QAA9B,EAAwCpZ,CAAC,EAAzC,EAA6C;AACzCsZ,MAAAA,OAAO,CAACtZ,CAAD,CAAP;AACH;;AACD,WAAOqZ,YAAP;AACH,GA7BkB,EA6BhB,CAACZ,aAAD,EAAgBd,YAAhB,EAA8BT,YAA9B,CA7BgB,CAAnB;AA8BA,MAAI0C,YAAY,GAAGvb,gBAAgB,CAACwV,WAAjB,CAA6B,UAAUyD,KAAV,EAAiBnK,MAAjB,EAAyB;AACrE,QAAI+J,YAAY,GAAGjB,SAAS,CAACxT,OAAV,CAAkByU,YAArC;AACA,QAAI2C,WAAW,GAAG3C,YAAY,CAACV,KAAK,CAAC,CAAD,EAAI6B,aAAa,GAAG,CAApB,EAAuBf,KAAvB,CAAN,CAA9B;;AACA,QAAIuC,WAAJ,EAAiB;AACbpP,MAAAA,QAAQ,CAAC;AACL8C,QAAAA,IAAI,EAAEJ,MAAM,CAACI,IAAP,GAAcsM,WAAW,CAACtC,KAAZ,CAAkBhK,IADjC;AAELD,QAAAA,GAAG,EAAEH,MAAM,CAACG,GAAP,GAAauM,WAAW,CAACtC,KAAZ,CAAkBjK;AAF/B,OAAD,CAAR;AAIH;AACJ,GATkB,EAShB,CAAC7C,QAAD,CATgB,CAAnB;AAUA,MAAIqP,kBAAkB,GAAGzb,gBAAgB,CAACwV,WAAjB,CAA6B,YAAY;AAC9D,YAAQgC,UAAR;AACI,WAAK1Y,OAAO,CAACwB,UAAR,CAAmBwX,UAAxB;AACI,eAAO;AACHjJ,UAAAA,QAAQ,EAAE,UADP;AAEH5G,UAAAA,MAAM,EAAE,MAFL;AAGHH,UAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUuS,SAAS,CAACxS,KAApB,EAA2B,IAA3B;AAHJ,SAAP;;AAKJ,WAAKhJ,OAAO,CAACwB,UAAR,CAAmB0X,QAAxB;AACA;AACI,eAAO;AACHnJ,UAAAA,QAAQ,EAAE,UADP;AAEH5G,UAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUuS,SAAS,CAACrS,MAApB,EAA4B,IAA5B,CAFL;AAGHH,UAAAA,KAAK,EAAE;AAHJ,SAAP;AATR;AAeH,GAhBwB,EAgBtB,CAAC0P,UAAD,EAAa8C,SAAb,CAhBsB,CAAzB;AAiBA,MAAIoB,aAAa,GAAG1b,gBAAgB,CAACwV,WAAjB,CAA6B,UAAUpP,IAAV,EAAgB;AAC7D,QAAIvD,EAAJ,EAAQoC,EAAR,EAAY2C,EAAZ;;AACA,QAAI+T,YAAY,GAAGzY,KAAK,GAAG,OAAH,GAAa,MAArC;AACA,QAAIyU,MAAM,GAAGzU,KAAK,GAAG,CAAC,CAAJ,GAAQ,CAA1B;;AACA,YAAQsU,UAAR;AACI,WAAK1Y,OAAO,CAACwB,UAAR,CAAmBwX,UAAxB;AACI,eAAOjV,EAAE,GAAG;AACJoF,UAAAA,MAAM,EAAE,MADJ;AAEJH,UAAAA,KAAK,EAAE,GAAGC,MAAH,CAAU3B,IAAI,CAACyB,IAAL,CAAUC,KAApB,EAA2B,IAA3B;AAFH,SAAL,EAIHjF,EAAE,CAAC8Y,YAAD,CAAF,GAAmB,CAJhB,EAKH9Y,EAAE,CAACgM,QAAH,GAAc,UALX,EAMHhM,EAAE,CAACoM,GAAH,GAAS,CANN,EAOHpM,EAAE,CAAC+Y,SAAH,GAAe,cAAc7T,MAAd,CAAqB3B,IAAI,CAAC8S,KAAL,CAAWhK,IAAX,GAAkByI,MAAvC,EAA+C,KAA/C,CAPZ,EAQH9U,EARJ;;AASJ,WAAK/D,OAAO,CAACwB,UAAR,CAAmB6Y,OAAxB;AACI,eAAOlU,EAAE,GAAG;AACJgD,UAAAA,MAAM,EAAE,GAAGF,MAAH,CAAU3B,IAAI,CAACyB,IAAL,CAAUI,MAApB,EAA4B,IAA5B,CADJ;AAEJH,UAAAA,KAAK,EAAE,GAAGC,MAAH,CAAU3B,IAAI,CAACyB,IAAL,CAAUC,KAApB,EAA2B,IAA3B;AAFH,SAAL,EAIH7C,EAAE,CAAC0W,YAAD,CAAF,GAAmB,CAJhB,EAKH1W,EAAE,CAAC4J,QAAH,GAAc,UALX,EAMH5J,EAAE,CAACgK,GAAH,GAAS,CANN,EAOHhK,EAAE,CAAC2W,SAAH,GAAe,aAAa7T,MAAb,CAAoB3B,IAAI,CAAC8S,KAAL,CAAWhK,IAAX,GAAkByI,MAAtC,EAA8C,MAA9C,EAAsD5P,MAAtD,CAA6D3B,IAAI,CAAC8S,KAAL,CAAWjK,GAAxE,EAA6E,KAA7E,CAPZ,EAQHhK,EARJ;;AASJ,WAAKnG,OAAO,CAACwB,UAAR,CAAmB0X,QAAxB;AACA;AACI,eAAOpQ,EAAE,GAAG;AACJK,UAAAA,MAAM,EAAE,GAAGF,MAAH,CAAU3B,IAAI,CAACyB,IAAL,CAAUI,MAApB,EAA4B,IAA5B,CADJ;AAEJH,UAAAA,KAAK,EAAE;AAFH,SAAL,EAIHF,EAAE,CAAC+T,YAAD,CAAF,GAAmB,CAJhB,EAKH/T,EAAE,CAACiH,QAAH,GAAc,UALX,EAMHjH,EAAE,CAACqH,GAAH,GAAS,CANN,EAOHrH,EAAE,CAACgU,SAAH,GAAe,cAAc7T,MAAd,CAAqB3B,IAAI,CAAC8S,KAAL,CAAWjK,GAAhC,EAAqC,KAArC,CAPZ,EAQHrH,EARJ;AAvBR;AAiCH,GArCmB,EAqCjB,CAAC1E,KAAD,EAAQsU,UAAR,CArCiB,CAApB;AAsCA,SAAO;AACHpE,IAAAA,UAAU,EAAE8F,KADT;AAEH4B,IAAAA,UAAU,EAAEA,UAFT;AAGHzH,IAAAA,QAAQ,EAAEgG,GAHP;AAIH0B,IAAAA,QAAQ,EAAEA,QAJP;AAKHxB,IAAAA,iBAAiB,EAAEA,iBALhB;AAMHkC,IAAAA,kBAAkB,EAAEA,kBANjB;AAOHC,IAAAA,aAAa,EAAEA,aAPZ;AAQHH,IAAAA,YAAY,EAAEA,YARX;AASHP,IAAAA,YAAY,EAAEA;AATX,GAAP;AAWH,CAxMD;;AA0MA,IAAIa,yBAAJ;;AACA,CAAC,UAAUA,yBAAV,EAAqC;AAClCA,EAAAA,yBAAyB,CAACA,yBAAyB,CAAC,OAAD,CAAzB,GAAqC,CAAtC,CAAzB,GAAoE,OAApE;AACAA,EAAAA,yBAAyB,CAACA,yBAAyB,CAAC,QAAD,CAAzB,GAAsC,CAAvC,CAAzB,GAAqE,QAArE;AACAA,EAAAA,yBAAyB,CAACA,yBAAyB,CAAC,SAAD,CAAzB,GAAuC,CAAxC,CAAzB,GAAsE,SAAtE;AACAA,EAAAA,yBAAyB,CAACA,yBAAyB,CAAC,OAAD,CAAzB,GAAqC,CAAtC,CAAzB,GAAoE,OAApE;AACAA,EAAAA,yBAAyB,CAACA,yBAAyB,CAAC,WAAD,CAAzB,GAAyC,CAA1C,CAAzB,GAAwE,WAAxE;AACH,CAND,EAMGA,yBAAyB,KAAKA,yBAAyB,GAAG,EAAjC,CAN5B;;AAQA,IAAIC,SAAS,GAAG,IAAIC,MAAJ,CAAW,QACvB,UADuB,GAEvB,WAFuB,GAGvB,WAHuB,GAIvB,WAJuB,GAKvB,WALuB,GAMvB,WANuB,GAOvB,YAPuB,GAQvB,WARuB,GASvB,IATuB,GAUvB,WAVuB,GAWvB,IAXY,CAAhB;;AAYA,IAAIC,KAAK,GAAG,UAAUjd,KAAV,EAAiByH,GAAjB,EAAsBC,GAAtB,EAA2BwV,YAA3B,EAAyC;AACjD,MAAIC,MAAM,GAAGC,QAAQ,CAACpd,KAAD,EAAQ,EAAR,CAArB;AACA,SAAOmd,MAAM,IAAI1V,GAAV,IAAiB0V,MAAM,IAAIzV,GAA3B,GAAiCyV,MAAjC,GAA0CD,YAAjD;AACH,CAHD;;AAIA,IAAIG,WAAW,GAAG,UAAUC,KAAV,EAAiB;AAC/B,MAAIC,OAAO,GAAGR,SAAS,CAACS,IAAV,CAAeF,KAAf,CAAd;;AACA,MAAI,CAACC,OAAL,EAAc;AACV,WAAO,IAAP;AACH;;AACD,MAAIE,IAAI,GAAGL,QAAQ,CAACG,OAAO,CAAC,CAAD,CAAR,EAAa,EAAb,CAAnB;AACA,MAAIG,KAAK,GAAGT,KAAK,CAACM,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAL,GAA8B,CAA1C;AACA,MAAII,GAAG,GAAGV,KAAK,CAACM,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAf;AACA,MAAIK,IAAI,GAAGX,KAAK,CAACM,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAhB;AACA,MAAIM,MAAM,GAAGZ,KAAK,CAACM,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAlB;AACA,MAAIO,MAAM,GAAGb,KAAK,CAACM,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAlB;AACA,MAAIQ,qBAAqB,GAAGR,OAAO,CAAC,CAAD,CAAP,IAAc,GAA1C;AACA,MAAIS,UAAU,GAAGf,KAAK,CAACM,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAtB;AACA,MAAIU,YAAY,GAAGhB,KAAK,CAACM,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAxB;;AACA,UAAQQ,qBAAR;AACI,SAAK,GAAL;AACIH,MAAAA,IAAI,IAAII,UAAR;AACAH,MAAAA,MAAM,IAAII,YAAV;AACA;;AACJ,SAAK,GAAL;AACIL,MAAAA,IAAI,IAAII,UAAR;AACAH,MAAAA,MAAM,IAAII,YAAV;AACA;AARR;;AAUA,SAAO,IAAIC,IAAJ,CAASA,IAAI,CAACC,GAAL,CAASV,IAAT,EAAeC,KAAf,EAAsBC,GAAtB,EAA2BC,IAA3B,EAAiCC,MAAjC,EAAyCC,MAAzC,CAAT,CAAP;AACH,CAzBD;;AA2BA,IAAIM,YAAY,GAAG,UAAUta,EAAV,EAAc;AAC7B,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AACA,MAAIjb,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;AACA,MAAIW,YAAY,GAAG9D,gBAAgB,CAAC+D,MAAjB,EAAnB;AACA,MAAIsZ,OAAO,GAAG,EAAd;;AACA,MAAID,UAAU,CAACE,gBAAf,EAAiC;AAC7B,QAAIC,IAAI,GAAGnB,WAAW,CAACgB,UAAU,CAACE,gBAAZ,CAAtB;AACAD,IAAAA,OAAO,GAAGE,IAAI,GAAG,GAAGxV,MAAH,CAAUwV,IAAI,CAACC,kBAAL,EAAV,EAAqC,IAArC,EAA2CzV,MAA3C,CAAkDwV,IAAI,CAACE,kBAAL,EAAlD,CAAH,GAAkF,EAAhG;AACH;;AACDzd,EAAAA,gBAAgB,CAAC0D,eAAjB,CAAiC,YAAY;AACzC,QAAIga,YAAY,GAAG5Z,YAAY,CAACM,OAAhC;;AACA,QAAI,CAACsZ,YAAL,EAAmB;AACf;AACH;;AACD,QAAIC,aAAa,GAAGvW,QAAQ,CAACwW,aAAT,CAAuB,yBAAyB7V,MAAzB,CAAgCqV,UAAU,CAAC3P,EAA3C,EAA+C,KAA/C,CAAvB,CAApB;;AACA,QAAI,CAACkQ,aAAL,EAAoB;AAChB;AACH;;AACD,QAAIzF,GAAG,GAAGyF,aAAV;AACAzF,IAAAA,GAAG,CAACjP,KAAJ,CAAU4U,MAAV,IAAoB,CAApB;AACA,WAAO,YAAY;AACf3F,MAAAA,GAAG,CAACjP,KAAJ,CAAU4U,MAAV,GAAmB,GAAG9V,MAAH,CAAUoU,QAAQ,CAACjE,GAAG,CAACjP,KAAJ,CAAU4U,MAAX,EAAmB,EAAnB,CAAR,GAAiC,CAA3C,CAAnB;AACH,KAFD;AAGH,GAdD,EAcG,EAdH;AAeA,SAAQ7d,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEmC,IAAAA,GAAG,EAAE1B,YAAP;AAAqBR,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACjF,4CAAsC,IAD2C;AAEjF,iDAA2CY;AAFsC,KAAD,CAA1C;AAGtC+F,IAAAA,KAAK,EAAE;AACPgG,MAAAA,GAAG,EAAEmO,UAAU,CAACU,cAAX,KAA8Bhf,OAAO,CAACoB,cAAR,CAAuB6d,KAArD,GAA6D,EAA7D,GAAkE;AADhE;AAH+B,GAAtC,EAMJX,UAAU,CAACY,KAAX,IAAqBhe,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EACjBtO,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACtD,0CAAoC,IADkB;AAEtD,+CAAyC,CAACY,KAFY;AAGtD,+CAAyCA;AAHa,KAAD;AAAvB,GAAtC,EAIUka,UAAU,CAACY,KAJrB,CADiB,EAMjBhe,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAtC,EAAwF+Z,OAAxF,CANiB,CANjB,EAaJD,UAAU,CAACa,QAAX,IAAwBje,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAtC,EAA2F8Z,UAAU,CAACa,QAAX,CAAoBC,KAApB,CAA0B,IAA1B,EAAgC1L,GAAhC,CAAoC,UAAUpM,IAAV,EAAgB6S,KAAhB,EAAuB;AAAE,WAAQjZ,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D;AAAE1I,MAAAA,GAAG,EAAEqT;AAAP,KAA1D,EACpL7S,IADoL,EAEpLpG,gBAAgB,CAACqD,aAAjB,CAA+B,IAA/B,EAAqC,IAArC,CAFoL,CAAR;AAE7H,GAFgE,CAA3F,CAbpB,CAAR;AAgBH,CAzCD;;AA2CA,IAAI8a,aAAJ;;AACA,CAAC,UAAUA,aAAV,EAAyB;AACtBA,EAAAA,aAAa,CAAC,OAAD,CAAb,GAAyB,OAAzB;AACAA,EAAAA,aAAa,CAAC,OAAD,CAAb,GAAyB,OAAzB;AACH,CAHD,EAGGA,aAAa,KAAKA,aAAa,GAAG,EAArB,CAHhB;;AAIA,IAAIC,cAAc,GAAG,YAAY;AAC7B,MAAIvb,EAAE,GAAG8K,SAAS,CAAC,KAAD,CAAlB;AAAA,MAA2BE,MAAM,GAAGhL,EAAE,CAACgL,MAAvC;AAAA,MAA+CE,MAAM,GAAGlL,EAAE,CAACkL,MAA3D;;AACA,MAAI9I,EAAE,GAAGjF,gBAAgB,CAACkF,QAAjB,CAA0BiZ,aAAa,CAACE,KAAxC,CAAT;AAAA,MAAyDC,aAAa,GAAGrZ,EAAE,CAAC,CAAD,CAA3E;AAAA,MAAgFsZ,gBAAgB,GAAGtZ,EAAE,CAAC,CAAD,CAArG;;AACA,MAAIuZ,aAAa,GAAG,YAAY;AAC5B,YAAQF,aAAR;AACI,WAAKH,aAAa,CAACM,KAAnB;AACI5Q,QAAAA,MAAM,IAAI0Q,gBAAgB,CAACJ,aAAa,CAACE,KAAf,CAA1B;AACAtQ,QAAAA,MAAM,CAACjP,OAAO,CAAC0B,YAAR,CAAqB2N,MAAtB,CAAN;AACA;;AACJ,WAAKgQ,aAAa,CAACE,KAAnB;AACIE,QAAAA,gBAAgB,CAACJ,aAAa,CAACM,KAAf,CAAhB;AACA1Q,QAAAA,MAAM,CAACjP,OAAO,CAAC0B,YAAR,CAAqB0N,IAAtB,CAAN;AACA;AARR;AAUH,GAXD;;AAYA,MAAIwQ,WAAW,GAAG,YAAY;AAC1BJ,IAAAA,aAAa,KAAKH,aAAa,CAACE,KAAhC,IAAyCtQ,MAAM,CAACjP,OAAO,CAAC0B,YAAR,CAAqB0N,IAAtB,CAA/C;AACH,GAFD;;AAGA,MAAIyQ,YAAY,GAAG,YAAY;AAC3BL,IAAAA,aAAa,KAAKH,aAAa,CAACE,KAAhC,IAAyCtQ,MAAM,CAACjP,OAAO,CAAC0B,YAAR,CAAqByN,KAAtB,CAA/C;AACH,GAFD;;AAGA,SAAO;AACHJ,IAAAA,MAAM,EAAEA,MADL;AAEH8Q,IAAAA,YAAY,EAAEA,YAFX;AAGHD,IAAAA,WAAW,EAAEA,WAHV;AAIHF,IAAAA,aAAa,EAAEA;AAJZ,GAAP;AAMH,CA3BD;;AA6BA,IAAII,UAAU,GAAG,UAAU/b,EAAV,EAAc;AAC3B,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgCta,QAAQ,GAAGD,EAAE,CAACC,QAA9C;AAAA,MAAwD+b,YAAY,GAAGhc,EAAE,CAACgc,YAA1E;AAAA,MAAwFC,QAAQ,GAAGjc,EAAE,CAACic,QAAtG;AAAA,MAAgHC,YAAY,GAAGlc,EAAE,CAACkc,YAAlI;AAAA,MAAgJC,IAAI,GAAGnc,EAAE,CAACmc,IAA1J;AAAA,MAAgKC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9K;AACA,MAAI/I,IAAI,GAAGkH,UAAU,CAAClH,IAAtB;;AACA,MAAIjR,EAAE,GAAGmZ,cAAc,EAAvB;AAAA,MAA2BO,YAAY,GAAG1Z,EAAE,CAAC0Z,YAA7C;AAAA,MAA2D9Q,MAAM,GAAG5I,EAAE,CAAC4I,MAAvE;AAAA,MAA+E6Q,WAAW,GAAGzZ,EAAE,CAACyZ,WAAhG;AAAA,MAA6GF,aAAa,GAAGvZ,EAAE,CAACuZ,aAAhI;;AACA,MAAIU,aAAa,GAAG,UAAUC,CAAV,EAAa;AAAE,WAAO,CACtC5Y,IAAI,CAACC,GAAL,CAAS2Y,CAAC,CAAC,CAAD,CAAV,EAAeA,CAAC,CAAC,CAAD,CAAhB,CADsC,EAEtC5Y,IAAI,CAACC,GAAL,CAAS2Y,CAAC,CAAC,CAAD,CAAV,EAAeA,CAAC,CAAC,CAAD,CAAhB,CAFsC,EAGtC5Y,IAAI,CAACE,GAAL,CAAS0Y,CAAC,CAAC,CAAD,CAAV,EAAeA,CAAC,CAAC,CAAD,CAAhB,CAHsC,EAItC5Y,IAAI,CAACE,GAAL,CAAS0Y,CAAC,CAAC,CAAD,CAAV,EAAeA,CAAC,CAAC,CAAD,CAAhB,CAJsC,CAAP;AAK/B,GALJ;;AAMA,MAAIC,KAAK,GAAGF,aAAa,CAAC,CACtBhJ,IAAI,CAAC,CAAD,CADkB,EAEtB8I,IAAI,CAACK,IAAL,CAAU,CAAV,IAAeL,IAAI,CAACK,IAAL,CAAU,CAAV,CAAf,GAA8BnJ,IAAI,CAAC,CAAD,CAFZ,EAGtBA,IAAI,CAAC,CAAD,CAHkB,EAItB8I,IAAI,CAACK,IAAL,CAAU,CAAV,IAAeL,IAAI,CAACK,IAAL,CAAU,CAAV,CAAf,GAA8BnJ,IAAI,CAAC,CAAD,CAJZ,CAAD,CAAzB;AAMA,MAAIpO,KAAK,GAAGoO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA1B;AACA,MAAIjO,MAAM,GAAGiO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA3B;AACA,MAAIoJ,MAAM,GAAG;AACTC,IAAAA,WAAW,EAAE,EADJ;AAETC,IAAAA,YAAY,EAAE,EAFL;AAGTC,IAAAA,WAAW,EAAE,EAHJ;AAITC,IAAAA,WAAW,EAAE;AAJJ,GAAb;;AAMA,MAAI,CAACb,YAAD,IAAiBzB,UAAU,CAACqC,WAAX,CAAuB3X,KAAvB,GAA+B,CAApD,EAAuD;AACnD,YAAQsV,UAAU,CAACqC,WAAX,CAAuBxW,KAA/B;AACI,WAAK4S,yBAAyB,CAAC8D,MAA/B;AACIL,QAAAA,MAAM,CAACG,WAAP,GAAqB,QAArB;AACA;;AACJ,WAAK5D,yBAAyB,CAAC+D,KAA/B;AACIN,QAAAA,MAAM,CAACG,WAAP,GAAqB,OAArB;AACA;;AACJ,WAAK5D,yBAAyB,CAACgE,SAA/B;AACIP,QAAAA,MAAM,GAAG1gB,MAAM,CAAC4C,MAAP,CAAc;AACnBse,UAAAA,iBAAiB,EAAE;AADA,SAAd,EAENR,MAFM,CAAT;AAGA;;AACJ,WAAKzD,yBAAyB,CAACkE,OAA/B;AACA,WAAKlE,yBAAyB,CAACmE,KAA/B;AAbJ;;AAeA,QAAIN,WAAW,GAAGtC,UAAU,CAACqC,WAAX,CAAuB3X,KAAzC;AACAwX,IAAAA,MAAM,CAACI,WAAP,GAAqB,GAAG3X,MAAH,CAAU2X,WAAV,EAAuB,IAAvB,CAArB;;AACA,QAAItC,UAAU,CAACqC,WAAX,CAAuBxW,KAAvB,KAAiC4S,yBAAyB,CAACgE,SAA/D,EAA0E;AACtE/X,MAAAA,KAAK,GAAGA,KAAK,GAAG,IAAI4X,WAApB;AACAzX,MAAAA,MAAM,GAAGA,MAAM,GAAG,IAAIyX,WAAtB;AACH;;AACD,QAAI9X,EAAE,GAAGwV,UAAU,CAACqC,WAApB;AAAA,QAAiCQ,sBAAsB,GAAGrY,EAAE,CAACqY,sBAA7D;AAAA,QAAqFC,oBAAoB,GAAGtY,EAAE,CAACsY,oBAA/G;;AACA,QAAID,sBAAsB,GAAG,CAAzB,IAA8BC,oBAAoB,GAAG,CAAzD,EAA4D;AACxDZ,MAAAA,MAAM,CAACE,YAAP,GAAsB,GAAGzX,MAAH,CAAUkY,sBAAV,EAAkC,OAAlC,EAA2ClY,MAA3C,CAAkDmY,oBAAlD,EAAwE,IAAxE,CAAtB;AACH;;AACD9C,IAAAA,UAAU,CAAC+C,KAAX,GACOb,MAAM,CAACC,WAAP,GAAqB,OAAOxX,MAAP,CAAcqV,UAAU,CAAC+C,KAAX,CAAiB,CAAjB,IAAsB,CAApC,EAAuC,IAAvC,EAA6CpY,MAA7C,CAAoDqV,UAAU,CAAC+C,KAAX,CAAiB,CAAjB,IAAsB,CAA1E,EAA6E,IAA7E,EAAmFpY,MAAnF,CAA0FqV,UAAU,CAAC+C,KAAX,CAAiB,CAAjB,IAAsB,CAAhH,EAAmH,GAAnH,CAD5B,GAGSb,MAAM,CAACI,WAAP,GAAqB,GAH9B;AAIH;;AACD,SAAQ1f,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EAAgEyQ,YAAY,IAChFjc,QAAQ,CAAC;AACLsd,IAAAA,KAAK,EAAE;AACHvS,MAAAA,MAAM,EAAEA,MADL;AAEH8Q,MAAAA,YAAY,EAAEA,YAFX;AAGHD,MAAAA,WAAW,EAAEA,WAHV;AAIHF,MAAAA,aAAa,EAAEA;AAJZ,KADF;AAOL6B,IAAAA,IAAI,EAAE;AACFjd,MAAAA,KAAK,EAAE;AACH6F,QAAAA,KAAK,EAAErK,MAAM,CAAC4C,MAAP,CAAc;AACjByG,UAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUE,MAAV,EAAkB,IAAlB,CADS;AAEjBiH,UAAAA,IAAI,EAAE,GAAGnH,MAAH,CAAUqX,KAAK,CAAC,CAAD,CAAf,EAAoB,IAApB,CAFW;AAGjBnQ,UAAAA,GAAG,EAAE,GAAGlH,MAAH,CAAUqX,KAAK,CAAC,CAAD,CAAf,EAAoB,IAApB,CAHY;AAIjBxD,UAAAA,SAAS,EAAE,UAAU7T,MAAV,CAAiBkX,QAAQ,CAACrD,SAAT,CAAmBjZ,IAAnB,CAAwB,GAAxB,CAAjB,EAA+C,GAA/C,CAJM;AAKjB2d,UAAAA,eAAe,EAAE,IAAIvY,MAAJ,CAAWqX,KAAK,CAAC,CAAD,CAAhB,EAAqB,MAArB,EAA6BrX,MAA7B,CAAoCqX,KAAK,CAAC,CAAD,CAAzC,EAA8C,IAA9C,CALA;AAMjBtX,UAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUD,KAAV,EAAiB,IAAjB;AANU,SAAd,EAOJwX,MAPI;AADJ,OADL;AAWFxc,MAAAA,QAAQ,EAAE9C,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EAAgEwQ,QAAQ,IAAIjR,MAAZ,IAAsB7N,gBAAgB,CAACqD,aAAjB,CAA+B8Z,YAA/B,EAA6C;AAAEC,QAAAA,UAAU,EAAEA;AAAd,OAA7C,CAAtF;AAXR;AAPD,GAAD,CADJ,CAAR;AAsBH,CA7ED;;AA+EA,IAAImD,KAAK,GAAG,UAAU1d,EAAV,EAAc;AACtB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,SAAQje,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,kDAAb;AAAiE,4BAAsB8Z,UAAU,CAAC3P,EAAlG;AAAsGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA3H;AAA0I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAApK;AAAiLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA3M,KAAvB,CAA9C,EAAiS9a,KAAK,CAACwc,IAAN,CAAWvd,QAA5S,CAAR;AAAiU,GAA/f,CAAR;AACH,CALD;;AAOA,IAAI0d,MAAM,GAAG,UAAU3d,EAAV,EAAc;AACvB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,MAAI/H,IAAI,GAAGkH,UAAU,CAAClH,IAAtB;AACA,MAAIpO,KAAK,GAAGoO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA1B;AACA,MAAIjO,MAAM,GAAGiO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA3B;AACA,MAAIwJ,WAAW,GAAGtC,UAAU,CAACqC,WAAX,CAAuB3X,KAAzC;AACA,SAAQ9H,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,mDAAb;AAAkE,4BAAsB8Z,UAAU,CAAC3P,EAAnG;AAAuGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA5H;AAA2I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAArK;AAAkLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA5M,KAAvB,CAA9C,EAC1M3e,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE4E,MAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUE,MAAV,EAAkB,IAAlB,CAAV;AAAmCwY,MAAAA,mBAAmB,EAAE,MAAxD;AAAgEC,MAAAA,OAAO,EAAE,KAAzE;AAAgFxY,MAAAA,OAAO,EAAE,OAAOH,MAAP,CAAcD,KAAd,EAAqB,GAArB,EAA0BC,MAA1B,CAAiCE,MAAjC,CAAzF;AAAmIH,MAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUD,KAAV,EAAiB,IAAjB;AAA1I,KAAtC,EACI9H,gBAAgB,CAACqD,aAAjB,CAA+B,QAA/B,EAAyC;AAAEsd,MAAAA,EAAE,EAAE1Y,MAAM,GAAG,CAAf;AAAkBsK,MAAAA,IAAI,EAAE,MAAxB;AAAgCqO,MAAAA,EAAE,EAAE9Y,KAAK,GAAG,CAAR,GAAY4X,WAAW,GAAG,CAA9D;AAAiEmB,MAAAA,EAAE,EAAE5Y,MAAM,GAAG,CAAT,GAAayX,WAAW,GAAG,CAAhG;AAAmGoB,MAAAA,MAAM,EAAE,aAA3G;AAA0HC,MAAAA,WAAW,EAAErB,WAAW,IAAI;AAAtJ,KAAzC,CADJ,CAD0M,EAG1M7b,KAAK,CAACwc,IAAN,CAAWvd,QAH+L,CAAR;AAG1K,GAHpB,CAAR;AAIH,CAZD;;AAcA,IAAIke,WAAW,GAAG,UAAUC,GAAV,EAAe;AAC7B,MAAIC,GAAG,GAAGD,GAAG,CAAC/C,KAAJ,CAAU,GAAV,EAAeiD,GAAf,EAAV;AACA,SAAOD,GAAG,GAAGA,GAAG,CAAChD,KAAJ,CAAU,GAAV,EAAe,CAAf,EAAkBA,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAH,GAAqC+C,GAA/C;AACH,CAHD;;AAKA,IAAIG,YAAY,GAAG,UAAUH,GAAV,EAAe5M,IAAf,EAAqB;AACpC,MAAIgN,OAAO,GAAG,OAAOhN,IAAP,KAAgB,QAAhB,GAA2B,EAA3B,GAAgCiN,GAAG,CAACC,eAAJ,CAAoB,IAAIC,IAAJ,CAAS,CAACnN,IAAD,CAAT,EAAiB;AAAE9Q,IAAAA,IAAI,EAAE;AAAR,GAAjB,CAApB,CAA9C;AACA,MAAIke,IAAI,GAAGra,QAAQ,CAAC/D,aAAT,CAAuB,GAAvB,CAAX;AACAoe,EAAAA,IAAI,CAACxY,KAAL,CAAW9B,OAAX,GAAqB,MAArB;AACAsa,EAAAA,IAAI,CAACC,IAAL,GAAYL,OAAO,IAAIJ,GAAvB;AACAQ,EAAAA,IAAI,CAAC/a,YAAL,CAAkB,UAAlB,EAA8Bsa,WAAW,CAACC,GAAD,CAAzC;AACA7Z,EAAAA,QAAQ,CAAC0D,IAAT,CAAc6W,WAAd,CAA0BF,IAA1B;AACAA,EAAAA,IAAI,CAACG,KAAL;AACAxa,EAAAA,QAAQ,CAAC0D,IAAT,CAAc+W,WAAd,CAA0BJ,IAA1B;;AACA,MAAIJ,OAAJ,EAAa;AACTC,IAAAA,GAAG,CAACQ,eAAJ,CAAoBT,OAApB;AACH;AACJ,CAZD;;AAcA,IAAIU,cAAc,GAAG,UAAUlf,EAAV,EAAc;AAC/B,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAxB,KAAkC,CAAC,CAAC1B,UAAU,CAACY,KAAb,IAAsB,CAAC,CAACZ,UAAU,CAACa,QAArE,CAAf;;AACA,MAAI+D,WAAW,GAAG,YAAY;AAC1B,QAAIC,IAAI,GAAG7E,UAAU,CAAC6E,IAAtB;AACAA,IAAAA,IAAI,IAAIb,YAAY,CAACa,IAAI,CAACC,QAAN,EAAgBD,IAAI,CAAC5T,OAArB,CAApB;AACH,GAHD;;AAIA,SAAQrO,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAE,IAAhF;AAAsFC,IAAAA,IAAI,EAAEA,IAA5F;AAAkGC,IAAAA,QAAQ,EAAEA;AAA5G,GAA3C,EAAmK,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,4DAAb;AAA2E,4BAAsB8Z,UAAU,CAAC3P,EAA5G;AAAgHzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAArI;AAAoJ2D,MAAAA,aAAa,EAAEH,WAAnK;AAAgLvQ,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAA1M;AAAuNhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAAjP,KAAvB,CAA9C,EAAuU9a,KAAK,CAACwc,IAAN,CAAWvd,QAAlV,CAAR;AAAuW,GAA7hB,CAAR;AACH,CARD;;AAUA,IAAIsf,QAAQ,GAAG,UAAUvf,EAAV,EAAc;AACzB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,SAAQje,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,sDAAb;AAAqE,4BAAsB8Z,UAAU,CAAC3P,EAAtG;AAA0GzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA/H;AAA8I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAxK;AAAqLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA/M,KAAvB,CAA9C,EAAqS9a,KAAK,CAACwc,IAAN,CAAWvd,QAAhT,CAAR;AAAqU,GAAngB,CAAR;AACH,CALD;;AAOA,IAAIib,KAAK,GAAG,UAAUlb,EAAV,EAAc;AACtB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIF,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAACY,KAAX,IAAoBZ,UAAU,CAACa,QAAjC,CAApB;AACA,MAAIoE,cAAc,GAAG,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,EAA0B,SAA1B,EAAqC,UAArC,EAAiD,QAAjD,CAArB;AACA,MAAIvD,QAAQ,GAAG,CAAC1B,UAAU,CAACkF,UAAZ,IAA0BD,cAAc,CAACE,OAAf,CAAuBnF,UAAU,CAACkF,UAAlC,MAAkD,CAAC,CAA5F;AACA9e,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAI,CAAC4Z,UAAU,CAACoF,QAAhB,EAA0B;AACtB;AACH;;AACD,QAAIC,MAAM,GAAGrb,QAAQ,CAACwW,aAAT,CAAuB,yBAAyB7V,MAAzB,CAAgCqV,UAAU,CAACoF,QAA3C,EAAqD,KAArD,CAAvB,CAAb;AACA,QAAIre,SAAS,GAAGiD,QAAQ,CAACwW,aAAT,CAAuB,yBAAyB7V,MAAzB,CAAgCqV,UAAU,CAAC3P,EAA3C,EAA+C,KAA/C,CAAvB,CAAhB;;AACA,QAAI,CAACgV,MAAD,IAAW,CAACte,SAAhB,EAA2B;AACvB;AACH;;AACD,QAAI+K,IAAI,GAAGwT,UAAU,CAACD,MAAM,CAACxZ,KAAP,CAAaiG,IAAd,CAArB;AACA,QAAID,GAAG,GAAGyT,UAAU,CAACD,MAAM,CAACxZ,KAAP,CAAagG,GAAd,CAAV,GAA+ByT,UAAU,CAACD,MAAM,CAACxZ,KAAP,CAAahB,MAAd,CAAnD;AACA9D,IAAAA,SAAS,CAAC8E,KAAV,CAAgBiG,IAAhB,GAAuB,GAAGnH,MAAH,CAAUmH,IAAV,EAAgB,IAAhB,CAAvB;AACA/K,IAAAA,SAAS,CAAC8E,KAAV,CAAgBgG,GAAhB,GAAsB,GAAGlH,MAAH,CAAUkH,GAAV,EAAe,IAAf,CAAtB;AACA9K,IAAAA,SAAS,CAAC8E,KAAV,CAAgBqX,eAAhB,GAAkC,IAAIvY,MAAJ,CAAWmH,IAAX,EAAiB,MAAjB,EAAyBnH,MAAzB,CAAgCkH,GAAhC,EAAqC,IAArC,CAAlC;AACH,GAdwB,EActB,EAdsB,CAAzB;AAeA,SAAQjP,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,KAA5D;AAAmEE,IAAAA,YAAY,EAAEA,YAAjF;AAA+FC,IAAAA,IAAI,EAAEA,IAArG;AAA2GC,IAAAA,QAAQ,EAAEA;AAArH,GAA3C,EAA4K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,kDAAb;AAAiE,4BAAsB8Z,UAAU,CAAC3P;AAAlG,KAAvB,CAA9C,EAC3MzN,gBAAgB,CAACqD,aAAjB,CAA+B8Z,YAA/B,EAA6C;AAAEC,MAAAA,UAAU,EAAEA;AAAd,KAA7C,CAD2M,CAAR;AACtH,GADzE,CAAR;AAEH,CAtBD;;AAwBA,IAAIuF,SAAS,GAAG,UAAU9f,EAAV,EAAc;AAC1B,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgCwF,eAAe,GAAG/f,EAAE,CAAC+f,eAArD;AAAA,MAAsE5D,IAAI,GAAGnc,EAAE,CAACmc,IAAhF;AAAA,MAAsFC,QAAQ,GAAGpc,EAAE,CAACoc,QAApG;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,MAAI4E,aAAa,GAAGzF,UAAU,CAAC0F,UAAX,IAAyB1F,UAAU,CAAC0F,UAAX,CAAsBjhB,MAAtB,GAA+B,CAA5E;;AACA,MAAIghB,aAAJ,EAAmB;AACf,QAAIE,WAAW,GAAG3F,UAAU,CAAC0F,UAAX,CAAsBtQ,GAAtB,CAA0B,UAAUwQ,SAAV,EAAqB;AAC7D,aAAOpkB,MAAM,CAAC4C,MAAP,CAAc,EAAd,EAAkB4b,UAAlB,EAA8B;AACjClH,QAAAA,IAAI,EAAE,CAAC8M,SAAS,CAAC,CAAD,CAAT,CAAahX,CAAd,EAAiBgX,SAAS,CAAC,CAAD,CAAT,CAAa9W,CAA9B,EAAiC8W,SAAS,CAAC,CAAD,CAAT,CAAahX,CAA9C,EAAiDgX,SAAS,CAAC,CAAD,CAAT,CAAa9W,CAA9D,CAD2B;AAEjC4W,QAAAA,UAAU,EAAE;AAFqB,OAA9B,CAAP;AAIH,KALiB,CAAlB;AAMA,WAAQ9iB,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EAAgEyU,WAAW,CAACvQ,GAAZ,CAAgB,UAAUyQ,GAAV,EAAehK,KAAf,EAAsB;AAAE,aAAQjZ,gBAAgB,CAACqD,aAAjB,CAA+Bsf,SAA/B,EAA0C;AAAE/c,QAAAA,GAAG,EAAEqT,KAAP;AAAcmE,QAAAA,UAAU,EAAE6F,GAA1B;AAA+BL,QAAAA,eAAe,EAAEA,eAAhD;AAAiE5D,QAAAA,IAAI,EAAEA,IAAvE;AAA6EC,QAAAA,QAAQ,EAAEA;AAAvF,OAA1C,CAAR;AAAwJ,KAAhM,CAAhE,CAAR;AACH;;AACD,SAAQjf,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EAC1MtO,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,sDAAb;AAAqE,4BAAsB8Z,UAAU,CAAC3P,EAAtG;AAA0GzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA/H;AAA8I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAxK;AAAqLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA/M,KAAvB,CAA9C,EAAqS9a,KAAK,CAACwc,IAAN,CAAWvd,QAAhT,CAD0M,EAE1M8f,eAAe,IACXA,eAAe,CAAC9E,cAAhB,KAAmChf,OAAO,CAACoB,cAAR,CAAuB6d,KAD9D,IAEIla,KAAK,CAACuc,KAAN,CAAYvS,MAFhB,IAE0B7N,gBAAgB,CAACqD,aAAjB,CAA+B0a,KAA/B,EAAsC;AAAEX,MAAAA,UAAU,EAAEwF,eAAd;AAA+B5D,MAAAA,IAAI,EAAEA,IAArC;AAA2CC,MAAAA,QAAQ,EAAEA;AAArD,KAAtC,CAJgL,CAAR;AAI7D,GAJjI,CAAR;AAKH,CAnBD;;AAqBA,IAAIiE,GAAG,GAAG,UAAUrgB,EAAV,EAAc;AACpB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,MAAI/H,IAAI,GAAGkH,UAAU,CAAClH,IAAtB;AACA,MAAIpO,KAAK,GAAGoO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA1B;AACA,MAAIjO,MAAM,GAAGiO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA3B;AACA,MAAIwJ,WAAW,GAAGtC,UAAU,CAACqC,WAAX,CAAuB3X,KAAzC;AACA,SAAQ9H,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,gDAAb;AAA+D,4BAAsB8Z,UAAU,CAAC3P,EAAhG;AAAoGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAAzH;AAAwI/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAlK;AAA+KhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAAzM,KAAvB,CAA9C,EAC1MvB,UAAU,CAAC+F,QAAX,IAAuB/F,UAAU,CAAC+F,QAAX,CAAoBthB,MAA3C,IAAsD7B,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE4E,MAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUE,MAAV,EAAkB,IAAlB,CAAV;AAAmCwY,MAAAA,mBAAmB,EAAE,MAAxD;AAAgEC,MAAAA,OAAO,EAAE,KAAzE;AAAgFxY,MAAAA,OAAO,EAAE,OAAOH,MAAP,CAAcD,KAAd,EAAqB,GAArB,EAA0BC,MAA1B,CAAiCE,MAAjC,CAAzF;AAAmIH,MAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUD,KAAV,EAAiB,IAAjB;AAA1I,KAAtC,EAA0MsV,UAAU,CAAC+F,QAAX,CAAoB3Q,GAApB,CAAwB,UAAU4Q,OAAV,EAAmBnK,KAAnB,EAA0B;AAAE,aAAQjZ,gBAAgB,CAACqD,aAAjB,CAA+B,UAA/B,EAA2C;AAAEuC,QAAAA,GAAG,EAAEqT,KAAP;AAAc1G,QAAAA,IAAI,EAAE,MAApB;AAA4BuO,QAAAA,MAAM,EAAE,aAApC;AAAmDC,QAAAA,WAAW,EAAErB,WAAW,IAAI,CAA/E;AAAkF2D,QAAAA,MAAM,EAAED,OAAO,CAAC5Q,GAAR,CAAY,UAAUpM,IAAV,EAAgB;AAAE,iBAAO,GAAG2B,MAAH,CAAU3B,IAAI,CAAC4F,CAAL,GAASkK,IAAI,CAAC,CAAD,CAAvB,EAA4B,GAA5B,EAAiCnO,MAAjC,CAAwCmO,IAAI,CAAC,CAAD,CAAJ,GAAU9P,IAAI,CAAC8F,CAAvD,CAAP;AAAmE,SAAjG,EAAmGvJ,IAAnG,CAAwG,GAAxG;AAA1F,OAA3C,CAAR;AAAgQ,KAApT,CAA1M,CADoJ,EAE1MkB,KAAK,CAACwc,IAAN,CAAWvd,QAF+L,CAAR;AAE1K,GAFpB,CAAR;AAGH,CAXD;;AAaA,IAAIwgB,IAAI,GAAG,UAAUzgB,EAAV,EAAc;AACrB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,MAAI/H,IAAI,GAAGkH,UAAU,CAAClH,IAAtB;AACA,MAAIpO,KAAK,GAAGoO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA1B;AACA,MAAIjO,MAAM,GAAGiO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA3B;AACA,MAAIwJ,WAAW,GAAGtC,UAAU,CAACqC,WAAX,CAAuB3X,KAAzC;AACA,SAAQ9H,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,iDAAb;AAAgE,4BAAsB8Z,UAAU,CAAC3P,EAAjG;AAAqGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA1H;AAAyI/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAnK;AAAgLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA1M,KAAvB,CAA9C,EAC1M3e,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE4E,MAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUE,MAAV,EAAkB,IAAlB,CAAV;AAAmCwY,MAAAA,mBAAmB,EAAE,MAAxD;AAAgEC,MAAAA,OAAO,EAAE,KAAzE;AAAgFxY,MAAAA,OAAO,EAAE,OAAOH,MAAP,CAAcD,KAAd,EAAqB,GAArB,EAA0BC,MAA1B,CAAiCE,MAAjC,CAAzF;AAAmIH,MAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUD,KAAV,EAAiB,IAAjB;AAA1I,KAAtC,EACI9H,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAEyd,MAAAA,MAAM,EAAE,aAAV;AAAyBC,MAAAA,WAAW,EAAErB,WAAW,IAAI,CAArD;AAAwD6D,MAAAA,EAAE,EAAErN,IAAI,CAAC,CAAD,CAAJ,GAAUkH,UAAU,CAACoG,eAAX,CAA2B,CAA3B,CAAtE;AAAqGC,MAAAA,EAAE,EAAEvN,IAAI,CAAC,CAAD,CAAJ,GAAUkH,UAAU,CAACoG,eAAX,CAA2B,CAA3B,CAAnH;AAAkJE,MAAAA,EAAE,EAAExN,IAAI,CAAC,CAAD,CAAJ,GAAUkH,UAAU,CAACoG,eAAX,CAA2B,CAA3B,CAAhK;AAA+LG,MAAAA,EAAE,EAAEzN,IAAI,CAAC,CAAD,CAAJ,GAAUkH,UAAU,CAACoG,eAAX,CAA2B,CAA3B;AAA7M,KAAvC,CADJ,CAD0M,EAG1M3f,KAAK,CAACwc,IAAN,CAAWvd,QAH+L,CAAR;AAG1K,GAHpB,CAAR;AAIH,CAZD;;AAcA,IAAI8gB,oBAAoB,GAAG,UAAUnR,SAAV,EAAqBoR,SAArB,EAAgC;AACvD,UAAQA,SAAS,CAAC,CAAD,CAAT,CAAaC,IAArB;AACI,SAAK,KAAL;AACI,aAAO;AACHC,QAAAA,YAAY,EAAEF,SAAS,CAAC,CAAD,CADpB;AAEHG,QAAAA,UAAU,EAAEH,SAAS,CAAC,CAAD,CAAT,IAAgB,CAFzB;AAGHpR,QAAAA,SAAS,EAAEA,SAHR;AAIHwR,QAAAA,OAAO,EAAEJ,SAAS,CAAC,CAAD;AAJf,OAAP;;AAMJ,SAAK,KAAL;AACA,SAAK,MAAL;AACI,aAAO;AACHE,QAAAA,YAAY,EAAE,CADX;AAEHC,QAAAA,UAAU,EAAE,CAFT;AAGHvR,QAAAA,SAAS,EAAEA,SAHR;AAIHwR,QAAAA,OAAO,EAAEnlB,OAAO,CAACyB,gBAAR,CAAyB2jB;AAJ/B,OAAP;;AAMJ,SAAK,MAAL;AACA,SAAK,OAAL;AACI,aAAO;AACHH,QAAAA,YAAY,EAAEF,SAAS,CAAC,CAAD,CADpB;AAEHG,QAAAA,UAAU,EAAE,CAFT;AAGHvR,QAAAA,SAAS,EAAEA,SAHR;AAIHwR,QAAAA,OAAO,EAAEnlB,OAAO,CAACyB,gBAAR,CAAyB4jB;AAJ/B,OAAP;;AAMJ;AACI,aAAO;AACHJ,QAAAA,YAAY,EAAE,CADX;AAEHC,QAAAA,UAAU,EAAE,CAFT;AAGHvR,QAAAA,SAAS,EAAEA,SAHR;AAIHwR,QAAAA,OAAO,EAAE;AAJN,OAAP;AAzBR;AAgCH,CAjCD;;AAkCA,IAAIG,eAAe,GAAG,IAAIC,GAAJ,EAAtB;AACA,IAAIC,QAAQ,GAAG,IAAID,GAAJ,EAAf;;AACA,IAAIE,cAAc,GAAG,UAAUxS,GAAV,EAAeyS,OAAf,EAAwB;AACzC,SAAO,GAAGzc,MAAH,CAAUgK,GAAG,CAACK,WAAJ,CAAgBC,KAA1B,EAAiC,KAAjC,EAAwCtK,MAAxC,CAA+Cyc,OAAO,CAACC,GAAvD,EAA4D,GAA5D,EAAiE1c,MAAjE,CAAwEyc,OAAO,CAACE,GAAR,KAAgB,CAAhB,GAAoB,EAApB,GAAyBF,OAAO,CAACE,GAAzG,CAAP;AACH,CAFD;;AAGA,IAAIC,YAAY,GAAG,UAAU5S,GAAV,EAAeyS,OAAf,EAAwB;AACvC,SAAOJ,eAAe,CAACvkB,GAAhB,CAAoB0kB,cAAc,CAACxS,GAAD,EAAMyS,OAAN,CAAlC,KAAqD,IAA5D;AACH,CAFD;;AAGA,IAAII,eAAe,GAAG,UAAU7S,GAAV,EAAeyS,OAAf,EAAwB/R,SAAxB,EAAmC;AACrD2R,EAAAA,eAAe,CAACS,GAAhB,CAAoBN,cAAc,CAACxS,GAAD,EAAMyS,OAAN,CAAlC,EAAkD/R,SAAlD;AACH,CAFD;;AAGA,IAAIqS,eAAe,GAAG,YAAY;AAC9BV,EAAAA,eAAe,CAACW,KAAhB;AACAT,EAAAA,QAAQ,CAACS,KAAT;AACH,CAHD;;AAIA,IAAIC,OAAO,GAAG,UAAUjT,GAAV,EAAeU,SAAf,EAA0B;AACpC,MAAI,CAACV,GAAL,EAAU;AACN,WAAOkT,OAAO,CAACC,MAAR,CAAe,gCAAf,CAAP;AACH;;AACD,MAAIC,OAAO,GAAG,GAAGpd,MAAH,CAAUgK,GAAG,CAACK,WAAJ,CAAgBC,KAA1B,EAAiC,KAAjC,EAAwCtK,MAAxC,CAA+C0K,SAA/C,CAAd;AACA,MAAIuM,IAAI,GAAGsF,QAAQ,CAACzkB,GAAT,CAAaslB,OAAb,CAAX;;AACA,MAAInG,IAAJ,EAAU;AACN,WAAOiG,OAAO,CAACG,OAAR,CAAgBpG,IAAhB,CAAP;AACH;;AACD,SAAO,IAAIiG,OAAJ,CAAY,UAAUG,OAAV,EAAmBrf,CAAnB,EAAsB;AACrCgM,IAAAA,GAAG,CAACiT,OAAJ,CAAYvS,SAAS,GAAG,CAAxB,EAA2B4S,IAA3B,CAAgC,UAAUrG,IAAV,EAAgB;AAC5CsF,MAAAA,QAAQ,CAACO,GAAT,CAAaM,OAAb,EAAsBnG,IAAtB;;AACA,UAAIA,IAAI,CAACxZ,GAAT,EAAc;AACVof,QAAAA,eAAe,CAAC7S,GAAD,EAAMiN,IAAI,CAACxZ,GAAX,EAAgBiN,SAAhB,CAAf;AACH;;AACD2S,MAAAA,OAAO,CAACpG,IAAD,CAAP;AACH,KAND;AAOH,GARM,CAAP;AASH,CAlBD;;AAmBA,IAAIsG,cAAc,GAAG,UAAUvT,GAAV,EAAewT,IAAf,EAAqB;AACtC,SAAO,IAAIN,OAAJ,CAAY,UAAUO,GAAV,EAAe;AAC9B,QAAIP,OAAJ,CAAY,UAAUG,OAAV,EAAmB;AAC3B,UAAI,OAAOG,IAAP,KAAgB,QAApB,EAA8B;AAC1BxT,QAAAA,GAAG,CAACuT,cAAJ,CAAmBC,IAAnB,EAAyBF,IAAzB,CAA8B,UAAUxB,SAAV,EAAqB;AAC/CuB,UAAAA,OAAO,CAACvB,SAAD,CAAP;AACH,SAFD;AAGH,OAJD,MAKK;AACDuB,QAAAA,OAAO,CAACG,IAAD,CAAP;AACH;AACJ,KATD,EASGF,IATH,CASQ,UAAUxB,SAAV,EAAqB;AACzB,UAAI,aAAa,OAAOA,SAAS,CAAC,CAAD,CAA7B,IAAoCA,SAAS,CAAC,CAAD,CAAT,KAAiB,IAAzD,EAA+D;AAC3D,YAAI4B,YAAY,GAAG5B,SAAS,CAAC,CAAD,CAA5B;AACA,YAAIpR,SAAS,GAAGkS,YAAY,CAAC5S,GAAD,EAAM0T,YAAN,CAA5B;;AACA,YAAIhT,SAAS,KAAK,IAAlB,EAAwB;AACpBV,UAAAA,GAAG,CAAC4S,YAAJ,CAAiBc,YAAjB,EAA+BJ,IAA/B,CAAoC,UAAU5S,SAAV,EAAqB;AACrDmS,YAAAA,eAAe,CAAC7S,GAAD,EAAM0T,YAAN,EAAoBhT,SAApB,CAAf;AACA6S,YAAAA,cAAc,CAACvT,GAAD,EAAMwT,IAAN,CAAd,CAA0BF,IAA1B,CAA+B,UAAU7iB,MAAV,EAAkB;AAAE,qBAAOgjB,GAAG,CAAChjB,MAAD,CAAV;AAAqB,aAAxE;AACH,WAHD;AAIH,SALD,MAMK;AACDgjB,UAAAA,GAAG,CAAC5B,oBAAoB,CAACnR,SAAD,EAAYoR,SAAZ,CAArB,CAAH;AACH;AACJ,OAZD,MAaK;AACD,YAAI/X,MAAM,GAAG8X,oBAAoB,CAACC,SAAS,CAAC,CAAD,CAAV,EAAeA,SAAf,CAAjC;AACA2B,QAAAA,GAAG,CAAC1Z,MAAD,CAAH;AACH;AACJ,KA3BD;AA4BH,GA7BM,CAAP;AA8BH,CA/BD;;AAiCA,IAAI4Z,IAAI,GAAG,UAAU7iB,EAAV,EAAc;AACrB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgCrL,GAAG,GAAGlP,EAAE,CAACkP,GAAzC;AAAA,MAA8CiN,IAAI,GAAGnc,EAAE,CAACmc,IAAxD;AAAA,MAA8DC,QAAQ,GAAGpc,EAAE,CAACoc,QAA5E;AAAA,MAAsF0G,oBAAoB,GAAG9iB,EAAE,CAAC8iB,oBAAhH;AAAA,MAAsIC,YAAY,GAAG/iB,EAAE,CAAC+iB,YAAxJ;;AACA,MAAInE,IAAI,GAAG,UAAUriB,CAAV,EAAa;AACpBA,IAAAA,CAAC,CAACyG,cAAF;AACAuX,IAAAA,UAAU,CAACnH,MAAX,GACM0P,oBAAoB,CAACvI,UAAU,CAACnH,MAAZ,CAD1B,GAEMqP,cAAc,CAACvT,GAAD,EAAMqL,UAAU,CAACmI,IAAjB,CAAd,CAAqCF,IAArC,CAA0C,UAAUvZ,MAAV,EAAkB;AAC1D,UAAI2G,SAAS,GAAG3G,MAAM,CAAC2G,SAAvB;AAAA,UAAkCsR,YAAY,GAAGjY,MAAM,CAACiY,YAAxD;AAAA,UAAsEC,UAAU,GAAGlY,MAAM,CAACkY,UAA1F;AAAA,UAAsGC,OAAO,GAAGnY,MAAM,CAACmY,OAAvH;AACA2B,MAAAA,YAAY,CAACnT,SAAD,EAAYsR,YAAZ,EAA0BC,UAA1B,EAAsCC,OAAtC,CAAZ;AACH,KAHC,CAFN;AAMH,GARD;;AASA,MAAIlF,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC6D,GAAX,IAAkB7D,UAAU,CAACmI,IAA7B,IAAqCnI,UAAU,CAACnH,MAAhD,IAA0DmH,UAAU,CAACyI,SAAvE,CAApB;AACA,MAAIC,WAAW,GAAG1I,UAAU,CAAC6D,GAAX,IAAkB7D,UAAU,CAACyI,SAA/C;AACA,MAAIziB,KAAK,GAAG0iB,WAAW,GACjB;AACE,mBAAe,UADjB;AAEEpE,IAAAA,IAAI,EAAEoE,WAFR;AAGEC,IAAAA,GAAG,EAAE,8BAHP;AAIEja,IAAAA,MAAM,EAAEsR,UAAU,CAAC4I,SAAX,GAAuB,QAAvB,GAAkC,EAJ5C;AAKEhI,IAAAA,KAAK,EAAE8H;AALT,GADiB,GAQjB;AACEpE,IAAAA,IAAI,EAAE,EADR;AAEE,iCAA6BtE,UAAU,CAACmI,IAF1C;AAGEviB,IAAAA,OAAO,EAAEye;AAHX,GARN;AAaA,SAAQzhB,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAE,KAApC;AAA2CD,IAAAA,YAAY,EAAE,KAAzD;AAAgEE,IAAAA,YAAY,EAAEA,YAA9E;AAA4FC,IAAAA,IAAI,EAAEA,IAAlG;AAAwGC,IAAAA,QAAQ,EAAEA;AAAlH,GAA3C,EAAyK,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,iDAAb;AAAgE,4BAAsB8Z,UAAU,CAAC3P,EAAjG;AAAqG,qBAAe,0BAA0B1F,MAA1B,CAAiCqV,UAAU,CAAC3P,EAA5C;AAApH,KAAvB,CAA9C,EACxMzN,gBAAgB,CAACqD,aAAjB,CAA+B,GAA/B,EAAoC9B,QAAQ,CAAC,EAAD,EAAK6B,KAAL,CAA5C,CADwM,CAAR;AACnI,GADzD,CAAR;AAEH,CA5BD;;AA8BA,IAAI6iB,OAAO,GAAG,UAAUpjB,EAAV,EAAc;AACxB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,MAAI/H,IAAI,GAAGkH,UAAU,CAAClH,IAAtB;AACA,MAAIpO,KAAK,GAAGoO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA1B;AACA,MAAIjO,MAAM,GAAGiO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA3B;AACA,MAAIwJ,WAAW,GAAGtC,UAAU,CAACqC,WAAX,CAAuB3X,KAAzC;AACA,SAAQ9H,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,oDAAb;AAAmE,4BAAsB8Z,UAAU,CAAC3P,EAApG;AAAwGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA7H;AAA4I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAtK;AAAmLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA7M,KAAvB,CAA9C,EAC1MvB,UAAU,CAAC8I,QAAX,IAAuB9I,UAAU,CAAC8I,QAAX,CAAoBrkB,MAA3C,IAAsD7B,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE4E,MAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUE,MAAV,EAAkB,IAAlB,CAAV;AAAmCwY,MAAAA,mBAAmB,EAAE,MAAxD;AAAgEC,MAAAA,OAAO,EAAE,KAAzE;AAAgFxY,MAAAA,OAAO,EAAE,OAAOH,MAAP,CAAcD,KAAd,EAAqB,GAArB,EAA0BC,MAA1B,CAAiCE,MAAjC,CAAzF;AAAmIH,MAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUD,KAAV,EAAiB,IAAjB;AAA1I,KAAtC,EAClD9H,gBAAgB,CAACqD,aAAjB,CAA+B,SAA/B,EAA0C;AAAEkP,MAAAA,IAAI,EAAE,MAAR;AAAgBuO,MAAAA,MAAM,EAAE,aAAxB;AAAuCC,MAAAA,WAAW,EAAErB,WAAW,IAAI,CAAnE;AAAsE2D,MAAAA,MAAM,EAAEjG,UAAU,CAAC8I,QAAX,CAC/G1T,GAD+G,CAC3G,UAAUpM,IAAV,EAAgB;AAAE,eAAO,GAAG2B,MAAH,CAAU3B,IAAI,CAAC4F,CAAL,GAASkK,IAAI,CAAC,CAAD,CAAvB,EAA4B,GAA5B,EAAiCnO,MAAjC,CAAwCmO,IAAI,CAAC,CAAD,CAAJ,GAAU9P,IAAI,CAAC8F,CAAvD,CAAP;AAAmE,OADsB,EAE/GvJ,IAF+G,CAE1G,GAF0G;AAA9E,KAA1C,CADkD,CADoJ,EAK1MkB,KAAK,CAACwc,IAAN,CAAWvd,QAL+L,CAAR;AAK1K,GALpB,CAAR;AAMH,CAdD;;AAgBA,IAAIqjB,QAAQ,GAAG,UAAUtjB,EAAV,EAAc;AACzB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,MAAI/H,IAAI,GAAGkH,UAAU,CAAClH,IAAtB;AACA,MAAIpO,KAAK,GAAGoO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA1B;AACA,MAAIjO,MAAM,GAAGiO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA3B;AACA,MAAIwJ,WAAW,GAAGtC,UAAU,CAACqC,WAAX,CAAuB3X,KAAzC;AACA,SAAQ9H,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,qDAAb;AAAoE,4BAAsB8Z,UAAU,CAAC3P,EAArG;AAAyGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA9H;AAA6I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAvK;AAAoLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA9M,KAAvB,CAA9C,EAC1MvB,UAAU,CAAC8I,QAAX,IAAuB9I,UAAU,CAAC8I,QAAX,CAAoBrkB,MAA3C,IAAsD7B,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE4E,MAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUE,MAAV,EAAkB,IAAlB,CAAV;AAAmCwY,MAAAA,mBAAmB,EAAE,MAAxD;AAAgEC,MAAAA,OAAO,EAAE,KAAzE;AAAgFxY,MAAAA,OAAO,EAAE,OAAOH,MAAP,CAAcD,KAAd,EAAqB,GAArB,EAA0BC,MAA1B,CAAiCE,MAAjC,CAAzF;AAAmIH,MAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUD,KAAV,EAAiB,IAAjB;AAA1I,KAAtC,EAClD9H,gBAAgB,CAACqD,aAAjB,CAA+B,UAA/B,EAA2C;AAAEkP,MAAAA,IAAI,EAAE,MAAR;AAAgBuO,MAAAA,MAAM,EAAE,aAAxB;AAAuCC,MAAAA,WAAW,EAAErB,WAAW,IAAI,CAAnE;AAAsE2D,MAAAA,MAAM,EAAEjG,UAAU,CAAC8I,QAAX,CAChH1T,GADgH,CAC5G,UAAUpM,IAAV,EAAgB;AAAE,eAAO,GAAG2B,MAAH,CAAU3B,IAAI,CAAC4F,CAAL,GAASkK,IAAI,CAAC,CAAD,CAAvB,EAA4B,GAA5B,EAAiCnO,MAAjC,CAAwCmO,IAAI,CAAC,CAAD,CAAJ,GAAU9P,IAAI,CAAC8F,CAAvD,CAAP;AAAmE,OADuB,EAEhHvJ,IAFgH,CAE3G,GAF2G;AAA9E,KAA3C,CADkD,CADoJ,EAK1MkB,KAAK,CAACwc,IAAN,CAAWvd,QAL+L,CAAR;AAK1K,GALpB,CAAR;AAMH,CAdD;;AAgBA,IAAIsjB,MAAM,GAAG,UAAUvjB,EAAV,EAAc;AACvB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,MAAI/H,IAAI,GAAGkH,UAAU,CAAClH,IAAtB;AACA,MAAIpO,KAAK,GAAGoO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA1B;AACA,MAAIjO,MAAM,GAAGiO,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAA3B;AACA,MAAIwJ,WAAW,GAAGtC,UAAU,CAACqC,WAAX,CAAuB3X,KAAzC;AACA,SAAQ9H,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,mDAAb;AAAkE,4BAAsB8Z,UAAU,CAAC3P,EAAnG;AAAuGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA5H;AAA2I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAArK;AAAkLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA5M,KAAvB,CAA9C,EAC1M3e,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE4E,MAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUE,MAAV,EAAkB,IAAlB,CAAV;AAAmCwY,MAAAA,mBAAmB,EAAE,MAAxD;AAAgEC,MAAAA,OAAO,EAAE,KAAzE;AAAgFxY,MAAAA,OAAO,EAAE,OAAOH,MAAP,CAAcD,KAAd,EAAqB,GAArB,EAA0BC,MAA1B,CAAiCE,MAAjC,CAAzF;AAAmIH,MAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUD,KAAV,EAAiB,IAAjB;AAA1I,KAAtC,EACI9H,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE4E,MAAAA,MAAM,EAAEA,MAAM,GAAGyX,WAAnB;AAAgCnN,MAAAA,IAAI,EAAE,MAAtC;AAA8CuO,MAAAA,MAAM,EAAE,aAAtD;AAAqEC,MAAAA,WAAW,EAAErB,WAAW,IAAI,CAAjG;AAAoG1T,MAAAA,CAAC,EAAE0T,WAAW,GAAG,CAArH;AAAwHxT,MAAAA,CAAC,EAAEwT,WAAW,GAAG,CAAzI;AAA4I5X,MAAAA,KAAK,EAAEA,KAAK,GAAG4X;AAA3J,KAAvC,CADJ,CAD0M,EAG1M7b,KAAK,CAACwc,IAAN,CAAWvd,QAH+L,CAAR;AAG1K,GAHpB,CAAR;AAIH,CAZD;;AAcA,IAAIujB,QAAQ,GAAG,UAAUxjB,EAAV,EAAc;AACzB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,SAAQje,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,qDAAb;AAAoE,4BAAsB8Z,UAAU,CAAC3P,EAArG;AAAyGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA9H;AAA6I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAvK;AAAoLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA9M,KAAvB,CAA9C,EAAoS9a,KAAK,CAACwc,IAAN,CAAWvd,QAA/S,CAAR;AAAoU,GAAlgB,CAAR;AACH,CALD;;AAOA,IAAIwjB,KAAK,GAAG,UAAUzjB,EAAV,EAAc;AACtB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,SAAQje,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,kDAAb;AAAiE,4BAAsB8Z,UAAU,CAAC3P,EAAlG;AAAsGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA3H;AAA0I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAApK;AAAiLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA3M,KAAvB,CAA9C,EAAiS9a,KAAK,CAACwc,IAAN,CAAWvd,QAA5S,CAAR;AAAiU,GAA/f,CAAR;AACH,CALD;;AAOA,IAAIyjB,SAAS,GAAG,UAAU1jB,EAAV,EAAc;AAC1B,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,SAAQje,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,uDAAb;AAAsE,4BAAsB8Z,UAAU,CAAC3P,EAAvG;AAA2GzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAAhI;AAA+I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAzK;AAAsLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAAhN,KAAvB,CAA9C,EAAsS9a,KAAK,CAACwc,IAAN,CAAWvd,QAAjT,CAAR;AAAsU,GAApgB,CAAR;AACH,CALD;;AAOA,IAAI0jB,WAAW,GAAG,YAAY;AAAE,SAAQxmB,gBAAgB,CAACqD,aAAjB,CAA+BqE,IAA/B,EAAqC;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAArC,EACpC7H,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CADoC,EAEpCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAFoC,EAGpCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAHoC,EAIpCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAJoC,CAAR;AAI6E,CAJ7G;;AAMA,IAAI8mB,QAAQ,GAAG,YAAY;AAAE,SAAQzmB,gBAAgB,CAACqD,aAAjB,CAA+BqE,IAA/B,EAAqC;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAArC,EACjC7H,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CADiC,EAEjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAFiC,EAGjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAHiC,EAIjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAJiC,EAKjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CALiC,EAMjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CANiC,EAOjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAPiC,EAQjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CARiC,EASjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CATiC,EAUjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAViC,CAAR;AAUqD,CAVlF;;AAYA,IAAI+mB,OAAO,GAAG,YAAY;AAAE,SAAQ1mB,gBAAgB,CAACqD,aAAjB,CAA+BqE,IAA/B,EAAqC;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAArC,EAChC7H,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CADgC,EAEhCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAFgC,CAAR;AAEgH,CAF5I;;AAIA,IAAIgnB,QAAQ,GAAG,YAAY;AAAE,SAAQ3mB,gBAAgB,CAACqD,aAAjB,CAA+BqE,IAA/B,EAAqC;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAArC,EACjC7H,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CADiC,EAEjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAFiC,EAGjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAHiC,EAIjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAJiC,EAKjCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CALiC,CAAR;AAK2C,CALxE;;AAOA,IAAIinB,aAAa,GAAG,YAAY;AAAE,SAAQ5mB,gBAAgB,CAACqD,aAAjB,CAA+BqE,IAA/B,EAAqC;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAArC,EACtC7H,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CADsC,EAEtCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAFsC,EAGtCK,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CAHsC,CAAR;AAGoD,CAHtF;;AAKA,IAAIknB,YAAY,GAAG,YAAY;AAAE,SAAQ7mB,gBAAgB,CAACqD,aAAjB,CAA+BqE,IAA/B,EAAqC;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAArC,EACrC7H,gBAAgB,CAACqD,aAAjB,CAA+B,MAA/B,EAAuC;AAAE1D,IAAAA,CAAC,EAAE;AAAL,GAAvC,CADqC,CAAR;AACqE,CADtG;;AAGA,IAAImnB,IAAI,GAAG,UAAUjkB,EAAV,EAAc;AACrB,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgCwF,eAAe,GAAG/f,EAAE,CAAC+f,eAArD;AAAA,MAAsE5D,IAAI,GAAGnc,EAAE,CAACmc,IAAhF;AAAA,MAAsFC,QAAQ,GAAGpc,EAAE,CAACoc,QAApG;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,MAAI6F,IAAI,GAAG1G,UAAU,CAAC0G,IAAX,GAAkB1G,UAAU,CAAC0G,IAAX,CAAgBiD,WAAhB,EAAlB,GAAkD,EAA7D;AACA,SAAQ/mB,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,KAA5D;AAAmEE,IAAAA,YAAY,EAAEA,YAAjF;AAA+FC,IAAAA,IAAI,EAAEA,IAArG;AAA2GC,IAAAA,QAAQ,EAAEA;AAArH,GAA3C,EAA4K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EAC3MtO,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,iDAAb;AAAgE,4BAAsB8Z,UAAU,CAAC3P,EAAjG;AAAqGzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA1H;AAAyI/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAnK;AAAgLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA1M,KAAvB,CAA9C,EACImF,IAAI,IAAK9jB,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAtC,EACLwgB,IAAI,KAAK,OAAT,IAAoB9jB,gBAAgB,CAACqD,aAAjB,CAA+B8E,SAA/B,EAA0C,IAA1C,CADf,EAEL2b,IAAI,KAAK,SAAT,IAAsB9jB,gBAAgB,CAACqD,aAAjB,CAA+BmjB,WAA/B,EAA4C,IAA5C,CAFjB,EAGL1C,IAAI,KAAK,MAAT,IAAmB9jB,gBAAgB,CAACqD,aAAjB,CAA+BojB,QAA/B,EAAyC,IAAzC,CAHd,EAIL3C,IAAI,KAAK,QAAT,IAAqB9jB,gBAAgB,CAACqD,aAAjB,CAA+BwjB,YAA/B,EAA6C,IAA7C,CAJhB,EAKL/C,IAAI,KAAK,KAAT,IAAkB9jB,gBAAgB,CAACqD,aAAjB,CAA+BqjB,OAA/B,EAAwC,IAAxC,CALb,EAML5C,IAAI,KAAK,MAAT,IAAmB9jB,gBAAgB,CAACqD,aAAjB,CAA+BsjB,QAA/B,EAAyC,IAAzC,CANd,EAOL,CAAC7C,IAAI,KAAK,cAAT,IAA2BA,IAAI,KAAK,WAArC,KAAqD9jB,gBAAgB,CAACqD,aAAjB,CAA+BujB,aAA/B,EAA8C,IAA9C,CAPhD,CADb,EASI/iB,KAAK,CAACwc,IAAN,CAAWvd,QATf,CAD2M,EAW3M8f,eAAe,IACXA,eAAe,CAAC9E,cAAhB,KAAmChf,OAAO,CAACoB,cAAR,CAAuB6d,KAD9D,IAEIla,KAAK,CAACuc,KAAN,CAAYvS,MAFhB,IAE0B7N,gBAAgB,CAACqD,aAAjB,CAA+B0a,KAA/B,EAAsC;AAAEX,MAAAA,UAAU,EAAEwF,eAAd;AAA+B5D,MAAAA,IAAI,EAAEA,IAArC;AAA2CC,MAAAA,QAAQ,EAAEA;AAArD,KAAtC,CAbiL,CAAR;AAa9D,GAbjI,CAAR;AAcH,CAnBD;;AAqBA,IAAIY,SAAS,GAAG,UAAUhd,EAAV,EAAc;AAC1B,MAAIua,UAAU,GAAGva,EAAE,CAACua,UAApB;AAAA,MAAgC4B,IAAI,GAAGnc,EAAE,CAACmc,IAA1C;AAAA,MAAgDC,QAAQ,GAAGpc,EAAE,CAACoc,QAA9D;AACA,MAAIH,QAAQ,GAAG1B,UAAU,CAAC0B,QAAX,KAAwB,KAAvC;AACA,MAAIC,YAAY,GAAG,CAAC,EAAE3B,UAAU,CAAC0B,QAAX,IAAuB1B,UAAU,CAACY,KAAlC,IAA2CZ,UAAU,CAACa,QAAxD,CAApB;AACA,SAAQje,gBAAgB,CAACqD,aAAjB,CAA+Bub,UAA/B,EAA2C;AAAExB,IAAAA,UAAU,EAAEA,UAAd;AAA0B0B,IAAAA,QAAQ,EAAEA,QAApC;AAA8CD,IAAAA,YAAY,EAAE,IAA5D;AAAkEE,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,IAAI,EAAEA,IAApG;AAA0GC,IAAAA,QAAQ,EAAEA;AAApH,GAA3C,EAA2K,UAAUpb,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAKsC,KAAK,CAACwc,IAAN,CAAWjd,KAAhB,EAAuB;AAAEE,MAAAA,SAAS,EAAE,sDAAb;AAAqE,4BAAsB8Z,UAAU,CAAC3P,EAAtG;AAA0GzK,MAAAA,OAAO,EAAEa,KAAK,CAACuc,KAAN,CAAY5B,aAA/H;AAA8I/M,MAAAA,YAAY,EAAE5N,KAAK,CAACuc,KAAN,CAAY1B,WAAxK;AAAqLhN,MAAAA,YAAY,EAAE7N,KAAK,CAACuc,KAAN,CAAYzB;AAA/M,KAAvB,CAA9C,EAAqS9a,KAAK,CAACwc,IAAN,CAAWvd,QAAhT,CAAR;AAAqU,GAAngB,CAAR;AACH,CALD;;AAOA,IAAIkkB,mBAAmB,GAAG,UAAUnkB,EAAV,EAAc;AACpC,MAAIkgB,WAAW,GAAGlgB,EAAE,CAACkgB,WAArB;AAAA,MAAkCjf,YAAY,GAAGjB,EAAE,CAACiB,YAApD;AAAA,MAAkEiO,GAAG,GAAGlP,EAAE,CAACkP,GAA3E;AAAA,MAAgFiN,IAAI,GAAGnc,EAAE,CAACmc,IAA1F;AAAA,MAAgGvM,SAAS,GAAG5P,EAAE,CAAC4P,SAA/G;AAAA,MAA0HwU,OAAO,GAAGpkB,EAAE,CAACokB,OAAvI;AAAA,MAAgJC,QAAQ,GAAGrkB,EAAE,CAACqkB,QAA9J;AAAA,MAAwKC,KAAK,GAAGtkB,EAAE,CAACskB,KAAnL;AAAA,MAA0LxB,oBAAoB,GAAG9iB,EAAE,CAAC8iB,oBAApN;AAAA,MAA0OC,YAAY,GAAG/iB,EAAE,CAAC+iB,YAA5P;AACA,MAAI3G,QAAQ,GAAGD,IAAI,CAACoI,WAAL,CAAiB;AAAEF,IAAAA,QAAQ,EAAEA,QAAZ;AAAsBC,IAAAA,KAAK,EAAEA;AAA7B,GAAjB,CAAf;AACA,MAAIE,cAAc,GAAGpI,QAAQ,CAACqI,KAAT,CAAe;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GAAf,CAArB;AACA,MAAIC,iBAAiB,GAAGzE,WAAW,CAACtP,MAAZ,CAAmB,UAAU2J,UAAV,EAAsB;AAAE,WAAO,CAACA,UAAU,CAACoF,QAAnB;AAA8B,GAAzE,CAAxB;AACAxiB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAIQ,SAAS,GAAGL,YAAY,CAACM,OAA7B;;AACA,QAAI,CAACD,SAAL,EAAgB;AACZ;AACH;;AACD8iB,IAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9B,UAAIA,MAAM,CAACC,uBAAX,EAAoC;AAChCD,QAAAA,MAAM,CAACC,uBAAP,CAA+B;AAC3B3E,UAAAA,WAAW,EAAEyE,iBADc;AAE3BrjB,UAAAA,SAAS,EAAEA,SAFgB;AAG3BsO,UAAAA,SAAS,EAAEA,SAHgB;AAI3ByU,UAAAA,QAAQ,EAAEA,QAJiB;AAK3BC,UAAAA,KAAK,EAAEA;AALoB,SAA/B;AAOH;AACJ,KAVD;AAWH,GAhBD,EAgBG,EAhBH;AAiBA,SAAQnnB,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EAAgEkZ,iBAAiB,CAAChV,GAAlB,CAAsB,UAAU4K,UAAV,EAAsB;AAChH,QAAIwF,eAAe,GAAGG,WAAW,CAAC4E,IAAZ,CAAiB,UAAUvhB,IAAV,EAAgB;AAAE,aAAOA,IAAI,CAACoc,QAAL,KAAkBpF,UAAU,CAAC3P,EAApC;AAAyC,KAA5E,CAAtB;;AACA,YAAQ2P,UAAU,CAACU,cAAnB;AACI,WAAKhf,OAAO,CAACoB,cAAR,CAAuBqgB,KAA5B;AACI,eAAQvgB,gBAAgB,CAACqD,aAAjB,CAA+Bkd,KAA/B,EAAsC;AAAE3a,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAAtC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBsgB,MAA5B;AACI,eAAQxgB,gBAAgB,CAACqD,aAAjB,CAA+Bmd,MAA/B,EAAuC;AAAE5a,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAAvC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuB6hB,cAA5B;AACI,eAAQ/hB,gBAAgB,CAACqD,aAAjB,CAA+B0e,cAA/B,EAA+C;AAAEnc,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAA/C,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBkiB,QAA5B;AACI,eAAQpiB,gBAAgB,CAACqD,aAAjB,CAA+B+e,QAA/B,EAAyC;AAAExc,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAAzC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuByiB,SAA5B;AACI,eAAQ3iB,gBAAgB,CAACqD,aAAjB,CAA+Bsf,SAA/B,EAA0C;AAAE/c,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8CwF,UAAAA,eAAe,EAAEA,eAA/D;AAAgF5D,UAAAA,IAAI,EAAEA,IAAtF;AAA4FC,UAAAA,QAAQ,EAAEoI;AAAtG,SAA1C,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBgjB,GAA5B;AACI,eAAQljB,gBAAgB,CAACqD,aAAjB,CAA+B6f,GAA/B,EAAoC;AAAEtd,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAApC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBojB,IAA5B;AACI,eAAQtjB,gBAAgB,CAACqD,aAAjB,CAA+BigB,IAA/B,EAAqC;AAAE1d,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAArC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBwlB,IAA5B;AACI,eAAQ1lB,gBAAgB,CAACqD,aAAjB,CAA+BqiB,IAA/B,EAAqC;AAAE9f,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8CrL,UAAAA,GAAG,EAAEA,GAAnD;AAAwDiN,UAAAA,IAAI,EAAEA,IAA9D;AAAoEC,UAAAA,QAAQ,EAAEoI,cAA9E;AAA8F1B,UAAAA,oBAAoB,EAAEA,oBAApH;AAA0IC,UAAAA,YAAY,EAAEA;AAAxJ,SAArC,CAAR;;AACJ,WAAK9mB,OAAO,CAACoB,cAAR,CAAuB+lB,OAA5B;AACI,eAAQjmB,gBAAgB,CAACqD,aAAjB,CAA+B4iB,OAA/B,EAAwC;AAAErgB,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAAxC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBimB,QAA5B;AACI,eAAQnmB,gBAAgB,CAACqD,aAAjB,CAA+B8iB,QAA/B,EAAyC;AAAEvgB,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAAzC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuB6d,KAA5B;AACI,eAAQ/d,gBAAgB,CAACqD,aAAjB,CAA+B0a,KAA/B,EAAsC;AAAEnY,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAAtC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBkmB,MAA5B;AACI,eAAQpmB,gBAAgB,CAACqD,aAAjB,CAA+B+iB,MAA/B,EAAuC;AAAExgB,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAAvC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBmmB,QAA5B;AACI,eAAQrmB,gBAAgB,CAACqD,aAAjB,CAA+BgjB,QAA/B,EAAyC;AAAEzgB,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAAzC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBomB,KAA5B;AACI,eAAQtmB,gBAAgB,CAACqD,aAAjB,CAA+BijB,KAA/B,EAAsC;AAAE1gB,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAAtC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuBqmB,SAA5B;AACI,eAAQvmB,gBAAgB,CAACqD,aAAjB,CAA+BkjB,SAA/B,EAA0C;AAAE3gB,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAA1C,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuB4mB,IAA5B;AACI,eAAQ9mB,gBAAgB,CAACqD,aAAjB,CAA+ByjB,IAA/B,EAAqC;AAAElhB,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8CwF,UAAAA,eAAe,EAAEA,eAA/D;AAAgF5D,UAAAA,IAAI,EAAEA,IAAtF;AAA4FC,UAAAA,QAAQ,EAAEoI;AAAtG,SAArC,CAAR;;AACJ,WAAKvoB,OAAO,CAACoB,cAAR,CAAuB2f,SAA5B;AACI,eAAQ7f,gBAAgB,CAACqD,aAAjB,CAA+Bwc,SAA/B,EAA0C;AAAEja,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P,EAAlB;AAAsB2P,UAAAA,UAAU,EAAEA,UAAlC;AAA8C4B,UAAAA,IAAI,EAAEA,IAApD;AAA0DC,UAAAA,QAAQ,EAAEoI;AAApE,SAA1C,CAAR;;AACJ;AACI,eAAOrnB,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D;AAAE1I,UAAAA,GAAG,EAAEwX,UAAU,CAAC3P;AAAlB,SAA1D,CAAP;AApCR;AAsCH,GAxCuE,CAAhE,CAAR;AAyCH,CA/DD;;AAiEA,IAAIma,gBAAgB,GAAG,UAAU/kB,EAAV,EAAc;AACjC,MAAImc,IAAI,GAAGnc,EAAE,CAACmc,IAAd;AAAA,MAAoB6I,iBAAiB,GAAGhlB,EAAE,CAACglB,iBAA3C;AACA,MAAI/Q,SAAS,GAAGH,YAAY,EAA5B;;AACA,MAAI1R,EAAE,GAAGjF,gBAAgB,CAACkF,QAAjB,CAA0B;AAC/B4iB,IAAAA,OAAO,EAAE,IADsB;AAE/B/E,IAAAA,WAAW,EAAE;AAFkB,GAA1B,CAAT;AAAA,MAGI/U,MAAM,GAAG/I,EAAE,CAAC,CAAD,CAHf;AAAA,MAGoB8iB,SAAS,GAAG9iB,EAAE,CAAC,CAAD,CAHlC;;AAIAjF,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnCqb,IAAAA,IAAI,CAACgJ,cAAL,CAAoB;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAApB,EAA2C5C,IAA3C,CAAgD,UAAU7iB,MAAV,EAAkB;AAC9D,UAAIsU,SAAS,CAAC1S,OAAd,EAAuB;AACnB2jB,QAAAA,SAAS,CAAC;AACND,UAAAA,OAAO,EAAE,KADH;AAEN/E,UAAAA,WAAW,EAAEvgB;AAFP,SAAD,CAAT;AAIH;AACJ,KAPD;AAQH,GATD,EASG,EATH;AAUA,SAAOwL,MAAM,CAAC8Z,OAAP,GAAiB9nB,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,CAAjB,GAAmFuZ,iBAAiB,CAAC7Z,MAAM,CAAC+U,WAAR,CAA3G;AACH,CAlBD;;AAoBA,IAAImF,eAAe,GAAG,UAAUrlB,EAAV,EAAc;AAChC,MAAIkP,GAAG,GAAGlP,EAAE,CAACkP,GAAb;AAAA,MAAkBiN,IAAI,GAAGnc,EAAE,CAACmc,IAA5B;AAAA,MAAkCvM,SAAS,GAAG5P,EAAE,CAAC4P,SAAjD;AAAA,MAA4DwU,OAAO,GAAGpkB,EAAE,CAACokB,OAAzE;AAAA,MAAkFC,QAAQ,GAAGrkB,EAAE,CAACqkB,QAAhG;AAAA,MAA0GC,KAAK,GAAGtkB,EAAE,CAACskB,KAArH;AAAA,MAA4HxB,oBAAoB,GAAG9iB,EAAE,CAAC8iB,oBAAtJ;AAAA,MAA4KC,YAAY,GAAG/iB,EAAE,CAAC+iB,YAA9L;AACA,MAAI9hB,YAAY,GAAG9D,gBAAgB,CAAC+D,MAAjB,EAAnB;;AACA,MAAI8jB,iBAAiB,GAAG,UAAU9E,WAAV,EAAuB;AAC3C,WAAQ/iB,gBAAgB,CAACqD,aAAjB,CAA+B2jB,mBAA/B,EAAoD;AAAEjE,MAAAA,WAAW,EAAEA,WAAf;AAA4Bjf,MAAAA,YAAY,EAAEA,YAA1C;AAAwDiO,MAAAA,GAAG,EAAEA,GAA7D;AAAkEiN,MAAAA,IAAI,EAAEA,IAAxE;AAA8EvM,MAAAA,SAAS,EAAEA,SAAzF;AAAoGwU,MAAAA,OAAO,EAAEA,OAA7G;AAAsHC,MAAAA,QAAQ,EAAEA,QAAhI;AAA0IC,MAAAA,KAAK,EAAEA,KAAjJ;AAAwJxB,MAAAA,oBAAoB,EAAEA,oBAA9K;AAAoMC,MAAAA,YAAY,EAAEA;AAAlN,KAApD,CAAR;AACH,GAFD;;AAGA,SAAQ5lB,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEmC,IAAAA,GAAG,EAAE1B,YAAP;AAAqBR,IAAAA,SAAS,EAAE;AAAhC,GAAtC,EACJtD,gBAAgB,CAACqD,aAAjB,CAA+BukB,gBAA/B,EAAiD;AAAE5I,IAAAA,IAAI,EAAEA,IAAR;AAAc6I,IAAAA,iBAAiB,EAAEA;AAAjC,GAAjD,CADI,CAAR;AAEH,CARD;;AAUA,IAAIM,YAAY,GAAG,UAAUnc,CAAV,EAAaoc,KAAb,EAAoB;AACnC,MAAIvlB,EAAJ,EAAQoC,EAAR;;AACA,MAAIsB,IAAI,CAAC8hB,KAAL,CAAWrc,CAAX,MAAkBA,CAAtB,EAAyB;AACrB,WAAO,CAACA,CAAD,EAAI,CAAJ,CAAP;AACH;;AACD,MAAIE,CAAC,GAAG,IAAIF,CAAZ;;AACA,MAAIE,CAAC,GAAGkc,KAAR,EAAe;AACX,WAAO,CAAC,CAAD,EAAIA,KAAJ,CAAP;AACH;;AACD,MAAI7hB,IAAI,CAAC8hB,KAAL,CAAWnc,CAAX,MAAkBA,CAAtB,EAAyB;AACrB,WAAO,CAAC,CAAD,EAAIA,CAAJ,CAAP;AACH;;AACD,MAAInN,KAAK,GAAGiN,CAAC,GAAG,CAAJ,GAAQE,CAAR,GAAYF,CAAxB;AACA,MAAIsc,CAAC,GAAG,CAAR;AACA,MAAI5nB,CAAC,GAAG,CAAR;AACA,MAAI6nB,CAAC,GAAG,CAAR;AACA,MAAI5oB,CAAC,GAAG,CAAR;;AACA,SAAO,IAAP,EAAa;AACT,QAAI6oB,SAAS,GAAGF,CAAC,GAAGC,CAApB;AACA,QAAIE,WAAW,GAAG/nB,CAAC,GAAGf,CAAtB;;AACA,QAAI8oB,WAAW,GAAGL,KAAlB,EAAyB;AACrB;AACH;;AACDrpB,IAAAA,KAAK,IAAIypB,SAAS,GAAGC,WAArB,IAAoC5lB,EAAE,GAAG,CAAC2lB,SAAD,EAAYC,WAAZ,CAAL,EAA+BF,CAAC,GAAG1lB,EAAE,CAAC,CAAD,CAArC,EAA0ClD,CAAC,GAAGkD,EAAE,CAAC,CAAD,CAAhD,EAAqDA,EAAzF,KAAgGoC,EAAE,GAAG,CAACujB,SAAD,EAAYC,WAAZ,CAAL,EAA+BH,CAAC,GAAGrjB,EAAE,CAAC,CAAD,CAArC,EAA0CvE,CAAC,GAAGuE,EAAE,CAAC,CAAD,CAAhD,EAAqDA,EAArJ;AACH;;AACD,MAAIuT,MAAM,GAAG,CAAC8P,CAAC,GAAG5nB,CAAJ,GAAQ6nB,CAAC,GAAG5oB,CAAb,IAAkB,CAA/B;AACA,SAAOZ,KAAK,GAAGyZ,MAAR,GAAkBzZ,KAAK,KAAKiN,CAAV,GAAc,CAACsc,CAAD,EAAI5nB,CAAJ,CAAd,GAAuB,CAACA,CAAD,EAAI4nB,CAAJ,CAAzC,GAAmDvpB,KAAK,KAAKiN,CAAV,GAAc,CAACuc,CAAD,EAAI5oB,CAAJ,CAAd,GAAuB,CAACA,CAAD,EAAI4oB,CAAJ,CAAjF;AACH,CA3BD;;AA6BA,IAAIG,aAAa,GAAG,UAAUJ,CAAV,EAAa5nB,CAAb,EAAgB;AAChC,MAAIioB,SAAS,GAAGL,CAAC,GAAG5nB,CAApB;AACA,SAAOioB,SAAS,KAAK,CAAd,GAAkBL,CAAlB,GAAsB/hB,IAAI,CAAC8hB,KAAL,CAAWC,CAAC,GAAGK,SAAf,CAA7B;AACH,CAHD;;AAKA,IAAIC,eAAe,GAAG,OAAO,IAA7B;;AACA,IAAIC,WAAW,GAAG,UAAUhmB,EAAV,EAAc;AAC5B,MAAIoF,MAAM,GAAGpF,EAAE,CAACoF,MAAhB;AAAA,MAAwB+W,IAAI,GAAGnc,EAAE,CAACmc,IAAlC;AAAA,MAAwCvM,SAAS,GAAG5P,EAAE,CAAC4P,SAAvD;AAAA,MAAkEwU,OAAO,GAAGpkB,EAAE,CAACokB,OAA/E;AAAA,MAAwFC,QAAQ,GAAGrkB,EAAE,CAACqkB,QAAtG;AAAA,MAAgHC,KAAK,GAAGtkB,EAAE,CAACskB,KAA3H;AAAA,MAAkIrf,KAAK,GAAGjF,EAAE,CAACiF,KAA7I;AAAA,MAAoJghB,uBAAuB,GAAGjmB,EAAE,CAACimB,uBAAjL;AACA,MAAIC,SAAS,GAAG/oB,gBAAgB,CAAC+D,MAAjB,EAAhB;AACA,MAAIilB,UAAU,GAAGhpB,gBAAgB,CAAC+D,MAAjB,EAAjB;AACAP,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAIylB,IAAI,GAAGD,UAAU,CAAC5kB,OAAtB;;AACA,QAAI6kB,IAAJ,EAAU;AACNA,MAAAA,IAAI,CAACC,MAAL;AACH;;AACD,QAAIC,SAAS,GAAGJ,SAAS,CAAC3kB,OAA1B;AACA6iB,IAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9B,UAAIA,MAAM,CAAC2B,mBAAX,EAAgC;AAC5B3B,QAAAA,MAAM,CAAC2B,mBAAP,CAA2B;AACvBlR,UAAAA,GAAG,EAAEiR,SADkB;AAEvB1W,UAAAA,SAAS,EAAEA,SAFY;AAGvByU,UAAAA,QAAQ,EAAEA,QAHa;AAIvBC,UAAAA,KAAK,EAAEA,KAJgB;AAKvBnZ,UAAAA,MAAM,EAAElP,OAAO,CAACqB,iBAAR,CAA0BkpB;AALX,SAA3B;AAOH;AACJ,KAVD;AAWA,QAAIpK,QAAQ,GAAGD,IAAI,CAACoI,WAAL,CAAiB;AAC5BF,MAAAA,QAAQ,EAAEA,QADkB;AAE5BC,MAAAA,KAAK,EAAEA;AAFqB,KAAjB,CAAf;AAIA,QAAImC,WAAW,GAAG7lB,MAAM,CAAC8lB,gBAAP,IAA2B,CAA7C;AACA,QAAIC,QAAQ,GAAGjjB,IAAI,CAACkjB,IAAL,CAAUb,eAAe,IAAI3J,QAAQ,CAACnX,KAAT,GAAiBmX,QAAQ,CAAChX,MAA9B,CAAzB,CAAf;AACA,QAAIyhB,gBAAgB,GAAGJ,WAAW,GAAGE,QAArC;AACAE,IAAAA,gBAAgB,GAAIP,SAAS,CAAClgB,KAAV,CAAgB2S,SAAhB,GAA4B,aAAhC,GAAiDuN,SAAS,CAAClgB,KAAV,CAAgB0gB,cAAhB,CAA+B,WAA/B,CAAjE;AACA,QAAIC,aAAa,GAAGrjB,IAAI,CAACC,GAAL,CAASgjB,QAAT,EAAmBF,WAAnB,CAApB;;AACA,QAAIzmB,EAAE,GAAGslB,YAAY,CAACyB,aAAD,EAAgB,CAAhB,CAArB;AAAA,QAAyC5d,CAAC,GAAGnJ,EAAE,CAAC,CAAD,CAA/C;AAAA,QAAoDqJ,CAAC,GAAGrJ,EAAE,CAAC,CAAD,CAA1D;;AACAsmB,IAAAA,SAAS,CAACrhB,KAAV,GAAkB4gB,aAAa,CAACzJ,QAAQ,CAACnX,KAAT,GAAiB8hB,aAAlB,EAAiC5d,CAAjC,CAA/B;AACAmd,IAAAA,SAAS,CAAClhB,MAAV,GAAmBygB,aAAa,CAACzJ,QAAQ,CAAChX,MAAT,GAAkB2hB,aAAnB,EAAkC5d,CAAlC,CAAhC;AACAmd,IAAAA,SAAS,CAAClgB,KAAV,CAAgBnB,KAAhB,GAAwB,GAAGC,MAAH,CAAU2gB,aAAa,CAACzJ,QAAQ,CAACnX,KAAV,EAAiBoE,CAAjB,CAAvB,EAA4C,IAA5C,CAAxB;AACAid,IAAAA,SAAS,CAAClgB,KAAV,CAAgBhB,MAAhB,GAAyB,GAAGF,MAAH,CAAU2gB,aAAa,CAACzJ,QAAQ,CAAChX,MAAV,EAAkBiE,CAAlB,CAAvB,EAA6C,IAA7C,CAAzB;AACAid,IAAAA,SAAS,CAACU,MAAV,GAAmB,IAAnB;AACA,QAAIC,aAAa,GAAGX,SAAS,CAACY,UAAV,CAAqB,IAArB,EAA2B;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAA3B,CAApB;AACA,QAAIpO,SAAS,GAAG8N,gBAAgB,IAAIJ,WAAW,KAAK,CAApC,GAAwC,CAACM,aAAD,EAAgB,CAAhB,EAAmB,CAAnB,EAAsBA,aAAtB,EAAqC,CAArC,EAAwC,CAAxC,CAAxC,GAAqF,IAArG;AACAZ,IAAAA,UAAU,CAAC5kB,OAAX,GAAqB4a,IAAI,CAACiL,MAAL,CAAY;AAAEH,MAAAA,aAAa,EAAEA,aAAjB;AAAgClO,MAAAA,SAAS,EAAEA,SAA3C;AAAsDqD,MAAAA,QAAQ,EAAEA;AAAhE,KAAZ,CAArB;AACA+J,IAAAA,UAAU,CAAC5kB,OAAX,CAAmB8lB,OAAnB,CAA2B7E,IAA3B,CAAgC,YAAY;AACxC8D,MAAAA,SAAS,CAACU,MAAV,GAAmB,KAAnB;AACA5C,MAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9B,YAAIA,MAAM,CAAC2B,mBAAX,EAAgC;AAC5B3B,UAAAA,MAAM,CAAC2B,mBAAP,CAA2B;AACvBlR,YAAAA,GAAG,EAAEiR,SADkB;AAEvB1W,YAAAA,SAAS,EAAEA,SAFY;AAGvByU,YAAAA,QAAQ,EAAEA,QAHa;AAIvBC,YAAAA,KAAK,EAAEA,KAJgB;AAKvBnZ,YAAAA,MAAM,EAAElP,OAAO,CAACqB,iBAAR,CAA0BgqB;AALX,WAA3B;AAOH;AACJ,OAVD;AAWArB,MAAAA,uBAAuB;AAC1B,KAdD,EAcG,YAAY;AACXK,MAAAA,SAAS,CAACU,MAAV,GAAmB,KAAnB;AACAf,MAAAA,uBAAuB;AAC1B,KAjBD;AAkBA,WAAO,YAAY;AACf,UAAIjmB,EAAJ;;AACA,OAACA,EAAE,GAAGmmB,UAAU,CAAC5kB,OAAjB,MAA8B,IAA9B,IAAsCvB,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAACqmB,MAAH,EAA/D;;AACA,UAAIC,SAAJ,EAAe;AACXA,QAAAA,SAAS,CAACrhB,KAAV,GAAkB,CAAlB;AACAqhB,QAAAA,SAAS,CAAClhB,MAAV,GAAmB,CAAnB;AACH;AACJ,KAPD;AAQH,GA7DwB,EA6DtB,EA7DsB,CAAzB;AA8DA,SAAQjI,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE,wBAAb;AAAuC2F,IAAAA,KAAK,EAAE;AACpFhB,MAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUE,MAAV,EAAkB,IAAlB,CAD4E;AAEpFH,MAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUD,KAAV,EAAiB,IAAjB;AAF6E;AAA9C,GAAtC,EAIJ9H,gBAAgB,CAACqD,aAAjB,CAA+B,QAA/B,EAAyC;AAAEmC,IAAAA,GAAG,EAAEujB;AAAP,GAAzC,CAJI,CAAR;AAKH,CAvED;;AAyEA,IAAIqB,QAAQ,GAAG,UAAUvnB,EAAV,EAAc;AACzB,MAAIoF,MAAM,GAAGpF,EAAE,CAACoF,MAAhB;AAAA,MAAwB+W,IAAI,GAAGnc,EAAE,CAACmc,IAAlC;AAAA,MAAwCkI,QAAQ,GAAGrkB,EAAE,CAACqkB,QAAtD;AAAA,MAAgEC,KAAK,GAAGtkB,EAAE,CAACskB,KAA3E;AAAA,MAAkFrf,KAAK,GAAGjF,EAAE,CAACiF,KAA7F;AACA,MAAIhE,YAAY,GAAG9D,gBAAgB,CAAC+D,MAAjB,EAAnB;;AACA,MAAIsmB,KAAK,GAAG,YAAY;AACpB,QAAI3M,YAAY,GAAG5Z,YAAY,CAACM,OAAhC;;AACA,QAAI,CAACsZ,YAAL,EAAmB;AACf;AACH;;AACDA,IAAAA,YAAY,CAAC4M,SAAb,GAAyB,EAAzB;AACH,GAND;;AAOA9mB,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAIka,YAAY,GAAG5Z,YAAY,CAACM,OAAhC;AACA,QAAI6a,QAAQ,GAAGD,IAAI,CAACoI,WAAL,CAAiB;AAAEF,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBC,MAAAA,KAAK,EAAEA;AAA7B,KAAjB,CAAf;AACAnI,IAAAA,IAAI,CAACuL,eAAL,GAAuBlF,IAAvB,CAA4B,UAAUmF,YAAV,EAAwB;AAChDH,MAAAA,KAAK;AACL,UAAII,OAAO,GAAG,IAAIxqB,mBAAmB,CAACyqB,WAAxB,CAAoC1L,IAAI,CAAC2L,UAAzC,EAAqD3L,IAAI,CAAC4L,IAA1D,CAAd;AACAH,MAAAA,OAAO,CAACI,MAAR,CAAeL,YAAf,EAA6BvL,QAA7B,EAAuCoG,IAAvC,CAA4C,UAAUyF,GAAV,EAAe;AACvDA,QAAAA,GAAG,CAAC7hB,KAAJ,CAAUhB,MAAV,GAAmB,GAAGF,MAAH,CAAUE,MAAV,EAAkB,IAAlB,CAAnB;AACA6iB,QAAAA,GAAG,CAAC7hB,KAAJ,CAAUnB,KAAV,GAAkB,GAAGC,MAAH,CAAUD,KAAV,EAAiB,IAAjB,CAAlB;AACA4V,QAAAA,YAAY,CAACiE,WAAb,CAAyBmJ,GAAzB;AACH,OAJD;AAKH,KARD;AASH,GAZwB,EAYtB,EAZsB,CAAzB;AAaA,SAAO9qB,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE,qBAAb;AAAoCkC,IAAAA,GAAG,EAAE1B;AAAzC,GAAtC,CAAP;AACH,CAxBD;;AA0BA,IAAIinB,SAAS,GAAG,UAAUloB,EAAV,EAAc;AAC1B,MAAImc,IAAI,GAAGnc,EAAE,CAACmc,IAAd;AAAA,MAAoBvM,SAAS,GAAG5P,EAAE,CAAC4P,SAAnC;AAAA,MAA8CwU,OAAO,GAAGpkB,EAAE,CAACokB,OAA3D;AAAA,MAAoEC,QAAQ,GAAGrkB,EAAE,CAACqkB,QAAlF;AAAA,MAA4FC,KAAK,GAAGtkB,EAAE,CAACskB,KAAvG;AAAA,MAA8G6D,qBAAqB,GAAGnoB,EAAE,CAACmoB,qBAAzI;AACA,MAAIlnB,YAAY,GAAG9D,gBAAgB,CAAC+D,MAAjB,EAAnB;AACA,MAAIilB,UAAU,GAAGhpB,gBAAgB,CAAC+D,MAAjB,EAAjB;;AACA,MAAIsmB,KAAK,GAAG,YAAY;AACpB,QAAI3M,YAAY,GAAG5Z,YAAY,CAACM,OAAhC;;AACA,QAAI,CAACsZ,YAAL,EAAmB;AACf;AACH;;AACD,QAAIuN,KAAK,GAAG,GAAGC,KAAH,CAASjqB,IAAT,CAAcyc,YAAY,CAAC5W,gBAAb,CAA8B,gCAA9B,CAAd,CAAZ;AACAmkB,IAAAA,KAAK,CAACxrB,OAAN,CAAc,UAAU0rB,IAAV,EAAgB;AAAE,aAAOzN,YAAY,CAACmE,WAAb,CAAyBsJ,IAAzB,CAAP;AAAwC,KAAxE;AACA,QAAIC,MAAM,GAAG,GAAGF,KAAH,CAASjqB,IAAT,CAAcyc,YAAY,CAAC5W,gBAAb,CAA8B,yBAA9B,CAAd,CAAb;AACAskB,IAAAA,MAAM,CAAC3rB,OAAP,CAAe,UAAU4rB,EAAV,EAAc;AAAE,aAAO3N,YAAY,CAACmE,WAAb,CAAyBwJ,EAAzB,CAAP;AAAsC,KAArE;AACH,GATD;;AAUA7nB,EAAAA,yBAAyB,CAAC,YAAY;AAClC,QAAIylB,IAAI,GAAGD,UAAU,CAAC5kB,OAAtB;;AACA,QAAI6kB,IAAJ,EAAU;AACNA,MAAAA,IAAI,CAACC,MAAL;AACH;;AACD,QAAIxL,YAAY,GAAG5Z,YAAY,CAACM,OAAhC;;AACA,QAAI,CAACsZ,YAAL,EAAmB;AACf;AACH;;AACDA,IAAAA,YAAY,CAAC4N,eAAb,CAA6B,aAA7B;AACA,QAAIrM,QAAQ,GAAGD,IAAI,CAACoI,WAAL,CAAiB;AAAEF,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBC,MAAAA,KAAK,EAAEA;AAA7B,KAAjB,CAAf;AACAF,IAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9B,UAAIA,MAAM,CAAC8D,iBAAX,EAA8B;AAC1B9D,QAAAA,MAAM,CAAC8D,iBAAP,CAAyB;AACrBrT,UAAAA,GAAG,EAAEwF,YADgB;AAErBjL,UAAAA,SAAS,EAAEA,SAFU;AAGrB0U,UAAAA,KAAK,EAAEA,KAHc;AAIrBnZ,UAAAA,MAAM,EAAElP,OAAO,CAACqB,iBAAR,CAA0BkpB;AAJb,SAAzB;AAMH;AACJ,KATD;AAUArK,IAAAA,IAAI,CAACwM,cAAL,GAAsBnG,IAAtB,CAA2B,UAAUoG,WAAV,EAAuB;AAC9CpB,MAAAA,KAAK;AACLrB,MAAAA,UAAU,CAAC5kB,OAAX,GAAqBnE,mBAAmB,CAACyrB,eAApB,CAAoC;AACrDvnB,QAAAA,SAAS,EAAEuZ,YAD0C;AAErD+N,QAAAA,WAAW,EAAEA,WAFwC;AAGrDxM,QAAAA,QAAQ,EAAEA,QAH2C;AAIrD0M,QAAAA,oBAAoB,EAAE;AAJ+B,OAApC,CAArB;AAMA3C,MAAAA,UAAU,CAAC5kB,OAAX,CAAmB8lB,OAAnB,CAA2B7E,IAA3B,CAAgC,YAAY;AACxC3H,QAAAA,YAAY,CAAChX,YAAb,CAA0B,aAA1B,EAAyC,oBAAoBqB,MAApB,CAA2B0K,SAA3B,CAAzC;AACA,YAAIwY,KAAK,GAAG,GAAGC,KAAH,CAASjqB,IAAT,CAAcyc,YAAY,CAAC5a,QAA3B,CAAZ;AACAmoB,QAAAA,KAAK,CAACxrB,OAAN,CAAc,UAAU0rB,IAAV,EAAgB;AAAE,iBAAOA,IAAI,CAACzgB,SAAL,CAAeC,GAAf,CAAmB,2BAAnB,CAAP;AAAyD,SAAzF;AACAsc,QAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9B,cAAIA,MAAM,CAAC8D,iBAAX,EAA8B;AAC1B9D,YAAAA,MAAM,CAAC8D,iBAAP,CAAyB;AACrBrT,cAAAA,GAAG,EAAEwF,YADgB;AAErBjL,cAAAA,SAAS,EAAEA,SAFU;AAGrB0U,cAAAA,KAAK,EAAEA,KAHc;AAIrBnZ,cAAAA,MAAM,EAAElP,OAAO,CAACqB,iBAAR,CAA0BgqB;AAJb,aAAzB;AAMH;AACJ,SATD;AAUAa,QAAAA,qBAAqB;AACxB,OAfD,EAeG,YAAY;AACXtN,QAAAA,YAAY,CAAC4N,eAAb,CAA6B,aAA7B;AACAN,QAAAA,qBAAqB;AACxB,OAlBD;AAmBH,KA3BD;AA4BA,WAAO,YAAY;AACf,UAAInoB,EAAJ;;AACA,OAACA,EAAE,GAAGmmB,UAAU,CAAC5kB,OAAjB,MAA8B,IAA9B,IAAsCvB,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAACqmB,MAAH,EAA/D;AACH,KAHD;AAIH,GArDwB,EAqDtB,EArDsB,CAAzB;AAsDA,SAAOlpB,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE,sBAAb;AAAqCkC,IAAAA,GAAG,EAAE1B;AAA1C,GAAtC,CAAP;AACH,CArED;;AAuEA,IAAI8nB,SAAS,GAAG,UAAU/oB,EAAV,EAAc;AAC1B,MAAIkP,GAAG,GAAGlP,EAAE,CAACkP,GAAb;AAAA,MAAkB9J,MAAM,GAAGpF,EAAE,CAACoF,MAA9B;AAAA,MAAsCmT,UAAU,GAAGvY,EAAE,CAACuY,UAAtD;AAAA,MAAkE3I,SAAS,GAAG5P,EAAE,CAAC4P,SAAjF;AAAA,MAA4FoZ,YAAY,GAAGhpB,EAAE,CAACgpB,YAA9G;AAAA,MAA4H5E,OAAO,GAAGpkB,EAAE,CAACokB,OAAzI;AAAA,MAAkJ6E,UAAU,GAAGjpB,EAAE,CAACipB,UAAlK;AAAA,MAA8K5E,QAAQ,GAAGrkB,EAAE,CAACqkB,QAA5L;AAAA,MAAsMC,KAAK,GAAGtkB,EAAE,CAACskB,KAAjN;AAAA,MAAwN4E,YAAY,GAAGlpB,EAAE,CAACkpB,YAA1O;AAAA,MAAwPjkB,KAAK,GAAGjF,EAAE,CAACiF,KAAnQ;AAAA,MAA0Q6d,oBAAoB,GAAG9iB,EAAE,CAAC8iB,oBAApS;AAAA,MAA0TC,YAAY,GAAG/iB,EAAE,CAAC+iB,YAA5U;AAAA,MAA0VoG,iBAAiB,GAAGnpB,EAAE,CAACmpB,iBAAjX;AAAA,MAAoYC,YAAY,GAAGppB,EAAE,CAACopB,YAAtZ;AACA,MAAInV,SAAS,GAAGH,YAAY,EAA5B;;AACA,MAAI1R,EAAE,GAAGjF,gBAAgB,CAACkF,QAAjB,CAA0B;AAC/B8Z,IAAAA,IAAI,EAAE,IADyB;AAE/BkN,IAAAA,UAAU,EAAEjkB,MAFmB;AAG/BkkB,IAAAA,SAAS,EAAErkB,KAHoB;AAI/BskB,IAAAA,gBAAgB,EAAE;AAJa,GAA1B,CAAT;AAAA,MAKIC,QAAQ,GAAGpnB,EAAE,CAAC,CAAD,CALjB;AAAA,MAKsBqnB,WAAW,GAAGrnB,EAAE,CAAC,CAAD,CALtC;;AAMA,MAAI2C,EAAE,GAAG5H,gBAAgB,CAACkF,QAAjB,CAA0B,KAA1B,CAAT;AAAA,MAA2CqnB,mBAAmB,GAAG3kB,EAAE,CAAC,CAAD,CAAnE;AAAA,MAAwE4kB,sBAAsB,GAAG5kB,EAAE,CAAC,CAAD,CAAnG;;AACA,MAAIW,EAAE,GAAGvI,gBAAgB,CAACkF,QAAjB,CAA0B,KAA1B,CAAT;AAAA,MAA2CunB,iBAAiB,GAAGlkB,EAAE,CAAC,CAAD,CAAjE;AAAA,MAAsEmkB,oBAAoB,GAAGnkB,EAAE,CAAC,CAAD,CAA/F;;AACA,MAAIyW,IAAI,GAAGqN,QAAQ,CAACrN,IAApB;AAAA,MAA0BkN,UAAU,GAAGG,QAAQ,CAACH,UAAhD;AAAA,MAA4DC,SAAS,GAAGE,QAAQ,CAACF,SAAjF;AACA,MAAIQ,UAAU,GAAGpmB,IAAI,CAACqmB,GAAL,CAAS1F,QAAQ,GAAG2E,YAApB,IAAoC,GAApC,KAA4C,CAA7D;AACA,MAAIgB,WAAW,GAAGV,SAAS,GAAGhF,KAA9B;AACA,MAAI2F,YAAY,GAAGZ,UAAU,GAAG/E,KAAhC;AACA,MAAI4F,CAAC,GAAGJ,UAAU,GAAGE,WAAH,GAAiBC,YAAnC;AACA,MAAIE,CAAC,GAAGL,UAAU,GAAGG,YAAH,GAAkBD,WAApC;AACA,MAAII,aAAa,GAAG,CAACZ,QAAQ,CAACD,gBAAT,GAA4BlF,QAA5B,GAAuC2E,YAAxC,IAAwD,GAA5E;;AACA,MAAIqB,iBAAiB,GAAG,YAAY;AAChClI,IAAAA,OAAO,CAACjT,GAAD,EAAMU,SAAN,CAAP,CAAwB4S,IAAxB,CAA6B,UAAU8H,OAAV,EAAmB;AAC5C,UAAIlO,QAAQ,GAAGkO,OAAO,CAAC/F,WAAR,CAAoB;AAAED,QAAAA,KAAK,EAAE;AAAT,OAApB,CAAf;AACArQ,MAAAA,SAAS,CAAC1S,OAAV,IACIkoB,WAAW,CAAC;AACRtN,QAAAA,IAAI,EAAEmO,OADE;AAERjB,QAAAA,UAAU,EAAEjN,QAAQ,CAAChX,MAFb;AAGRkkB,QAAAA,SAAS,EAAElN,QAAQ,CAACnX,KAHZ;AAIRskB,QAAAA,gBAAgB,EAAEnN,QAAQ,CAACiI;AAJnB,OAAD,CADf;AAOH,KATD;AAUH,GAXD;;AAYA,MAAIkG,mBAAmB,GAAG,UAAUvpB,KAAV,EAAiB;AAAE,WAAQ7D,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EACjDzK,KAAK,CAACwpB,WAAN,CAAkBvqB,QAD+B,EAEjDe,KAAK,CAACypB,SAAN,CAAgBxqB,QAFiC,EAGjDe,KAAK,CAAC0pB,eAAN,CAAsBzqB,QAH2B,CAAR;AAGN,GAHvC;;AAIA,MAAI0qB,eAAe,GAAG1B,UAAU,IAAIsB,mBAApC;;AACA,MAAIK,2BAA2B,GAAG,YAAY;AAC1C,QAAI3W,SAAS,CAAC1S,OAAd,EAAuB;AACnBooB,MAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACH;AACJ,GAJD;;AAKA,MAAIkB,yBAAyB,GAAG,YAAY;AACxC,QAAI5W,SAAS,CAAC1S,OAAd,EAAuB;AACnBsoB,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AACH;AACJ,GAJD;;AAKA1sB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC2oB,IAAAA,WAAW,CAAC;AACRtN,MAAAA,IAAI,EAAE,IADE;AAERkN,MAAAA,UAAU,EAAEjkB,MAFJ;AAGRkkB,MAAAA,SAAS,EAAErkB,KAHH;AAIRskB,MAAAA,gBAAgB,EAAE;AAJV,KAAD,CAAX;AAMAI,IAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACAE,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACH,GATD,EASG,CAACb,YAAD,EAAe3E,QAAf,EAAyBC,KAAzB,CATH;AAUAnnB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAIooB,YAAY,IAAIjV,SAAS,CAAC1S,OAA1B,IAAqC,CAAC4a,IAA1C,EAAgD;AAC5CkO,MAAAA,iBAAiB;AACpB;AACJ,GAJD,EAIG,CAACnB,YAAD,EAAe/M,IAAf,CAJH;AAKAhf,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAI4oB,mBAAmB,IAAIE,iBAA3B,EAA8C;AAC1CT,MAAAA,iBAAiB,CAACvZ,SAAD,CAAjB;AACH;AACJ,GAJD,EAIG,CAAC8Z,mBAAD,EAAsBE,iBAAtB,CAJH;AAKA,SAAQzsB,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE,sBAAb;AAAqC,mBAAe,oBAAoByE,MAApB,CAA2B0K,SAA3B,CAApD;AAA2FjN,IAAAA,GAAG,EAAE4V,UAAhG;AAA4GnS,IAAAA,KAAK,EAAE;AACzJhB,MAAAA,MAAM,EAAE,GAAGF,MAAH,CAAUilB,CAAV,EAAa,IAAb,CADiJ;AAEzJllB,MAAAA,KAAK,EAAE,GAAGC,MAAH,CAAUglB,CAAV,EAAa,IAAb;AAFkJ;AAAnH,GAAtC,EAGC,CAAC/N,IAAD,GAAShf,gBAAgB,CAACqD,aAAjB,CAA+B8F,OAA/B,EAAwC;AAAEpG,IAAAA,MAAM,EAAE,4BAA4BgF,MAA5B,CAAmC0K,SAAnC;AAAV,GAAxC,CAAT,GAAgHzS,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EACrHkf,eAAe,CAAC;AACZD,IAAAA,eAAe,EAAE;AACbnqB,MAAAA,KAAK,EAAE,EADM;AAEbN,MAAAA,QAAQ,EAAG9C,gBAAgB,CAACqD,aAAjB,CAA+B6kB,eAA/B,EAAgD;AAAEnW,QAAAA,GAAG,EAAEA,GAAP;AAAYiN,QAAAA,IAAI,EAAEA,IAAlB;AAAwBvM,QAAAA,SAAS,EAAEA,SAAnC;AAA8CwU,QAAAA,OAAO,EAAEA,OAAvD;AAAgEC,QAAAA,QAAQ,EAAE+F,aAA1E;AAAyF9F,QAAAA,KAAK,EAAEA,KAAhG;AAAuGxB,QAAAA,oBAAoB,EAAEA,oBAA7H;AAAmJC,QAAAA,YAAY,EAAEA;AAAjK,OAAhD;AAFE,KADL;AAKZyH,IAAAA,WAAW,EAAE;AACTjqB,MAAAA,KAAK,EAAE,EADE;AAETN,MAAAA,QAAQ,EAAG9C,gBAAgB,CAACqD,aAAjB,CAA+BwlB,WAA/B,EAA4C;AAAE5gB,QAAAA,MAAM,EAAE+kB,CAAV;AAAahO,QAAAA,IAAI,EAAEA,IAAnB;AAAyBvM,QAAAA,SAAS,EAAEA,SAApC;AAA+CwU,QAAAA,OAAO,EAAEA,OAAxD;AAAiEC,QAAAA,QAAQ,EAAE+F,aAA3E;AAA0F9F,QAAAA,KAAK,EAAEA,KAAjG;AAAwGrf,QAAAA,KAAK,EAAEilB,CAA/G;AAAkHjE,QAAAA,uBAAuB,EAAE2E;AAA3I,OAA5C;AAFF,KALD;AASZlB,IAAAA,mBAAmB,EAAEA,mBATT;AAUZxa,IAAAA,GAAG,EAAEA,GAVO;AAWZ9J,IAAAA,MAAM,EAAE+kB,CAXI;AAYZva,IAAAA,SAAS,EAAEA,SAZC;AAaZyU,IAAAA,QAAQ,EAAE+F,aAbE;AAcZ9F,IAAAA,KAAK,EAAEA,KAdK;AAeZwG,IAAAA,QAAQ,EAAE;AACNvqB,MAAAA,KAAK,EAAE,EADD;AAENN,MAAAA,QAAQ,EAAG9C,gBAAgB,CAACqD,aAAjB,CAA+B+mB,QAA/B,EAAyC;AAAEniB,QAAAA,MAAM,EAAE+kB,CAAV;AAAahO,QAAAA,IAAI,EAAEA,IAAnB;AAAyBkI,QAAAA,QAAQ,EAAE+F,aAAnC;AAAkD9F,QAAAA,KAAK,EAAEA,KAAzD;AAAgErf,QAAAA,KAAK,EAAEilB;AAAvE,OAAzC;AAFL,KAfE;AAmBZO,IAAAA,SAAS,EAAE;AACPlqB,MAAAA,KAAK,EAAE,EADA;AAEPN,MAAAA,QAAQ,EAAG9C,gBAAgB,CAACqD,aAAjB,CAA+B0nB,SAA/B,EAA0C;AAAE/L,QAAAA,IAAI,EAAEA,IAAR;AAAcvM,QAAAA,SAAS,EAAEA,SAAzB;AAAoCwU,QAAAA,OAAO,EAAEA,OAA7C;AAAsDC,QAAAA,QAAQ,EAAE+F,aAAhE;AAA+E9F,QAAAA,KAAK,EAAEA,KAAtF;AAA6F6D,QAAAA,qBAAqB,EAAE0C;AAApH,OAA1C;AAFJ,KAnBC;AAuBZjB,IAAAA,iBAAiB,EAAEA,iBAvBP;AAwBZ3kB,IAAAA,KAAK,EAAEilB,CAxBK;AAyBZha,IAAAA,YAAY,EAAEiZ,iBAzBF;AA0BZC,IAAAA,YAAY,EAAE,UAAU9pB,SAAV,EAAqB;AAAE,aAAO8pB,YAAY,CAACxZ,SAAD,EAAYtQ,SAAZ,CAAnB;AAA4C;AA1BrE,GAAD,CADsG,EA6BrH8kB,OAAO,CAACzU,GAAR,CAAY,UAAUiV,MAAV,EAAkBmG,GAAlB,EAAuB;AAC/B,WAAOnG,MAAM,CAAC+F,eAAP,GAA0BxtB,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D;AAAE1I,MAAAA,GAAG,EAAEgoB;AAAP,KAA1D,EAAwEnG,MAAM,CAAC+F,eAAP,CAAuB;AAC5Hzb,MAAAA,GAAG,EAAEA,GADuH;AAE5H9J,MAAAA,MAAM,EAAE+kB,CAFoH;AAG5Hva,MAAAA,SAAS,EAAEA,SAHiH;AAI5HyU,MAAAA,QAAQ,EAAE+F,aAJkH;AAK5H9F,MAAAA,KAAK,EAAEA,KALqH;AAM5Hrf,MAAAA,KAAK,EAAEilB;AANqH,KAAvB,CAAxE,CAA1B,GAOC/sB,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D;AAAE1I,MAAAA,GAAG,EAAEgoB;AAAP,KAA1D,CAPR;AAQH,GATD,CA7BqH,CAHjH,CAAR;AA0CH,CA3GD;;AA6GA,IAAIC,UAAU,GAAG,UAAU5M,GAAV,EAAe;AAC5B,MAAIC,GAAG,GAAGD,GAAG,CAAC/C,KAAJ,CAAU,IAAV,EAAgBiD,GAAhB,EAAV;AACA,SAAOD,GAAG,GAAGA,GAAG,CAAC6F,WAAJ,EAAH,GAAuB,EAAjC;AACH,CAHD;;AAKA,IAAI+G,gBAAgB,GAAG,EAAvB;AACA,IAAIC,cAAc,GAAG,CAArB;;AACA,IAAIC,cAAc,GAAG,UAAU7pB,SAAV,EAAqB+nB,UAArB,EAAiCC,SAAjC,EAA4ChF,KAA5C,EAAmD;AACpE,UAAQA,KAAR;AACI,SAAKroB,OAAO,CAACyB,gBAAR,CAAyB0tB,UAA9B;AACI,aAAO,CAAP;;AACJ,SAAKnvB,OAAO,CAACyB,gBAAR,CAAyB2jB,OAA9B;AACI,aAAO3d,IAAI,CAACC,GAAL,CAAS,CAACrC,SAAS,CAAC+pB,WAAV,GAAwBJ,gBAAzB,IAA6C3B,SAAtD,EAAiE,CAAChoB,SAAS,CAACqJ,YAAV,GAAyB,IAAIugB,cAA9B,IAAgD7B,UAAjH,CAAP;;AACJ,SAAKptB,OAAO,CAACyB,gBAAR,CAAyB4jB,SAA9B;AACI,aAAO,CAAChgB,SAAS,CAAC+pB,WAAV,GAAwBJ,gBAAzB,IAA6C3B,SAApD;AANR;AAQH,CATD;;AAWA,IAAIgC,kBAAkB,GAAG,CAAzB;AACA,IAAIC,YAAY,GAAG,EAAnB;;AACA,IAAIC,KAAK,GAAG,UAAUxrB,EAAV,EAAc;AACtB,MAAIyrB,WAAW,GAAGzrB,EAAE,CAACyrB,WAArB;AAAA,MAAkCC,YAAY,GAAG1rB,EAAE,CAAC0rB,YAApD;AAAA,MAAkExc,GAAG,GAAGlP,EAAE,CAACkP,GAA3E;AAAA,MAAgFyc,WAAW,GAAG3rB,EAAE,CAAC2rB,WAAjG;AAAA,MAA8GnC,QAAQ,GAAGxpB,EAAE,CAACwpB,QAA5H;AAAA,MAAsIpF,OAAO,GAAGpkB,EAAE,CAACokB,OAAnJ;AAAA,MAA4J6E,UAAU,GAAGjpB,EAAE,CAACipB,UAA5K;AAAA,MAAwLtU,UAAU,GAAG3U,EAAE,CAAC2U,UAAxM;AAAA,MAAoNiX,WAAW,GAAG5rB,EAAE,CAAC4rB,WAArO;AAAA,MAAkPC,cAAc,GAAG7rB,EAAE,CAAC6rB,cAAtQ;AAAA,MAAsRC,UAAU,GAAG9rB,EAAE,CAAC8rB,UAAtS;AAAA,MAAkTC,YAAY,GAAG/rB,EAAE,CAAC+rB,YAApU;AAAA,MAAkVC,QAAQ,GAAGhsB,EAAE,CAACgsB,QAAhW;AAAA,MAA0W5C,YAAY,GAAGppB,EAAE,CAACopB,YAA5X;AAAA,MAA0Y6C,MAAM,GAAGjsB,EAAE,CAACisB,MAAtZ;AACA,MAAI5c,QAAQ,GAAGH,GAAG,CAACG,QAAnB;AACA,MAAIG,KAAK,GAAGN,GAAG,CAACK,WAAJ,CAAgBC,KAA5B;AACA,MAAI2C,IAAI,GAAGhV,gBAAgB,CAACiD,UAAjB,CAA4B8R,mBAA5B,EAAiDC,IAA5D;AACA,MAAI+Z,YAAY,GAAG/uB,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,CAAnB;AACA,MAAIkB,KAAK,GAAG6rB,YAAY,CAAC5sB,SAAb,KAA2BrD,OAAO,CAACiD,aAAR,CAAsBoB,WAA7D;AACA,MAAIW,YAAY,GAAG9D,gBAAgB,CAAC+D,MAAjB,EAAnB;AACA,MAAIirB,QAAQ,GAAGhvB,gBAAgB,CAAC+D,MAAjB,EAAf;;AACA,MAAIkB,EAAE,GAAGjF,gBAAgB,CAACkF,QAAjB,CAA0B,CAA1B,CAAT;AAAA,MAAuC+pB,WAAW,GAAGhqB,EAAE,CAAC,CAAD,CAAvD;AAAA,MAA4DiqB,cAAc,GAAGjqB,EAAE,CAAC,CAAD,CAA/E;;AACA,MAAI2C,EAAE,GAAG5H,gBAAgB,CAACkF,QAAjB,CAA0B,CAA1B,CAAT;AAAA,MAAuCgiB,QAAQ,GAAGtf,EAAE,CAAC,CAAD,CAApD;AAAA,MAAyDunB,WAAW,GAAGvnB,EAAE,CAAC,CAAD,CAAzE;;AACA,MAAIW,EAAE,GAAGvI,gBAAgB,CAACkF,QAAjB,CAA0B,KAA1B,CAAT;AAAA,MAA2CkqB,oBAAoB,GAAG7mB,EAAE,CAAC,CAAD,CAApE;AAAA,MAAyE8mB,uBAAuB,GAAG9mB,EAAE,CAAC,CAAD,CAArG;;AACA,MAAIK,EAAE,GAAG5I,gBAAgB,CAACkF,QAAjB,CAA0B,IAAImf,GAAJ,EAA1B,CAAT;AAAA,MAA+CiL,aAAa,GAAG1mB,EAAE,CAAC,CAAD,CAAjE;AAAA,MAAsE2mB,gBAAgB,GAAG3mB,EAAE,CAAC,CAAD,CAA3F;;AACA,MAAI6C,EAAE,GAAGzL,gBAAgB,CAACkF,QAAjB,CAA0BsS,UAA1B,CAAT;AAAA,MAAgDgY,iBAAiB,GAAG/jB,EAAE,CAAC,CAAD,CAAtE;AAAA,MAA2EgkB,oBAAoB,GAAGhkB,EAAE,CAAC,CAAD,CAApG;;AACA,MAAIikB,QAAQ,GAAG1vB,gBAAgB,CAAC+D,MAAjB,CAAwB0qB,WAAxB,CAAf;;AACA,MAAI9iB,EAAE,GAAG3L,gBAAgB,CAACkF,QAAjB,CAA0BmnB,QAAQ,CAAClF,KAAnC,CAAT;AAAA,MAAoDA,KAAK,GAAGxb,EAAE,CAAC,CAAD,CAA9D;AAAA,MAAmEgkB,QAAQ,GAAGhkB,EAAE,CAAC,CAAD,CAAhF;;AACA,MAAIikB,uBAAuB,GAAG5vB,gBAAgB,CAAC+D,MAAjB,CAAwB,OAAOwqB,YAAP,KAAwB,QAAxB,GAAmCA,YAAnC,GAAkD,IAA1E,CAA9B;;AACA,MAAIsB,EAAE,GAAG7vB,gBAAgB,CAACkF,QAAjB,CAA0B,CAAC,CAA3B,CAAT;AAAA,MAAwC4qB,eAAe,GAAGD,EAAE,CAAC,CAAD,CAA5D;AAAA,MAAiEE,kBAAkB,GAAGF,EAAE,CAAC,CAAD,CAAxF;;AACA,MAAIG,mBAAmB,GAAGhwB,gBAAgB,CAACya,OAAjB,CAAyB,YAAY;AAAE,WAAO3I,kBAAkB,CAAC;AAAEC,MAAAA,GAAG,EAAEA,GAAP;AAAYC,MAAAA,SAAS,EAAE,YAAvB;AAAqCC,MAAAA,QAAQ,EAAE;AAA/C,KAAD,CAAzB;AAAgF,GAAvH,EAAyH,CAACI,KAAD,CAAzH,CAA1B;AACA,MAAI0H,YAAY,GAAG/Z,gBAAgB,CAACwV,WAAjB,CAA6B,YAAY;AACxD,QAAIya,KAAK,GAAG,CAAC5D,QAAQ,CAACH,UAAV,EAAsBG,QAAQ,CAACF,SAA/B,CAAZ;AACA,QAAIjW,IAAI,GAAG3P,IAAI,CAACqmB,GAAL,CAAS1F,QAAT,IAAqB,GAArB,KAA6B,CAA7B,GACL;AACEjf,MAAAA,MAAM,EAAEgoB,KAAK,CAAC,CAAD,CADf;AAEEnoB,MAAAA,KAAK,EAAEmoB,KAAK,CAAC,CAAD;AAFd,KADK,GAKL;AACEhoB,MAAAA,MAAM,EAAEgoB,KAAK,CAAC,CAAD,CADf;AAEEnoB,MAAAA,KAAK,EAAEmoB,KAAK,CAAC,CAAD;AAFd,KALN;AASA,WAAO;AACHhoB,MAAAA,MAAM,EAAEiO,IAAI,CAACjO,MAAL,GAAckf,KADnB;AAEHrf,MAAAA,KAAK,EAAEoO,IAAI,CAACpO,KAAL,GAAaqf;AAFjB,KAAP;AAIH,GAfkB,EAehB,CAACD,QAAD,EAAWC,KAAX,CAfgB,CAAnB;AAgBA,MAAIlN,aAAa,GAAGja,gBAAgB,CAACwV,WAAjB,CAA6B,UAAUpC,UAAV,EAAsB;AAAE,WAAO7M,IAAI,CAACE,GAAL,CAAS2M,UAAU,GAAG+a,kBAAtB,EAA0C,CAA1C,CAAP;AAAsD,GAA3G,EAA6G,EAA7G,CAApB;AACA,MAAIjU,WAAW,GAAGla,gBAAgB,CAACwV,WAAjB,CAA6B,UAAUnC,QAAV,EAAoB;AAAE,WAAO9M,IAAI,CAACC,GAAL,CAAS6M,QAAQ,GAAG8a,kBAApB,EAAwCjc,QAAQ,GAAG,CAAnD,CAAP;AAA+D,GAAlH,EAAoH,CAACA,QAAD,CAApH,CAAlB;AACA,MAAIkI,aAAa,GAAGpa,gBAAgB,CAACwV,WAAjB,CAA6B,UAAU3N,IAAV,EAAgB;AAAE,WAAQ;AACvEI,MAAAA,MAAM,EAAEJ,IAAI,CAACI,MAAL,GAAcmmB,YADiD;AAEvEtmB,MAAAA,KAAK,EAAED,IAAI,CAACC,KAAL,GAAasmB;AAFmD,KAAR;AAG9D,GAHe,EAGb,EAHa,CAApB;AAIA,MAAI8B,WAAW,GAAGpW,UAAU,CAAC;AACzBC,IAAAA,YAAY,EAAEA,YADW;AAEzB7W,IAAAA,KAAK,EAAEA,KAFkB;AAGzB8W,IAAAA,aAAa,EAAE9H,QAHU;AAIzBiI,IAAAA,SAAS,EAAE6U,QAJc;AAKzBxX,IAAAA,UAAU,EAAEgY,iBALa;AAMzBvV,IAAAA,aAAa,EAAEA,aANU;AAOzBC,IAAAA,WAAW,EAAEA,WAPY;AAQzBE,IAAAA,aAAa,EAAEA;AARU,GAAD,CAA5B;AAUA,MAAI+V,iBAAiB,GAAGhb,mBAAmB,CAAC,UAAUpP,CAAV,EAAa;AACrD,QAAI6pB,uBAAuB,CAACxrB,OAA5B,EAAqC;AACjC2rB,MAAAA,kBAAkB,CAAC,CAAC,CAAF,CAAlB;AACAK,MAAAA,IAAI,CAACR,uBAAuB,CAACxrB,OAAzB,CAAJ;AACH;AACJ,GAL0C,EAKxC,GALwC,CAA3C;AAMAwR,EAAAA,cAAc,CAAC;AACXrJ,IAAAA,SAAS,EAAEyiB,QADA;AAEXnZ,IAAAA,QAAQ,EAAEsa;AAFC,GAAD,CAAd;AAIA,MAAIhE,SAAS,GAAGE,QAAQ,CAACF,SAAzB;AAAA,MAAoCD,UAAU,GAAGG,QAAQ,CAACH,UAA1D;;AACA,MAAImE,cAAc,GAAG,UAAU5B,WAAV,EAAuB;AACxC,QAAI6B,QAAQ,GAAG7B,WAAf;AACAxH,IAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9B,UAAIA,MAAM,CAAC8I,mBAAX,EAAgC;AAC5BD,QAAAA,QAAQ,GAAG7I,MAAM,CAAC8I,mBAAP,CAA2BD,QAA3B,CAAX;AACH;AACJ,KAJD;AAKAZ,IAAAA,QAAQ,CAACtrB,OAAT,GAAmBksB,QAAnB;AACH,GARD;;AASA,MAAIE,iBAAiB,GAAG,YAAY;AAAE,WAAOxB,QAAQ,CAAC5qB,OAAhB;AAA0B,GAAhE;;AACA,MAAIqsB,cAAc,GAAG,YAAY;AAAE,WAAOf,QAAQ,CAACtrB,OAAhB;AAA0B,GAA7D;;AACA,MAAIssB,iBAAiB,GAAG1wB,gBAAgB,CAACwV,WAAjB,CAA6B,UAAU/C,SAAV,EAAqBsR,YAArB,EAAmCC,UAAnC,EAA+CC,OAA/C,EAAwD;AACzG,QAAI0M,cAAc,GAAG3B,QAAQ,CAAC5qB,OAA9B;AACA,QAAIwsB,YAAY,GAAGlB,QAAQ,CAACtrB,OAA5B;;AACA,QAAI,CAACusB,cAAD,IAAmB,CAACC,YAAxB,EAAsC;AAClC;AACH;;AACD5L,IAAAA,OAAO,CAACjT,GAAD,EAAMU,SAAN,CAAP,CAAwB4S,IAAxB,CAA6B,UAAUrG,IAAV,EAAgB;AACzC,UAAIC,QAAQ,GAAGD,IAAI,CAACoI,WAAL,CAAiB;AAAED,QAAAA,KAAK,EAAE;AAAT,OAAjB,CAAf;AACA,UAAIlY,GAAG,GAAG,CAAV;AACA,UAAI4hB,MAAM,GAAG,CAAC,OAAO9M,YAAP,KAAwB,UAAxB,GACRA,YAAY,CAAC9E,QAAQ,CAACnX,KAAV,EAAiBmX,QAAQ,CAAChX,MAA1B,CADJ,GAER8b,YAFO,KAEU,CAFvB;AAGA,UAAI7U,IAAI,GAAG,CAAC,OAAO8U,UAAP,KAAsB,UAAtB,GAAmCA,UAAU,CAAC/E,QAAQ,CAACnX,KAAV,EAAiBmX,QAAQ,CAAChX,MAA1B,CAA7C,GAAiF+b,UAAlF,KAAiG,CAA5G;AACA,UAAI8M,WAAW,GAAGF,YAAY,CAACzJ,KAA/B;;AACA,cAAQlD,OAAR;AACI,aAAKnlB,OAAO,CAACyB,gBAAR,CAAyB2jB,OAA9B;AACIjV,UAAAA,GAAG,GAAG,CAAN;AACAC,UAAAA,IAAI,GAAG,CAAP;AACAkhB,UAAAA,IAAI,CAACtxB,OAAO,CAACyB,gBAAR,CAAyB2jB,OAA1B,CAAJ;AACA;;AACJ,aAAKplB,OAAO,CAACyB,gBAAR,CAAyB4jB,SAA9B;AACI2M,UAAAA,WAAW,GAAG9C,cAAc,CAAC2C,cAAD,EAAiBzE,UAAjB,EAA6BC,SAA7B,EAAwCrtB,OAAO,CAACyB,gBAAR,CAAyB4jB,SAAjE,CAA5B;AACAlV,UAAAA,GAAG,GAAG,CAACgQ,QAAQ,CAAChX,MAAT,GAAkB4oB,MAAnB,IAA6BC,WAAnC;AACA5hB,UAAAA,IAAI,GAAGA,IAAI,GAAG4hB,WAAd;AACAV,UAAAA,IAAI,CAACU,WAAD,CAAJ;AACA;;AACJ;AACI,cAAIC,YAAY,GAAG9R,QAAQ,CAAC+R,sBAAT,CAAgC9hB,IAAhC,EAAsC2hB,MAAtC,CAAnB;AACA3hB,UAAAA,IAAI,GAAG3I,IAAI,CAACE,GAAL,CAASsqB,YAAY,CAAC,CAAD,CAAZ,GAAkBH,YAAY,CAACzJ,KAAxC,EAA+C,CAA/C,CAAP;AACAlY,UAAAA,GAAG,GAAG1I,IAAI,CAACE,GAAL,CAASsqB,YAAY,CAAC,CAAD,CAAZ,GAAkBH,YAAY,CAACzJ,KAAxC,EAA+C,CAA/C,CAAN;AACA;AAhBR;;AAkBA,cAAQyJ,YAAY,CAACpZ,UAArB;AACI,aAAK1Y,OAAO,CAACwB,UAAR,CAAmBwX,UAAxB;AACIoY,UAAAA,WAAW,CAAC3U,YAAZ,CAAyB9I,SAAzB,EAAoC;AAAEvD,YAAAA,IAAI,EAAEA,IAAR;AAAcD,YAAAA,GAAG,EAAE;AAAnB,WAApC;AACA;;AACJ,aAAKnQ,OAAO,CAACwB,UAAR,CAAmB0X,QAAxB;AACA;AACIkY,UAAAA,WAAW,CAAC3U,YAAZ,CAAyB9I,SAAzB,EAAoC;AAAEvD,YAAAA,IAAI,EAAE,CAAR;AAAWD,YAAAA,GAAG,EAAEA;AAAhB,WAApC;AACA;AAPR;AASH,KAnCD;AAoCH,GA1CuB,EA0CrB,EA1CqB,CAAxB;AA2CA,MAAIgiB,UAAU,GAAGjxB,gBAAgB,CAACwV,WAAjB,CAA6B,UAAU/C,SAAV,EAAqB;AAC/D,QAAI,KAAKA,SAAL,IAAkBA,SAAS,GAAGP,QAAlC,EAA4C;AACxCge,MAAAA,WAAW,CAAC3U,YAAZ,CAAyB9I,SAAzB,EAAoC;AAAEvD,QAAAA,IAAI,EAAE,CAAR;AAAWD,QAAAA,GAAG,EAAE;AAAhB,OAApC;AACH;AACJ,GAJgB,EAId,EAJc,CAAjB;AAKA,MAAIiiB,QAAQ,GAAGlxB,gBAAgB,CAACwV,WAAjB,CAA6B,UAAUyM,IAAV,EAAgB;AACxD,QAAI4L,UAAU,CAAC5L,IAAI,CAAC6B,IAAN,CAAV,CAAsBiD,WAAtB,OAAwC,KAA5C,EAAmD;AAC/C;AACH;;AACD,QAAI9B,OAAJ,CAAY,UAAUG,OAAV,EAAmB;AAC3B,UAAI+L,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,MAAAA,MAAM,CAACE,iBAAP,CAAyBpP,IAAzB;;AACAkP,MAAAA,MAAM,CAACG,MAAP,GAAgB,YAAY;AACxB,YAAIC,KAAK,GAAG,IAAIC,UAAJ,CAAeL,MAAM,CAAC3uB,MAAtB,CAAZ;AACA4iB,QAAAA,OAAO,CAACmM,KAAD,CAAP;AACH,OAHD;AAIH,KAPD,EAOGlM,IAPH,CAOQ,UAAUhR,IAAV,EAAgB;AACpBsa,MAAAA,UAAU,CAAC1M,IAAI,CAAC6B,IAAN,EAAYzP,IAAZ,CAAV;AACH,KATD;AAUH,GAdc,EAcZ,CAACsa,UAAD,CAdY,CAAf;AAeA,MAAI8C,MAAM,GAAGzxB,gBAAgB,CAACwV,WAAjB,CAA6B,UAAUrT,SAAV,EAAqB;AAC3D,QAAIuvB,OAAO,GAAGvvB,SAAS,KAAKrD,OAAO,CAACuB,eAAR,CAAwBsxB,QAAtC,GAAiD,CAAC,EAAlD,GAAuD,EAArE;AACA,QAAIC,eAAe,GAAGlC,QAAQ,CAACtrB,OAAT,CAAiB8iB,QAAvC;AACA,QAAI2K,cAAc,GAAGD,eAAe,KAAK,GAApB,IAA2BA,eAAe,KAAK,CAAC,GAAhD,GAAsDF,OAAtD,GAAgEE,eAAe,GAAGF,OAAvG;AACA1B,IAAAA,mBAAmB,CAACld,UAApB;AACAqc,IAAAA,WAAW,CAAC0C,cAAD,CAAX;AACAxB,IAAAA,cAAc,CAAC;AACXpO,MAAAA,IAAI,EAAEwM,WAAW,CAACxM,IADP;AAEXxP,MAAAA,SAAS,EAAEwc,WAFA;AAGX/C,MAAAA,UAAU,EAAEA,UAHD;AAIXC,MAAAA,SAAS,EAAEA,SAJA;AAKXmD,MAAAA,aAAa,EAAEA,aALJ;AAMXpI,MAAAA,QAAQ,EAAE2K,cANC;AAOX1K,MAAAA,KAAK,EAAEA,KAPI;AAQX3P,MAAAA,UAAU,EAAEgY;AARD,KAAD,CAAd;AAUAX,IAAAA,QAAQ,CAAC;AAAE1sB,MAAAA,SAAS,EAAEA,SAAb;AAAwB4P,MAAAA,GAAG,EAAEA,GAA7B;AAAkCmV,MAAAA,QAAQ,EAAE2K;AAA5C,KAAD,CAAR;AACH,GAjBY,EAiBV,EAjBU,CAAb;AAkBA,MAAIC,UAAU,GAAG9xB,gBAAgB,CAACwV,WAAjB,CAA6B,UAAU/C,SAAV,EAAqBtQ,SAArB,EAAgC;AAC1E,QAAIuvB,OAAO,GAAGvvB,SAAS,KAAKrD,OAAO,CAACuB,eAAR,CAAwBsxB,QAAtC,GAAiD,CAAC,EAAlD,GAAuD,EAArE;AACA,QAAII,SAAS,GAAGrC,QAAQ,CAACtrB,OAAT,CAAiBkrB,aAAjC;AACA,QAAI0C,mBAAmB,GAAGD,SAAS,CAACE,GAAV,CAAcxf,SAAd,IAA2Bsf,SAAS,CAAClyB,GAAV,CAAc4S,SAAd,CAA3B,GAAsD,CAAhF;AACA,QAAIyf,aAAa,GAAGF,mBAAmB,GAAGN,OAA1C;AACA,QAAIS,eAAe,GAAGJ,SAAS,CAAClN,GAAV,CAAcpS,SAAd,EAAyByf,aAAzB,CAAtB;AACA3C,IAAAA,gBAAgB,CAAC4C,eAAD,CAAhB;AACA9C,IAAAA,uBAAuB,CAAC,UAAUtwB,KAAV,EAAiB;AAAE,aAAO,CAACA,KAAR;AAAgB,KAApC,CAAvB;AACAsxB,IAAAA,cAAc,CAAC;AACXpO,MAAAA,IAAI,EAAEwM,WAAW,CAACxM,IADP;AAEXxP,MAAAA,SAAS,EAAEwc,WAFA;AAGX/C,MAAAA,UAAU,EAAEA,UAHD;AAIXC,MAAAA,SAAS,EAAEA,SAJA;AAKXmD,MAAAA,aAAa,EAAE6C,eALJ;AAMXC,MAAAA,WAAW,EAAE3f,SANF;AAOXyU,MAAAA,QAAQ,EAAEA,QAPC;AAQXC,MAAAA,KAAK,EAAEA,KARI;AASX3P,MAAAA,UAAU,EAAEgY;AATD,KAAD,CAAd;AAWAvD,IAAAA,YAAY,CAAC;AAAE9pB,MAAAA,SAAS,EAAEA,SAAb;AAAwB4P,MAAAA,GAAG,EAAEA,GAA7B;AAAkCU,MAAAA,SAAS,EAAEA,SAA7C;AAAwDyU,MAAAA,QAAQ,EAAEgL;AAAlE,KAAD,CAAZ;AACAlC,IAAAA,mBAAmB,CAAC/c,aAApB,CAAkCR,SAAlC;AACAsd,IAAAA,kBAAkB,CAACtd,SAAD,CAAlB;AACH,GAtBgB,EAsBd,EAtBc,CAAjB;AAuBA,MAAI4f,gBAAgB,GAAGryB,gBAAgB,CAACwV,WAAjB,CAA6B,UAAUgC,UAAV,EAAsB;AACtE6Y,IAAAA,cAAc,CAAC;AACXpO,MAAAA,IAAI,EAAEwM,WAAW,CAACxM,IADP;AAEXxP,MAAAA,SAAS,EAAEid,QAAQ,CAACtrB,OAAT,CAAiBqO,SAFjB;AAGXyZ,MAAAA,UAAU,EAAEA,UAHD;AAIXC,MAAAA,SAAS,EAAEA,SAJA;AAKXmD,MAAAA,aAAa,EAAEA,aALJ;AAMXpI,MAAAA,QAAQ,EAAEA,QANC;AAOXC,MAAAA,KAAK,EAAEA,KAPI;AAQX3P,MAAAA,UAAU,EAAEA;AARD,KAAD,CAAd;AAUAiY,IAAAA,oBAAoB,CAACjY,UAAD,CAApB;AACH,GAZsB,EAYpB,EAZoB,CAAvB;AAaA,MAAI4Y,IAAI,GAAGpwB,gBAAgB,CAACwV,WAAjB,CAA6B,UAAU8c,QAAV,EAAoB;AACxDtC,IAAAA,mBAAmB,CAACld,UAApB;AACA,QAAIyf,QAAQ,GAAGvD,QAAQ,CAAC5qB,OAAxB;AACA,QAAI0sB,WAAW,GAAGyB,QAAQ,GACpB,OAAOD,QAAP,KAAoB,QAApB,GACItE,cAAc,CAACuE,QAAD,EAAWrG,UAAX,EAAuBC,SAAvB,EAAkCmG,QAAlC,CADlB,GAEIA,QAHgB,GAIpB,CAJN;AAKA1C,IAAAA,uBAAuB,CAACxrB,OAAxB,GAAkC,OAAOkuB,QAAP,KAAoB,QAApB,GAA+BA,QAA/B,GAA0C,IAA5E;AACAC,IAAAA,QAAQ,CAACta,SAAT,GAAsBsa,QAAQ,CAACta,SAAT,GAAqB6Y,WAAtB,GAAqCpB,QAAQ,CAACtrB,OAAT,CAAiB+iB,KAA3E;AACAoL,IAAAA,QAAQ,CAACxa,UAAT,GAAuBwa,QAAQ,CAACxa,UAAT,GAAsB+Y,WAAvB,GAAsCpB,QAAQ,CAACtrB,OAAT,CAAiB+iB,KAA7E;AACAwI,IAAAA,QAAQ,CAACmB,WAAD,CAAR;AACAhC,IAAAA,MAAM,CAAC;AAAE/c,MAAAA,GAAG,EAAEA,GAAP;AAAYoV,MAAAA,KAAK,EAAE2J;AAAnB,KAAD,CAAN;AACAT,IAAAA,cAAc,CAAC;AACXpO,MAAAA,IAAI,EAAEwM,WAAW,CAACxM,IADP;AAEXxP,MAAAA,SAAS,EAAEwc,WAFA;AAGX/C,MAAAA,UAAU,EAAEA,UAHD;AAIXC,MAAAA,SAAS,EAAEA,SAJA;AAKXmD,MAAAA,aAAa,EAAEA,aALJ;AAMXpI,MAAAA,QAAQ,EAAEA,QANC;AAOXC,MAAAA,KAAK,EAAE2J,WAPI;AAQXtZ,MAAAA,UAAU,EAAEgY;AARD,KAAD,CAAd;AAUH,GAvBU,EAuBR,EAvBQ,CAAX;AAwBAxvB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAI6uB,aAAa,GAAG;AAChBhC,MAAAA,iBAAiB,EAAEA,iBADH;AAEhBC,MAAAA,cAAc,EAAEA,cAFA;AAGhBC,MAAAA,iBAAiB,EAAEA,iBAHH;AAIhBO,MAAAA,UAAU,EAAEA,UAJI;AAKhBC,MAAAA,QAAQ,EAAEA,QALM;AAMhBO,MAAAA,MAAM,EAAEA,MANQ;AAOhBK,MAAAA,UAAU,EAAEA,UAPI;AAQhBzB,MAAAA,cAAc,EAAEA,cARA;AAShBgC,MAAAA,gBAAgB,EAAEA,gBATF;AAUhBjC,MAAAA,IAAI,EAAEA;AAVU,KAApB;AAYAnJ,IAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9B,UAAIA,MAAM,CAACgL,OAAX,EAAoB;AAChBhL,QAAAA,MAAM,CAACgL,OAAP,CAAeD,aAAf;AACH;AACJ,KAJD;AAKA,WAAO,YAAY;AACfvL,MAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9B,YAAIA,MAAM,CAACiL,SAAX,EAAsB;AAClBjL,UAAAA,MAAM,CAACiL,SAAP,CAAiBF,aAAjB;AACH;AACJ,OAJD;AAKH,KAND;AAOH,GAzBD,EAyBG,CAACngB,KAAD,CAzBH;AA0BArS,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC+qB,IAAAA,cAAc,CAAC;AAAE3c,MAAAA,GAAG,EAAEA,GAAP;AAAYkQ,MAAAA,IAAI,EAAEqM;AAAlB,KAAD,CAAd;AACArH,IAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9BA,MAAAA,MAAM,CAACiH,cAAP,IAAyBjH,MAAM,CAACiH,cAAP,CAAsB;AAAE3c,QAAAA,GAAG,EAAEA,GAAP;AAAYkQ,QAAAA,IAAI,EAAEqM;AAAlB,OAAtB,CAAzB;AACH,KAFD;;AAGA,QAAIE,WAAJ,EAAiB;AACbyC,MAAAA,UAAU,CAACzC,WAAD,CAAV;AACH;AACJ,GARD,EAQG,CAACnc,KAAD,CARH;AASArS,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAIgvB,UAAU,GAAGjD,QAAQ,CAACtrB,OAAT,CAAiBqO,SAAlC;;AACA,QAAIkgB,UAAU,GAAG,CAAC,CAAlB,EAAqB;AACjBzC,MAAAA,WAAW,CAAC3U,YAAZ,CAAyBoX,UAAzB,EAAqC;AAAEzjB,QAAAA,IAAI,EAAE,CAAR;AAAWD,QAAAA,GAAG,EAAE;AAAhB,OAArC;AACH;AACJ,GALD,EAKG,CAACugB,iBAAD,CALH;AAMAxvB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAImX,UAAU,GAAGoV,WAAW,CAACpV,UAA7B;AAAA,QAAyCC,QAAQ,GAAGmV,WAAW,CAACnV,QAAhE;AAAA,QAA0ExB,iBAAiB,GAAG2W,WAAW,CAAC3W,iBAA1G;AAAA,QAA6HyB,YAAY,GAAGkV,WAAW,CAAClV,YAAxJ;AACA,QAAIiU,WAAW,GAAG1V,iBAAlB;AACA2V,IAAAA,cAAc,CAACD,WAAD,CAAd;;AACA,QAAIS,QAAQ,CAACtrB,OAAT,CAAiBqO,SAAjB,KAA+Bwc,WAAnC,EAAgD;AAC5CL,MAAAA,YAAY,CAAC;AAAEK,QAAAA,WAAW,EAAEA,WAAf;AAA4Bld,QAAAA,GAAG,EAAEA;AAAjC,OAAD,CAAZ;AACH;;AACDse,IAAAA,cAAc,CAAC;AACXpO,MAAAA,IAAI,EAAEwM,WAAW,CAACxM,IADP;AAEXxP,MAAAA,SAAS,EAAEwc,WAFA;AAGX/C,MAAAA,UAAU,EAAEA,UAHD;AAIXC,MAAAA,SAAS,EAAEA,SAJA;AAKXmD,MAAAA,aAAa,EAAEA,aALJ;AAMXpI,MAAAA,QAAQ,EAAEA,QANC;AAOXC,MAAAA,KAAK,EAAEA,KAPI;AAQX3P,MAAAA,UAAU,EAAEgY;AARD,KAAD,CAAd;AAUAQ,IAAAA,mBAAmB,CAAC7c,QAApB,CAA6B2H,UAA7B,EAAyCC,QAAzC;;AACA,QAAIE,OAAO,GAAG,UAAUtZ,CAAV,EAAa;AACvB,UAAIyE,IAAI,GAAG4U,YAAY,CAAC2M,IAAb,CAAkB,UAAUvhB,IAAV,EAAgB;AAAE,eAAOA,IAAI,CAAC6S,KAAL,KAAetX,CAAtB;AAA0B,OAA9D,CAAX;;AACA,UAAIyE,IAAJ,EAAU;AACN4pB,QAAAA,mBAAmB,CAAC1c,aAApB,CAAkC3R,CAAlC,EAAqCyE,IAAI,CAACwM,UAA1C;AACH;AACJ,KALD;;AAMA,SAAK,IAAIjR,CAAC,GAAGmZ,UAAb,EAAyBnZ,CAAC,IAAIoZ,QAA9B,EAAwCpZ,CAAC,EAAzC,EAA6C;AACzCsZ,MAAAA,OAAO,CAACtZ,CAAD,CAAP;AACH;;AACDixB,IAAAA,cAAc;AACjB,GA5BD,EA4BG,CACC1C,WAAW,CAACpV,UADb,EAECoV,WAAW,CAACnV,QAFb,EAGCmV,WAAW,CAAC3W,iBAHb,EAIC6V,oBAJD,EAKClI,QALD,EAMCC,KAND,CA5BH;AAoCA,MAAI0L,yBAAyB,GAAG7yB,gBAAgB,CAACwV,WAAjB,CAA6B,UAAU/C,SAAV,EAAqB;AAC9Eud,IAAAA,mBAAmB,CAACjd,YAApB,CAAiCN,SAAjC;AACAmgB,IAAAA,cAAc;AACjB,GAH+B,EAG7B,EAH6B,CAAhC;;AAIA,MAAIA,cAAc,GAAG,YAAY;AAC7B,QAAIE,QAAQ,GAAG9C,mBAAmB,CAACzc,sBAApB,EAAf;;AACA,QAAIuf,QAAQ,GAAG,CAAC,CAAhB,EAAmB;AACf9C,MAAAA,mBAAmB,CAAC/c,aAApB,CAAkC6f,QAAlC;AACA/C,MAAAA,kBAAkB,CAAC+C,QAAD,CAAlB;AACH;AACJ,GAND;;AAOA,MAAIC,kBAAkB,GAAG,UAAU9c,MAAV,EAAkB;AACvC,QAAI+c,YAAY,GAAG/D,WAAW,GAAG,CAAjC;AACA,QAAI6D,QAAQ,GAAG7D,WAAW,GAAG,CAA7B;;AACA,YAAQhZ,MAAR;AACI,WAAK,WAAL;AACIgb,QAAAA,UAAU,CAAC,CAAD,CAAV;AACA;;AACJ,WAAK,UAAL;AACIA,QAAAA,UAAU,CAAC/e,QAAQ,GAAG,CAAZ,CAAV;AACA;;AACJ,WAAK,UAAL;AACI4gB,QAAAA,QAAQ,GAAG5gB,QAAX,IAAuB+e,UAAU,CAAC6B,QAAD,CAAjC;AACA;;AACJ,WAAK,UAAL;AACIE,QAAAA,YAAY,IAAI,CAAhB,IAAqB/B,UAAU,CAAC+B,YAAD,CAA/B;AACA;AAZR;AAcH,GAjBD;;AAkBA,MAAIC,YAAY,GAAGjzB,gBAAgB,CAACwV,WAAjB,CAA6B,YAAY;AACxD,QAAIZ,SAAS,GAAGI,IAAI,IAAIA,IAAI,CAACV,IAAb,GAAoBU,IAAI,CAACV,IAAL,CAAUM,SAA9B,GAA0C,oBAA1D;AACA,QAAIyL,IAAI,GAAG;AACPjd,MAAAA,KAAK,EAAE;AACH,uBAAe,uBADZ;AAEHoC,QAAAA,GAAG,EAAE1B,YAFF;AAGHmF,QAAAA,KAAK,EAAE;AACHhB,UAAAA,MAAM,EAAE;AADL;AAHJ,OADA;AAQPnF,MAAAA,QAAQ,EAAE9C,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,CARH;AASP4kB,MAAAA,OAAO,EAAE;AACL9vB,QAAAA,KAAK,EAAE;AACH,yBAAe,mBADZ;AAEHE,UAAAA,SAAS,EAAEhB,UAAU,CAAC;AAClB,qCAAyB,IADP;AAElB,iDAAqCktB,iBAAiB,KAAK1wB,OAAO,CAACwB,UAAR,CAAmBwX,UAF5D;AAGlB,0CAA8B5U,KAHZ;AAIlB,+CAAmCssB,iBAAiB,KAAK1wB,OAAO,CAACwB,UAAR,CAAmB0X,QAJ1D;AAKlB,8CAAkCwX,iBAAiB,KAAK1wB,OAAO,CAACwB,UAAR,CAAmB6Y;AALzD,WAAD,CAFlB;AASH3T,UAAAA,GAAG,EAAEwpB,QATF;AAUH/lB,UAAAA,KAAK,EAAE;AACHhB,YAAAA,MAAM,EAAE,MADL;AAEH+E,YAAAA,QAAQ,EAAE,MAFP;AAGH6B,YAAAA,QAAQ,EAAE;AAHP;AAVJ,SADF;AAiBL/L,QAAAA,QAAQ,EAAG9C,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE4F,UAAAA,KAAK,EAAEinB,WAAW,CAACzU,kBAAZ;AAAT,SAAtC,EAAmFyU,WAAW,CAAClV,YAAZ,CAAyBxI,GAAzB,CAA6B,UAAUpM,IAAV,EAAgB;AAAE,iBAAQpG,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE,0BAAcuR,SAAS,CAACue,OAAV,CAAkB,eAAlB,EAAmC,GAAGprB,MAAH,CAAU3B,IAAI,CAAC6S,KAAL,GAAa,CAAvB,CAAnC,CAAhB;AAA+E3V,YAAAA,SAAS,EAAE,sBAA1F;AAAkHsC,YAAAA,GAAG,EAAEQ,IAAI,CAAC6S,KAA5H;AAAmI1R,YAAAA,IAAI,EAAE,QAAzI;AAAmJ0B,YAAAA,KAAK,EAAEinB,WAAW,CAACxU,aAAZ,CAA0BtV,IAA1B;AAA1J,WAAtC,EACjJpG,gBAAgB,CAACqD,aAAjB,CAA+BuoB,SAA/B,EAA0C;AAAE7Z,YAAAA,GAAG,EAAEA,GAAP;AAAY9J,YAAAA,MAAM,EAAEikB,UAApB;AAAgC9Q,YAAAA,UAAU,EAAEhV,IAAI,CAACgV,UAAjD;AAA6D3I,YAAAA,SAAS,EAAErM,IAAI,CAAC6S,KAA7E;AAAoF4S,YAAAA,YAAY,EAAEyD,aAAa,CAAC2C,GAAd,CAAkB7rB,IAAI,CAAC6S,KAAvB,IAAgCqW,aAAa,CAACzvB,GAAd,CAAkBuG,IAAI,CAAC6S,KAAvB,CAAhC,GAAgE,CAAlK;AAAqKgO,YAAAA,OAAO,EAAEA,OAA9K;AAAuL6E,YAAAA,UAAU,EAAEA,UAAnM;AAA+M5E,YAAAA,QAAQ,EAAEA,QAAzN;AAAmOC,YAAAA,KAAK,EAAEA,KAA1O;AAAiP4E,YAAAA,YAAY,EAAE+D,eAAe,KAAK1pB,IAAI,CAAC6S,KAAxR;AAA+RnR,YAAAA,KAAK,EAAEqkB,SAAtS;AAAiTxG,YAAAA,oBAAoB,EAAEoN,kBAAvU;AAA2VnN,YAAAA,YAAY,EAAE8K,iBAAzW;AAA4X1E,YAAAA,iBAAiB,EAAE6G,yBAA/Y;AAA0a5G,YAAAA,YAAY,EAAE6F;AAAxb,WAA1C,CADiJ,CAAR;AAC2W,SAD1Z,CAAnF;AAjBN;AATF,KAAX;AA8BA7K,IAAAA,OAAO,CAACxnB,OAAR,CAAgB,UAAUgoB,MAAV,EAAkB;AAC9B,UAAIA,MAAM,CAACwL,YAAX,EAAyB;AACrB5S,QAAAA,IAAI,GAAGoH,MAAM,CAACwL,YAAP,CAAoB;AACvBnvB,UAAAA,YAAY,EAAEA,YADS;AAEvBiO,UAAAA,GAAG,EAAEA,GAFkB;AAGvBma,UAAAA,UAAU,EAAEA,UAHW;AAIvBC,UAAAA,SAAS,EAAEA,SAJY;AAKvBmD,UAAAA,aAAa,EAAEA,aALQ;AAMvBpI,UAAAA,QAAQ,EAAEA,QANa;AAOvB7G,UAAAA,IAAI,EAAEA,IAPiB;AAQvB0O,UAAAA,YAAY,EAAEA,YARS;AASvBkC,UAAAA,UAAU,EAAEA,UATW;AAUvBC,UAAAA,QAAQ,EAAEA,QAVa;AAWvBO,UAAAA,MAAM,EAAEA,MAXe;AAYvBK,UAAAA,UAAU,EAAEA,UAZW;AAavBO,UAAAA,gBAAgB,EAAEA,gBAbK;AAcvBjC,UAAAA,IAAI,EAAEA;AAdiB,SAApB,CAAP;AAgBH;AACJ,KAnBD;AAoBA,WAAO/P,IAAP;AACH,GArDkB,EAqDhB,CAAC4G,OAAD,EAAUiJ,WAAV,CArDgB,CAAnB;AAsDA,MAAIkD,UAAU,GAAGpzB,gBAAgB,CAACwV,WAAjB,CAA6B,UAAU6K,IAAV,EAAgB;AAAE,WAAQrgB,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC9B,QAAQ,CAAC,EAAD,EAAK8e,IAAI,CAACjd,KAAV,EAAiB;AAAE6F,MAAAA,KAAK,EAAEoX,IAAI,CAACjd,KAAL,IAAcid,IAAI,CAACjd,KAAL,CAAW6F,KAAzB,GAAiCoX,IAAI,CAACjd,KAAL,CAAW6F,KAA5C,GAAoD;AAA7D,KAAjB,CAA9C,EACpEoX,IAAI,CAACvd,QAD+D,EAEpEud,IAAI,CAAC6S,OAAL,IAAgBE,UAAU,CAAC/S,IAAI,CAAC6S,OAAN,CAF0C,CAAR;AAEf,GAFhC,EAEkC,EAFlC,CAAjB;AAGAlzB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,WAAO,YAAY;AACfqsB,MAAAA,mBAAmB,CAACnd,OAApB;AACAiS,MAAAA,eAAe;AAClB,KAHD;AAIH,GALD,EAKG,EALH;AAMA,SAAOsO,UAAU,CAACH,YAAY,EAAb,CAAjB;AACH,CAhYD;;AAkYA,IAAII,MAAM,GAAG,CACT,GADS,EACJ,GADI,EACC,GADD,EACM,GADN,EACW,GADX,EACgB,GADhB,EACqB,GADrB,EAC0B,GAD1B,EAC+B,GAD/B,EACoC,CADpC,EACuC,GADvC,EAC4C,GAD5C,EACiD,GADjD,EACsD,GADtD,EAC2D,GAD3D,EACgE,GADhE,EACqE,GADrE,EAC0E,GAD1E,EAC+E,GAD/E,EACoF,GADpF,EACyF,GADzF,EAC8F,GAD9F,EACmG,GADnG,EAET,GAFS,EAEJ,GAFI,EAEC,GAFD,EAEM,GAFN,EAEW,GAFX,EAEgB,GAFhB,EAEqB,GAFrB,EAE0B,EAF1B,CAAb;;AAIA,IAAIC,QAAQ,GAAG,UAAUC,YAAV,EAAwB;AACnC,MAAIC,KAAK,GAAGH,MAAM,CAACltB,SAAP,CAAiB,UAAUC,IAAV,EAAgB;AAAE,WAAOA,IAAI,IAAImtB,YAAf;AAA8B,GAAjE,CAAZ;AACA,SAAOC,KAAK,KAAK,CAAC,CAAX,IAAgBA,KAAK,KAAK,CAA1B,GAA8BD,YAA9B,GAA6CF,MAAM,CAACG,KAAK,GAAG,CAAT,CAA1D;AACH,CAHD;;AAKA,IAAIC,cAAc,GAAG,EAArB;AACA,IAAIC,aAAa,GAAG,EAApB;;AACA,IAAIC,kBAAkB,GAAG,UAAU9wB,EAAV,EAAc;AACnC,MAAI0rB,YAAY,GAAG1rB,EAAE,CAAC0rB,YAAtB;AAAA,MAAoCxc,GAAG,GAAGlP,EAAE,CAACkP,GAA7C;AAAA,MAAkDkY,MAAM,GAAGpnB,EAAE,CAAConB,MAA9D;AAAA,MAAsEzS,UAAU,GAAG3U,EAAE,CAAC2U,UAAtF;AACA,MAAIwX,QAAQ,GAAGhvB,gBAAgB,CAAC+D,MAAjB,EAAf;;AACA,MAAIkB,EAAE,GAAGjF,gBAAgB,CAACkF,QAAjB,CAA0B;AAC/BgnB,IAAAA,UAAU,EAAE,CADmB;AAE/BC,IAAAA,SAAS,EAAE,CAFoB;AAG/BhF,IAAAA,KAAK,EAAE;AAHwB,GAA1B,CAAT;AAAA,MAIIkF,QAAQ,GAAGpnB,EAAE,CAAC,CAAD,CAJjB;AAAA,MAIsBqnB,WAAW,GAAGrnB,EAAE,CAAC,CAAD,CAJtC;;AAKAjF,EAAAA,gBAAgB,CAAC0D,eAAjB,CAAiC,YAAY;AACzCshB,IAAAA,OAAO,CAACjT,GAAD,EAAM,CAAN,CAAP,CAAgBsT,IAAhB,CAAqB,UAAU8H,OAAV,EAAmB;AACpC,UAAIlO,QAAQ,GAAGkO,OAAO,CAAC/F,WAAR,CAAoB;AAAED,QAAAA,KAAK,EAAE;AAAT,OAApB,CAAf;AACA,UAAI4F,CAAC,GAAG9N,QAAQ,CAACnX,KAAjB;AACA,UAAIklB,CAAC,GAAG/N,QAAQ,CAAChX,MAAjB;AACA,UAAIsqB,QAAQ,GAAGvD,QAAQ,CAAC5qB,OAAxB;;AACA,UAAI,CAACmuB,QAAL,EAAe;AACX;AACH;;AACD,UAAIqB,SAAS,GAAGrB,QAAQ,CAACtrB,aAAzB;AACA,UAAI4sB,UAAU,GAAG,CAACD,SAAS,CAAC1F,WAAV,GAAwBwF,aAAzB,IAA0C3G,CAA3D;AACA,UAAI+G,WAAW,GAAG,CAACF,SAAS,CAACpmB,YAAV,GAAyBimB,cAA1B,IAA4CzG,CAA9D;AACA,UAAI+G,MAAM,GAAGF,UAAb;;AACA,cAAQrc,UAAR;AACI,aAAK1Y,OAAO,CAACwB,UAAR,CAAmBwX,UAAxB;AACIic,UAAAA,MAAM,GAAGxtB,IAAI,CAACC,GAAL,CAASqtB,UAAT,EAAqBC,WAArB,CAAT;AACA;;AACJ,aAAKh1B,OAAO,CAACwB,UAAR,CAAmB0X,QAAxB;AACA;AACI+b,UAAAA,MAAM,GAAGF,UAAT;AACA;AAPR;;AASA,UAAI1M,KAAK,GAAGoH,YAAY,GAClB,OAAOA,YAAP,KAAwB,QAAxB,GACIP,cAAc,CAAC4F,SAAD,EAAY5G,CAAZ,EAAeD,CAAf,EAAkBwB,YAAlB,CADlB,GAEIA,YAHc,GAIlB+E,QAAQ,CAACS,MAAD,CAJd;AAKAzH,MAAAA,WAAW,CAAC;AACRJ,QAAAA,UAAU,EAAEc,CADJ;AAERb,QAAAA,SAAS,EAAEY,CAFH;AAGR5F,QAAAA,KAAK,EAAEA;AAHC,OAAD,CAAX;AAKH,KA/BD;AAgCH,GAjCD,EAiCG,CAACpV,GAAD,CAjCH;AAkCA,MAAIoa,SAAS,GAAGE,QAAQ,CAACF,SAAzB;AACA,SAAOA,SAAS,KAAK,CAAd,GAAmBnsB,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE,gCAAb;AAA+C,mBAAe,6BAA9D;AAA6FkC,IAAAA,GAAG,EAAEwpB;AAAlG,GAAtC,EACtBhvB,gBAAgB,CAACqD,aAAjB,CAA+B8F,OAA/B,EAAwC,IAAxC,CADsB,CAAnB,GACgD8gB,MAAM,CAACoC,QAAD,CAD7D;AAEH,CA7CD;;AA+CA,IAAI2H,aAAa,GAAI,YAAY;AAC7B,WAASA,aAAT,GAAyB,CACxB;;AACD,SAAOA,aAAP;AACH,CAJoB,EAArB;;AAMA,IAAIC,cAAJ;;AACA,CAAC,UAAUA,cAAV,EAA0B;AACvBA,EAAAA,cAAc,CAACA,cAAc,CAAC,kBAAD,CAAd,GAAqC,CAAtC,CAAd,GAAyD,kBAAzD;AACAA,EAAAA,cAAc,CAACA,cAAc,CAAC,gBAAD,CAAd,GAAmC,CAApC,CAAd,GAAuD,gBAAvD;AACH,CAHD,EAGGA,cAAc,KAAKA,cAAc,GAAG,EAAtB,CAHjB;;AAIA,IAAIC,mBAAmB,GAAI,UAAUC,MAAV,EAAkB;AACzCjzB,EAAAA,SAAS,CAACgzB,mBAAD,EAAsBC,MAAtB,CAAT;;AACA,WAASD,mBAAT,CAA6BE,cAA7B,EAA6CC,cAA7C,EAA6D;AACzD,QAAIC,KAAK,GAAGH,MAAM,CAAClzB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAqzB,IAAAA,KAAK,CAACF,cAAN,GAAuBA,cAAvB;AACAE,IAAAA,KAAK,CAACD,cAAN,GAAuBA,cAAvB;AACA,WAAOC,KAAP;AACH;;AACD,SAAOJ,mBAAP;AACH,CAT0B,CASzBF,aATyB,CAA3B;;AAWA,IAAIO,cAAc,GAAG,UAAU1xB,EAAV,EAAc;AAC/B,MAAIwxB,cAAc,GAAGxxB,EAAE,CAACwxB,cAAxB;AAAA,MAAwCD,cAAc,GAAGvxB,EAAE,CAACuxB,cAA5D;AAAA,MAA4EI,qBAAqB,GAAG3xB,EAAE,CAAC2xB,qBAAvG;AACA,MAAIxf,IAAI,GAAGhV,gBAAgB,CAACiD,UAAjB,CAA4B8R,mBAA5B,EAAiDC,IAA5D;;AACA,MAAI/P,EAAE,GAAGjF,gBAAgB,CAACkF,QAAjB,CAA0B,EAA1B,CAAT;AAAA,MAAwCuvB,QAAQ,GAAGxvB,EAAE,CAAC,CAAD,CAArD;AAAA,MAA0DyvB,WAAW,GAAGzvB,EAAE,CAAC,CAAD,CAA1E;;AACA,MAAI9C,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;;AACA,MAAIsR,MAAM,GAAG,YAAY;AAAE,WAAO2f,cAAc,CAACK,QAAD,CAArB;AAAkC,GAA7D;;AACA,MAAI9uB,aAAa,GAAG,UAAUvG,CAAV,EAAa;AAC7B,QAAIA,CAAC,CAACwG,GAAF,KAAU,OAAd,EAAuB;AACnB6O,MAAAA,MAAM;AACT;AACJ,GAJD;;AAKAzU,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAI6wB,qBAAJ,EAA2B;AACvBA,MAAAA,qBAAqB,CAAC;AAClBJ,QAAAA,cAAc,EAAEA;AADE,OAAD,CAArB;AAGH;AACJ,GAND,EAMG,EANH;AAOA,SAAQp0B,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAtC,EACJtD,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACtD,mCAA6B,IADyB;AAEtD,wCAAkCY;AAFoB,KAAD;AAAvB,GAAtC,EAIIlD,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAtC,EACI+wB,cAAc,KAAKJ,cAAc,CAACU,gBAAlC,IACI3f,IAAI,CAACV,IAAL,CAAUC,cAAV,CACKC,qBAHb,EAII6f,cAAc,KAAKJ,cAAc,CAACW,cAAlC,IACI5f,IAAI,CAACV,IAAL,CAAUI,aAAV,CAAwBC,QALhC,CAJJ,EAUI3U,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAtC,EACItD,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AACtD,yCAAmC,IADmB;AAEtD,8CAAwC,CAACY,KAFa;AAGtD,8CAAwCA;AAHc,KAAD;AAAvB,GAAtC,EAKIlD,gBAAgB,CAACqD,aAAjB,CAA+BiI,OAA/B,EAAwC;AAAEvI,IAAAA,MAAM,EAAE,6BAAV;AAAyCQ,IAAAA,IAAI,EAAE,UAA/C;AAA2DxE,IAAAA,KAAK,EAAE01B,QAAlE;AAA4E/oB,IAAAA,QAAQ,EAAEgpB,WAAtF;AAAmG9oB,IAAAA,SAAS,EAAEjG;AAA9G,GAAxC,CALJ,CADJ,EAOI3F,gBAAgB,CAACqD,aAAjB,CAA+ByF,aAA/B,EAA8C;AAAE9F,IAAAA,OAAO,EAAEyR;AAAX,GAA9C,EAAmEO,IAAI,CAACV,IAAL,CAAUC,cAAV,CAAyBE,MAA5F,CAPJ,CAVJ,CADI,CAAR;AAmBH,CAtCD;;AAwCA,IAAIogB,cAAc,GAAI,UAAUV,MAAV,EAAkB;AACpCjzB,EAAAA,SAAS,CAAC2zB,cAAD,EAAiBV,MAAjB,CAAT;;AACA,WAASU,cAAT,CAAwB9iB,GAAxB,EAA6B;AACzB,QAAIuiB,KAAK,GAAGH,MAAM,CAAClzB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAqzB,IAAAA,KAAK,CAACviB,GAAN,GAAYA,GAAZ;AACA,WAAOuiB,KAAP;AACH;;AACD,SAAOO,cAAP;AACH,CARqB,CAQpBb,aARoB,CAAtB;;AAUA,IAAIc,YAAY,GAAI,UAAUX,MAAV,EAAkB;AAClCjzB,EAAAA,SAAS,CAAC4zB,YAAD,EAAeX,MAAf,CAAT;;AACA,WAASW,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,QAAIT,KAAK,GAAGH,MAAM,CAAClzB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAqzB,IAAAA,KAAK,CAACS,KAAN,GAAcA,KAAd;AACA,WAAOT,KAAP;AACH;;AACD,SAAOQ,YAAP;AACH,CARmB,CAQlBd,aARkB,CAApB;;AAUA,IAAIgB,YAAY,GAAI,UAAUb,MAAV,EAAkB;AAClCjzB,EAAAA,SAAS,CAAC8zB,YAAD,EAAeb,MAAf,CAAT;;AACA,WAASa,YAAT,CAAsBC,WAAtB,EAAmC;AAC/B,QAAIX,KAAK,GAAGH,MAAM,CAAClzB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAqzB,IAAAA,KAAK,CAACW,WAAN,GAAoBA,WAApB;AACA,WAAOX,KAAP;AACH;;AACD,SAAOU,YAAP;AACH,CARmB,CAQlBhB,aARkB,CAApB;;AAUA,IAAIkB,cAAc,GAAG,UAAUryB,EAAV,EAAc;AAC/B,MAAIsyB,YAAY,GAAGtyB,EAAE,CAACsyB,YAAtB;AAAA,MAAoClT,IAAI,GAAGpf,EAAE,CAACof,IAA9C;AAAA,MAAoDmT,WAAW,GAAGvyB,EAAE,CAACuyB,WAArE;AAAA,MAAkFnL,MAAM,GAAGpnB,EAAE,CAAConB,MAA9F;AAAA,MAAsGoL,WAAW,GAAGxyB,EAAE,CAACwyB,WAAvH;AAAA,MAAoIC,YAAY,GAAGzyB,EAAE,CAACyyB,YAAtJ;AAAA,MAAoKC,0BAA0B,GAAG1yB,EAAE,CAAC0yB,0BAApM;AAAA,MAAgOC,eAAe,GAAG3yB,EAAE,CAAC2yB,eAArP;AAAA,MAAsQhB,qBAAqB,GAAG3xB,EAAE,CAAC2xB,qBAAjS;AACA,MAAIryB,SAAS,GAAGnC,gBAAgB,CAACiD,UAAjB,CAA4BjB,YAA5B,EAA0CG,SAA1D;AACA,MAAIe,KAAK,GAAGf,SAAS,KAAKrD,OAAO,CAACiD,aAAR,CAAsBoB,WAAhD;;AACA,MAAI8B,EAAE,GAAGjF,gBAAgB,CAACkF,QAAjB,CAA0B,IAAI8vB,YAAJ,CAAiB,CAAjB,CAA1B,CAAT;AAAA,MAAyDhnB,MAAM,GAAG/I,EAAE,CAAC,CAAD,CAApE;AAAA,MAAyE8iB,SAAS,GAAG9iB,EAAE,CAAC,CAAD,CAAvF;;AACA,MAAI2C,EAAE,GAAG5H,gBAAgB,CAACkF,QAAjB,CAA0B,CAA1B,CAAT;AAAA,MAAuC+vB,WAAW,GAAGrtB,EAAE,CAAC,CAAD,CAAvD;AAAA,MAA4D6tB,cAAc,GAAG7tB,EAAE,CAAC,CAAD,CAA/E;;AACA,MAAIW,EAAE,GAAGvI,gBAAgB,CAACkF,QAAjB,CAA0B,IAA1B,CAAT;AAAA,MAA0CwwB,cAAc,GAAGntB,EAAE,CAAC,CAAD,CAA7D;AAAA,MAAkEotB,iBAAiB,GAAGptB,EAAE,CAAC,CAAD,CAAxF;;AACA,MAAIuO,SAAS,GAAGH,YAAY,EAA5B;AACA3W,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnCokB,IAAAA,SAAS,CAAC,IAAIiN,YAAJ,CAAiB,CAAjB,CAAD,CAAT;AACA,QAAIY,MAAM,GAAG,IAAI31B,mBAAmB,CAAC41B,SAAxB,CAAkC;AAAE/R,MAAAA,IAAI,EAAE,aAAa/b,MAAb,CAAoBkV,IAAI,CAAC6Y,GAAL,EAApB;AAAR,KAAlC,CAAb;AACA,QAAIvwB,MAAM,GAAG3G,MAAM,CAAC4C,MAAP,CAAc;AACvB4zB,MAAAA,WAAW,EAAEA,WADU;AAEvBI,MAAAA,eAAe,EAAEA,eAFM;AAGvBI,MAAAA,MAAM,EAAEA;AAHe,KAAd,EAIV,aAAa,OAAO3T,IAApB,GAA2B;AAAEhB,MAAAA,GAAG,EAAEgB;AAAP,KAA3B,GAA2C;AAAE5N,MAAAA,IAAI,EAAE4N;AAAR,KAJjC,EAIiDkT,YAAY,GACpE;AACEY,MAAAA,OAAO,EAAEZ,YAAY,CAAClU,GADxB;AAEE+U,MAAAA,UAAU,EAAEb,YAAY,CAACc;AAF3B,KADoE,GAKpE,EATO,CAAb;AAUA,QAAIC,eAAe,GAAGX,0BAA0B,GAAGA,0BAA0B,CAAChwB,MAAD,CAA7B,GAAwCA,MAAxF;AACA,QAAI6M,WAAW,GAAGnS,mBAAmB,CAACk2B,WAApB,CAAgCD,eAAhC,CAAlB;;AACA9jB,IAAAA,WAAW,CAACgkB,UAAZ,GAAyB,UAAUhC,cAAV,EAA0BiC,MAA1B,EAAkC;AACvD,cAAQA,MAAR;AACI,aAAKp2B,mBAAmB,CAACq2B,iBAApB,CAAsCC,aAA3C;AACIzf,UAAAA,SAAS,CAAC1S,OAAV,IACI2jB,SAAS,CAAC,IAAImM,mBAAJ,CAAwBE,cAAxB,EAAwCH,cAAc,CAACU,gBAAvD,CAAD,CADb;AAEA;;AACJ,aAAK10B,mBAAmB,CAACq2B,iBAApB,CAAsCE,kBAA3C;AACI1f,UAAAA,SAAS,CAAC1S,OAAV,IACI2jB,SAAS,CAAC,IAAImM,mBAAJ,CAAwBE,cAAxB,EAAwCH,cAAc,CAACW,cAAvD,CAAD,CADb;AAEA;AARR;AAUH,KAXD;;AAYAxiB,IAAAA,WAAW,CAACqkB,UAAZ,GAAyB,UAAUztB,QAAV,EAAoB;AACzCA,MAAAA,QAAQ,CAAC0tB,KAAT,GAAiB,CAAjB,GAEQ5f,SAAS,CAAC1S,OAAV,IAAqBqxB,cAAc,CAAClvB,IAAI,CAACC,GAAL,CAAS,GAAT,EAAe,MAAMwC,QAAQ,CAAC2tB,MAAhB,GAA0B3tB,QAAQ,CAAC0tB,KAAjD,CAAD,CAF3C,GAGM5f,SAAS,CAAC1S,OAAV,IAAqBqxB,cAAc,CAAC,GAAD,CAHzC;AAIH,KALD;;AAMArjB,IAAAA,WAAW,CAAC8X,OAAZ,CAAoB7E,IAApB,CAAyB,UAAUtT,GAAV,EAAe;AAAE,aAAO+E,SAAS,CAAC1S,OAAV,IAAqBuxB,iBAAiB,CAAC5jB,GAAD,CAA7C;AAAqD,KAA/F,EAAiG,UAAU6kB,GAAV,EAAe;AAC5G,aAAO9f,SAAS,CAAC1S,OAAV,IACH,CAACwxB,MAAM,CAACiB,SADL,IAEH9O,SAAS,CAAC,IAAI+M,YAAJ,CAAiB;AACvBgC,QAAAA,OAAO,EAAEF,GAAG,CAACE,OAAJ,IAAe,sBADD;AAEvBhT,QAAAA,IAAI,EAAE8S,GAAG,CAAC9S;AAFa,OAAjB,CAAD,CAFb;AAMH,KAPD;AAQA,WAAO,YAAY;AACf1R,MAAAA,WAAW,CAAC2kB,OAAZ;AACAnB,MAAAA,MAAM,CAACmB,OAAP;AACH,KAHD;AAIH,GA7CD,EA6CG,CAAC9U,IAAD,CA7CH;AA8CAjiB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnCsxB,IAAAA,WAAW,KAAK,GAAhB,IAAuBS,cAAvB,GACM5e,SAAS,CAAC1S,OAAV,IAAqB2jB,SAAS,CAAC,IAAI8M,cAAJ,CAAmBa,cAAnB,CAAD,CADpC,GAEM5e,SAAS,CAAC1S,OAAV,IAAqB2jB,SAAS,CAAC,IAAIiN,YAAJ,CAAiBC,WAAjB,CAAD,CAFpC;AAGH,GAJD,EAIG,CAACA,WAAD,EAAcS,cAAd,CAJH;;AAKA,MAAI1nB,MAAM,YAAYkmB,mBAAtB,EAA2C;AACvC,WAAQl0B,gBAAgB,CAACqD,aAAjB,CAA+BkxB,cAA/B,EAA+C;AAAEF,MAAAA,cAAc,EAAErmB,MAAM,CAACqmB,cAAzB;AAAyCD,MAAAA,cAAc,EAAEpmB,MAAM,CAAComB,cAAhE;AAAgFI,MAAAA,qBAAqB,EAAEA;AAAvG,KAA/C,CAAR;AACH;;AACD,MAAIxmB,MAAM,YAAY6mB,cAAtB,EAAsC;AAClC,WAAO5K,MAAM,CAACjc,MAAM,CAAC+D,GAAR,CAAb;AACH;;AACD,MAAI/D,MAAM,YAAY8mB,YAAtB,EAAoC;AAChC,WAAOO,WAAW,GAAIA,WAAW,CAACrnB,MAAM,CAAC+mB,KAAR,CAAf,GAAkC/0B,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,MAAAA,SAAS,EAAEhB,UAAU,CAAC;AAC1G,+BAAuB,IADmF;AAE1G,oCAA4BY;AAF8E,OAAD;AAAvB,KAAtC,EAIhDlD,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAtC,EAAiF0K,MAAM,CAAC+mB,KAAP,CAAa+B,OAA9F,CAJgD,CAApD;AAKH;;AACD,SAAQ92B,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAE,mBAAe,mBAAjB;AAAsCC,IAAAA,SAAS,EAAEhB,UAAU,CAAC;AAClG,+BAAyB,IADyE;AAElG,oCAA8BY;AAFoE,KAAD;AAA3D,GAAtC,EAGEoyB,YAAY,GAAGA,YAAY,CAACtnB,MAAM,CAACinB,WAAR,CAAf,GAAsCj1B,gBAAgB,CAACqD,aAAjB,CAA+B8F,OAA/B,EAAwC,IAAxC,CAHpD,CAAR;AAIH,CA5ED;;AA8EA,IAAI6tB,UAAU,GAAG,YAAY;AACzB,SAAO,OAAOvzB,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACwzB,UAAxC,IAAsDxzB,MAAM,CAACwzB,UAAP,CAAkB,8BAAlB,EAAkD3a,OAA/G;AACH,CAFD;;AAIA,IAAI4a,SAAS,GAAG,UAAUC,KAAV,EAAiBC,aAAjB,EAAgC;AAC5C,MAAIC,YAAY,GAAGr3B,gBAAgB,CAACya,OAAjB,CAAyB,YAAY;AAAE,WAAQ0c,KAAK,KAAK,MAAV,GAAoBH,UAAU,KAAK,MAAL,GAAc,OAA5C,GAAuDG,KAA/D;AAAwE,GAA/G,EAAiH,EAAjH,CAAnB;;AACA,MAAIt0B,EAAE,GAAG7C,gBAAgB,CAACkF,QAAjB,CAA0BmyB,YAA1B,CAAT;AAAA,MAAkDn1B,YAAY,GAAGW,EAAE,CAAC,CAAD,CAAnE;AAAA,MAAwER,eAAe,GAAGQ,EAAE,CAAC,CAAD,CAA5F;;AACA,MAAIy0B,SAAS,GAAGpiB,WAAW,CAAChT,YAAD,CAA3B;AACAlC,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAIwzB,KAAK,KAAK,MAAd,EAAsB;AAClB;AACH;;AACD,QAAII,KAAK,GAAG9zB,MAAM,CAACwzB,UAAP,CAAkB,8BAAlB,CAAZ;;AACA,QAAIrqB,OAAO,GAAG,UAAUxN,CAAV,EAAa;AACvBiD,MAAAA,eAAe,CAACjD,CAAC,CAACkd,OAAF,GAAY,MAAZ,GAAqB,OAAtB,CAAf;AACH,KAFD;;AAGAib,IAAAA,KAAK,CAAClwB,gBAAN,CAAuB,QAAvB,EAAiCuF,OAAjC;AACA,WAAO,YAAY;AAAE,aAAO2qB,KAAK,CAACjwB,mBAAN,CAA0B,QAA1B,EAAoCsF,OAApC,CAAP;AAAsD,KAA3E;AACH,GAVD,EAUG,EAVH;AAWA5M,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAIzB,YAAY,KAAKo1B,SAAjB,IAA8BF,aAAlC,EAAiD;AAC7CA,MAAAA,aAAa,CAACl1B,YAAD,CAAb;AACH;AACJ,GAJD,EAIG,CAACA,YAAD,CAJH;AAKAlC,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAIwzB,KAAK,KAAKj1B,YAAd,EAA4B;AACxBG,MAAAA,eAAe,CAAC80B,KAAD,CAAf;AACH;AACJ,GAJD,EAIG,CAACA,KAAD,CAJH;AAKA,SAAO;AACHj1B,IAAAA,YAAY,EAAEA,YADX;AAEHG,IAAAA,eAAe,EAAEA;AAFd,GAAP;AAIH,CA7BD;;AA+BA,IAAIm1B,SAAS,GAAG,UAAUlP,CAAV,EAAa5nB,CAAb,EAAgB;AAC5B,MAAI+2B,KAAK,GAAG,OAAOnP,CAAnB;AACA,MAAIoP,KAAK,GAAG,OAAOh3B,CAAnB;;AACA,MAAI+2B,KAAK,KAAK,QAAV,IAAsBC,KAAK,KAAK,QAAhC,IAA4CpP,CAAC,KAAK5nB,CAAtD,EAAyD;AACrD,WAAO,IAAP;AACH;;AACD,MAAI+2B,KAAK,KAAK,QAAV,IAAsBC,KAAK,KAAK,QAApC,EAA8C;AAC1C,WAAOpP,CAAC,CAACzmB,MAAF,KAAanB,CAAC,CAACmB,MAAf,IAAyBymB,CAAC,CAACqP,KAAF,CAAQ,UAAUC,CAAV,EAAaj2B,CAAb,EAAgB;AAAE,aAAOi2B,CAAC,KAAKl3B,CAAC,CAACiB,CAAD,CAAd;AAAoB,KAA9C,CAAhC;AACH;;AACD,SAAO,KAAP;AACH,CAVD;;AAYA,IAAIk2B,MAAM,GAAG,UAAUh1B,EAAV,EAAc;AACvB,MAAIsyB,YAAY,GAAGtyB,EAAE,CAACsyB,YAAtB;AAAA,MAAoC5G,YAAY,GAAG1rB,EAAE,CAAC0rB,YAAtD;AAAA,MAAoEuJ,OAAO,GAAGj1B,EAAE,CAACi1B,OAAjF;AAAA,MAA0F7yB,EAAE,GAAGpC,EAAE,CAACuyB,WAAlG;AAAA,MAA+GA,WAAW,GAAGnwB,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAAlJ;AAAA,MAAsJ2C,EAAE,GAAG/E,EAAE,CAAC2rB,WAA9J;AAAA,MAA2KA,WAAW,GAAG5mB,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAA7M;AAAA,MAAiNmwB,YAAY,GAAGl1B,EAAE,CAACk1B,YAAnO;AAAA,MAAiPxvB,EAAE,GAAG1F,EAAE,CAACokB,OAAzP;AAAA,MAAkQA,OAAO,GAAG1e,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAAjS;AAAA,MAAqS8sB,WAAW,GAAGxyB,EAAE,CAACwyB,WAAtT;AAAA,MAAmUvJ,UAAU,GAAGjpB,EAAE,CAACipB,UAAnV;AAAA,MAA+VwJ,YAAY,GAAGzyB,EAAE,CAACyyB,YAAjX;AAAA,MAA+X1sB,EAAE,GAAG/F,EAAE,CAAC2U,UAAvY;AAAA,MAAmZA,UAAU,GAAG5O,EAAE,KAAK,KAAK,CAAZ,GAAgB9J,OAAO,CAACwB,UAAR,CAAmB0X,QAAnC,GAA8CpP,EAA9c;AAAA,MAAkd2sB,0BAA0B,GAAG1yB,EAAE,CAAC0yB,0BAAlf;AAAA,MAA8gB9pB,EAAE,GAAG5I,EAAE,CAACs0B,KAAthB;AAAA,MAA6hBA,KAAK,GAAG1rB,EAAE,KAAK,KAAK,CAAZ,GAAgB;AACjjBtJ,IAAAA,SAAS,EAAErD,OAAO,CAACiD,aAAR,CAAsBK,WADghB;AAEjjB+0B,IAAAA,KAAK,EAAE;AAF0iB,GAAhB,GAGjiB1rB,EAHJ;AAAA,MAGQE,EAAE,GAAG9I,EAAE,CAAC2yB,eAHhB;AAAA,MAGiCA,eAAe,GAAG7pB,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAH3E;AAAA,MAG+E6oB,qBAAqB,GAAG3xB,EAAE,CAAC2xB,qBAH1G;AAAA,MAGiI3E,EAAE,GAAGhtB,EAAE,CAAC6rB,cAHzI;AAAA,MAGyJA,cAAc,GAAGmB,EAAE,KAAK,KAAK,CAAZ,GAAgB,YAAY,CACrM,CADyK,GACtKA,EAJJ;AAAA,MAIQmI,EAAE,GAAGn1B,EAAE,CAAC+rB,YAJhB;AAAA,MAI8BA,YAAY,GAAGoJ,EAAE,KAAK,KAAK,CAAZ,GAAgB,YAAY,CACxE,CAD4C,GACzCA,EALJ;AAAA,MAKQC,EAAE,GAAGp1B,EAAE,CAACgsB,QALhB;AAAA,MAK0BA,QAAQ,GAAGoJ,EAAE,KAAK,KAAK,CAAZ,GAAgB,YAAY,CAChE,CADoC,GACjCA,EANJ;AAAA,MAMQC,EAAE,GAAGr1B,EAAE,CAACopB,YANhB;AAAA,MAM8BA,YAAY,GAAGiM,EAAE,KAAK,KAAK,CAAZ,GAAgB,YAAY,CACxE,CAD4C,GACzCA,EAPJ;AAAA,MAOQC,EAAE,GAAGt1B,EAAE,CAACu0B,aAPhB;AAAA,MAO+BA,aAAa,GAAGe,EAAE,KAAK,KAAK,CAAZ,GAAgB,YAAY,CAC1E,CAD8C,GAC3CA,EARJ;AAAA,MAQQC,EAAE,GAAGv1B,EAAE,CAACisB,MARhB;AAAA,MAQwBA,MAAM,GAAGsJ,EAAE,KAAK,KAAK,CAAZ,GAAgB,YAAY,CAC5D,CADgC,GAC7BA,EATJ;;AAUA,MAAIC,EAAE,GAAGr4B,gBAAgB,CAACkF,QAAjB,CAA0B;AAC/BmP,IAAAA,IAAI,EAAEyjB,OADyB;AAE/BhU,IAAAA,IAAI,EAAE,OAAOgU,OAAP,KAAmB,QAAnB,GAA8BA,OAA9B,GAAwC,EAFf;AAG/BQ,IAAAA,UAAU,EAAE;AAHmB,GAA1B,CAAT;AAAA,MAIIrW,IAAI,GAAGoW,EAAE,CAAC,CAAD,CAJb;AAAA,MAIkBE,OAAO,GAAGF,EAAE,CAAC,CAAD,CAJ9B;;AAKA,MAAInH,QAAQ,GAAG,UAAUsH,QAAV,EAAoBnkB,IAApB,EAA0B;AACrCkkB,IAAAA,OAAO,CAAC;AACJlkB,MAAAA,IAAI,EAAEA,IADF;AAEJyP,MAAAA,IAAI,EAAE0U,QAFF;AAGJF,MAAAA,UAAU,EAAE;AAHR,KAAD,CAAP;AAKH,GAND;;AAOA,MAAIG,EAAE,GAAGz4B,gBAAgB,CAACkF,QAAjB,CAA0B,KAA1B,CAAT;AAAA,MAA2CC,OAAO,GAAGszB,EAAE,CAAC,CAAD,CAAvD;AAAA,MAA4DrzB,UAAU,GAAGqzB,EAAE,CAAC,CAAD,CAA3E;;AACA,MAAIC,QAAQ,GAAGxjB,WAAW,CAAC+M,IAAD,CAA1B;AACAjiB,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAI,CAAC6zB,SAAS,CAACkB,QAAQ,CAACrkB,IAAV,EAAgByjB,OAAhB,CAAd,EAAwC;AACpCS,MAAAA,OAAO,CAAC;AACJlkB,QAAAA,IAAI,EAAEyjB,OADF;AAEJhU,QAAAA,IAAI,EAAE,OAAOgU,OAAP,KAAmB,QAAnB,GAA8BA,OAA9B,GAAwC,EAF1C;AAGJQ,QAAAA,UAAU,EAAEnzB;AAHR,OAAD,CAAP;AAKH;AACJ,GARD,EAQG,CAAC2yB,OAAD,EAAU3yB,OAAV,CARH;;AASA,MAAIwzB,iBAAiB,GAAG,UAAUpzB,MAAV,EAAkB;AACtCH,IAAAA,UAAU,CAACG,MAAM,CAACd,SAAR,CAAV;;AACA,QAAIc,MAAM,CAACd,SAAX,EAAsB;AAClB8zB,MAAAA,OAAO,CAAC,UAAUjK,WAAV,EAAuB;AAAE,eAAO1vB,MAAM,CAAC4C,MAAP,CAAc,EAAd,EAAkB8sB,WAAlB,EAA+B;AAAEgK,UAAAA,UAAU,EAAE;AAAd,SAA/B,CAAP;AAA8D,OAAxF,CAAP;AACH;AACJ,GALD;;AAMA,MAAIx0B,YAAY,GAAGF,uBAAuB,CAAC;AACvCM,IAAAA,mBAAmB,EAAEy0B;AADkB,GAAD,CAA1C;AAGA,MAAIC,UAAU,GAAG,OAAOzB,KAAP,KAAiB,QAAjB,GAA4B;AAAEh1B,IAAAA,SAAS,EAAErD,OAAO,CAACiD,aAAR,CAAsBK,WAAnC;AAAgD+0B,IAAAA,KAAK,EAAEA;AAAvD,GAA5B,GAA6FA,KAA9G;;AACA,MAAI0B,EAAE,GAAG74B,gBAAgB,CAACkF,QAAjB,CAA0B6yB,YAAY,IAAIjjB,mBAA1C,CAAT;AAAA,MAAyEE,IAAI,GAAG6jB,EAAE,CAAC,CAAD,CAAlF;AAAA,MAAuF5jB,OAAO,GAAG4jB,EAAE,CAAC,CAAD,CAAnG;;AACA,MAAIC,mBAAmB,GAAG;AAAE9jB,IAAAA,IAAI,EAAEA,IAAR;AAAcC,IAAAA,OAAO,EAAEA;AAAvB,GAA1B;AACA,MAAI8Z,YAAY,GAAGnwB,MAAM,CAAC4C,MAAP,CAAc,EAAd,EAAkB;AAAEW,IAAAA,SAAS,EAAEy2B,UAAU,CAACz2B;AAAxB,GAAlB,EAAuD+0B,SAAS,CAAC0B,UAAU,CAACzB,KAAX,IAAoB,OAArB,EAA8BC,aAA9B,CAAhE,CAAnB;AACAp3B,EAAAA,gBAAgB,CAAC2D,SAAjB,CAA2B,YAAY;AACnC,QAAIo0B,YAAJ,EAAkB;AACd9iB,MAAAA,OAAO,CAAC8iB,YAAD,CAAP;AACH;AACJ,GAJD,EAIG,CAACA,YAAD,CAJH;AAKA,SAAQ/3B,gBAAgB,CAACqD,aAAjB,CAA+B0R,mBAAmB,CAACgkB,QAAnD,EAA6D;AAAEh6B,IAAAA,KAAK,EAAE+5B;AAAT,GAA7D,EACJ94B,gBAAgB,CAACqD,aAAjB,CAA+BrB,YAAY,CAAC+2B,QAA5C,EAAsD;AAAEh6B,IAAAA,KAAK,EAAEgwB;AAAT,GAAtD,EACI/uB,gBAAgB,CAACqD,aAAjB,CAA+B,KAA/B,EAAsC;AAAEmC,IAAAA,GAAG,EAAE1B,YAAP;AAAqBR,IAAAA,SAAS,EAAE,sCAAsCyE,MAAtC,CAA6CgnB,YAAY,CAAC7sB,YAA1D,CAAhC;AAAyG,mBAAe,cAAxH;AAAwI+G,IAAAA,KAAK,EAAE;AAC7KhB,MAAAA,MAAM,EAAE,MADqK;AAE7KH,MAAAA,KAAK,EAAE;AAFsK;AAA/I,GAAtC,EAGSma,IAAI,CAACqW,UAAL,IAAoBt4B,gBAAgB,CAACqD,aAAjB,CAA+B6xB,cAA/B,EAA+C;AAAEC,IAAAA,YAAY,EAAEA,YAAhB;AAA8BlT,IAAAA,IAAI,EAAEA,IAAI,CAAC5N,IAAzC;AAA+C+gB,IAAAA,WAAW,EAAEA,WAA5D;AAAyEnL,IAAAA,MAAM,EAAE,UAAUlY,GAAV,EAAe;AAAE,aAAQ/R,gBAAgB,CAACqD,aAAjB,CAA+BswB,kBAA/B,EAAmD;AAAEpF,QAAAA,YAAY,EAAEA,YAAhB;AAA8Bxc,QAAAA,GAAG,EAAEA,GAAnC;AAAwCkY,QAAAA,MAAM,EAAE,UAAU+O,EAAV,EAAc;AAAE,iBAAQh5B,gBAAgB,CAACqD,aAAjB,CAA+BgrB,KAA/B,EAAsC;AAAEC,YAAAA,WAAW,EAAE;AACtVja,cAAAA,IAAI,EAAE4N,IAAI,CAAC5N,IAD2U;AAEtVyP,cAAAA,IAAI,EAAE7B,IAAI,CAAC6B;AAF2U,aAAf;AAGxUyK,YAAAA,YAAY,EAAEA,YAH0T;AAG5Sxc,YAAAA,GAAG,EAAEA,GAHuS;AAGlSyc,YAAAA,WAAW,EAAEA,WAHqR;AAGxQnC,YAAAA,QAAQ,EAAE2M,EAH8P;AAG1P/R,YAAAA,OAAO,EAAEA,OAHiP;AAGxO6E,YAAAA,UAAU,EAAEA,UAH4N;AAGhNtU,YAAAA,UAAU,EAAEA,UAHoM;AAGxLiX,YAAAA,WAAW,EAAE;AAC5JxM,cAAAA,IAAI,EAAEA,IADsJ;AAE5JxP,cAAAA,SAAS,EAAE,CAAC,CAFgJ;AAG5JyZ,cAAAA,UAAU,EAAE8M,EAAE,CAAC9M,UAH6I;AAI5JC,cAAAA,SAAS,EAAE6M,EAAE,CAAC7M,SAJ8I;AAK5JmD,cAAAA,aAAa,EAAE,IAAIjL,GAAJ,EAL6I;AAM5J6C,cAAAA,QAAQ,EAAE,CANkJ;AAO5JC,cAAAA,KAAK,EAAE6R,EAAE,CAAC7R,KAPkJ;AAQ5J3P,cAAAA,UAAU,EAAEA;AARgJ,aAH2K;AAYxUkX,YAAAA,cAAc,EAAEA,cAZwT;AAYxSC,YAAAA,UAAU,EAAEuC,QAZ4R;AAYlRtC,YAAAA,YAAY,EAAEA,YAZoQ;AAYtPC,YAAAA,QAAQ,EAAEA,QAZ4O;AAYlO5C,YAAAA,YAAY,EAAEA,YAZoN;AAYtM6C,YAAAA,MAAM,EAAEA;AAZ8L,WAAtC,CAAR;AAYnI,SAZmE;AAYjEtX,QAAAA,UAAU,EAAEA;AAZqD,OAAnD,CAAR;AAYuB,KAZzH;AAY2H6d,IAAAA,WAAW,EAAEA,WAZxI;AAYqJC,IAAAA,YAAY,EAAEA,YAZnK;AAYiLC,IAAAA,0BAA0B,EAAEA,0BAZ7M;AAYyOC,IAAAA,eAAe,EAAEA,eAZ1P;AAY2QhB,IAAAA,qBAAqB,EAAEA;AAZlS,GAA/C,CAH7B,CADJ,CADI,CAAR;AAkBH,CAtED;;AAwEA,IAAIyE,MAAM,GAAG,UAAUp2B,EAAV,EAAc;AACvB,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;AAAA,MAA4Bo2B,SAAS,GAAGr2B,EAAE,CAACq2B,SAA3C;AACAj5B,EAAAA,mBAAmB,CAACk5B,mBAApB,CAAwCC,SAAxC,GAAoDF,SAApD;AACA,SAAOl5B,gBAAgB,CAACqD,aAAjB,CAA+BrD,gBAAgB,CAACsO,QAAhD,EAA0D,IAA1D,EAAgExL,QAAhE,CAAP;AACH,CAJD;;AAMA,IAAIu2B,KAAK,GAAG,YAAY;AAAE,SAAQ,OAAO51B,MAAP,KAAkB,WAAlB,GAAgC,0BAA0B61B,IAA1B,CAA+BC,SAAS,CAACC,QAAzC,CAAhC,GAAqF,KAA7F;AAAsG,CAAhI;;AAEA16B,OAAO,CAAC8D,MAAR,GAAiBA,MAAjB;AACA9D,OAAO,CAAC4I,IAAR,GAAeA,IAAf;AACA5I,OAAO,CAACkG,UAAR,GAAqBA,UAArB;AACAlG,OAAO,CAACiW,mBAAR,GAA8BA,mBAA9B;AACAjW,OAAO,CAAC2G,IAAR,GAAeA,IAAf;AACA3G,OAAO,CAAC2I,WAAR,GAAsBA,WAAtB;AACA3I,OAAO,CAACsJ,QAAR,GAAmBA,QAAnB;AACAtJ,OAAO,CAAC2J,aAAR,GAAwBA,aAAxB;AACA3J,OAAO,CAAC0P,KAAR,GAAgBA,KAAhB;AACA1P,OAAO,CAAC8R,OAAR,GAAkBA,OAAlB;AACA9R,OAAO,CAACgK,aAAR,GAAwBA,aAAxB;AACAhK,OAAO,CAACiK,WAAR,GAAsBA,WAAtB;AACAjK,OAAO,CAACoK,SAAR,GAAoBA,SAApB;AACApK,OAAO,CAACqK,OAAR,GAAkBA,OAAlB;AACArK,OAAO,CAACsK,QAAR,GAAmBA,QAAnB;AACAtK,OAAO,CAACwM,OAAR,GAAkBA,OAAlB;AACAxM,OAAO,CAACkD,YAAR,GAAuBA,YAAvB;AACAlD,OAAO,CAACkS,OAAR,GAAkBA,OAAlB;AACAlS,OAAO,CAAC+4B,MAAR,GAAiBA,MAAjB;AACA/4B,OAAO,CAACm6B,MAAR,GAAiBA,MAAjB;AACAn6B,OAAO,CAACwD,UAAR,GAAqBA,UAArB;AACAxD,OAAO,CAAC+U,WAAR,GAAsBA,WAAtB;AACA/U,OAAO,CAACwmB,cAAR,GAAyBA,cAAzB;AACAxmB,OAAO,CAACkmB,OAAR,GAAkBA,OAAlB;AACAlmB,OAAO,CAACu6B,KAAR,GAAgBA,KAAhB;AACAv6B,OAAO,CAACgT,kBAAR,GAA6BA,kBAA7B;AACAhT,OAAO,CAAC8E,uBAAR,GAAkCA,uBAAlC;AACA9E,OAAO,CAAC6X,YAAR,GAAuBA,YAAvB;AACA7X,OAAO,CAAC0E,yBAAR,GAAoCA,yBAApC","sourcesContent":["'use strict';\r\n\r\nObject.defineProperty(exports, '__esModule', { value: true });\r\n\r\nvar React = require('react');\r\nvar PdfJsApi = require('pdfjs-dist');\r\n\r\nfunction _interopNamespace(e) {\r\n    if (e && e.__esModule) return e;\r\n    var n = Object.create(null);\r\n    if (e) {\r\n        Object.keys(e).forEach(function (k) {\r\n            if (k !== 'default') {\r\n                var d = Object.getOwnPropertyDescriptor(e, k);\r\n                Object.defineProperty(n, k, d.get ? d : {\r\n                    enumerable: true,\r\n                    get: function () { return e[k]; }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    n[\"default\"] = e;\r\n    return Object.freeze(n);\r\n}\r\n\r\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\r\nvar PdfJsApi__namespace = /*#__PURE__*/_interopNamespace(PdfJsApi);\r\n\r\nexports.AnnotationType = void 0;\r\n(function (AnnotationType) {\r\n    AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\r\n    AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\r\n    AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\r\n    AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\r\n    AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\r\n    AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\r\n    AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\r\n    AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\r\n    AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\r\n    AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\r\n    AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\r\n    AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\r\n    AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\r\n    AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\r\n    AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\r\n    AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\r\n    AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\r\n})(exports.AnnotationType || (exports.AnnotationType = {}));\r\n\r\nexports.LayerRenderStatus = void 0;\r\n(function (LayerRenderStatus) {\r\n    LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\r\n    LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\r\n})(exports.LayerRenderStatus || (exports.LayerRenderStatus = {}));\r\n\r\nexports.Position = void 0;\r\n(function (Position) {\r\n    Position[\"TopLeft\"] = \"TOP_LEFT\";\r\n    Position[\"TopCenter\"] = \"TOP_CENTER\";\r\n    Position[\"TopRight\"] = \"TOP_RIGHT\";\r\n    Position[\"RightTop\"] = \"RIGHT_TOP\";\r\n    Position[\"RightCenter\"] = \"RIGHT_CENTER\";\r\n    Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\r\n    Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\r\n    Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\r\n    Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\r\n    Position[\"LeftTop\"] = \"LEFT_TOP\";\r\n    Position[\"LeftCenter\"] = \"LEFT_CENTER\";\r\n    Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\r\n})(exports.Position || (exports.Position = {}));\r\n\r\nexports.RotateDirection = void 0;\r\n(function (RotateDirection) {\r\n    RotateDirection[\"Backward\"] = \"Backward\";\r\n    RotateDirection[\"Forward\"] = \"Forward\";\r\n})(exports.RotateDirection || (exports.RotateDirection = {}));\r\n\r\nexports.ScrollMode = void 0;\r\n(function (ScrollMode) {\r\n    ScrollMode[\"Horizontal\"] = \"Horizontal\";\r\n    ScrollMode[\"Vertical\"] = \"Vertical\";\r\n    ScrollMode[\"Wrapped\"] = \"Wrapped\";\r\n})(exports.ScrollMode || (exports.ScrollMode = {}));\r\n\r\nexports.SpecialZoomLevel = void 0;\r\n(function (SpecialZoomLevel) {\r\n    SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\r\n    SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\r\n    SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\r\n})(exports.SpecialZoomLevel || (exports.SpecialZoomLevel = {}));\r\n\r\nexports.ToggleStatus = void 0;\r\n(function (ToggleStatus) {\r\n    ToggleStatus[\"Close\"] = \"Close\";\r\n    ToggleStatus[\"Open\"] = \"Open\";\r\n    ToggleStatus[\"Toggle\"] = \"Toggle\";\r\n})(exports.ToggleStatus || (exports.ToggleStatus = {}));\r\n\r\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nexports.TextDirection = void 0;\r\n(function (TextDirection) {\r\n    TextDirection[\"RightToLeft\"] = \"RTL\";\r\n    TextDirection[\"LeftToRight\"] = \"LTR\";\r\n})(exports.TextDirection || (exports.TextDirection = {}));\r\nvar ThemeContext = React__namespace.createContext({\r\n    currentTheme: 'light',\r\n    direction: exports.TextDirection.LeftToRight,\r\n    setCurrentTheme: function () { },\r\n});\r\n\r\nvar classNames = function (classes) {\r\n    var result = [];\r\n    Object.keys(classes).forEach(function (clazz) {\r\n        if (clazz && classes[clazz]) {\r\n            result.push(clazz);\r\n        }\r\n    });\r\n    return result.join(' ');\r\n};\r\n\r\nvar Button = function (_a) {\r\n    var children = _a.children, testId = _a.testId, onClick = _a.onClick;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var attrs = testId ? { 'data-testid': testId } : {};\r\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\r\n            'rpv-core__button': true,\r\n            'rpv-core__button--rtl': isRtl,\r\n        }), type: \"button\", onClick: onClick }, attrs), children));\r\n};\r\n\r\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\r\n\r\nvar useIntersectionObserver = function (props) {\r\n    var containerRef = React__namespace.useRef(null);\r\n    var once = props.once, threshold = props.threshold, onVisibilityChanged = props.onVisibilityChanged;\r\n    useIsomorphicLayoutEffect(function () {\r\n        var container = containerRef.current;\r\n        if (!container) {\r\n            return;\r\n        }\r\n        var intersectionTracker = new IntersectionObserver(function (entries) {\r\n            entries.forEach(function (entry) {\r\n                var isVisible = entry.isIntersecting;\r\n                var ratio = entry.intersectionRatio;\r\n                onVisibilityChanged({ isVisible: isVisible, ratio: ratio });\r\n                if (isVisible && once) {\r\n                    intersectionTracker.unobserve(container);\r\n                    intersectionTracker.disconnect();\r\n                }\r\n            });\r\n        }, {\r\n            threshold: threshold || 0,\r\n        });\r\n        intersectionTracker.observe(container);\r\n        return function () {\r\n            intersectionTracker.unobserve(container);\r\n            intersectionTracker.disconnect();\r\n        };\r\n    }, []);\r\n    return containerRef;\r\n};\r\n\r\nvar LazyRender = function (_a) {\r\n    var attrs = _a.attrs, children = _a.children, testId = _a.testId;\r\n    var _b = React__namespace.useState(false), visible = _b[0], setVisible = _b[1];\r\n    var containerAttrs = testId ? __assign(__assign({}, attrs), { 'data-testid': testId }) : attrs;\r\n    var handleVisibilityChanged = function (params) {\r\n        if (params.isVisible) {\r\n            setVisible(true);\r\n        }\r\n    };\r\n    var containerRef = useIntersectionObserver({\r\n        once: true,\r\n        onVisibilityChanged: handleVisibilityChanged,\r\n    });\r\n    return (React__namespace.createElement(\"div\", __assign({ ref: containerRef }, containerAttrs), visible && children));\r\n};\r\n\r\nvar Menu = function (_a) {\r\n    var children = _a.children;\r\n    var containerRef = React__namespace.useRef();\r\n    var visibleMenuItemsRef = React__namespace.useRef([]);\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var handleKeyDown = function (e) {\r\n        var container = containerRef.current;\r\n        if (!container) {\r\n            return;\r\n        }\r\n        switch (e.key) {\r\n            case 'Tab':\r\n                e.preventDefault();\r\n                break;\r\n            case 'ArrowDown':\r\n                e.preventDefault();\r\n                moveToItem(function (_, currentIndex) { return currentIndex + 1; });\r\n                break;\r\n            case 'ArrowUp':\r\n                e.preventDefault();\r\n                moveToItem(function (_, currentIndex) { return currentIndex - 1; });\r\n                break;\r\n            case 'End':\r\n                e.preventDefault();\r\n                moveToItem(function (items, _) { return items.length - 1; });\r\n                break;\r\n            case 'Home':\r\n                e.preventDefault();\r\n                moveToItem(function (_, __) { return 0; });\r\n                break;\r\n        }\r\n    };\r\n    var moveToItem = function (getNextItem) {\r\n        var container = containerRef.current;\r\n        if (!container) {\r\n            return;\r\n        }\r\n        var items = visibleMenuItemsRef.current;\r\n        var currentIndex = items.findIndex(function (item) { return item.getAttribute('tabindex') === '0'; });\r\n        var targetIndex = Math.min(items.length - 1, Math.max(0, getNextItem(items, currentIndex)));\r\n        if (currentIndex >= 0 && currentIndex <= items.length - 1) {\r\n            items[currentIndex].setAttribute('tabindex', '-1');\r\n        }\r\n        items[targetIndex].setAttribute('tabindex', '0');\r\n        items[targetIndex].focus();\r\n    };\r\n    var findVisibleItems = function (container) {\r\n        var visibleItems = [];\r\n        container.querySelectorAll('.rpv-core__menu-item[role=\"menuitem\"]').forEach(function (item) {\r\n            if (item instanceof HTMLElement) {\r\n                var parent_1 = item.parentElement;\r\n                if (parent_1 === container) {\r\n                    visibleItems.push(item);\r\n                }\r\n                else {\r\n                    if (window.getComputedStyle(parent_1).display !== 'none') {\r\n                        visibleItems.push(item);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return visibleItems;\r\n    };\r\n    useIsomorphicLayoutEffect(function () {\r\n        var container = containerRef.current;\r\n        if (!container) {\r\n            return;\r\n        }\r\n        var visibleItems = findVisibleItems(container);\r\n        visibleMenuItemsRef.current = visibleItems;\r\n    }, []);\r\n    useIsomorphicLayoutEffect(function () {\r\n        document.addEventListener('keydown', handleKeyDown);\r\n        return function () {\r\n            document.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, []);\r\n    return (React__namespace.createElement(\"div\", { ref: containerRef, \"aria-orientation\": \"vertical\", className: classNames({\r\n            'rpv-core__menu': true,\r\n            'rpv-core__menu--rtl': isRtl,\r\n        }), role: \"menu\", tabIndex: 0 }, children));\r\n};\r\n\r\nvar MenuDivider = function () { return (React__namespace.createElement(\"div\", { \"aria-orientation\": \"horizontal\", className: \"rpv-core__menu-divider\", role: \"separator\" })); };\r\n\r\nvar Icon = function (_a) {\r\n    var children = _a.children, _b = _a.ignoreDirection, ignoreDirection = _b === void 0 ? false : _b, _c = _a.size, size = _c === void 0 ? 24 : _c;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = !ignoreDirection && direction === exports.TextDirection.RightToLeft;\r\n    var width = \"\".concat(size || 24, \"px\");\r\n    return (React__namespace.createElement(\"svg\", { \"aria-hidden\": \"true\", className: classNames({\r\n            'rpv-core__icon': true,\r\n            'rpv-core__icon--rtl': isRtl,\r\n        }), focusable: \"false\", height: width, viewBox: \"0 0 24 24\", width: width }, children));\r\n};\r\n\r\nvar CheckIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\r\n    React__namespace.createElement(\"path\", { d: \"M23.5,0.499l-16.5,23l-6.5-6.5\" }))); };\r\n\r\nvar MenuItem = function (_a) {\r\n    var _b = _a.checked, checked = _b === void 0 ? false : _b, children = _a.children, _c = _a.icon, icon = _c === void 0 ? null : _c, _d = _a.isDisabled, isDisabled = _d === void 0 ? false : _d, testId = _a.testId, onClick = _a.onClick;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var attrs = testId ? { 'data-testid': testId } : {};\r\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\r\n            'rpv-core__menu-item': true,\r\n            'rpv-core__menu-item--disabled': isDisabled,\r\n            'rpv-core__menu-item--ltr': !isRtl,\r\n            'rpv-core__menu-item--rtl': isRtl,\r\n        }), role: \"menuitem\", tabIndex: -1, type: \"button\", onClick: onClick }, attrs),\r\n        React__namespace.createElement(\"div\", { className: classNames({\r\n                'rpv-core__menu-item-icon': true,\r\n                'rpv-core__menu-item-icon--ltr': !isRtl,\r\n                'rpv-core__menu-item-icon--rtl': isRtl,\r\n            }) }, icon),\r\n        React__namespace.createElement(\"div\", { className: classNames({\r\n                'rpv-core__menu-item-label': true,\r\n                'rpv-core__menu-item-label--ltr': !isRtl,\r\n                'rpv-core__menu-item-label--rtl': isRtl,\r\n            }) }, children),\r\n        React__namespace.createElement(\"div\", { className: classNames({\r\n                'rpv-core__menu-item-check': true,\r\n                'rpv-core__menu-item-check--ltr': !isRtl,\r\n                'rpv-core__menu-item-check--rtl': isRtl,\r\n            }) }, checked && React__namespace.createElement(CheckIcon, null))));\r\n};\r\n\r\nvar MinimalButton = function (_a) {\r\n    var _b = _a.ariaLabel, ariaLabel = _b === void 0 ? '' : _b, _c = _a.ariaKeyShortcuts, ariaKeyShortcuts = _c === void 0 ? '' : _c, children = _a.children, _d = _a.isDisabled, isDisabled = _d === void 0 ? false : _d, _e = _a.isSelected, isSelected = _e === void 0 ? false : _e, testId = _a.testId, onClick = _a.onClick;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var attrs = testId ? { 'data-testid': testId } : {};\r\n    return (React__namespace.createElement(\"button\", __assign({ \"aria-label\": ariaLabel }, (ariaKeyShortcuts && { 'aria-keyshortcuts': ariaKeyShortcuts }), (isDisabled && { 'aria-disabled': true }), { className: classNames({\r\n            'rpv-core__minimal-button': true,\r\n            'rpv-core__minimal-button--disabled': isDisabled,\r\n            'rpv-core__minimal-button--rtl': isRtl,\r\n            'rpv-core__minimal-button--selected': isSelected,\r\n        }), type: \"button\", onClick: onClick }, attrs), children));\r\n};\r\n\r\nvar PrimaryButton = function (_a) {\r\n    var children = _a.children, testId = _a.testId, onClick = _a.onClick;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var attrs = testId ? { 'data-testid': testId } : {};\r\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\r\n            'rpv-core__primary-button': true,\r\n            'rpv-core__primary-button--rtl': isRtl,\r\n        }), type: \"button\", onClick: onClick }, attrs), children));\r\n};\r\n\r\nvar ProgressBar = function (_a) {\r\n    var progress = _a.progress;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    return (React__namespace.createElement(\"div\", { className: classNames({\r\n            'rpv-core__progress-bar': true,\r\n            'rpv-core__progress-bar--rtl': isRtl,\r\n        }) },\r\n        React__namespace.createElement(\"div\", { className: \"rpv-core__progress-bar-progress\", style: { width: \"\".concat(progress, \"%\") } },\r\n            progress,\r\n            \"%\")));\r\n};\r\n\r\nvar Separator = function () { return React__namespace.createElement(\"div\", { className: \"rpv-core__separator\" }); };\r\n\r\nvar Spinner = function (_a) {\r\n    var _b = _a.size, size = _b === void 0 ? '4rem' : _b, testId = _a.testId;\r\n    var _c = React__namespace.useState(false), visible = _c[0], setVisible = _c[1];\r\n    var attrs = testId ? { 'data-testid': testId } : {};\r\n    var handleVisibilityChanged = function (params) {\r\n        setVisible(params.isVisible);\r\n    };\r\n    var containerRef = useIntersectionObserver({\r\n        onVisibilityChanged: handleVisibilityChanged,\r\n    });\r\n    return (React__namespace.createElement(\"div\", __assign({}, attrs, { className: classNames({\r\n            'rpv-core__spinner': true,\r\n            'rpv-core__spinner--animating': visible,\r\n        }), ref: containerRef, style: { height: size, width: size } })));\r\n};\r\n\r\nvar Splitter = function (_a) {\r\n    var constrain = _a.constrain;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var resizerRef = React__namespace.useRef();\r\n    var leftSideRef = React__namespace.useRef();\r\n    var rightSideRef = React__namespace.useRef();\r\n    var xRef = React__namespace.useRef(0);\r\n    var yRef = React__namespace.useRef(0);\r\n    var leftWidthRef = React__namespace.useRef(0);\r\n    var resizerWidthRef = React__namespace.useRef(0);\r\n    var eventOptions = {\r\n        capture: true,\r\n    };\r\n    var handleMouseMove = function (e) {\r\n        var resizerEle = resizerRef.current;\r\n        var leftSide = leftSideRef.current;\r\n        var rightSide = rightSideRef.current;\r\n        if (!resizerEle || !leftSide || !rightSide) {\r\n            return;\r\n        }\r\n        var resizerWidth = resizerWidthRef.current;\r\n        var dx = e.clientX - xRef.current;\r\n        var firstHalfSize = leftWidthRef.current + (isRtl ? -dx : dx);\r\n        var containerWidth = resizerEle.parentElement.getBoundingClientRect().width;\r\n        var firstHalfPercentage = (firstHalfSize * 100) / containerWidth;\r\n        resizerEle.classList.add('rpv-core__splitter--resizing');\r\n        if (constrain) {\r\n            var secondHalfSize = containerWidth - firstHalfSize - resizerWidth;\r\n            var secondHalfPercentage = (secondHalfSize * 100) / containerWidth;\r\n            if (!constrain({ firstHalfPercentage: firstHalfPercentage, firstHalfSize: firstHalfSize, secondHalfPercentage: secondHalfPercentage, secondHalfSize: secondHalfSize })) {\r\n                return;\r\n            }\r\n        }\r\n        leftSide.style.width = \"\".concat(firstHalfPercentage, \"%\");\r\n        document.body.classList.add('rpv-core__splitter-body--resizing');\r\n        leftSide.classList.add('rpv-core__splitter-sibling--resizing');\r\n        rightSide.classList.add('rpv-core__splitter-sibling--resizing');\r\n    };\r\n    var handleMouseUp = function (e) {\r\n        var resizerEle = resizerRef.current;\r\n        var leftSide = leftSideRef.current;\r\n        var rightSide = rightSideRef.current;\r\n        if (!resizerEle || !leftSide || !rightSide) {\r\n            return;\r\n        }\r\n        document.body.classList.remove('rpv-core__splitter-body--resizing');\r\n        resizerEle.classList.remove('rpv-core__splitter--resizing');\r\n        leftSide.classList.remove('rpv-core__splitter-sibling--resizing');\r\n        rightSide.classList.remove('rpv-core__splitter-sibling--resizing');\r\n        document.removeEventListener('mousemove', handleMouseMove, eventOptions);\r\n        document.removeEventListener('mouseup', handleMouseUp, eventOptions);\r\n    };\r\n    var handleMouseDown = function (e) {\r\n        var leftSide = leftSideRef.current;\r\n        if (!leftSide) {\r\n            return;\r\n        }\r\n        xRef.current = e.clientX;\r\n        yRef.current = e.clientY;\r\n        leftWidthRef.current = leftSide.getBoundingClientRect().width;\r\n        document.addEventListener('mousemove', handleMouseMove, eventOptions);\r\n        document.addEventListener('mouseup', handleMouseUp, eventOptions);\r\n    };\r\n    React__namespace.useEffect(function () {\r\n        var resizerEle = resizerRef.current;\r\n        if (!resizerEle) {\r\n            return;\r\n        }\r\n        resizerWidthRef.current = resizerEle.getBoundingClientRect().width;\r\n        leftSideRef.current = resizerEle.previousElementSibling;\r\n        rightSideRef.current = resizerEle.nextElementSibling;\r\n    }, []);\r\n    return React__namespace.createElement(\"div\", { ref: resizerRef, className: \"rpv-core__splitter\", onMouseDown: handleMouseDown });\r\n};\r\n\r\nvar TextBox = function (_a) {\r\n    var _b = _a.ariaLabel, ariaLabel = _b === void 0 ? '' : _b, _c = _a.autoFocus, autoFocus = _c === void 0 ? false : _c, _d = _a.placeholder, placeholder = _d === void 0 ? '' : _d, testId = _a.testId, _e = _a.type, type = _e === void 0 ? 'text' : _e, _f = _a.value, value = _f === void 0 ? '' : _f, onChange = _a.onChange, _g = _a.onKeyDown, onKeyDown = _g === void 0 ? function () { } : _g;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var textboxRef = React__namespace.useRef();\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var attrs = {\r\n        ref: textboxRef,\r\n        'data-testid': '',\r\n        'aria-label': ariaLabel,\r\n        className: classNames({\r\n            'rpv-core__textbox': true,\r\n            'rpv-core__textbox--rtl': isRtl,\r\n        }),\r\n        placeholder: placeholder,\r\n        value: value,\r\n        onChange: function (e) { return onChange(e.target.value); },\r\n        onKeyDown: onKeyDown,\r\n    };\r\n    if (testId) {\r\n        attrs['data-testid'] = testId;\r\n    }\r\n    useIsomorphicLayoutEffect(function () {\r\n        if (autoFocus) {\r\n            var textboxEle = textboxRef.current;\r\n            if (textboxEle) {\r\n                var x = window.scrollX;\r\n                var y = window.scrollY;\r\n                textboxEle.focus();\r\n                window.scrollTo(x, y);\r\n            }\r\n        }\r\n    }, []);\r\n    return type === 'text' ? React__namespace.createElement(\"input\", __assign({ type: \"text\" }, attrs)) : React__namespace.createElement(\"input\", __assign({ type: \"password\" }, attrs));\r\n};\r\n\r\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\r\n    var clickHandler = function (e) {\r\n        var target = targetRef.current;\r\n        if (target && !target.contains(e.target)) {\r\n            onClickOutside();\r\n        }\r\n    };\r\n    React__namespace.useEffect(function () {\r\n        if (!closeOnClickOutside) {\r\n            return;\r\n        }\r\n        var eventOptions = {\r\n            capture: true,\r\n        };\r\n        document.addEventListener('click', clickHandler, eventOptions);\r\n        return function () {\r\n            document.removeEventListener('click', clickHandler, eventOptions);\r\n        };\r\n    }, []);\r\n};\r\n\r\nvar useEscape = function (handler) {\r\n    var keyUpHandler = function (e) {\r\n        if (e.key === 'Escape') {\r\n            handler();\r\n        }\r\n    };\r\n    React__namespace.useEffect(function () {\r\n        document.addEventListener('keyup', keyUpHandler);\r\n        return function () {\r\n            document.removeEventListener('keyup', keyUpHandler);\r\n        };\r\n    }, []);\r\n};\r\n\r\nvar useLockScroll = function () {\r\n    React__namespace.useEffect(function () {\r\n        var originalStyle = window.getComputedStyle(document.body).overflow;\r\n        document.body.style.overflow = 'hidden';\r\n        return function () {\r\n            document.body.style.overflow = originalStyle;\r\n        };\r\n    }, []);\r\n};\r\n\r\nvar ModalBody = function (_a) {\r\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, onToggle = _a.onToggle;\r\n    var contentRef = React__namespace.useRef();\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    useLockScroll();\r\n    useEscape(function () {\r\n        if (contentRef.current && closeOnEscape) {\r\n            onToggle();\r\n        }\r\n    });\r\n    useClickOutside(closeOnClickOutside, contentRef, onToggle);\r\n    useIsomorphicLayoutEffect(function () {\r\n        var contentEle = contentRef.current;\r\n        if (!contentEle) {\r\n            return;\r\n        }\r\n        var maxHeight = document.body.clientHeight * 0.75;\r\n        if (contentEle.getBoundingClientRect().height >= maxHeight) {\r\n            contentEle.style.overflow = 'auto';\r\n            contentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\r\n        }\r\n    }, []);\r\n    return (React__namespace.createElement(\"div\", { \"aria-modal\": \"true\", className: classNames({\r\n            'rpv-core__modal-body': true,\r\n            'rpv-core__modal-body--rtl': isRtl,\r\n        }), id: \"rpv-core__modal-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"dialog\", tabIndex: -1 }, children));\r\n};\r\n\r\nvar ModalOverlay = function (_a) {\r\n    var children = _a.children;\r\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__modal-overlay\" }, children);\r\n};\r\n\r\nvar useToggle = function (isOpened) {\r\n    var _a = React__namespace.useState(isOpened), opened = _a[0], setOpened = _a[1];\r\n    var toggle = function (status) {\r\n        switch (status) {\r\n            case exports.ToggleStatus.Close:\r\n                setOpened(false);\r\n                break;\r\n            case exports.ToggleStatus.Open:\r\n                setOpened(true);\r\n                break;\r\n            case exports.ToggleStatus.Toggle:\r\n            default:\r\n                setOpened(function (isOpened) { return !isOpened; });\r\n                break;\r\n        }\r\n    };\r\n    return { opened: opened, toggle: toggle };\r\n};\r\n\r\nvar Portal = function (_a) {\r\n    var content = _a.content, _b = _a.isOpened, isOpened = _b === void 0 ? false : _b, target = _a.target;\r\n    var _c = useToggle(isOpened), opened = _c.opened, toggle = _c.toggle;\r\n    return (React__namespace.createElement(React__namespace.Fragment, null,\r\n        target && target(toggle, opened),\r\n        opened && content(toggle)));\r\n};\r\n\r\nvar id = 0;\r\nvar uniqueId = function () { return id++; };\r\n\r\nvar Modal = function (_a) {\r\n    var ariaControlsSuffix = _a.ariaControlsSuffix, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, _b = _a.isOpened, isOpened = _b === void 0 ? false : _b, target = _a.target;\r\n    var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\r\n    var renderTarget = function (toggle, opened) { return (React__namespace.createElement(\"div\", { \"aria-expanded\": opened ? 'true' : 'false', \"aria-haspopup\": \"dialog\", \"aria-controls\": \"rpv-core__modal-body-\".concat(controlsSuffix) }, target(toggle, opened))); };\r\n    var renderContent = function (toggle) { return (React__namespace.createElement(ModalOverlay, null,\r\n        React__namespace.createElement(ModalBody, { ariaControlsSuffix: controlsSuffix, closeOnClickOutside: closeOnClickOutside, closeOnEscape: closeOnEscape, onToggle: toggle }, content(toggle)))); };\r\n    return React__namespace.createElement(Portal, { target: target ? renderTarget : null, content: renderContent, isOpened: isOpened });\r\n};\r\n\r\nvar calculatePosition = function (content, target, position, offset) {\r\n    var targetRect = target.getBoundingClientRect();\r\n    var contentRect = content.getBoundingClientRect();\r\n    var height = contentRect.height, width = contentRect.width;\r\n    var top = 0;\r\n    var left = 0;\r\n    switch (position) {\r\n        case exports.Position.TopLeft:\r\n            top = targetRect.top - height;\r\n            left = targetRect.left;\r\n            break;\r\n        case exports.Position.TopCenter:\r\n            top = targetRect.top - height;\r\n            left = targetRect.left + targetRect.width / 2 - width / 2;\r\n            break;\r\n        case exports.Position.TopRight:\r\n            top = targetRect.top - height;\r\n            left = targetRect.left + targetRect.width - width;\r\n            break;\r\n        case exports.Position.RightTop:\r\n            top = targetRect.top;\r\n            left = targetRect.left + targetRect.width;\r\n            break;\r\n        case exports.Position.RightCenter:\r\n            top = targetRect.top + targetRect.height / 2 - height / 2;\r\n            left = targetRect.left + targetRect.width;\r\n            break;\r\n        case exports.Position.RightBottom:\r\n            top = targetRect.top + targetRect.height - height;\r\n            left = targetRect.left + targetRect.width;\r\n            break;\r\n        case exports.Position.BottomLeft:\r\n            top = targetRect.top + targetRect.height;\r\n            left = targetRect.left;\r\n            break;\r\n        case exports.Position.BottomCenter:\r\n            top = targetRect.top + targetRect.height;\r\n            left = targetRect.left + targetRect.width / 2 - width / 2;\r\n            break;\r\n        case exports.Position.BottomRight:\r\n            top = targetRect.top + targetRect.height;\r\n            left = targetRect.left + targetRect.width - width;\r\n            break;\r\n        case exports.Position.LeftTop:\r\n            top = targetRect.top;\r\n            left = targetRect.left - width;\r\n            break;\r\n        case exports.Position.LeftCenter:\r\n            top = targetRect.top + targetRect.height / 2 - height / 2;\r\n            left = targetRect.left - width;\r\n            break;\r\n        case exports.Position.LeftBottom:\r\n            top = targetRect.top + targetRect.height - height;\r\n            left = targetRect.left - width;\r\n            break;\r\n    }\r\n    return {\r\n        left: left + (offset.left || 0),\r\n        top: top + (offset.top || 0),\r\n    };\r\n};\r\n\r\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\r\n    useIsomorphicLayoutEffect(function () {\r\n        var targetEle = targetRef.current;\r\n        var contentEle = contentRef.current;\r\n        var anchorEle = anchorRef.current;\r\n        if (!contentEle || !targetEle || !anchorEle) {\r\n            return;\r\n        }\r\n        var anchorRect = anchorEle.getBoundingClientRect();\r\n        var _a = calculatePosition(contentEle, targetEle, position, offset), top = _a.top, left = _a.left;\r\n        contentEle.style.top = \"\".concat(top - anchorRect.top, \"px\");\r\n        contentEle.style.left = \"\".concat(left - anchorRect.left, \"px\");\r\n    }, []);\r\n};\r\n\r\nvar Arrow = function (_a) {\r\n    var _b;\r\n    var customClassName = _a.customClassName, position = _a.position;\r\n    return (React__namespace.createElement(\"div\", { className: classNames((_b = {\r\n                'rpv-core__arrow': true,\r\n                'rpv-core__arrow--tl': position === exports.Position.TopLeft,\r\n                'rpv-core__arrow--tc': position === exports.Position.TopCenter,\r\n                'rpv-core__arrow--tr': position === exports.Position.TopRight,\r\n                'rpv-core__arrow--rt': position === exports.Position.RightTop,\r\n                'rpv-core__arrow--rc': position === exports.Position.RightCenter,\r\n                'rpv-core__arrow--rb': position === exports.Position.RightBottom,\r\n                'rpv-core__arrow--bl': position === exports.Position.BottomLeft,\r\n                'rpv-core__arrow--bc': position === exports.Position.BottomCenter,\r\n                'rpv-core__arrow--br': position === exports.Position.BottomRight,\r\n                'rpv-core__arrow--lt': position === exports.Position.LeftTop,\r\n                'rpv-core__arrow--lc': position === exports.Position.LeftCenter,\r\n                'rpv-core__arrow--lb': position === exports.Position.LeftBottom\r\n            },\r\n            _b[\"\".concat(customClassName)] = customClassName !== '',\r\n            _b)) }));\r\n};\r\n\r\nvar PopoverBody = function (_a) {\r\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, offset = _a.offset, position = _a.position, targetRef = _a.targetRef, onClose = _a.onClose;\r\n    var contentRef = React__namespace.useRef();\r\n    var innerRef = React__namespace.useRef();\r\n    var anchorRef = React__namespace.useRef();\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    useClickOutside(closeOnClickOutside, contentRef, onClose);\r\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\r\n    useIsomorphicLayoutEffect(function () {\r\n        var innerContentEle = innerRef.current;\r\n        if (!innerContentEle) {\r\n            return;\r\n        }\r\n        var maxHeight = document.body.clientHeight * 0.75;\r\n        if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\r\n            innerContentEle.style.overflow = 'auto';\r\n            innerContentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\r\n        }\r\n    }, []);\r\n    var innerId = \"rpv-core__popover-body-inner-\".concat(ariaControlsSuffix);\r\n    return (React__namespace.createElement(React__namespace.Fragment, null,\r\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\r\n        React__namespace.createElement(\"div\", { \"aria-describedby\": innerId, className: classNames({\r\n                'rpv-core__popover-body': true,\r\n                'rpv-core__popover-body--rtl': isRtl,\r\n            }), id: \"rpv-core__popover-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"dialog\", tabIndex: -1 },\r\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__popover-body-arrow\", position: position }),\r\n            React__namespace.createElement(\"div\", { id: innerId, ref: innerRef }, children))));\r\n};\r\n\r\nvar PopoverOverlay = function (_a) {\r\n    var closeOnEscape = _a.closeOnEscape, onClose = _a.onClose;\r\n    var containerRef = React__namespace.useRef();\r\n    useEscape(function () {\r\n        if (containerRef.current && closeOnEscape) {\r\n            onClose();\r\n        }\r\n    });\r\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__popover-overlay\", ref: containerRef });\r\n};\r\n\r\nvar Popover = function (_a) {\r\n    var _b = _a.ariaHasPopup, ariaHasPopup = _b === void 0 ? 'dialog' : _b, ariaControlsSuffix = _a.ariaControlsSuffix, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, _c = _a.lockScroll, lockScroll = _c === void 0 ? true : _c, offset = _a.offset, position = _a.position, target = _a.target;\r\n    var _d = useToggle(false), opened = _d.opened, toggle = _d.toggle;\r\n    var targetRef = React__namespace.useRef();\r\n    var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\r\n    return (React__namespace.createElement(\"div\", { ref: targetRef, \"aria-expanded\": opened ? 'true' : 'false', \"aria-haspopup\": ariaHasPopup, \"aria-controls\": \"rpv-core__popver-body-\".concat(controlsSuffix) },\r\n        target(toggle, opened),\r\n        opened && (React__namespace.createElement(React__namespace.Fragment, null,\r\n            lockScroll && React__namespace.createElement(PopoverOverlay, { closeOnEscape: closeOnEscape, onClose: toggle }),\r\n            React__namespace.createElement(PopoverBody, { ariaControlsSuffix: controlsSuffix, closeOnClickOutside: closeOnClickOutside, offset: offset, position: position, targetRef: targetRef, onClose: toggle }, content(toggle))))));\r\n};\r\n\r\nvar TooltipBody = function (_a) {\r\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, contentRef = _a.contentRef, offset = _a.offset, position = _a.position, targetRef = _a.targetRef;\r\n    var anchorRef = React__namespace.useRef();\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\r\n    return (React__namespace.createElement(React__namespace.Fragment, null,\r\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\r\n        React__namespace.createElement(\"div\", { className: classNames({\r\n                'rpv-core__tooltip-body': true,\r\n                'rpv-core__tooltip-body--rtl': isRtl,\r\n            }), id: \"rpv-core__tooltip-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"tooltip\" },\r\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__tooltip-body-arrow\", position: position }),\r\n            React__namespace.createElement(\"div\", { className: \"rpv-core__tooltip-body-content\" }, children))));\r\n};\r\n\r\nvar Tooltip = function (_a) {\r\n    var ariaControlsSuffix = _a.ariaControlsSuffix, content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\r\n    var _b = useToggle(false), opened = _b.opened, toggle = _b.toggle;\r\n    var targetRef = React__namespace.useRef();\r\n    var contentRef = React__namespace.useRef();\r\n    var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\r\n    useEscape(function () {\r\n        if (targetRef.current && document.activeElement && targetRef.current.contains(document.activeElement)) {\r\n            close();\r\n        }\r\n    });\r\n    var open = function () {\r\n        toggle(exports.ToggleStatus.Open);\r\n    };\r\n    var close = function () {\r\n        toggle(exports.ToggleStatus.Close);\r\n    };\r\n    var onBlur = function (e) {\r\n        var shouldHideTooltip = e.relatedTarget instanceof HTMLElement &&\r\n            e.currentTarget.parentElement &&\r\n            e.currentTarget.parentElement.contains(e.relatedTarget);\r\n        if (shouldHideTooltip) {\r\n            if (contentRef.current) {\r\n                contentRef.current.style.display = 'none';\r\n            }\r\n        }\r\n        else {\r\n            close();\r\n        }\r\n    };\r\n    return (React__namespace.createElement(React__namespace.Fragment, null,\r\n        React__namespace.createElement(\"div\", { ref: targetRef, \"aria-describedby\": \"rpv-core__tooltip-body-\".concat(controlsSuffix), onBlur: onBlur, onFocus: open, onMouseEnter: open, onMouseLeave: close }, target),\r\n        opened && (React__namespace.createElement(TooltipBody, { ariaControlsSuffix: controlsSuffix, contentRef: contentRef, offset: offset, position: position, targetRef: targetRef }, content()))));\r\n};\r\n\r\nvar PageRenderStatus;\r\n(function (PageRenderStatus) {\r\n    PageRenderStatus[\"NotRenderedYet\"] = \"NotRenderedYet\";\r\n    PageRenderStatus[\"Rendering\"] = \"Rendering\";\r\n    PageRenderStatus[\"Rendered\"] = \"Rendered\";\r\n})(PageRenderStatus || (PageRenderStatus = {}));\r\nvar OUT_OF_RANGE_VISIBILITY = -9999;\r\nvar pageVisibilities = {};\r\nvar renderQueueService = function (_a) {\r\n    var doc = _a.doc, queueName = _a.queueName; _a.priority;\r\n    var numPages = doc.numPages;\r\n    var queue = \"\".concat(queueName, \"___\").concat(doc.loadingTask.docId);\r\n    var getInitialPageVisibilities = function () {\r\n        return Array(numPages)\r\n            .fill(null)\r\n            .map(function (_, pageIndex) { return ({\r\n            pageIndex: pageIndex,\r\n            renderStatus: PageRenderStatus.NotRenderedYet,\r\n            visibility: OUT_OF_RANGE_VISIBILITY,\r\n        }); });\r\n    };\r\n    var cleanup = function () {\r\n        pageVisibilities[queue] = [];\r\n    };\r\n    var resetQueue = function () {\r\n        pageVisibilities[queue] = getInitialPageVisibilities();\r\n    };\r\n    var markRendered = function (pageIndex) {\r\n        pageVisibilities[queue][pageIndex].renderStatus = PageRenderStatus.Rendered;\r\n    };\r\n    var markRendering = function (pageIndex) {\r\n        pageVisibilities[queue][pageIndex].renderStatus = PageRenderStatus.Rendering;\r\n    };\r\n    var setRange = function (startIndex, endIndex) {\r\n        for (var i = 0; i < numPages; i++) {\r\n            if (i < startIndex || i > endIndex) {\r\n                pageVisibilities[queue][i].visibility = OUT_OF_RANGE_VISIBILITY;\r\n                pageVisibilities[queue][i].renderStatus = PageRenderStatus.NotRenderedYet;\r\n            }\r\n        }\r\n    };\r\n    var setVisibility = function (pageIndex, visibility) {\r\n        pageVisibilities[queue][pageIndex].visibility = visibility;\r\n    };\r\n    var getHighestPriorityPage = function () {\r\n        var visiblePages = pageVisibilities[queue].filter(function (item) { return item.visibility > OUT_OF_RANGE_VISIBILITY; });\r\n        if (!visiblePages.length) {\r\n            return -1;\r\n        }\r\n        var firstVisiblePage = visiblePages[0].pageIndex;\r\n        var lastVisiblePage = visiblePages[visiblePages.length - 1].pageIndex;\r\n        var numVisiblePages = visiblePages.length;\r\n        for (var i = 0; i < numVisiblePages; i++) {\r\n            if (visiblePages[i].renderStatus === PageRenderStatus.Rendering) {\r\n                return -1;\r\n            }\r\n            if (visiblePages[i].renderStatus === PageRenderStatus.NotRenderedYet) {\r\n                return visiblePages[i].pageIndex;\r\n            }\r\n        }\r\n        if (lastVisiblePage + 1 < numPages &&\r\n            pageVisibilities[queue][lastVisiblePage + 1].renderStatus !== PageRenderStatus.Rendered) {\r\n            return lastVisiblePage + 1;\r\n        }\r\n        else if (firstVisiblePage - 1 >= 0 &&\r\n            pageVisibilities[queue][firstVisiblePage - 1].renderStatus !== PageRenderStatus.Rendered) {\r\n            return firstVisiblePage - 1;\r\n        }\r\n        return -1;\r\n    };\r\n    resetQueue();\r\n    return {\r\n        OUT_OF_RANGE_VISIBILITY: OUT_OF_RANGE_VISIBILITY,\r\n        cleanup: cleanup,\r\n        getHighestPriorityPage: getHighestPriorityPage,\r\n        markRendered: markRendered,\r\n        markRendering: markRendering,\r\n        resetQueue: resetQueue,\r\n        setRange: setRange,\r\n        setVisibility: setVisibility,\r\n    };\r\n};\r\n\r\nfunction createStore(initialState) {\r\n    var state = initialState || {};\r\n    var listeners = {};\r\n    return {\r\n        subscribe: function (key, handler) {\r\n            listeners[key] = (listeners[key] || []).concat(handler);\r\n        },\r\n        unsubscribe: function (key, handler) {\r\n            listeners[key] = (listeners[key] || []).filter(function (f) { return f !== handler; });\r\n        },\r\n        update: function (key, data) {\r\n            var _a;\r\n            state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\r\n            (listeners[key] || []).forEach(function (handler) { return handler(state[key]); });\r\n        },\r\n        get: function (key) {\r\n            return state[key];\r\n        },\r\n    };\r\n}\r\n\r\nvar core = {\r\n\taskingPassword: {\r\n\t\trequirePasswordToOpen: \"This document requires a password to open\",\r\n\t\tsubmit: \"Submit\"\r\n\t},\r\n\twrongPassword: {\r\n\t\ttryAgain: \"The password is wrong. Please try again\"\r\n\t},\r\n\tpageLabel: \"Page {{pageIndex}}\"\r\n};\r\nvar enUs = {\r\n\tcore: core\r\n};\r\n\r\nvar DefaultLocalization = enUs;\r\nvar LocalizationContext = React__namespace.createContext({\r\n    l10n: DefaultLocalization,\r\n    setL10n: function () { },\r\n});\r\n\r\nfunction usePrevious(value) {\r\n    var ref = React__namespace.useRef(value);\r\n    React__namespace.useEffect(function () {\r\n        ref.current = value;\r\n    }, [value]);\r\n    return ref.current;\r\n}\r\n\r\nvar useDebounceCallback = function (callback, wait) {\r\n    var timeout = React__namespace.useRef();\r\n    var cleanup = function () {\r\n        if (timeout.current) {\r\n            clearTimeout(timeout.current);\r\n        }\r\n    };\r\n    React__namespace.useEffect(function () {\r\n        return function () { return cleanup(); };\r\n    }, []);\r\n    return React__namespace.useCallback(function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        cleanup();\r\n        timeout.current = setTimeout(function () {\r\n            callback.apply(void 0, args);\r\n        }, wait);\r\n    }, [callback, wait]);\r\n};\r\n\r\nvar useTrackResize = function (_a) {\r\n    var targetRef = _a.targetRef, onResize = _a.onResize;\r\n    useIsomorphicLayoutEffect(function () {\r\n        var io = new ResizeObserver(function (entries) {\r\n            entries.forEach(function (entry) {\r\n                onResize(entry.target);\r\n            });\r\n        });\r\n        var container = targetRef.current;\r\n        if (!container) {\r\n            return;\r\n        }\r\n        io.observe(container);\r\n        return function () {\r\n            io.unobserve(container);\r\n        };\r\n    }, []);\r\n};\r\n\r\nvar rectReducer = function (state, action) {\r\n    var rect = action.rect;\r\n    return state.height !== rect.height || state.width !== rect.width ? rect : state;\r\n};\r\nvar useMeasureRect = function (_a) {\r\n    var elementRef = _a.elementRef;\r\n    var _b = React__namespace.useState(elementRef.current), element = _b[0], setElement = _b[1];\r\n    var initializedRectRef = React__namespace.useRef(false);\r\n    var _c = React__namespace.useReducer(rectReducer, { height: 0, width: 0 }), rect = _c[0], dispatch = _c[1];\r\n    useIsomorphicLayoutEffect(function () {\r\n        if (elementRef.current !== element) {\r\n            setElement(elementRef.current);\r\n        }\r\n    });\r\n    useIsomorphicLayoutEffect(function () {\r\n        if (element && !initializedRectRef.current) {\r\n            initializedRectRef.current = true;\r\n            var _a = element.getBoundingClientRect(), height = _a.height, width = _a.width;\r\n            dispatch({\r\n                rect: { height: height, width: width },\r\n            });\r\n        }\r\n    }, [element]);\r\n    React__namespace.useEffect(function () {\r\n        if (!element) {\r\n            return;\r\n        }\r\n        var tracker = new ResizeObserver(function (entries, __) {\r\n            entries.forEach(function (entry) {\r\n                if (entry.target === element) {\r\n                    var _a = entry.contentRect, height = _a.height, width = _a.width;\r\n                    dispatch({\r\n                        rect: { height: height, width: width },\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        tracker.observe(element);\r\n        return function () {\r\n            tracker.unobserve(element);\r\n        };\r\n    }, [element]);\r\n    return rect;\r\n};\r\n\r\nvar useIsMounted = function () {\r\n    var isMountedRef = React__namespace.useRef(false);\r\n    React__namespace.useEffect(function () {\r\n        isMountedRef.current = true;\r\n        return function () {\r\n            isMountedRef.current = false;\r\n        };\r\n    }, []);\r\n    return isMountedRef;\r\n};\r\n\r\nvar useRafState = function (initialState) {\r\n    var isMounted = useIsMounted();\r\n    var rafRef = React__namespace.useRef(0);\r\n    var _a = React__namespace.useState(initialState), state = _a[0], setState = _a[1];\r\n    var setRafState = React__namespace.useCallback(function (value) {\r\n        cancelAnimationFrame(rafRef.current);\r\n        rafRef.current = requestAnimationFrame(function () {\r\n            isMounted.current && setState(value);\r\n        });\r\n    }, []);\r\n    React__namespace.useEffect(function () {\r\n        return function () {\r\n            cancelAnimationFrame(rafRef.current);\r\n        };\r\n    }, []);\r\n    return [state, setRafState];\r\n};\r\n\r\nvar ZERO_OFFSET$1 = {\r\n    left: 0,\r\n    top: 0,\r\n};\r\nvar SCROLL_EVENT_OPTIONS = {\r\n    capture: false,\r\n    passive: true,\r\n};\r\nvar useScroll = function (_a) {\r\n    var elementRef = _a.elementRef, isRtl = _a.isRtl, scrollMode = _a.scrollMode;\r\n    var _b = useRafState(ZERO_OFFSET$1), scrollOffset = _b[0], setScrollOffset = _b[1];\r\n    var _c = React__namespace.useState(elementRef.current), element = _c[0], setElement = _c[1];\r\n    var factor = isRtl ? -1 : 1;\r\n    var latestRef = React__namespace.useRef(scrollMode);\r\n    latestRef.current = scrollMode;\r\n    useIsomorphicLayoutEffect(function () {\r\n        setElement(elementRef.current);\r\n    });\r\n    useIsomorphicLayoutEffect(function () {\r\n        if (!element) {\r\n            return;\r\n        }\r\n        var handleScroll = function () {\r\n            switch (latestRef.current) {\r\n                case exports.ScrollMode.Horizontal:\r\n                    setScrollOffset({\r\n                        left: factor * element.scrollLeft,\r\n                        top: 0,\r\n                    });\r\n                    break;\r\n                case exports.ScrollMode.Vertical:\r\n                default:\r\n                    setScrollOffset({\r\n                        left: 0,\r\n                        top: element.scrollTop,\r\n                    });\r\n                    break;\r\n            }\r\n        };\r\n        element.addEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\r\n        return function () {\r\n            element.removeEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\r\n        };\r\n    }, [element]);\r\n    var scrollTo = React__namespace.useCallback(function (offset) {\r\n        var ele = elementRef.current;\r\n        if (ele) {\r\n            switch (latestRef.current) {\r\n                case exports.ScrollMode.Horizontal:\r\n                    ele.scrollLeft = factor * offset.left;\r\n                    break;\r\n                case exports.ScrollMode.Vertical:\r\n                default:\r\n                    ele.scrollTop = offset.top;\r\n                    break;\r\n            }\r\n        }\r\n    }, [elementRef]);\r\n    return {\r\n        scrollOffset: scrollOffset,\r\n        scrollTo: scrollTo,\r\n    };\r\n};\r\n\r\nvar clamp = function (min, max, value) { return Math.max(min, Math.min(value, max)); };\r\n\r\nvar findNearest = function (low, high, value, getItemValue) {\r\n    while (low <= high) {\r\n        var middle = ((low + high) / 2) | 0;\r\n        var currentValue = getItemValue(middle);\r\n        if (currentValue < value) {\r\n            low = middle + 1;\r\n        }\r\n        else if (currentValue > value) {\r\n            high = middle - 1;\r\n        }\r\n        else {\r\n            return middle;\r\n        }\r\n    }\r\n    return low > 0 ? low - 1 : 0;\r\n};\r\n\r\nvar ZERO_RECT = {\r\n    height: 0,\r\n    width: 0,\r\n};\r\nvar ZERO_OFFSET = {\r\n    left: 0,\r\n    top: 0,\r\n};\r\nvar calculateRange = function (scrollMode, measurements, outerSize, scrollOffset) {\r\n    var currentOffset = 0;\r\n    switch (scrollMode) {\r\n        case exports.ScrollMode.Horizontal:\r\n            currentOffset = scrollOffset.left;\r\n            break;\r\n        case exports.ScrollMode.Vertical:\r\n        default:\r\n            currentOffset = scrollOffset.top;\r\n            break;\r\n    }\r\n    var size = measurements.length - 1;\r\n    var getOffset = function (index) {\r\n        switch (scrollMode) {\r\n            case exports.ScrollMode.Horizontal:\r\n                return measurements[index].start.left;\r\n            case exports.ScrollMode.Wrapped:\r\n            case exports.ScrollMode.Vertical:\r\n            default:\r\n                return measurements[index].start.top;\r\n        }\r\n    };\r\n    var start = findNearest(0, size, currentOffset, getOffset);\r\n    if (scrollMode === exports.ScrollMode.Wrapped) {\r\n        var startTop = measurements[start].start.top;\r\n        while (start - 1 >= 0 &&\r\n            measurements[start - 1].start.top === startTop &&\r\n            measurements[start - 1].start.left >= scrollOffset.left) {\r\n            start--;\r\n        }\r\n    }\r\n    var end = start;\r\n    var visibilities = {};\r\n    var maxVisbilityIndex = start;\r\n    var maxVisbility = -1;\r\n    while (end <= size) {\r\n        var itemRect = measurements[end].size;\r\n        var visibility = {\r\n            width: 0,\r\n            height: 0,\r\n        };\r\n        var topLeftCorner = {\r\n            top: measurements[end].start.top - scrollOffset.top,\r\n            left: measurements[end].start.left - scrollOffset.left,\r\n        };\r\n        var visibleSize = {\r\n            height: outerSize.height - topLeftCorner.top,\r\n            width: outerSize.width - topLeftCorner.left,\r\n        };\r\n        if (scrollMode === exports.ScrollMode.Horizontal && visibleSize.width < 0) {\r\n            end--;\r\n            break;\r\n        }\r\n        if (scrollMode === exports.ScrollMode.Vertical && visibleSize.height < 0) {\r\n            end--;\r\n            break;\r\n        }\r\n        if (scrollMode === exports.ScrollMode.Wrapped && (visibleSize.width < 0 || visibleSize.height < 0)) {\r\n            end--;\r\n            break;\r\n        }\r\n        if (scrollMode === exports.ScrollMode.Vertical) {\r\n            visibility.width = 1;\r\n        }\r\n        else if (topLeftCorner.left < 0) {\r\n            var visibleWidth = itemRect.width - -topLeftCorner.left;\r\n            visibility.width = visibleWidth <= outerSize.width ? visibleWidth / outerSize.width : 1;\r\n        }\r\n        else {\r\n            visibility.width = itemRect.width <= visibleSize.width ? 1 : visibleSize.width / itemRect.width;\r\n        }\r\n        if (scrollMode === exports.ScrollMode.Horizontal) {\r\n            visibility.height = 1;\r\n        }\r\n        else if (topLeftCorner.top < 0) {\r\n            var visibleHeight = itemRect.height - -topLeftCorner.top;\r\n            visibility.height = visibleHeight <= outerSize.height ? visibleHeight / outerSize.height : 1;\r\n        }\r\n        else {\r\n            visibility.height = itemRect.height <= visibleSize.height ? 1 : visibleSize.height / itemRect.height;\r\n        }\r\n        visibilities[end] = visibility.width * visibility.height;\r\n        if (maxVisbility < visibilities[end]) {\r\n            maxVisbility = visibilities[end];\r\n            maxVisbilityIndex = end;\r\n        }\r\n        end++;\r\n    }\r\n    return {\r\n        start: start,\r\n        end: end,\r\n        maxVisbilityIndex: maxVisbilityIndex,\r\n        visibilities: visibilities,\r\n    };\r\n};\r\nvar useVirtual = function (_a) {\r\n    var estimateSize = _a.estimateSize, isRtl = _a.isRtl, numberOfItems = _a.numberOfItems, setStartRange = _a.setStartRange, setEndRange = _a.setEndRange, parentRef = _a.parentRef, scrollMode = _a.scrollMode, transformSize = _a.transformSize;\r\n    var _b = useScroll({\r\n        elementRef: parentRef,\r\n        isRtl: isRtl,\r\n        scrollMode: scrollMode,\r\n    }), scrollOffset = _b.scrollOffset, scrollTo = _b.scrollTo;\r\n    var parentRect = useMeasureRect({\r\n        elementRef: parentRef,\r\n    });\r\n    var latestRef = React__namespace.useRef({\r\n        scrollOffset: ZERO_OFFSET,\r\n        measurements: [],\r\n        parentRect: ZERO_RECT,\r\n        totalSize: ZERO_RECT,\r\n    });\r\n    latestRef.current.scrollOffset = scrollOffset;\r\n    latestRef.current.parentRect = parentRect;\r\n    var _c = React__namespace.useState({}), cacheMeasure = _c[0], setCacheMeasure = _c[1];\r\n    var measurements = React__namespace.useMemo(function () {\r\n        var measurements = [];\r\n        var totalWidth = 0;\r\n        var firstOfRow = {\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        var maxHeight = 0;\r\n        for (var i = 0; i < numberOfItems; i++) {\r\n            var size = cacheMeasure[i] || transformSize(estimateSize(i));\r\n            var start_1 = ZERO_OFFSET;\r\n            if (i === 0) {\r\n                totalWidth = size.width;\r\n                firstOfRow = {\r\n                    left: 0,\r\n                    top: 0,\r\n                };\r\n                maxHeight = size.height;\r\n            }\r\n            else {\r\n                switch (scrollMode) {\r\n                    case exports.ScrollMode.Wrapped:\r\n                        totalWidth += size.width;\r\n                        if (totalWidth < parentRect.width) {\r\n                            start_1 = {\r\n                                left: measurements[i - 1].end.left,\r\n                                top: firstOfRow.top,\r\n                            };\r\n                            maxHeight = Math.max(maxHeight, size.height);\r\n                        }\r\n                        else {\r\n                            totalWidth = size.width;\r\n                            start_1 = {\r\n                                left: firstOfRow.left,\r\n                                top: firstOfRow.top + maxHeight,\r\n                            };\r\n                            firstOfRow = {\r\n                                left: start_1.left,\r\n                                top: start_1.top,\r\n                            };\r\n                            maxHeight = size.height;\r\n                        }\r\n                        break;\r\n                    case exports.ScrollMode.Horizontal:\r\n                    case exports.ScrollMode.Vertical:\r\n                    default:\r\n                        start_1 = measurements[i - 1].end;\r\n                        break;\r\n                }\r\n            }\r\n            var end_1 = {\r\n                left: start_1.left + size.width,\r\n                top: start_1.top + size.height,\r\n            };\r\n            measurements[i] = {\r\n                index: i,\r\n                start: start_1,\r\n                size: size,\r\n                end: end_1,\r\n                visibility: -1,\r\n            };\r\n        }\r\n        return measurements;\r\n    }, [estimateSize, scrollMode, parentRect, cacheMeasure, transformSize]);\r\n    var totalSize = measurements[numberOfItems - 1]\r\n        ? {\r\n            height: measurements[numberOfItems - 1].end.top,\r\n            width: measurements[numberOfItems - 1].end.left,\r\n        }\r\n        : ZERO_RECT;\r\n    latestRef.current.measurements = measurements;\r\n    latestRef.current.totalSize = totalSize;\r\n    var _d = calculateRange(scrollMode, latestRef.current.measurements, latestRef.current.parentRect, latestRef.current.scrollOffset), maxVisbilityIndex = _d.maxVisbilityIndex, visibilities = _d.visibilities, start = _d.start, end = _d.end;\r\n    var startRange = setStartRange(start);\r\n    var endRange = setEndRange(end);\r\n    var virtualItems = React__namespace.useMemo(function () {\r\n        var virtualItems = [];\r\n        var _loop_1 = function (i) {\r\n            var item = measurements[i];\r\n            var virtualItem = __assign(__assign({}, item), { visibility: visibilities[i] !== undefined ? visibilities[i] : -1, measureRef: function (ele) {\r\n                    if (!ele) {\r\n                        return;\r\n                    }\r\n                    var rect = ele.getBoundingClientRect();\r\n                    if (rect.height === 0 && rect.width === 0) {\r\n                        return;\r\n                    }\r\n                    var measuredSize = transformSize({\r\n                        height: rect.height,\r\n                        width: rect.width,\r\n                    });\r\n                    if (measuredSize.height !== item.size.height || measuredSize.width !== item.size.width) {\r\n                        setCacheMeasure(function (old) {\r\n                            var _a;\r\n                            return (__assign(__assign({}, old), (_a = {}, _a[i] = measuredSize, _a)));\r\n                        });\r\n                    }\r\n                } });\r\n            virtualItems.push(virtualItem);\r\n        };\r\n        for (var i = startRange; i <= endRange; i++) {\r\n            _loop_1(i);\r\n        }\r\n        return virtualItems;\r\n    }, [transformSize, visibilities, measurements]);\r\n    var scrollToItem = React__namespace.useCallback(function (index, offset) {\r\n        var measurements = latestRef.current.measurements;\r\n        var measurement = measurements[clamp(0, numberOfItems - 1, index)];\r\n        if (measurement) {\r\n            scrollTo({\r\n                left: offset.left + measurement.start.left,\r\n                top: offset.top + measurement.start.top,\r\n            });\r\n        }\r\n    }, [scrollTo]);\r\n    var getContainerStyles = React__namespace.useCallback(function () {\r\n        switch (scrollMode) {\r\n            case exports.ScrollMode.Horizontal:\r\n                return {\r\n                    position: 'relative',\r\n                    height: '100%',\r\n                    width: \"\".concat(totalSize.width, \"px\"),\r\n                };\r\n            case exports.ScrollMode.Vertical:\r\n            default:\r\n                return {\r\n                    position: 'relative',\r\n                    height: \"\".concat(totalSize.height, \"px\"),\r\n                    width: '100%',\r\n                };\r\n        }\r\n    }, [scrollMode, totalSize]);\r\n    var getItemStyles = React__namespace.useCallback(function (item) {\r\n        var _a, _b, _c;\r\n        var sideProperty = isRtl ? 'right' : 'left';\r\n        var factor = isRtl ? -1 : 1;\r\n        switch (scrollMode) {\r\n            case exports.ScrollMode.Horizontal:\r\n                return _a = {\r\n                        height: '100%',\r\n                        width: \"\".concat(item.size.width, \"px\")\r\n                    },\r\n                    _a[sideProperty] = 0,\r\n                    _a.position = 'absolute',\r\n                    _a.top = 0,\r\n                    _a.transform = \"translateX(\".concat(item.start.left * factor, \"px)\"),\r\n                    _a;\r\n            case exports.ScrollMode.Wrapped:\r\n                return _b = {\r\n                        height: \"\".concat(item.size.height, \"px\"),\r\n                        width: \"\".concat(item.size.width, \"px\")\r\n                    },\r\n                    _b[sideProperty] = 0,\r\n                    _b.position = 'absolute',\r\n                    _b.top = 0,\r\n                    _b.transform = \"translate(\".concat(item.start.left * factor, \"px, \").concat(item.start.top, \"px)\"),\r\n                    _b;\r\n            case exports.ScrollMode.Vertical:\r\n            default:\r\n                return _c = {\r\n                        height: \"\".concat(item.size.height, \"px\"),\r\n                        width: '100%'\r\n                    },\r\n                    _c[sideProperty] = 0,\r\n                    _c.position = 'absolute',\r\n                    _c.top = 0,\r\n                    _c.transform = \"translateY(\".concat(item.start.top, \"px)\"),\r\n                    _c;\r\n        }\r\n    }, [isRtl, scrollMode]);\r\n    return {\r\n        startIndex: start,\r\n        startRange: startRange,\r\n        endIndex: end,\r\n        endRange: endRange,\r\n        maxVisbilityIndex: maxVisbilityIndex,\r\n        getContainerStyles: getContainerStyles,\r\n        getItemStyles: getItemStyles,\r\n        scrollToItem: scrollToItem,\r\n        virtualItems: virtualItems,\r\n    };\r\n};\r\n\r\nvar AnnotationBorderStyleType;\r\n(function (AnnotationBorderStyleType) {\r\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\r\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\r\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\r\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\r\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\r\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\r\n\r\nvar dateRegex = new RegExp('^D:' +\r\n    '(\\\\d{4})' +\r\n    '(\\\\d{2})?' +\r\n    '(\\\\d{2})?' +\r\n    '(\\\\d{2})?' +\r\n    '(\\\\d{2})?' +\r\n    '(\\\\d{2})?' +\r\n    '([Z|+|-])?' +\r\n    '(\\\\d{2})?' +\r\n    \"'?\" +\r\n    '(\\\\d{2})?' +\r\n    \"'?\");\r\nvar parse = function (value, min, max, defaultValue) {\r\n    var parsed = parseInt(value, 10);\r\n    return parsed >= min && parsed <= max ? parsed : defaultValue;\r\n};\r\nvar convertDate = function (input) {\r\n    var matches = dateRegex.exec(input);\r\n    if (!matches) {\r\n        return null;\r\n    }\r\n    var year = parseInt(matches[1], 10);\r\n    var month = parse(matches[2], 1, 12, 1) - 1;\r\n    var day = parse(matches[3], 1, 31, 1);\r\n    var hour = parse(matches[4], 0, 23, 0);\r\n    var minute = parse(matches[5], 0, 59, 0);\r\n    var second = parse(matches[6], 0, 59, 0);\r\n    var universalTimeRelation = matches[7] || 'Z';\r\n    var offsetHour = parse(matches[8], 0, 23, 0);\r\n    var offsetMinute = parse(matches[9], 0, 59, 0);\r\n    switch (universalTimeRelation) {\r\n        case '-':\r\n            hour += offsetHour;\r\n            minute += offsetMinute;\r\n            break;\r\n        case '+':\r\n            hour -= offsetHour;\r\n            minute -= offsetMinute;\r\n            break;\r\n    }\r\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\r\n};\r\n\r\nvar PopupWrapper = function (_a) {\r\n    var annotation = _a.annotation;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var containerRef = React__namespace.useRef();\r\n    var dateStr = '';\r\n    if (annotation.modificationDate) {\r\n        var date = convertDate(annotation.modificationDate);\r\n        dateStr = date ? \"\".concat(date.toLocaleDateString(), \", \").concat(date.toLocaleTimeString()) : '';\r\n    }\r\n    React__namespace.useLayoutEffect(function () {\r\n        var containerEle = containerRef.current;\r\n        if (!containerEle) {\r\n            return;\r\n        }\r\n        var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\r\n        if (!annotationEle) {\r\n            return;\r\n        }\r\n        var ele = annotationEle;\r\n        ele.style.zIndex += 1;\r\n        return function () {\r\n            ele.style.zIndex = \"\".concat(parseInt(ele.style.zIndex, 10) - 1);\r\n        };\r\n    }, []);\r\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: classNames({\r\n            'rpv-core__annotation-popup-wrapper': true,\r\n            'rpv-core__annotation-popup-wrapper--rtl': isRtl,\r\n        }), style: {\r\n            top: annotation.annotationType === exports.AnnotationType.Popup ? '' : '100%',\r\n        } },\r\n        annotation.title && (React__namespace.createElement(React__namespace.Fragment, null,\r\n            React__namespace.createElement(\"div\", { className: classNames({\r\n                    'rpv-core__annotation-popup-title': true,\r\n                    'rpv-core__annotation-popup-title--ltr': !isRtl,\r\n                    'rpv-core__annotation-popup-title--rtl': isRtl,\r\n                }) }, annotation.title),\r\n            React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-date\" }, dateStr))),\r\n        annotation.contents && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-content\" }, annotation.contents.split('\\n').map(function (item, index) { return (React__namespace.createElement(React__namespace.Fragment, { key: index },\r\n            item,\r\n            React__namespace.createElement(\"br\", null))); })))));\r\n};\r\n\r\nvar TogglePopupBy;\r\n(function (TogglePopupBy) {\r\n    TogglePopupBy[\"Click\"] = \"Click\";\r\n    TogglePopupBy[\"Hover\"] = \"Hover\";\r\n})(TogglePopupBy || (TogglePopupBy = {}));\r\nvar useTogglePopup = function () {\r\n    var _a = useToggle(false), opened = _a.opened, toggle = _a.toggle;\r\n    var _b = React__namespace.useState(TogglePopupBy.Hover), togglePopupBy = _b[0], setTooglePopupBy = _b[1];\r\n    var toggleOnClick = function () {\r\n        switch (togglePopupBy) {\r\n            case TogglePopupBy.Click:\r\n                opened && setTooglePopupBy(TogglePopupBy.Hover);\r\n                toggle(exports.ToggleStatus.Toggle);\r\n                break;\r\n            case TogglePopupBy.Hover:\r\n                setTooglePopupBy(TogglePopupBy.Click);\r\n                toggle(exports.ToggleStatus.Open);\r\n                break;\r\n        }\r\n    };\r\n    var openOnHover = function () {\r\n        togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Open);\r\n    };\r\n    var closeOnHover = function () {\r\n        togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Close);\r\n    };\r\n    return {\r\n        opened: opened,\r\n        closeOnHover: closeOnHover,\r\n        openOnHover: openOnHover,\r\n        toggleOnClick: toggleOnClick,\r\n    };\r\n};\r\n\r\nvar Annotation = function (_a) {\r\n    var annotation = _a.annotation, children = _a.children, ignoreBorder = _a.ignoreBorder, hasPopup = _a.hasPopup, isRenderable = _a.isRenderable, page = _a.page, viewport = _a.viewport;\r\n    var rect = annotation.rect;\r\n    var _b = useTogglePopup(), closeOnHover = _b.closeOnHover, opened = _b.opened, openOnHover = _b.openOnHover, toggleOnClick = _b.toggleOnClick;\r\n    var normalizeRect = function (r) { return [\r\n        Math.min(r[0], r[2]),\r\n        Math.min(r[1], r[3]),\r\n        Math.max(r[0], r[2]),\r\n        Math.max(r[1], r[3]),\r\n    ]; };\r\n    var bound = normalizeRect([\r\n        rect[0],\r\n        page.view[3] + page.view[1] - rect[1],\r\n        rect[2],\r\n        page.view[3] + page.view[1] - rect[3],\r\n    ]);\r\n    var width = rect[2] - rect[0];\r\n    var height = rect[3] - rect[1];\r\n    var styles = {\r\n        borderColor: '',\r\n        borderRadius: '',\r\n        borderStyle: '',\r\n        borderWidth: '',\r\n    };\r\n    if (!ignoreBorder && annotation.borderStyle.width > 0) {\r\n        switch (annotation.borderStyle.style) {\r\n            case AnnotationBorderStyleType.Dashed:\r\n                styles.borderStyle = 'dashed';\r\n                break;\r\n            case AnnotationBorderStyleType.Solid:\r\n                styles.borderStyle = 'solid';\r\n                break;\r\n            case AnnotationBorderStyleType.Underline:\r\n                styles = Object.assign({\r\n                    borderBottomStyle: 'solid',\r\n                }, styles);\r\n                break;\r\n            case AnnotationBorderStyleType.Beveled:\r\n            case AnnotationBorderStyleType.Inset:\r\n        }\r\n        var borderWidth = annotation.borderStyle.width;\r\n        styles.borderWidth = \"\".concat(borderWidth, \"px\");\r\n        if (annotation.borderStyle.style !== AnnotationBorderStyleType.Underline) {\r\n            width = width - 2 * borderWidth;\r\n            height = height - 2 * borderWidth;\r\n        }\r\n        var _c = annotation.borderStyle, horizontalCornerRadius = _c.horizontalCornerRadius, verticalCornerRadius = _c.verticalCornerRadius;\r\n        if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\r\n            styles.borderRadius = \"\".concat(horizontalCornerRadius, \"px / \").concat(verticalCornerRadius, \"px\");\r\n        }\r\n        annotation.color\r\n            ? (styles.borderColor = \"rgb(\".concat(annotation.color[0] | 0, \", \").concat(annotation.color[1] | 0, \", \").concat(annotation.color[2] | 0, \")\"))\r\n            :\r\n                (styles.borderWidth = '0');\r\n    }\r\n    return (React__namespace.createElement(React__namespace.Fragment, null, isRenderable &&\r\n        children({\r\n            popup: {\r\n                opened: opened,\r\n                closeOnHover: closeOnHover,\r\n                openOnHover: openOnHover,\r\n                toggleOnClick: toggleOnClick,\r\n            },\r\n            slot: {\r\n                attrs: {\r\n                    style: Object.assign({\r\n                        height: \"\".concat(height, \"px\"),\r\n                        left: \"\".concat(bound[0], \"px\"),\r\n                        top: \"\".concat(bound[1], \"px\"),\r\n                        transform: \"matrix(\".concat(viewport.transform.join(','), \")\"),\r\n                        transformOrigin: \"-\".concat(bound[0], \"px -\").concat(bound[1], \"px\"),\r\n                        width: \"\".concat(width, \"px\"),\r\n                    }, styles),\r\n                },\r\n                children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, { annotation: annotation })),\r\n            },\r\n        })));\r\n};\r\n\r\nvar Caret = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--caret\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\r\n};\r\n\r\nvar Circle = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    var rect = annotation.rect;\r\n    var width = rect[2] - rect[0];\r\n    var height = rect[3] - rect[1];\r\n    var borderWidth = annotation.borderStyle.width;\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--circle\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\r\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\r\n            React__namespace.createElement(\"circle\", { cy: height / 2, fill: \"none\", rx: width / 2 - borderWidth / 2, ry: height / 2 - borderWidth / 2, stroke: \"transparent\", strokeWidth: borderWidth || 1 })),\r\n        props.slot.children)); }));\r\n};\r\n\r\nvar getFileName = function (url) {\r\n    var str = url.split('/').pop();\r\n    return str ? str.split('#')[0].split('?')[0] : url;\r\n};\r\n\r\nvar downloadFile = function (url, data) {\r\n    var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], { type: '' }));\r\n    var link = document.createElement('a');\r\n    link.style.display = 'none';\r\n    link.href = blobUrl || url;\r\n    link.setAttribute('download', getFileName(url));\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    if (blobUrl) {\r\n        URL.revokeObjectURL(blobUrl);\r\n    }\r\n};\r\n\r\nvar FileAttachment = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\r\n    var doubleClick = function () {\r\n        var file = annotation.file;\r\n        file && downloadFile(file.filename, file.content);\r\n    };\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: true, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--file-attachment\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onDoubleClick: doubleClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\r\n};\r\n\r\nvar FreeText = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--free-text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\r\n};\r\n\r\nvar Popup = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var isRenderable = !!(annotation.title || annotation.contents);\r\n    var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\r\n    var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\r\n    useIsomorphicLayoutEffect(function () {\r\n        if (!annotation.parentId) {\r\n            return;\r\n        }\r\n        var parent = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.parentId, \"\\\"]\"));\r\n        var container = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\r\n        if (!parent || !container) {\r\n            return;\r\n        }\r\n        var left = parseFloat(parent.style.left);\r\n        var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\r\n        container.style.left = \"\".concat(left, \"px\");\r\n        container.style.top = \"\".concat(top, \"px\");\r\n        container.style.transformOrigin = \"-\".concat(left, \"px -\").concat(top, \"px\");\r\n    }, []);\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--popup\", \"data-annotation-id\": annotation.id }),\r\n        React__namespace.createElement(PopupWrapper, { annotation: annotation }))); }));\r\n};\r\n\r\nvar Highlight = function (_a) {\r\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\r\n    if (hasQuadPoints) {\r\n        var annotations = annotation.quadPoints.map(function (quadPoint) {\r\n            return Object.assign({}, annotation, {\r\n                rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\r\n                quadPoints: [],\r\n            });\r\n        });\r\n        return (React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) { return (React__namespace.createElement(Highlight, { key: index, annotation: ann, childAnnotation: childAnnotation, page: page, viewport: viewport })); })));\r\n    }\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\r\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--highlight\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children),\r\n        childAnnotation &&\r\n            childAnnotation.annotationType === exports.AnnotationType.Popup &&\r\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\r\n};\r\n\r\nvar Ink = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    var rect = annotation.rect;\r\n    var width = rect[2] - rect[0];\r\n    var height = rect[3] - rect[1];\r\n    var borderWidth = annotation.borderStyle.width;\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--ink\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\r\n        annotation.inkLists && annotation.inkLists.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") }, annotation.inkLists.map(function (inkList, index) { return (React__namespace.createElement(\"polyline\", { key: index, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: inkList.map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); }).join(' ') })); }))),\r\n        props.slot.children)); }));\r\n};\r\n\r\nvar Line = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    var rect = annotation.rect;\r\n    var width = rect[2] - rect[0];\r\n    var height = rect[3] - rect[1];\r\n    var borderWidth = annotation.borderStyle.width;\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--line\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\r\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\r\n            React__namespace.createElement(\"line\", { stroke: \"transparent\", strokeWidth: borderWidth || 1, x1: rect[2] - annotation.lineCoordinates[0], x2: rect[2] - annotation.lineCoordinates[2], y1: rect[3] - annotation.lineCoordinates[1], y2: rect[3] - annotation.lineCoordinates[3] })),\r\n        props.slot.children)); }));\r\n};\r\n\r\nvar normalizeDestination = function (pageIndex, destArray) {\r\n    switch (destArray[1].name) {\r\n        case 'XYZ':\r\n            return {\r\n                bottomOffset: destArray[3],\r\n                leftOffset: destArray[2] || 0,\r\n                pageIndex: pageIndex,\r\n                scaleTo: destArray[4],\r\n            };\r\n        case 'Fit':\r\n        case 'FitB':\r\n            return {\r\n                bottomOffset: 0,\r\n                leftOffset: 0,\r\n                pageIndex: pageIndex,\r\n                scaleTo: exports.SpecialZoomLevel.PageFit,\r\n            };\r\n        case 'FitH':\r\n        case 'FitBH':\r\n            return {\r\n                bottomOffset: destArray[2],\r\n                leftOffset: 0,\r\n                pageIndex: pageIndex,\r\n                scaleTo: exports.SpecialZoomLevel.PageWidth,\r\n            };\r\n        default:\r\n            return {\r\n                bottomOffset: 0,\r\n                leftOffset: 0,\r\n                pageIndex: pageIndex,\r\n                scaleTo: 1,\r\n            };\r\n    }\r\n};\r\nvar pageOutlinesMap = new Map();\r\nvar pagesMap = new Map();\r\nvar generateRefKey = function (doc, outline) {\r\n    return \"\".concat(doc.loadingTask.docId, \"___\").concat(outline.num, \"R\").concat(outline.gen === 0 ? '' : outline.gen);\r\n};\r\nvar getPageIndex = function (doc, outline) {\r\n    return pageOutlinesMap.get(generateRefKey(doc, outline)) || null;\r\n};\r\nvar cacheOutlineRef = function (doc, outline, pageIndex) {\r\n    pageOutlinesMap.set(generateRefKey(doc, outline), pageIndex);\r\n};\r\nvar clearPagesCache = function () {\r\n    pageOutlinesMap.clear();\r\n    pagesMap.clear();\r\n};\r\nvar getPage = function (doc, pageIndex) {\r\n    if (!doc) {\r\n        return Promise.reject('The document is not loaded yet');\r\n    }\r\n    var pageKey = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\r\n    var page = pagesMap.get(pageKey);\r\n    if (page) {\r\n        return Promise.resolve(page);\r\n    }\r\n    return new Promise(function (resolve, _) {\r\n        doc.getPage(pageIndex + 1).then(function (page) {\r\n            pagesMap.set(pageKey, page);\r\n            if (page.ref) {\r\n                cacheOutlineRef(doc, page.ref, pageIndex);\r\n            }\r\n            resolve(page);\r\n        });\r\n    });\r\n};\r\nvar getDestination = function (doc, dest) {\r\n    return new Promise(function (res) {\r\n        new Promise(function (resolve) {\r\n            if (typeof dest === 'string') {\r\n                doc.getDestination(dest).then(function (destArray) {\r\n                    resolve(destArray);\r\n                });\r\n            }\r\n            else {\r\n                resolve(dest);\r\n            }\r\n        }).then(function (destArray) {\r\n            if ('object' === typeof destArray[0] && destArray[0] !== null) {\r\n                var outlineRef_1 = destArray[0];\r\n                var pageIndex = getPageIndex(doc, outlineRef_1);\r\n                if (pageIndex === null) {\r\n                    doc.getPageIndex(outlineRef_1).then(function (pageIndex) {\r\n                        cacheOutlineRef(doc, outlineRef_1, pageIndex);\r\n                        getDestination(doc, dest).then(function (result) { return res(result); });\r\n                    });\r\n                }\r\n                else {\r\n                    res(normalizeDestination(pageIndex, destArray));\r\n                }\r\n            }\r\n            else {\r\n                var target = normalizeDestination(destArray[0], destArray);\r\n                res(target);\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\nvar Link = function (_a) {\r\n    var annotation = _a.annotation, doc = _a.doc, page = _a.page, viewport = _a.viewport, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\r\n    var link = function (e) {\r\n        e.preventDefault();\r\n        annotation.action\r\n            ? onExecuteNamedAction(annotation.action)\r\n            : getDestination(doc, annotation.dest).then(function (target) {\r\n                var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, leftOffset = target.leftOffset, scaleTo = target.scaleTo;\r\n                onJumpToDest(pageIndex, bottomOffset, leftOffset, scaleTo);\r\n            });\r\n    };\r\n    var isRenderable = !!(annotation.url || annotation.dest || annotation.action || annotation.unsafeUrl);\r\n    var externalUrl = annotation.url || annotation.unsafeUrl;\r\n    var attrs = externalUrl\r\n        ? {\r\n            'data-target': 'external',\r\n            href: externalUrl,\r\n            rel: 'noopener noreferrer nofollow',\r\n            target: annotation.newWindow ? '_blank' : '',\r\n            title: externalUrl,\r\n        }\r\n        : {\r\n            href: '',\r\n            'data-annotation-link-dest': annotation.dest,\r\n            onClick: link,\r\n        };\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: false, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--link\", \"data-annotation-id\": annotation.id, \"data-testid\": \"core__annotation--link-\".concat(annotation.id) }),\r\n        React__namespace.createElement(\"a\", __assign({}, attrs)))); }));\r\n};\r\n\r\nvar Polygon = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    var rect = annotation.rect;\r\n    var width = rect[2] - rect[0];\r\n    var height = rect[3] - rect[1];\r\n    var borderWidth = annotation.borderStyle.width;\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polygon\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\r\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\r\n            React__namespace.createElement(\"polygon\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\r\n                    .map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); })\r\n                    .join(' ') }))),\r\n        props.slot.children)); }));\r\n};\r\n\r\nvar Polyline = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    var rect = annotation.rect;\r\n    var width = rect[2] - rect[0];\r\n    var height = rect[3] - rect[1];\r\n    var borderWidth = annotation.borderStyle.width;\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polyline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\r\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\r\n            React__namespace.createElement(\"polyline\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\r\n                    .map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); })\r\n                    .join(' ') }))),\r\n        props.slot.children)); }));\r\n};\r\n\r\nvar Square = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    var rect = annotation.rect;\r\n    var width = rect[2] - rect[0];\r\n    var height = rect[3] - rect[1];\r\n    var borderWidth = annotation.borderStyle.width;\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--square\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\r\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\r\n            React__namespace.createElement(\"rect\", { height: height - borderWidth, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, x: borderWidth / 2, y: borderWidth / 2, width: width - borderWidth })),\r\n        props.slot.children)); }));\r\n};\r\n\r\nvar Squiggly = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--squiggly\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\r\n};\r\n\r\nvar Stamp = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--stamp\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\r\n};\r\n\r\nvar StrikeOut = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--strike-out\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\r\n};\r\n\r\nvar CommentIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\r\n    React__namespace.createElement(\"path\", { d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\" }))); };\r\n\r\nvar HelpIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\r\n    React__namespace.createElement(\"path\", { d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M21.423 5.406L17.415 9.414\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M14.587 6.585L18.607 2.565\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M5.405 21.424L9.413 17.416\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M6.585 14.588L2.577 18.596\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M18.602 21.419L14.595 17.412\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M17.419 14.58L21.428 18.589\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M2.582 5.399L6.588 9.406\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M9.421 6.581L5.412 2.572\" }))); };\r\n\r\nvar KeyIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\r\n    React__namespace.createElement(\"path\", { d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\" }))); };\r\n\r\nvar NoteIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\r\n    React__namespace.createElement(\"path\", { d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M6 4.5L6 0.5\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M18 4.5L18 0.5\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M10 4.5L10 0.5\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M14 4.5L14 0.5\" }))); };\r\n\r\nvar ParagraphIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\r\n    React__namespace.createElement(\"path\", { d: \"M17.5 0.498L17.5 23.498\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M10.5 0.498L10.5 23.498\" }),\r\n    React__namespace.createElement(\"path\", { d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\" }))); };\r\n\r\nvar TriangleIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\r\n    React__namespace.createElement(\"path\", { d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\" }))); };\r\n\r\nvar Text = function (_a) {\r\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    var name = annotation.name ? annotation.name.toLowerCase() : '';\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\r\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\r\n            name && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-text-icon\" },\r\n                name === 'check' && React__namespace.createElement(CheckIcon, null),\r\n                name === 'comment' && React__namespace.createElement(CommentIcon, null),\r\n                name === 'help' && React__namespace.createElement(HelpIcon, null),\r\n                name === 'insert' && React__namespace.createElement(TriangleIcon, null),\r\n                name === 'key' && React__namespace.createElement(KeyIcon, null),\r\n                name === 'note' && React__namespace.createElement(NoteIcon, null),\r\n                (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null))),\r\n            props.slot.children),\r\n        childAnnotation &&\r\n            childAnnotation.annotationType === exports.AnnotationType.Popup &&\r\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\r\n};\r\n\r\nvar Underline = function (_a) {\r\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\r\n    var hasPopup = annotation.hasPopup === false;\r\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\r\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--underline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\r\n};\r\n\r\nvar AnnotationLayerBody = function (_a) {\r\n    var annotations = _a.annotations, containerRef = _a.containerRef, doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\r\n    var viewport = page.getViewport({ rotation: rotation, scale: scale });\r\n    var clonedViewPort = viewport.clone({ dontFlip: true });\r\n    var filterAnnotations = annotations.filter(function (annotation) { return !annotation.parentId; });\r\n    React__namespace.useEffect(function () {\r\n        var container = containerRef.current;\r\n        if (!container) {\r\n            return;\r\n        }\r\n        plugins.forEach(function (plugin) {\r\n            if (plugin.onAnnotationLayerRender) {\r\n                plugin.onAnnotationLayerRender({\r\n                    annotations: filterAnnotations,\r\n                    container: container,\r\n                    pageIndex: pageIndex,\r\n                    rotation: rotation,\r\n                    scale: scale,\r\n                });\r\n            }\r\n        });\r\n    }, []);\r\n    return (React__namespace.createElement(React__namespace.Fragment, null, filterAnnotations.map(function (annotation) {\r\n        var childAnnotation = annotations.find(function (item) { return item.parentId === annotation.id; });\r\n        switch (annotation.annotationType) {\r\n            case exports.AnnotationType.Caret:\r\n                return (React__namespace.createElement(Caret, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Circle:\r\n                return (React__namespace.createElement(Circle, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.FileAttachment:\r\n                return (React__namespace.createElement(FileAttachment, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.FreeText:\r\n                return (React__namespace.createElement(FreeText, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Highlight:\r\n                return (React__namespace.createElement(Highlight, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Ink:\r\n                return (React__namespace.createElement(Ink, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Line:\r\n                return (React__namespace.createElement(Line, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Link:\r\n                return (React__namespace.createElement(Link, { key: annotation.id, annotation: annotation, doc: doc, page: page, viewport: clonedViewPort, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\r\n            case exports.AnnotationType.Polygon:\r\n                return (React__namespace.createElement(Polygon, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Polyline:\r\n                return (React__namespace.createElement(Polyline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Popup:\r\n                return (React__namespace.createElement(Popup, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Square:\r\n                return (React__namespace.createElement(Square, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Squiggly:\r\n                return (React__namespace.createElement(Squiggly, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Stamp:\r\n                return (React__namespace.createElement(Stamp, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.StrikeOut:\r\n                return (React__namespace.createElement(StrikeOut, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Text:\r\n                return (React__namespace.createElement(Text, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\r\n            case exports.AnnotationType.Underline:\r\n                return (React__namespace.createElement(Underline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\r\n            default:\r\n                return React__namespace.createElement(React__namespace.Fragment, { key: annotation.id });\r\n        }\r\n    })));\r\n};\r\n\r\nvar AnnotationLoader = function (_a) {\r\n    var page = _a.page, renderAnnotations = _a.renderAnnotations;\r\n    var isMounted = useIsMounted();\r\n    var _b = React__namespace.useState({\r\n        loading: true,\r\n        annotations: [],\r\n    }), status = _b[0], setStatus = _b[1];\r\n    React__namespace.useEffect(function () {\r\n        page.getAnnotations({ intent: 'display' }).then(function (result) {\r\n            if (isMounted.current) {\r\n                setStatus({\r\n                    loading: false,\r\n                    annotations: result,\r\n                });\r\n            }\r\n        });\r\n    }, []);\r\n    return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\r\n};\r\n\r\nvar AnnotationLayer = function (_a) {\r\n    var doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\r\n    var containerRef = React__namespace.useRef();\r\n    var renderAnnotations = function (annotations) {\r\n        return (React__namespace.createElement(AnnotationLayerBody, { annotations: annotations, containerRef: containerRef, doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotation, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\r\n    };\r\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__annotation-layer\" },\r\n        React__namespace.createElement(AnnotationLoader, { page: page, renderAnnotations: renderAnnotations })));\r\n};\r\n\r\nvar floatToRatio = function (x, limit) {\r\n    var _a, _b;\r\n    if (Math.floor(x) === x) {\r\n        return [x, 1];\r\n    }\r\n    var y = 1 / x;\r\n    if (y > limit) {\r\n        return [1, limit];\r\n    }\r\n    if (Math.floor(y) === y) {\r\n        return [1, y];\r\n    }\r\n    var value = x > 1 ? y : x;\r\n    var a = 0;\r\n    var b = 1;\r\n    var c = 1;\r\n    var d = 1;\r\n    while (true) {\r\n        var numerator = a + c;\r\n        var denominator = b + d;\r\n        if (denominator > limit) {\r\n            break;\r\n        }\r\n        value <= numerator / denominator ? (_a = [numerator, denominator], c = _a[0], d = _a[1], _a) : (_b = [numerator, denominator], a = _b[0], b = _b[1], _b);\r\n    }\r\n    var middle = (a / b + c / d) / 2;\r\n    return value < middle ? (value === x ? [a, b] : [b, a]) : value === x ? [c, d] : [d, c];\r\n};\r\n\r\nvar roundToDivide = function (a, b) {\r\n    var remainder = a % b;\r\n    return remainder === 0 ? a : Math.floor(a - remainder);\r\n};\r\n\r\nvar MAX_CANVAS_SIZE = 4096 * 4096;\r\nvar CanvasLayer = function (_a) {\r\n    var height = _a.height, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, width = _a.width, onRenderCanvasCompleted = _a.onRenderCanvasCompleted;\r\n    var canvasRef = React__namespace.useRef();\r\n    var renderTask = React__namespace.useRef();\r\n    useIsomorphicLayoutEffect(function () {\r\n        var task = renderTask.current;\r\n        if (task) {\r\n            task.cancel();\r\n        }\r\n        var canvasEle = canvasRef.current;\r\n        plugins.forEach(function (plugin) {\r\n            if (plugin.onCanvasLayerRender) {\r\n                plugin.onCanvasLayerRender({\r\n                    ele: canvasEle,\r\n                    pageIndex: pageIndex,\r\n                    rotation: rotation,\r\n                    scale: scale,\r\n                    status: exports.LayerRenderStatus.PreRender,\r\n                });\r\n            }\r\n        });\r\n        var viewport = page.getViewport({\r\n            rotation: rotation,\r\n            scale: scale,\r\n        });\r\n        var outputScale = window.devicePixelRatio || 1;\r\n        var maxScale = Math.sqrt(MAX_CANVAS_SIZE / (viewport.width * viewport.height));\r\n        var shouldScaleByCSS = outputScale > maxScale;\r\n        shouldScaleByCSS ? (canvasEle.style.transform = \"scale(1, 1)\") : canvasEle.style.removeProperty('transform');\r\n        var possibleScale = Math.min(maxScale, outputScale);\r\n        var _a = floatToRatio(possibleScale, 8), x = _a[0], y = _a[1];\r\n        canvasEle.width = roundToDivide(viewport.width * possibleScale, x);\r\n        canvasEle.height = roundToDivide(viewport.height * possibleScale, x);\r\n        canvasEle.style.width = \"\".concat(roundToDivide(viewport.width, y), \"px\");\r\n        canvasEle.style.height = \"\".concat(roundToDivide(viewport.height, y), \"px\");\r\n        canvasEle.hidden = true;\r\n        var canvasContext = canvasEle.getContext('2d', { alpha: false });\r\n        var transform = shouldScaleByCSS || outputScale !== 1 ? [possibleScale, 0, 0, possibleScale, 0, 0] : null;\r\n        renderTask.current = page.render({ canvasContext: canvasContext, transform: transform, viewport: viewport });\r\n        renderTask.current.promise.then(function () {\r\n            canvasEle.hidden = false;\r\n            plugins.forEach(function (plugin) {\r\n                if (plugin.onCanvasLayerRender) {\r\n                    plugin.onCanvasLayerRender({\r\n                        ele: canvasEle,\r\n                        pageIndex: pageIndex,\r\n                        rotation: rotation,\r\n                        scale: scale,\r\n                        status: exports.LayerRenderStatus.DidRender,\r\n                    });\r\n                }\r\n            });\r\n            onRenderCanvasCompleted();\r\n        }, function () {\r\n            canvasEle.hidden = false;\r\n            onRenderCanvasCompleted();\r\n        });\r\n        return function () {\r\n            var _a;\r\n            (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\r\n            if (canvasEle) {\r\n                canvasEle.width = 0;\r\n                canvasEle.height = 0;\r\n            }\r\n        };\r\n    }, []);\r\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__canvas-layer\", style: {\r\n            height: \"\".concat(height, \"px\"),\r\n            width: \"\".concat(width, \"px\"),\r\n        } },\r\n        React__namespace.createElement(\"canvas\", { ref: canvasRef })));\r\n};\r\n\r\nvar SvgLayer = function (_a) {\r\n    var height = _a.height, page = _a.page, rotation = _a.rotation, scale = _a.scale, width = _a.width;\r\n    var containerRef = React__namespace.useRef();\r\n    var empty = function () {\r\n        var containerEle = containerRef.current;\r\n        if (!containerEle) {\r\n            return;\r\n        }\r\n        containerEle.innerHTML = '';\r\n    };\r\n    useIsomorphicLayoutEffect(function () {\r\n        var containerEle = containerRef.current;\r\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\r\n        page.getOperatorList().then(function (operatorList) {\r\n            empty();\r\n            var graphic = new PdfJsApi__namespace.SVGGraphics(page.commonObjs, page.objs);\r\n            graphic.getSVG(operatorList, viewport).then(function (svg) {\r\n                svg.style.height = \"\".concat(height, \"px\");\r\n                svg.style.width = \"\".concat(width, \"px\");\r\n                containerEle.appendChild(svg);\r\n            });\r\n        });\r\n    }, []);\r\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__svg-layer\", ref: containerRef });\r\n};\r\n\r\nvar TextLayer = function (_a) {\r\n    var page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onRenderTextCompleted = _a.onRenderTextCompleted;\r\n    var containerRef = React__namespace.useRef();\r\n    var renderTask = React__namespace.useRef();\r\n    var empty = function () {\r\n        var containerEle = containerRef.current;\r\n        if (!containerEle) {\r\n            return;\r\n        }\r\n        var spans = [].slice.call(containerEle.querySelectorAll('span.rpv-core__text-layer-text'));\r\n        spans.forEach(function (span) { return containerEle.removeChild(span); });\r\n        var breaks = [].slice.call(containerEle.querySelectorAll('br[role=\"presentation\"]'));\r\n        breaks.forEach(function (br) { return containerEle.removeChild(br); });\r\n    };\r\n    useIsomorphicLayoutEffect(function () {\r\n        var task = renderTask.current;\r\n        if (task) {\r\n            task.cancel();\r\n        }\r\n        var containerEle = containerRef.current;\r\n        if (!containerEle) {\r\n            return;\r\n        }\r\n        containerEle.removeAttribute('data-testid');\r\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\r\n        plugins.forEach(function (plugin) {\r\n            if (plugin.onTextLayerRender) {\r\n                plugin.onTextLayerRender({\r\n                    ele: containerEle,\r\n                    pageIndex: pageIndex,\r\n                    scale: scale,\r\n                    status: exports.LayerRenderStatus.PreRender,\r\n                });\r\n            }\r\n        });\r\n        page.getTextContent().then(function (textContent) {\r\n            empty();\r\n            renderTask.current = PdfJsApi__namespace.renderTextLayer({\r\n                container: containerEle,\r\n                textContent: textContent,\r\n                viewport: viewport,\r\n                enhanceTextSelection: true,\r\n            });\r\n            renderTask.current.promise.then(function () {\r\n                containerEle.setAttribute('data-testid', \"core__text-layer-\".concat(pageIndex));\r\n                var spans = [].slice.call(containerEle.children);\r\n                spans.forEach(function (span) { return span.classList.add('rpv-core__text-layer-text'); });\r\n                plugins.forEach(function (plugin) {\r\n                    if (plugin.onTextLayerRender) {\r\n                        plugin.onTextLayerRender({\r\n                            ele: containerEle,\r\n                            pageIndex: pageIndex,\r\n                            scale: scale,\r\n                            status: exports.LayerRenderStatus.DidRender,\r\n                        });\r\n                    }\r\n                });\r\n                onRenderTextCompleted();\r\n            }, function () {\r\n                containerEle.removeAttribute('data-testid');\r\n                onRenderTextCompleted();\r\n            });\r\n        });\r\n        return function () {\r\n            var _a;\r\n            (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\r\n        };\r\n    }, []);\r\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__text-layer\", ref: containerRef });\r\n};\r\n\r\nvar PageLayer = function (_a) {\r\n    var doc = _a.doc, height = _a.height, measureRef = _a.measureRef, pageIndex = _a.pageIndex, pageRotation = _a.pageRotation, plugins = _a.plugins, renderPage = _a.renderPage, rotation = _a.rotation, scale = _a.scale, shouldRender = _a.shouldRender, width = _a.width, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest, onRenderCompleted = _a.onRenderCompleted, onRotatePage = _a.onRotatePage;\r\n    var isMounted = useIsMounted();\r\n    var _b = React__namespace.useState({\r\n        page: null,\r\n        pageHeight: height,\r\n        pageWidth: width,\r\n        viewportRotation: 0,\r\n    }), pageSize = _b[0], setPageSize = _b[1];\r\n    var _c = React__namespace.useState(false), canvasLayerRendered = _c[0], setCanvasLayerRendered = _c[1];\r\n    var _d = React__namespace.useState(false), textLayerRendered = _d[0], setTextLayerRendered = _d[1];\r\n    var page = pageSize.page, pageHeight = pageSize.pageHeight, pageWidth = pageSize.pageWidth;\r\n    var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\r\n    var scaledWidth = pageWidth * scale;\r\n    var scaledHeight = pageHeight * scale;\r\n    var w = isVertical ? scaledWidth : scaledHeight;\r\n    var h = isVertical ? scaledHeight : scaledWidth;\r\n    var rotationValue = (pageSize.viewportRotation + rotation + pageRotation) % 360;\r\n    var determinePageSize = function () {\r\n        getPage(doc, pageIndex).then(function (pdfPage) {\r\n            var viewport = pdfPage.getViewport({ scale: 1 });\r\n            isMounted.current &&\r\n                setPageSize({\r\n                    page: pdfPage,\r\n                    pageHeight: viewport.height,\r\n                    pageWidth: viewport.width,\r\n                    viewportRotation: viewport.rotation,\r\n                });\r\n        });\r\n    };\r\n    var defaultPageRenderer = function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\r\n        props.canvasLayer.children,\r\n        props.textLayer.children,\r\n        props.annotationLayer.children)); };\r\n    var renderPageLayer = renderPage || defaultPageRenderer;\r\n    var handleRenderCanvasCompleted = function () {\r\n        if (isMounted.current) {\r\n            setCanvasLayerRendered(true);\r\n        }\r\n    };\r\n    var handleRenderTextCompleted = function () {\r\n        if (isMounted.current) {\r\n            setTextLayerRendered(true);\r\n        }\r\n    };\r\n    React__namespace.useEffect(function () {\r\n        setPageSize({\r\n            page: null,\r\n            pageHeight: height,\r\n            pageWidth: width,\r\n            viewportRotation: 0,\r\n        });\r\n        setCanvasLayerRendered(false);\r\n        setTextLayerRendered(false);\r\n    }, [pageRotation, rotation, scale]);\r\n    React__namespace.useEffect(function () {\r\n        if (shouldRender && isMounted.current && !page) {\r\n            determinePageSize();\r\n        }\r\n    }, [shouldRender, page]);\r\n    React__namespace.useEffect(function () {\r\n        if (canvasLayerRendered && textLayerRendered) {\r\n            onRenderCompleted(pageIndex);\r\n        }\r\n    }, [canvasLayerRendered, textLayerRendered]);\r\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__page-layer\", \"data-testid\": \"core__page-layer-\".concat(pageIndex), ref: measureRef, style: {\r\n            height: \"\".concat(h, \"px\"),\r\n            width: \"\".concat(w, \"px\"),\r\n        } }, !page ? (React__namespace.createElement(Spinner, { testId: \"core__page-layer-loading-\".concat(pageIndex) })) : (React__namespace.createElement(React__namespace.Fragment, null,\r\n        renderPageLayer({\r\n            annotationLayer: {\r\n                attrs: {},\r\n                children: (React__namespace.createElement(AnnotationLayer, { doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationValue, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest })),\r\n            },\r\n            canvasLayer: {\r\n                attrs: {},\r\n                children: (React__namespace.createElement(CanvasLayer, { height: h, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationValue, scale: scale, width: w, onRenderCanvasCompleted: handleRenderCanvasCompleted })),\r\n            },\r\n            canvasLayerRendered: canvasLayerRendered,\r\n            doc: doc,\r\n            height: h,\r\n            pageIndex: pageIndex,\r\n            rotation: rotationValue,\r\n            scale: scale,\r\n            svgLayer: {\r\n                attrs: {},\r\n                children: (React__namespace.createElement(SvgLayer, { height: h, page: page, rotation: rotationValue, scale: scale, width: w })),\r\n            },\r\n            textLayer: {\r\n                attrs: {},\r\n                children: (React__namespace.createElement(TextLayer, { page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationValue, scale: scale, onRenderTextCompleted: handleRenderTextCompleted })),\r\n            },\r\n            textLayerRendered: textLayerRendered,\r\n            width: w,\r\n            markRendered: onRenderCompleted,\r\n            onRotatePage: function (direction) { return onRotatePage(pageIndex, direction); },\r\n        }),\r\n        plugins.map(function (plugin, idx) {\r\n            return plugin.renderPageLayer ? (React__namespace.createElement(React__namespace.Fragment, { key: idx }, plugin.renderPageLayer({\r\n                doc: doc,\r\n                height: h,\r\n                pageIndex: pageIndex,\r\n                rotation: rotationValue,\r\n                scale: scale,\r\n                width: w,\r\n            }))) : (React__namespace.createElement(React__namespace.Fragment, { key: idx }));\r\n        })))));\r\n};\r\n\r\nvar getFileExt = function (url) {\r\n    var str = url.split(/\\./).pop();\r\n    return str ? str.toLowerCase() : '';\r\n};\r\n\r\nvar SCROLL_BAR_WIDTH = 17;\r\nvar PAGE_PADDING$1 = 8;\r\nvar calculateScale = function (container, pageHeight, pageWidth, scale) {\r\n    switch (scale) {\r\n        case exports.SpecialZoomLevel.ActualSize:\r\n            return 1;\r\n        case exports.SpecialZoomLevel.PageFit:\r\n            return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (container.clientHeight - 2 * PAGE_PADDING$1) / pageHeight);\r\n        case exports.SpecialZoomLevel.PageWidth:\r\n            return (container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\r\n    }\r\n};\r\n\r\nvar NUM_OVERSCAN_PAGES = 3;\r\nvar PAGE_PADDING = 16;\r\nvar Inner = function (_a) {\r\n    var currentFile = _a.currentFile, defaultScale = _a.defaultScale, doc = _a.doc, initialPage = _a.initialPage, pageSize = _a.pageSize, plugins = _a.plugins, renderPage = _a.renderPage, scrollMode = _a.scrollMode, viewerState = _a.viewerState, onDocumentLoad = _a.onDocumentLoad, onOpenFile = _a.onOpenFile, onPageChange = _a.onPageChange, onRotate = _a.onRotate, onRotatePage = _a.onRotatePage, onZoom = _a.onZoom;\r\n    var numPages = doc.numPages;\r\n    var docId = doc.loadingTask.docId;\r\n    var l10n = React__namespace.useContext(LocalizationContext).l10n;\r\n    var themeContext = React__namespace.useContext(ThemeContext);\r\n    var isRtl = themeContext.direction === exports.TextDirection.RightToLeft;\r\n    var containerRef = React__namespace.useRef();\r\n    var pagesRef = React__namespace.useRef();\r\n    var _b = React__namespace.useState(0), currentPage = _b[0], setCurrentPage = _b[1];\r\n    var _c = React__namespace.useState(0), rotation = _c[0], setRotation = _c[1];\r\n    var _d = React__namespace.useState(false), pagesRotationChanged = _d[0], setPagesRotationChanged = _d[1];\r\n    var _e = React__namespace.useState(new Map()), pagesRotation = _e[0], setPagesRotation = _e[1];\r\n    var _f = React__namespace.useState(scrollMode), currentScrollMode = _f[0], setCurrentScrollMode = _f[1];\r\n    var stateRef = React__namespace.useRef(viewerState);\r\n    var _g = React__namespace.useState(pageSize.scale), scale = _g[0], setScale = _g[1];\r\n    var keepSpecialZoomLevelRef = React__namespace.useRef(typeof defaultScale === 'string' ? defaultScale : null);\r\n    var _h = React__namespace.useState(-1), renderPageIndex = _h[0], setRenderPageIndex = _h[1];\r\n    var renderQueueInstance = React__namespace.useMemo(function () { return renderQueueService({ doc: doc, queueName: 'core-pages', priority: 0 }); }, [docId]);\r\n    var estimateSize = React__namespace.useCallback(function () {\r\n        var sizes = [pageSize.pageHeight, pageSize.pageWidth];\r\n        var rect = Math.abs(rotation) % 180 === 0\r\n            ? {\r\n                height: sizes[0],\r\n                width: sizes[1],\r\n            }\r\n            : {\r\n                height: sizes[1],\r\n                width: sizes[0],\r\n            };\r\n        return {\r\n            height: rect.height * scale,\r\n            width: rect.width * scale,\r\n        };\r\n    }, [rotation, scale]);\r\n    var setStartRange = React__namespace.useCallback(function (startIndex) { return Math.max(startIndex - NUM_OVERSCAN_PAGES, 0); }, []);\r\n    var setEndRange = React__namespace.useCallback(function (endIndex) { return Math.min(endIndex + NUM_OVERSCAN_PAGES, numPages - 1); }, [numPages]);\r\n    var transformSize = React__namespace.useCallback(function (size) { return ({\r\n        height: size.height + PAGE_PADDING,\r\n        width: size.width + PAGE_PADDING,\r\n    }); }, []);\r\n    var virtualizer = useVirtual({\r\n        estimateSize: estimateSize,\r\n        isRtl: isRtl,\r\n        numberOfItems: numPages,\r\n        parentRef: pagesRef,\r\n        scrollMode: currentScrollMode,\r\n        setStartRange: setStartRange,\r\n        setEndRange: setEndRange,\r\n        transformSize: transformSize,\r\n    });\r\n    var handlePagesResize = useDebounceCallback(function (_) {\r\n        if (keepSpecialZoomLevelRef.current) {\r\n            setRenderPageIndex(-1);\r\n            zoom(keepSpecialZoomLevelRef.current);\r\n        }\r\n    }, 200);\r\n    useTrackResize({\r\n        targetRef: pagesRef,\r\n        onResize: handlePagesResize,\r\n    });\r\n    var pageWidth = pageSize.pageWidth, pageHeight = pageSize.pageHeight;\r\n    var setViewerState = function (viewerState) {\r\n        var newState = viewerState;\r\n        plugins.forEach(function (plugin) {\r\n            if (plugin.onViewerStateChange) {\r\n                newState = plugin.onViewerStateChange(newState);\r\n            }\r\n        });\r\n        stateRef.current = newState;\r\n    };\r\n    var getPagesContainer = function () { return pagesRef.current; };\r\n    var getViewerState = function () { return stateRef.current; };\r\n    var jumpToDestination = React__namespace.useCallback(function (pageIndex, bottomOffset, leftOffset, scaleTo) {\r\n        var pagesContainer = pagesRef.current;\r\n        var currentState = stateRef.current;\r\n        if (!pagesContainer || !currentState) {\r\n            return;\r\n        }\r\n        getPage(doc, pageIndex).then(function (page) {\r\n            var viewport = page.getViewport({ scale: 1 });\r\n            var top = 0;\r\n            var bottom = (typeof bottomOffset === 'function'\r\n                ? bottomOffset(viewport.width, viewport.height)\r\n                : bottomOffset) || 0;\r\n            var left = (typeof leftOffset === 'function' ? leftOffset(viewport.width, viewport.height) : leftOffset) || 0;\r\n            var updateScale = currentState.scale;\r\n            switch (scaleTo) {\r\n                case exports.SpecialZoomLevel.PageFit:\r\n                    top = 0;\r\n                    left = 0;\r\n                    zoom(exports.SpecialZoomLevel.PageFit);\r\n                    break;\r\n                case exports.SpecialZoomLevel.PageWidth:\r\n                    updateScale = calculateScale(pagesContainer, pageHeight, pageWidth, exports.SpecialZoomLevel.PageWidth);\r\n                    top = (viewport.height - bottom) * updateScale;\r\n                    left = left * updateScale;\r\n                    zoom(updateScale);\r\n                    break;\r\n                default:\r\n                    var boundingRect = viewport.convertToViewportPoint(left, bottom);\r\n                    left = Math.max(boundingRect[0] * currentState.scale, 0);\r\n                    top = Math.max(boundingRect[1] * currentState.scale, 0);\r\n                    break;\r\n            }\r\n            switch (currentState.scrollMode) {\r\n                case exports.ScrollMode.Horizontal:\r\n                    virtualizer.scrollToItem(pageIndex, { left: left, top: 0 });\r\n                    break;\r\n                case exports.ScrollMode.Vertical:\r\n                default:\r\n                    virtualizer.scrollToItem(pageIndex, { left: 0, top: top });\r\n                    break;\r\n            }\r\n        });\r\n    }, []);\r\n    var jumpToPage = React__namespace.useCallback(function (pageIndex) {\r\n        if (0 <= pageIndex && pageIndex < numPages) {\r\n            virtualizer.scrollToItem(pageIndex, { left: 0, top: 0 });\r\n        }\r\n    }, []);\r\n    var openFile = React__namespace.useCallback(function (file) {\r\n        if (getFileExt(file.name).toLowerCase() !== 'pdf') {\r\n            return;\r\n        }\r\n        new Promise(function (resolve) {\r\n            var reader = new FileReader();\r\n            reader.readAsArrayBuffer(file);\r\n            reader.onload = function () {\r\n                var bytes = new Uint8Array(reader.result);\r\n                resolve(bytes);\r\n            };\r\n        }).then(function (data) {\r\n            onOpenFile(file.name, data);\r\n        });\r\n    }, [onOpenFile]);\r\n    var rotate = React__namespace.useCallback(function (direction) {\r\n        var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\r\n        var currentRotation = stateRef.current.rotation;\r\n        var updateRotation = currentRotation === 360 || currentRotation === -360 ? degrees : currentRotation + degrees;\r\n        renderQueueInstance.resetQueue();\r\n        setRotation(updateRotation);\r\n        setViewerState({\r\n            file: viewerState.file,\r\n            pageIndex: currentPage,\r\n            pageHeight: pageHeight,\r\n            pageWidth: pageWidth,\r\n            pagesRotation: pagesRotation,\r\n            rotation: updateRotation,\r\n            scale: scale,\r\n            scrollMode: currentScrollMode,\r\n        });\r\n        onRotate({ direction: direction, doc: doc, rotation: updateRotation });\r\n    }, []);\r\n    var rotatePage = React__namespace.useCallback(function (pageIndex, direction) {\r\n        var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\r\n        var rotations = stateRef.current.pagesRotation;\r\n        var currentPageRotation = rotations.has(pageIndex) ? rotations.get(pageIndex) : 0;\r\n        var finalRotation = currentPageRotation + degrees;\r\n        var updateRotations = rotations.set(pageIndex, finalRotation);\r\n        setPagesRotation(updateRotations);\r\n        setPagesRotationChanged(function (value) { return !value; });\r\n        setViewerState({\r\n            file: viewerState.file,\r\n            pageIndex: currentPage,\r\n            pageHeight: pageHeight,\r\n            pageWidth: pageWidth,\r\n            pagesRotation: updateRotations,\r\n            rotatedPage: pageIndex,\r\n            rotation: rotation,\r\n            scale: scale,\r\n            scrollMode: currentScrollMode,\r\n        });\r\n        onRotatePage({ direction: direction, doc: doc, pageIndex: pageIndex, rotation: finalRotation });\r\n        renderQueueInstance.markRendering(pageIndex);\r\n        setRenderPageIndex(pageIndex);\r\n    }, []);\r\n    var switchScrollMode = React__namespace.useCallback(function (scrollMode) {\r\n        setViewerState({\r\n            file: viewerState.file,\r\n            pageIndex: stateRef.current.pageIndex,\r\n            pageHeight: pageHeight,\r\n            pageWidth: pageWidth,\r\n            pagesRotation: pagesRotation,\r\n            rotation: rotation,\r\n            scale: scale,\r\n            scrollMode: scrollMode,\r\n        });\r\n        setCurrentScrollMode(scrollMode);\r\n    }, []);\r\n    var zoom = React__namespace.useCallback(function (newScale) {\r\n        renderQueueInstance.resetQueue();\r\n        var pagesEle = pagesRef.current;\r\n        var updateScale = pagesEle\r\n            ? typeof newScale === 'string'\r\n                ? calculateScale(pagesEle, pageHeight, pageWidth, newScale)\r\n                : newScale\r\n            : 1;\r\n        keepSpecialZoomLevelRef.current = typeof newScale === 'string' ? newScale : null;\r\n        pagesEle.scrollTop = (pagesEle.scrollTop * updateScale) / stateRef.current.scale;\r\n        pagesEle.scrollLeft = (pagesEle.scrollLeft * updateScale) / stateRef.current.scale;\r\n        setScale(updateScale);\r\n        onZoom({ doc: doc, scale: updateScale });\r\n        setViewerState({\r\n            file: viewerState.file,\r\n            pageIndex: currentPage,\r\n            pageHeight: pageHeight,\r\n            pageWidth: pageWidth,\r\n            pagesRotation: pagesRotation,\r\n            rotation: rotation,\r\n            scale: updateScale,\r\n            scrollMode: currentScrollMode,\r\n        });\r\n    }, []);\r\n    React__namespace.useEffect(function () {\r\n        var pluginMethods = {\r\n            getPagesContainer: getPagesContainer,\r\n            getViewerState: getViewerState,\r\n            jumpToDestination: jumpToDestination,\r\n            jumpToPage: jumpToPage,\r\n            openFile: openFile,\r\n            rotate: rotate,\r\n            rotatePage: rotatePage,\r\n            setViewerState: setViewerState,\r\n            switchScrollMode: switchScrollMode,\r\n            zoom: zoom,\r\n        };\r\n        plugins.forEach(function (plugin) {\r\n            if (plugin.install) {\r\n                plugin.install(pluginMethods);\r\n            }\r\n        });\r\n        return function () {\r\n            plugins.forEach(function (plugin) {\r\n                if (plugin.uninstall) {\r\n                    plugin.uninstall(pluginMethods);\r\n                }\r\n            });\r\n        };\r\n    }, [docId]);\r\n    React__namespace.useEffect(function () {\r\n        onDocumentLoad({ doc: doc, file: currentFile });\r\n        plugins.forEach(function (plugin) {\r\n            plugin.onDocumentLoad && plugin.onDocumentLoad({ doc: doc, file: currentFile });\r\n        });\r\n        if (initialPage) {\r\n            jumpToPage(initialPage);\r\n        }\r\n    }, [docId]);\r\n    React__namespace.useEffect(function () {\r\n        var latestPage = stateRef.current.pageIndex;\r\n        if (latestPage > -1) {\r\n            virtualizer.scrollToItem(latestPage, { left: 0, top: 0 });\r\n        }\r\n    }, [currentScrollMode]);\r\n    React__namespace.useEffect(function () {\r\n        var startRange = virtualizer.startRange, endRange = virtualizer.endRange, maxVisbilityIndex = virtualizer.maxVisbilityIndex, virtualItems = virtualizer.virtualItems;\r\n        var currentPage = maxVisbilityIndex;\r\n        setCurrentPage(currentPage);\r\n        if (stateRef.current.pageIndex !== currentPage) {\r\n            onPageChange({ currentPage: currentPage, doc: doc });\r\n        }\r\n        setViewerState({\r\n            file: viewerState.file,\r\n            pageIndex: currentPage,\r\n            pageHeight: pageHeight,\r\n            pageWidth: pageWidth,\r\n            pagesRotation: pagesRotation,\r\n            rotation: rotation,\r\n            scale: scale,\r\n            scrollMode: currentScrollMode,\r\n        });\r\n        renderQueueInstance.setRange(startRange, endRange);\r\n        var _loop_1 = function (i) {\r\n            var item = virtualItems.find(function (item) { return item.index === i; });\r\n            if (item) {\r\n                renderQueueInstance.setVisibility(i, item.visibility);\r\n            }\r\n        };\r\n        for (var i = startRange; i <= endRange; i++) {\r\n            _loop_1(i);\r\n        }\r\n        renderNextPage();\r\n    }, [\r\n        virtualizer.startRange,\r\n        virtualizer.endRange,\r\n        virtualizer.maxVisbilityIndex,\r\n        pagesRotationChanged,\r\n        rotation,\r\n        scale,\r\n    ]);\r\n    var handlePageRenderCompleted = React__namespace.useCallback(function (pageIndex) {\r\n        renderQueueInstance.markRendered(pageIndex);\r\n        renderNextPage();\r\n    }, []);\r\n    var renderNextPage = function () {\r\n        var nextPage = renderQueueInstance.getHighestPriorityPage();\r\n        if (nextPage > -1) {\r\n            renderQueueInstance.markRendering(nextPage);\r\n            setRenderPageIndex(nextPage);\r\n        }\r\n    };\r\n    var executeNamedAction = function (action) {\r\n        var previousPage = currentPage - 1;\r\n        var nextPage = currentPage + 1;\r\n        switch (action) {\r\n            case 'FirstPage':\r\n                jumpToPage(0);\r\n                break;\r\n            case 'LastPage':\r\n                jumpToPage(numPages - 1);\r\n                break;\r\n            case 'NextPage':\r\n                nextPage < numPages && jumpToPage(nextPage);\r\n                break;\r\n            case 'PrevPage':\r\n                previousPage >= 0 && jumpToPage(previousPage);\r\n                break;\r\n        }\r\n    };\r\n    var renderViewer = React__namespace.useCallback(function () {\r\n        var pageLabel = l10n && l10n.core ? l10n.core.pageLabel : 'Page {{pageIndex}}';\r\n        var slot = {\r\n            attrs: {\r\n                'data-testid': 'core__inner-container',\r\n                ref: containerRef,\r\n                style: {\r\n                    height: '100%',\r\n                },\r\n            },\r\n            children: React__namespace.createElement(React__namespace.Fragment, null),\r\n            subSlot: {\r\n                attrs: {\r\n                    'data-testid': 'core__inner-pages',\r\n                    className: classNames({\r\n                        'rpv-core__inner-pages': true,\r\n                        'rpv-core__inner-pages--horizontal': currentScrollMode === exports.ScrollMode.Horizontal,\r\n                        'rpv-core__inner-pages--rtl': isRtl,\r\n                        'rpv-core__inner-pages--vertical': currentScrollMode === exports.ScrollMode.Vertical,\r\n                        'rpv-core__inner-pages--wrapped': currentScrollMode === exports.ScrollMode.Wrapped,\r\n                    }),\r\n                    ref: pagesRef,\r\n                    style: {\r\n                        height: '100%',\r\n                        overflow: 'auto',\r\n                        position: 'relative',\r\n                    },\r\n                },\r\n                children: (React__namespace.createElement(\"div\", { style: virtualizer.getContainerStyles() }, virtualizer.virtualItems.map(function (item) { return (React__namespace.createElement(\"div\", { \"aria-label\": pageLabel.replace('{{pageIndex}}', \"\".concat(item.index + 1)), className: \"rpv-core__inner-page\", key: item.index, role: \"region\", style: virtualizer.getItemStyles(item) },\r\n                    React__namespace.createElement(PageLayer, { doc: doc, height: pageHeight, measureRef: item.measureRef, pageIndex: item.index, pageRotation: pagesRotation.has(item.index) ? pagesRotation.get(item.index) : 0, plugins: plugins, renderPage: renderPage, rotation: rotation, scale: scale, shouldRender: renderPageIndex === item.index, width: pageWidth, onExecuteNamedAction: executeNamedAction, onJumpToDest: jumpToDestination, onRenderCompleted: handlePageRenderCompleted, onRotatePage: rotatePage }))); }))),\r\n            },\r\n        };\r\n        plugins.forEach(function (plugin) {\r\n            if (plugin.renderViewer) {\r\n                slot = plugin.renderViewer({\r\n                    containerRef: containerRef,\r\n                    doc: doc,\r\n                    pageHeight: pageHeight,\r\n                    pageWidth: pageWidth,\r\n                    pagesRotation: pagesRotation,\r\n                    rotation: rotation,\r\n                    slot: slot,\r\n                    themeContext: themeContext,\r\n                    jumpToPage: jumpToPage,\r\n                    openFile: openFile,\r\n                    rotate: rotate,\r\n                    rotatePage: rotatePage,\r\n                    switchScrollMode: switchScrollMode,\r\n                    zoom: zoom,\r\n                });\r\n            }\r\n        });\r\n        return slot;\r\n    }, [plugins, virtualizer]);\r\n    var renderSlot = React__namespace.useCallback(function (slot) { return (React__namespace.createElement(\"div\", __assign({}, slot.attrs, { style: slot.attrs && slot.attrs.style ? slot.attrs.style : {} }),\r\n        slot.children,\r\n        slot.subSlot && renderSlot(slot.subSlot))); }, []);\r\n    React__namespace.useEffect(function () {\r\n        return function () {\r\n            renderQueueInstance.cleanup();\r\n            clearPagesCache();\r\n        };\r\n    }, []);\r\n    return renderSlot(renderViewer());\r\n};\r\n\r\nvar LEVELS = [\r\n    0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6,\r\n    5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10,\r\n];\r\nvar decrease = function (currentLevel) {\r\n    var found = LEVELS.findIndex(function (item) { return item >= currentLevel; });\r\n    return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\r\n};\r\n\r\nvar RESERVE_HEIGHT = 45;\r\nvar RESERVE_WIDTH = 45;\r\nvar PageSizeCalculator = function (_a) {\r\n    var defaultScale = _a.defaultScale, doc = _a.doc, render = _a.render, scrollMode = _a.scrollMode;\r\n    var pagesRef = React__namespace.useRef();\r\n    var _b = React__namespace.useState({\r\n        pageHeight: 0,\r\n        pageWidth: 0,\r\n        scale: 1,\r\n    }), pageSize = _b[0], setPageSize = _b[1];\r\n    React__namespace.useLayoutEffect(function () {\r\n        getPage(doc, 0).then(function (pdfPage) {\r\n            var viewport = pdfPage.getViewport({ scale: 1 });\r\n            var w = viewport.width;\r\n            var h = viewport.height;\r\n            var pagesEle = pagesRef.current;\r\n            if (!pagesEle) {\r\n                return;\r\n            }\r\n            var parentEle = pagesEle.parentElement;\r\n            var scaleWidth = (parentEle.clientWidth - RESERVE_WIDTH) / w;\r\n            var scaleHeight = (parentEle.clientHeight - RESERVE_HEIGHT) / h;\r\n            var scaled = scaleWidth;\r\n            switch (scrollMode) {\r\n                case exports.ScrollMode.Horizontal:\r\n                    scaled = Math.min(scaleWidth, scaleHeight);\r\n                    break;\r\n                case exports.ScrollMode.Vertical:\r\n                default:\r\n                    scaled = scaleWidth;\r\n                    break;\r\n            }\r\n            var scale = defaultScale\r\n                ? typeof defaultScale === 'string'\r\n                    ? calculateScale(parentEle, h, w, defaultScale)\r\n                    : defaultScale\r\n                : decrease(scaled);\r\n            setPageSize({\r\n                pageHeight: h,\r\n                pageWidth: w,\r\n                scale: scale,\r\n            });\r\n        });\r\n    }, [doc]);\r\n    var pageWidth = pageSize.pageWidth;\r\n    return pageWidth === 0 ? (React__namespace.createElement(\"div\", { className: \"rpv-core__page-size-calculator\", \"data-testid\": \"core__page-size-calculating\", ref: pagesRef },\r\n        React__namespace.createElement(Spinner, null))) : (render(pageSize));\r\n};\r\n\r\nvar LoadingStatus = (function () {\r\n    function LoadingStatus() {\r\n    }\r\n    return LoadingStatus;\r\n}());\r\n\r\nvar SubmitPassword;\r\n(function (SubmitPassword) {\r\n    SubmitPassword[SubmitPassword[\"REQUIRE_PASSWORD\"] = 0] = \"REQUIRE_PASSWORD\";\r\n    SubmitPassword[SubmitPassword[\"WRONG_PASSWORD\"] = 1] = \"WRONG_PASSWORD\";\r\n})(SubmitPassword || (SubmitPassword = {}));\r\nvar AskForPasswordState = (function (_super) {\r\n    __extends(AskForPasswordState, _super);\r\n    function AskForPasswordState(verifyPassword, submitPassword) {\r\n        var _this = _super.call(this) || this;\r\n        _this.verifyPassword = verifyPassword;\r\n        _this.submitPassword = submitPassword;\r\n        return _this;\r\n    }\r\n    return AskForPasswordState;\r\n}(LoadingStatus));\r\n\r\nvar AskingPassword = function (_a) {\r\n    var submitPassword = _a.submitPassword, verifyPassword = _a.verifyPassword, onDocumentAskPassword = _a.onDocumentAskPassword;\r\n    var l10n = React__namespace.useContext(LocalizationContext).l10n;\r\n    var _b = React__namespace.useState(''), password = _b[0], setPassword = _b[1];\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var submit = function () { return verifyPassword(password); };\r\n    var handleKeyDown = function (e) {\r\n        if (e.key === 'Enter') {\r\n            submit();\r\n        }\r\n    };\r\n    React__namespace.useEffect(function () {\r\n        if (onDocumentAskPassword) {\r\n            onDocumentAskPassword({\r\n                verifyPassword: verifyPassword,\r\n            });\r\n        }\r\n    }, []);\r\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-wrapper\" },\r\n        React__namespace.createElement(\"div\", { className: classNames({\r\n                'rpv-core__asking-password': true,\r\n                'rpv-core__asking-password--rtl': isRtl,\r\n            }) },\r\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-message\" },\r\n                submitPassword === SubmitPassword.REQUIRE_PASSWORD &&\r\n                    l10n.core.askingPassword\r\n                        .requirePasswordToOpen,\r\n                submitPassword === SubmitPassword.WRONG_PASSWORD &&\r\n                    l10n.core.wrongPassword.tryAgain),\r\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-body\" },\r\n                React__namespace.createElement(\"div\", { className: classNames({\r\n                        'rpv-core__asking-password-input': true,\r\n                        'rpv-core__asking-password-input--ltr': !isRtl,\r\n                        'rpv-core__asking-password-input--rtl': isRtl,\r\n                    }) },\r\n                    React__namespace.createElement(TextBox, { testId: \"core__asking-password-input\", type: \"password\", value: password, onChange: setPassword, onKeyDown: handleKeyDown })),\r\n                React__namespace.createElement(PrimaryButton, { onClick: submit }, l10n.core.askingPassword.submit)))));\r\n};\r\n\r\nvar CompletedState = (function (_super) {\r\n    __extends(CompletedState, _super);\r\n    function CompletedState(doc) {\r\n        var _this = _super.call(this) || this;\r\n        _this.doc = doc;\r\n        return _this;\r\n    }\r\n    return CompletedState;\r\n}(LoadingStatus));\r\n\r\nvar FailureState = (function (_super) {\r\n    __extends(FailureState, _super);\r\n    function FailureState(error) {\r\n        var _this = _super.call(this) || this;\r\n        _this.error = error;\r\n        return _this;\r\n    }\r\n    return FailureState;\r\n}(LoadingStatus));\r\n\r\nvar LoadingState = (function (_super) {\r\n    __extends(LoadingState, _super);\r\n    function LoadingState(percentages) {\r\n        var _this = _super.call(this) || this;\r\n        _this.percentages = percentages;\r\n        return _this;\r\n    }\r\n    return LoadingState;\r\n}(LoadingStatus));\r\n\r\nvar DocumentLoader = function (_a) {\r\n    var characterMap = _a.characterMap, file = _a.file, httpHeaders = _a.httpHeaders, render = _a.render, renderError = _a.renderError, renderLoader = _a.renderLoader, transformGetDocumentParams = _a.transformGetDocumentParams, withCredentials = _a.withCredentials, onDocumentAskPassword = _a.onDocumentAskPassword;\r\n    var direction = React__namespace.useContext(ThemeContext).direction;\r\n    var isRtl = direction === exports.TextDirection.RightToLeft;\r\n    var _b = React__namespace.useState(new LoadingState(0)), status = _b[0], setStatus = _b[1];\r\n    var _c = React__namespace.useState(0), percentages = _c[0], setPercentages = _c[1];\r\n    var _d = React__namespace.useState(null), loadedDocument = _d[0], setLoadedDocument = _d[1];\r\n    var isMounted = useIsMounted();\r\n    React__namespace.useEffect(function () {\r\n        setStatus(new LoadingState(0));\r\n        var worker = new PdfJsApi__namespace.PDFWorker({ name: \"PDFWorker_\".concat(Date.now()) });\r\n        var params = Object.assign({\r\n            httpHeaders: httpHeaders,\r\n            withCredentials: withCredentials,\r\n            worker: worker,\r\n        }, 'string' === typeof file ? { url: file } : { data: file }, characterMap\r\n            ? {\r\n                cMapUrl: characterMap.url,\r\n                cMapPacked: characterMap.isCompressed,\r\n            }\r\n            : {});\r\n        var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\r\n        var loadingTask = PdfJsApi__namespace.getDocument(transformParams);\r\n        loadingTask.onPassword = function (verifyPassword, reason) {\r\n            switch (reason) {\r\n                case PdfJsApi__namespace.PasswordResponses.NEED_PASSWORD:\r\n                    isMounted.current &&\r\n                        setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.REQUIRE_PASSWORD));\r\n                    break;\r\n                case PdfJsApi__namespace.PasswordResponses.INCORRECT_PASSWORD:\r\n                    isMounted.current &&\r\n                        setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.WRONG_PASSWORD));\r\n                    break;\r\n            }\r\n        };\r\n        loadingTask.onProgress = function (progress) {\r\n            progress.total > 0\r\n                ?\r\n                    isMounted.current && setPercentages(Math.min(100, (100 * progress.loaded) / progress.total))\r\n                : isMounted.current && setPercentages(100);\r\n        };\r\n        loadingTask.promise.then(function (doc) { return isMounted.current && setLoadedDocument(doc); }, function (err) {\r\n            return isMounted.current &&\r\n                !worker.destroyed &&\r\n                setStatus(new FailureState({\r\n                    message: err.message || 'Cannot load document',\r\n                    name: err.name,\r\n                }));\r\n        });\r\n        return function () {\r\n            loadingTask.destroy();\r\n            worker.destroy();\r\n        };\r\n    }, [file]);\r\n    React__namespace.useEffect(function () {\r\n        percentages === 100 && loadedDocument\r\n            ? isMounted.current && setStatus(new CompletedState(loadedDocument))\r\n            : isMounted.current && setStatus(new LoadingState(percentages));\r\n    }, [percentages, loadedDocument]);\r\n    if (status instanceof AskForPasswordState) {\r\n        return (React__namespace.createElement(AskingPassword, { submitPassword: status.submitPassword, verifyPassword: status.verifyPassword, onDocumentAskPassword: onDocumentAskPassword }));\r\n    }\r\n    if (status instanceof CompletedState) {\r\n        return render(status.doc);\r\n    }\r\n    if (status instanceof FailureState) {\r\n        return renderError ? (renderError(status.error)) : (React__namespace.createElement(\"div\", { className: classNames({\r\n                'rpv-core__doc-error': true,\r\n                'rpv-core__doc-error--rtl': isRtl,\r\n            }) },\r\n            React__namespace.createElement(\"div\", { className: \"rpv-core__doc-error-text\" }, status.error.message)));\r\n    }\r\n    return (React__namespace.createElement(\"div\", { \"data-testid\": \"core__doc-loading\", className: classNames({\r\n            'rpv-core__doc-loading': true,\r\n            'rpv-core__doc-loading--rtl': isRtl,\r\n        }) }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null)));\r\n};\r\n\r\nvar isDarkMode = function () {\r\n    return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n};\r\n\r\nvar withTheme = function (theme, onSwitchTheme) {\r\n    var initialTheme = React__namespace.useMemo(function () { return (theme === 'auto' ? (isDarkMode() ? 'dark' : 'light') : theme); }, []);\r\n    var _a = React__namespace.useState(initialTheme), currentTheme = _a[0], setCurrentTheme = _a[1];\r\n    var prevTheme = usePrevious(currentTheme);\r\n    React__namespace.useEffect(function () {\r\n        if (theme !== 'auto') {\r\n            return;\r\n        }\r\n        var media = window.matchMedia('(prefers-color-scheme: dark)');\r\n        var handler = function (e) {\r\n            setCurrentTheme(e.matches ? 'dark' : 'light');\r\n        };\r\n        media.addEventListener('change', handler);\r\n        return function () { return media.removeEventListener('change', handler); };\r\n    }, []);\r\n    React__namespace.useEffect(function () {\r\n        if (currentTheme !== prevTheme && onSwitchTheme) {\r\n            onSwitchTheme(currentTheme);\r\n        }\r\n    }, [currentTheme]);\r\n    React__namespace.useEffect(function () {\r\n        if (theme !== currentTheme) {\r\n            setCurrentTheme(theme);\r\n        }\r\n    }, [theme]);\r\n    return {\r\n        currentTheme: currentTheme,\r\n        setCurrentTheme: setCurrentTheme,\r\n    };\r\n};\r\n\r\nvar isSameUrl = function (a, b) {\r\n    var typeA = typeof a;\r\n    var typeB = typeof b;\r\n    if (typeA === 'string' && typeB === 'string' && a === b) {\r\n        return true;\r\n    }\r\n    if (typeA === 'object' && typeB === 'object') {\r\n        return a.length === b.length && a.every(function (v, i) { return v === b[i]; });\r\n    }\r\n    return false;\r\n};\r\n\r\nvar Viewer = function (_a) {\r\n    var characterMap = _a.characterMap, defaultScale = _a.defaultScale, fileUrl = _a.fileUrl, _b = _a.httpHeaders, httpHeaders = _b === void 0 ? {} : _b, _c = _a.initialPage, initialPage = _c === void 0 ? 0 : _c, localization = _a.localization, _d = _a.plugins, plugins = _d === void 0 ? [] : _d, renderError = _a.renderError, renderPage = _a.renderPage, renderLoader = _a.renderLoader, _e = _a.scrollMode, scrollMode = _e === void 0 ? exports.ScrollMode.Vertical : _e, transformGetDocumentParams = _a.transformGetDocumentParams, _f = _a.theme, theme = _f === void 0 ? {\r\n        direction: exports.TextDirection.LeftToRight,\r\n        theme: 'light',\r\n    } : _f, _g = _a.withCredentials, withCredentials = _g === void 0 ? false : _g, onDocumentAskPassword = _a.onDocumentAskPassword, _h = _a.onDocumentLoad, onDocumentLoad = _h === void 0 ? function () {\r\n    } : _h, _j = _a.onPageChange, onPageChange = _j === void 0 ? function () {\r\n    } : _j, _k = _a.onRotate, onRotate = _k === void 0 ? function () {\r\n    } : _k, _l = _a.onRotatePage, onRotatePage = _l === void 0 ? function () {\r\n    } : _l, _m = _a.onSwitchTheme, onSwitchTheme = _m === void 0 ? function () {\r\n    } : _m, _o = _a.onZoom, onZoom = _o === void 0 ? function () {\r\n    } : _o;\r\n    var _p = React__namespace.useState({\r\n        data: fileUrl,\r\n        name: typeof fileUrl === 'string' ? fileUrl : '',\r\n        shouldLoad: false,\r\n    }), file = _p[0], setFile = _p[1];\r\n    var openFile = function (fileName, data) {\r\n        setFile({\r\n            data: data,\r\n            name: fileName,\r\n            shouldLoad: true,\r\n        });\r\n    };\r\n    var _q = React__namespace.useState(false), visible = _q[0], setVisible = _q[1];\r\n    var prevFile = usePrevious(file);\r\n    React__namespace.useEffect(function () {\r\n        if (!isSameUrl(prevFile.data, fileUrl)) {\r\n            setFile({\r\n                data: fileUrl,\r\n                name: typeof fileUrl === 'string' ? fileUrl : '',\r\n                shouldLoad: visible,\r\n            });\r\n        }\r\n    }, [fileUrl, visible]);\r\n    var visibilityChanged = function (params) {\r\n        setVisible(params.isVisible);\r\n        if (params.isVisible) {\r\n            setFile(function (currentFile) { return Object.assign({}, currentFile, { shouldLoad: true }); });\r\n        }\r\n    };\r\n    var containerRef = useIntersectionObserver({\r\n        onVisibilityChanged: visibilityChanged,\r\n    });\r\n    var themeProps = typeof theme === 'string' ? { direction: exports.TextDirection.LeftToRight, theme: theme } : theme;\r\n    var _r = React__namespace.useState(localization || DefaultLocalization), l10n = _r[0], setL10n = _r[1];\r\n    var localizationContext = { l10n: l10n, setL10n: setL10n };\r\n    var themeContext = Object.assign({}, { direction: themeProps.direction }, withTheme(themeProps.theme || 'light', onSwitchTheme));\r\n    React__namespace.useEffect(function () {\r\n        if (localization) {\r\n            setL10n(localization);\r\n        }\r\n    }, [localization]);\r\n    return (React__namespace.createElement(LocalizationContext.Provider, { value: localizationContext },\r\n        React__namespace.createElement(ThemeContext.Provider, { value: themeContext },\r\n            React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__viewer rpv-core__viewer--\".concat(themeContext.currentTheme), \"data-testid\": \"core__viewer\", style: {\r\n                    height: '100%',\r\n                    width: '100%',\r\n                } }, file.shouldLoad && (React__namespace.createElement(DocumentLoader, { characterMap: characterMap, file: file.data, httpHeaders: httpHeaders, render: function (doc) { return (React__namespace.createElement(PageSizeCalculator, { defaultScale: defaultScale, doc: doc, render: function (ps) { return (React__namespace.createElement(Inner, { currentFile: {\r\n                            data: file.data,\r\n                            name: file.name,\r\n                        }, defaultScale: defaultScale, doc: doc, initialPage: initialPage, pageSize: ps, plugins: plugins, renderPage: renderPage, scrollMode: scrollMode, viewerState: {\r\n                            file: file,\r\n                            pageIndex: -1,\r\n                            pageHeight: ps.pageHeight,\r\n                            pageWidth: ps.pageWidth,\r\n                            pagesRotation: new Map(),\r\n                            rotation: 0,\r\n                            scale: ps.scale,\r\n                            scrollMode: scrollMode,\r\n                        }, onDocumentLoad: onDocumentLoad, onOpenFile: openFile, onPageChange: onPageChange, onRotate: onRotate, onRotatePage: onRotatePage, onZoom: onZoom })); }, scrollMode: scrollMode })); }, renderError: renderError, renderLoader: renderLoader, transformGetDocumentParams: transformGetDocumentParams, withCredentials: withCredentials, onDocumentAskPassword: onDocumentAskPassword }))))));\r\n};\r\n\r\nvar Worker = function (_a) {\r\n    var children = _a.children, workerUrl = _a.workerUrl;\r\n    PdfJsApi__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\r\n    return React__namespace.createElement(React__namespace.Fragment, null, children);\r\n};\r\n\r\nvar isMac = function () { return (typeof window !== 'undefined' ? /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) : false); };\r\n\r\nexports.Button = Button;\r\nexports.Icon = Icon;\r\nexports.LazyRender = LazyRender;\r\nexports.LocalizationContext = LocalizationContext;\r\nexports.Menu = Menu;\r\nexports.MenuDivider = MenuDivider;\r\nexports.MenuItem = MenuItem;\r\nexports.MinimalButton = MinimalButton;\r\nexports.Modal = Modal;\r\nexports.Popover = Popover;\r\nexports.PrimaryButton = PrimaryButton;\r\nexports.ProgressBar = ProgressBar;\r\nexports.Separator = Separator;\r\nexports.Spinner = Spinner;\r\nexports.Splitter = Splitter;\r\nexports.TextBox = TextBox;\r\nexports.ThemeContext = ThemeContext;\r\nexports.Tooltip = Tooltip;\r\nexports.Viewer = Viewer;\r\nexports.Worker = Worker;\r\nexports.classNames = classNames;\r\nexports.createStore = createStore;\r\nexports.getDestination = getDestination;\r\nexports.getPage = getPage;\r\nexports.isMac = isMac;\r\nexports.renderQueueService = renderQueueService;\r\nexports.useIntersectionObserver = useIntersectionObserver;\r\nexports.useIsMounted = useIsMounted;\r\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;\r\n"]},"metadata":{},"sourceType":"script"}